2013-01-31 13:15:41,804 INFO  (main) [org.infinispan.stress.MapStressTest] 
MapStressTest configuration: capacity 100000, test running time 60 seconds

2013-01-31 13:15:44,469 INFO  (main) [org.infinispan.test.fwk.SuiteResourcesAndLogTest] ~~~~~~~~~~~~~~~~~~~~~~~~~ ENVIRONMENT INFO ~~~~~~~~~~~~~~~~~~~~~~~~~~
2013-01-31 13:15:44,469 INFO  (main) [org.infinispan.test.fwk.SuiteResourcesAndLogTest] jgroups.bind_addr = 127.0.0.1
2013-01-31 13:15:44,469 INFO  (main) [org.infinispan.test.fwk.SuiteResourcesAndLogTest] java.runtime.version = 1.6.0_26-b03-384-9M3425
2013-01-31 13:15:44,469 INFO  (main) [org.infinispan.test.fwk.SuiteResourcesAndLogTest] java.runtime.name =Java(TM) SE Runtime Environment
2013-01-31 13:15:44,469 INFO  (main) [org.infinispan.test.fwk.SuiteResourcesAndLogTest] java.vm.version = 20.1-b02-384
2013-01-31 13:15:44,469 INFO  (main) [org.infinispan.test.fwk.SuiteResourcesAndLogTest] java.vm.vendor = Apple Inc.
2013-01-31 13:15:44,469 INFO  (main) [org.infinispan.test.fwk.SuiteResourcesAndLogTest] os.name = Mac OS X
2013-01-31 13:15:44,470 INFO  (main) [org.infinispan.test.fwk.SuiteResourcesAndLogTest] os.version = 10.5.8
2013-01-31 13:15:44,470 INFO  (main) [org.infinispan.test.fwk.SuiteResourcesAndLogTest] sun.arch.data.model = 64
2013-01-31 13:15:44,470 INFO  (main) [org.infinispan.test.fwk.SuiteResourcesAndLogTest] sun.cpu.endian = little
2013-01-31 13:15:44,470 INFO  (main) [org.infinispan.test.fwk.SuiteResourcesAndLogTest] protocol.stack = null
2013-01-31 13:15:44,470 INFO  (main) [org.infinispan.test.fwk.SuiteResourcesAndLogTest] infinispan.test.jgroups.protocol = tcp
2013-01-31 13:15:44,470 INFO  (main) [org.infinispan.test.fwk.SuiteResourcesAndLogTest] java.net.preferIPv4Stack = true
2013-01-31 13:15:44,470 INFO  (main) [org.infinispan.test.fwk.SuiteResourcesAndLogTest] java.net.preferIPv6Stack = null
2013-01-31 13:15:44,470 INFO  (main) [org.infinispan.test.fwk.SuiteResourcesAndLogTest] log4.configuration = null
2013-01-31 13:15:44,470 INFO  (main) [org.infinispan.test.fwk.SuiteResourcesAndLogTest] MAVEN_OPTS = null
2013-01-31 13:15:44,471 INFO  (main) [org.infinispan.test.fwk.SuiteResourcesAndLogTest] ~~~~~~~~~~~~~~~~~~~~~~~~~ ENVIRONMENT INFO ~~~~~~~~~~~~~~~~~~~~~~~~~~
2013-01-31 13:15:44,613 DEBUG (testng-MixedModeTest) [org.infinispan.api.MixedModeTest] Creating cache managers
2013-01-31 13:15:44,622 DEBUG (testng-CacheClusterJoinTest) [org.infinispan.api.CacheClusterJoinTest] Creating cache managers
2013-01-31 13:15:44,683 INFO  (testng-DecoratedCacheTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testDecoratedCacheFlagsSet(org.infinispan.api.flags.DecoratedCacheTest)
2013-01-31 13:15:44,683 DEBUG (testng-AsyncWithTxTest) [org.infinispan.api.AsyncWithTxTest] Creating cache managers
2013-01-31 13:15:44,684 DEBUG (testng-KeyAffinityServiceTest) [org.infinispan.affinity.KeyAffinityServiceTest] Creating cache managers
2013-01-31 13:15:44,707 DEBUG (testng-KeyAffinityServiceShutdownTest) [org.infinispan.affinity.KeyAffinityServiceShutdownTest] Creating cache managers
2013-01-31 13:15:44,709 DEBUG (testng-FilteredKeyAffinityServiceTest) [org.infinispan.affinity.FilteredKeyAffinityServiceTest] Creating cache managers
2013-01-31 13:15:44,709 DEBUG (testng-LocalKeyAffinityServiceTest) [org.infinispan.affinity.LocalKeyAffinityServiceTest] Creating cache managers
2013-01-31 13:15:44,771 INFO  (testng-Command line test) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testConfigurationOverride(org.infinispan.configuration.ConfigurationOverrideTest)
2013-01-31 13:15:44,917 DEBUG (testng-FlagsEnabledTest) [org.infinispan.api.flags.FlagsEnabledTest] Creating cache managers
2013-01-31 13:15:44,927 DEBUG (testng-PutForExternalReadTest) [org.infinispan.api.mvcc.PutForExternalReadTest] Creating cache managers
2013-01-31 13:15:45,138 DEBUG (testng-DecoratedCacheTest) [org.infinispan.test.CherryPickClassLoader] Created org.infinispan.test.CherryPickClassLoader[includedClasses=null;excludedClasses=null;notFoundClasses=null;parent=IsolatedClassLoader{roleName='test'}]
2013-01-31 13:15:45,139 INFO  (testng-DecoratedCacheTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testDecoratedCacheFlagsSet(org.infinispan.api.flags.DecoratedCacheTest).
2013-01-31 13:15:45,139 DEBUG (testng-Command line test) [org.infinispan.configuration.cache.L1ConfigurationBuilder] L1 is enabled and L1OnRehash was not defined, enabling it
2013-01-31 13:15:45,270 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:45,295 DEBUG (testng-LazyCacheAPITest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:45,317 DEBUG (testng-BatchWithTMTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:45,330 DEBUG (testng-AsyncAPITest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:45,331 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:45,331 DEBUG (testng-APINonTxTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:45,332 DEBUG (testng-BatchWithoutTMTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:45,332 DEBUG (testng-LockPerEntryTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:45,450 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:45,459 DEBUG (testng-CacheClusterJoinTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:45,461 DEBUG (testng-ConcurrentStartupTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:45,462 DEBUG (testng-LocalKeyAffinityServiceTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:45,462 DEBUG (testng-MixedModeTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:45,465 DEBUG (testng-AsyncWithTxTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:45,466 DEBUG (testng-PutForExternalReadTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:45,467 DEBUG (testng-KeyAffinityServiceShutdownTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:45,467 DEBUG (testng-FilteredKeyAffinityServiceTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:45,468 DEBUG (testng-KeyAffinityServiceTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:45,537 DEBUG (testng-FlagsEnabledTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:45,544 DEBUG (testng-Command line test) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:46,248 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:46,269 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:46,270 DEBUG (testng-FilteredKeyAffinityServiceTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:46,270 DEBUG (testng-KeyAffinityServiceShutdownTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:46,273 DEBUG (testng-KeyAffinityServiceTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:46,274 DEBUG (testng-PutForExternalReadTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:46,283 DEBUG (testng-FlagsEnabledTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:46,269 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.configuration.cache.L1ConfigurationBuilder] L1 is enabled and L1OnRehash was not defined, enabling it
2013-01-31 13:15:46,294 DEBUG (testng-Command line test) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:46,324 DEBUG (testng-AsyncWithTxTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:46,325 DEBUG (testng-Command line test) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:46,345 DEBUG (testng-MixedModeTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:46,352 DEBUG (testng-LocalKeyAffinityServiceTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:46,360 DEBUG (testng-CacheClusterJoinTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:46,366 DEBUG (testng-ConcurrentStartupTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:46,374 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:46,374 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:46,374 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.configuration.cache.L1ConfigurationBuilder] L1 is enabled and L1OnRehash was not defined, enabling it
2013-01-31 13:15:46,378 DEBUG (testng-LockPerEntryTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:46,378 DEBUG (testng-LockPerEntryTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:46,382 DEBUG (testng-BatchWithoutTMTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:46,382 DEBUG (testng-BatchWithoutTMTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:46,383 INFO  (testng-BatchWithoutTMTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testBatchRollback(org.infinispan.api.batch.BatchWithoutTMTest)
2013-01-31 13:15:46,389 DEBUG (testng-APINonTxTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:46,389 DEBUG (testng-APINonTxTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:46,392 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:46,392 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:46,392 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.configuration.cache.L1ConfigurationBuilder] L1 is enabled and L1OnRehash was not defined, enabling it
2013-01-31 13:15:46,400 DEBUG (testng-AsyncAPITest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:46,400 DEBUG (testng-AsyncAPITest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:46,411 DEBUG (testng-BatchWithTMTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:46,411 DEBUG (testng-BatchWithTMTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:46,411 INFO  (testng-BatchWithTMTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testBatchRollback(org.infinispan.api.batch.BatchWithTMTest)
2013-01-31 13:15:46,418 DEBUG (testng-LazyCacheAPITest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:46,418 DEBUG (testng-LazyCacheAPITest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:46,716 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Trying to lookup TransactionManager for JBoss AS 7
2013-01-31 13:15:46,718 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Trying to lookup TransactionManager for JBoss AS 7
2013-01-31 13:15:46,721 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Trying to lookup TransactionManager for JBoss AS 7
2013-01-31 13:15:46,760 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Failed to perform a lookup for [java:jboss/TransactionManager (JBoss AS 7)]
2013-01-31 13:15:46,760 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Failed to perform a lookup for [java:jboss/TransactionManager (JBoss AS 7)]
2013-01-31 13:15:46,760 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Trying to lookup TransactionManager for JBoss AS 4 ~ 6, JRun4
2013-01-31 13:15:46,760 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Trying to lookup TransactionManager for JBoss AS 4 ~ 6, JRun4
2013-01-31 13:15:46,760 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Failed to perform a lookup for [java:/TransactionManager (JBoss AS 4 ~ 6, JRun4)]
2013-01-31 13:15:46,760 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Trying to lookup TransactionManager for Resin 3.x
2013-01-31 13:15:46,760 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Failed to perform a lookup for [java:comp/TransactionManager (Resin 3.x)]
2013-01-31 13:15:46,760 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Trying to lookup TransactionManager for Sun Glassfish
2013-01-31 13:15:46,760 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Failed to perform a lookup for [java:/TransactionManager (JBoss AS 4 ~ 6, JRun4)]
2013-01-31 13:15:46,760 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Failed to perform a lookup for [java:appserver/TransactionManager (Sun Glassfish)]
2013-01-31 13:15:46,760 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Failed to perform a lookup for [java:jboss/TransactionManager (JBoss AS 7)]
2013-01-31 13:15:46,760 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Trying to lookup TransactionManager for Borland, Sun
2013-01-31 13:15:46,760 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Trying to lookup TransactionManager for Resin 3.x
2013-01-31 13:15:46,761 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Failed to perform a lookup for [java:pm/TransactionManager (Borland, Sun)]
2013-01-31 13:15:46,761 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Trying to lookup TransactionManager for BEA WebLogic
2013-01-31 13:15:46,760 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Trying to lookup TransactionManager for JBoss AS 4 ~ 6, JRun4
2013-01-31 13:15:46,761 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Failed to perform a lookup for [javax.transaction.TransactionManager (BEA WebLogic)]
2013-01-31 13:15:46,761 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Trying to lookup TransactionManager for Resin, Orion, JOnAS (JOTM)
2013-01-31 13:15:46,761 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Failed to perform a lookup for [java:comp/TransactionManager (Resin 3.x)]
2013-01-31 13:15:46,761 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Failed to perform a lookup for [java:comp/UserTransaction (Resin, Orion, JOnAS (JOTM))]
2013-01-31 13:15:46,761 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Failed to perform a lookup for [java:/TransactionManager (JBoss AS 4 ~ 6, JRun4)]
2013-01-31 13:15:46,761 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Trying WebSphere 5.1: com.ibm.ws.Transaction.TransactionManagerFactory
2013-01-31 13:15:46,761 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Trying to lookup TransactionManager for Sun Glassfish
2013-01-31 13:15:46,761 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Trying to lookup TransactionManager for Resin 3.x
2013-01-31 13:15:46,761 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Failed to perform a lookup for [java:appserver/TransactionManager (Sun Glassfish)]
2013-01-31 13:15:46,761 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Failed to perform a lookup for [java:comp/TransactionManager (Resin 3.x)]
2013-01-31 13:15:46,761 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Trying to lookup TransactionManager for Borland, Sun
2013-01-31 13:15:46,761 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Trying to lookup TransactionManager for Sun Glassfish
2013-01-31 13:15:46,761 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Failed to perform a lookup for [java:pm/TransactionManager (Borland, Sun)]
2013-01-31 13:15:46,761 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Failed to perform a lookup for [java:appserver/TransactionManager (Sun Glassfish)]
2013-01-31 13:15:46,761 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Trying to lookup TransactionManager for BEA WebLogic
2013-01-31 13:15:46,761 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Trying to lookup TransactionManager for Borland, Sun
2013-01-31 13:15:46,761 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Failed to perform a lookup for [javax.transaction.TransactionManager (BEA WebLogic)]
2013-01-31 13:15:46,761 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Trying to lookup TransactionManager for Resin, Orion, JOnAS (JOTM)
2013-01-31 13:15:46,761 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Failed to perform a lookup for [java:pm/TransactionManager (Borland, Sun)]
2013-01-31 13:15:46,761 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Failed to perform a lookup for [java:comp/UserTransaction (Resin, Orion, JOnAS (JOTM))]
2013-01-31 13:15:46,761 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Trying to lookup TransactionManager for BEA WebLogic
2013-01-31 13:15:46,762 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Trying WebSphere 5.1: com.ibm.ws.Transaction.TransactionManagerFactory
2013-01-31 13:15:46,762 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Failed to perform a lookup for [javax.transaction.TransactionManager (BEA WebLogic)]
2013-01-31 13:15:46,762 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Trying to lookup TransactionManager for Resin, Orion, JOnAS (JOTM)
2013-01-31 13:15:46,762 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Failed to perform a lookup for [java:comp/UserTransaction (Resin, Orion, JOnAS (JOTM))]
2013-01-31 13:15:46,762 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Trying WebSphere 5.1: com.ibm.ws.Transaction.TransactionManagerFactory
2013-01-31 13:15:46,774 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Trying WebSphere 5.0: com.ibm.ejs.jts.jta.TransactionManagerFactory
2013-01-31 13:15:46,774 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Trying WebSphere 5.0: com.ibm.ejs.jts.jta.TransactionManagerFactory
2013-01-31 13:15:46,774 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Trying WebSphere 4: com.ibm.ejs.jts.jta.JTSXA
2013-01-31 13:15:46,775 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Couldn't find any WebSphere TransactionManager factory class, neither for WebSphere version 5.1 nor 5.0 nor 4
2013-01-31 13:15:46,779 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Trying WebSphere 5.0: com.ibm.ejs.jts.jta.TransactionManagerFactory
2013-01-31 13:15:46,779 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Trying WebSphere 4: com.ibm.ejs.jts.jta.JTSXA
2013-01-31 13:15:46,780 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Trying WebSphere 4: com.ibm.ejs.jts.jta.JTSXA
2013-01-31 13:15:46,796 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Couldn't find any WebSphere TransactionManager factory class, neither for WebSphere version 5.1 nor 5.0 nor 4
2013-01-31 13:15:46,797 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Couldn't find any WebSphere TransactionManager factory class, neither for WebSphere version 5.1 nor 5.0 nor 4
2013-01-31 13:15:47,115 DEBUG (testng-KeyAffinityServiceShutdownTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:47,115 DEBUG (testng-FilteredKeyAffinityServiceTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:47,116 DEBUG (testng-LocalKeyAffinityServiceTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:47,118 DEBUG (testng-CacheClusterJoinTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:47,119 DEBUG (testng-CacheClusterJoinTest) [org.infinispan.api.CacheClusterJoinTest] Cache managers created, ready to start the test
2013-01-31 13:15:47,119 INFO  (testng-CacheClusterJoinTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testGetMembers(org.infinispan.api.CacheClusterJoinTest)
2013-01-31 13:15:47,119 DEBUG (testng-AsyncWithTxTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:47,121 DEBUG (testng-AsyncWithTxTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:47,128 DEBUG (testng-AsyncWithTxTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:47,129 DEBUG (testng-AsyncWithTxTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:47,129 DEBUG (testng-AsyncWithTxTest) [org.infinispan.api.AsyncWithTxTest] Cache managers created, ready to start the test
2013-01-31 13:15:47,130 INFO  (testng-AsyncWithTxTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testWithTx(org.infinispan.api.AsyncWithTxTest)
2013-01-31 13:15:47,133 DEBUG (testng-MixedModeTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:47,162 DEBUG (testng-ConcurrentStartupTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:47,163 DEBUG (testng-KeyAffinityServiceTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:47,164 DEBUG (testng-FlagsEnabledTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:47,164 DEBUG (testng-PutForExternalReadTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:47,165 WARN  (testng-FlagsEnabledTest) [org.infinispan.configuration.cache.LoaderConfigurationBuilder] ISPN000149: Fetch persistent state and purge on startup are both disabled, cache may contain stale entries on startup
2013-01-31 13:15:47,165 WARN  (testng-FlagsEnabledTest) [org.infinispan.configuration.cache.LoaderConfigurationBuilder] ISPN000149: Fetch persistent state and purge on startup are both disabled, cache may contain stale entries on startup
2013-01-31 13:15:47,165 DEBUG (testng-FlagsEnabledTest) [org.infinispan.configuration.cache.L1ConfigurationBuilder] L1 is enabled and L1OnRehash was not defined, enabling it
2013-01-31 13:15:47,799 INFO  (testng-KeyAffinityServiceTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000078: Starting JGroups Channel
2013-01-31 13:15:47,799 INFO  (testng-PutForExternalReadTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000078: Starting JGroups Channel
2013-01-31 13:15:47,801 INFO  (testng-LocalKeyAffinityServiceTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000078: Starting JGroups Channel
2013-01-31 13:15:47,871 INFO  (testng-FlagsEnabledTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000078: Starting JGroups Channel
2013-01-31 13:15:47,912 INFO  (testng-KeyAffinityServiceShutdownTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000078: Starting JGroups Channel
2013-01-31 13:15:47,913 INFO  (testng-ConcurrentStartupTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000078: Starting JGroups Channel
2013-01-31 13:15:47,913 INFO  (testng-FilteredKeyAffinityServiceTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000078: Starting JGroups Channel
2013-01-31 13:15:47,914 INFO  (testng-CacheClusterJoinTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000078: Starting JGroups Channel
2013-01-31 13:15:47,914 INFO  (testng-AsyncWithTxTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000078: Starting JGroups Channel
2013-01-31 13:15:47,917 INFO  (testng-MixedModeTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000078: Starting JGroups Channel
2013-01-31 13:15:47,917 DEBUG (testng-AsyncWithTxTest) [org.jgroups.conf.ClassConfigurator] Using jg-magic-map.xml as magic number file and jg-protocol-ids.xml for protocol IDs
2013-01-31 13:15:48,010 DEBUG (testng-APINonTxTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:48,010 DEBUG (testng-LockPerEntryTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:48,010 DEBUG (testng-Command line test) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:48,010 DEBUG (testng-AsyncAPITest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:48,020 INFO  (testng-CacheAPIMVCCTest) [org.infinispan.transaction.lookup.JBossStandaloneJTAManagerLookup] ISPN000107: Retrieving transaction manager Transaction: unknown
2013-01-31 13:15:48,021 INFO  (testng-BatchWithTMTest) [org.infinispan.transaction.lookup.JBossStandaloneJTAManagerLookup] ISPN000107: Retrieving transaction manager Transaction: unknown
2013-01-31 13:15:48,021 INFO  (testng-BatchWithoutTMTest) [org.infinispan.transaction.lookup.JBossStandaloneJTAManagerLookup] ISPN000107: Retrieving transaction manager Transaction: unknown
2013-01-31 13:15:48,021 INFO  (testng-LazyCacheAPITest) [org.infinispan.transaction.lookup.JBossStandaloneJTAManagerLookup] ISPN000107: Retrieving transaction manager Transaction: unknown
2013-01-31 13:15:48,021 INFO  (testng-CacheAPIOptimisticTest) [org.infinispan.transaction.lookup.JBossStandaloneJTAManagerLookup] ISPN000107: Retrieving transaction manager Transaction: unknown
2013-01-31 13:15:48,020 INFO  (testng-CacheAPIPessimisticTest) [org.infinispan.transaction.lookup.JBossStandaloneJTAManagerLookup] ISPN000107: Retrieving transaction manager Transaction: unknown
2013-01-31 13:15:48,056 DEBUG (testng-Command line test) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:48,056 DEBUG (testng-LockPerEntryTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:48,057 DEBUG (testng-AsyncAPITest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:48,057 DEBUG (testng-APINonTxTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:48,093 DEBUG (testng-BatchWithTMTest) [org.infinispan.configuration.cache.TransactionConfigurationBuilder] Switching to Synchronization based enlistment.
2013-01-31 13:15:48,093 DEBUG (testng-BatchWithoutTMTest) [org.infinispan.configuration.cache.TransactionConfigurationBuilder] Switching to Synchronization based enlistment.
2013-01-31 13:15:48,124 INFO  (testng-CacheAPIOptimisticTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:48,126 INFO  (testng-LazyCacheAPITest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:48,124 INFO  (testng-CacheAPIMVCCTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:48,126 INFO  (testng-BatchWithTMTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:48,127 INFO  (testng-CacheAPIPessimisticTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:48,127 INFO  (testng-BatchWithoutTMTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:48,218 DEBUG (testng-BatchWithTMTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:48,219 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:48,219 DEBUG (testng-BatchWithoutTMTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:48,219 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:48,220 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:48,220 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:48,221 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:48,221 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:48,228 DEBUG (testng-BatchWithTMTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:48,229 DEBUG (testng-BatchWithoutTMTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:48,232 DEBUG (testng-LazyCacheAPITest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:48,232 DEBUG (testng-LazyCacheAPITest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:48,233 DEBUG (testng-BatchWithTMTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:48,233 DEBUG (testng-LockPerEntryTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:48,233 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:48,234 DEBUG (testng-APINonTxTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:48,234 DEBUG (testng-AsyncAPITest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:48,264 DEBUG (testng-BatchWithoutTMTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:48,274 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:48,274 DEBUG (testng-Command line test) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:48,275 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:48,275 DEBUG (testng-LazyCacheAPITest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:48,368 INFO  (testng-APINonTxTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:48,368 INFO  (testng-LockPerEntryTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:48,370 INFO  (testng-AsyncAPITest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:48,370 INFO  (testng-Command line test) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:48,417 DEBUG (testng-AsyncAPITest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 10
2013-01-31 13:15:48,417 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 11
2013-01-31 13:15:48,418 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@1abade9b}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@4970c679}
	>> org.infinispan.interceptors.TxInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@32f14515}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@350a363c, PB=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@350a363c}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@316eb858, TO=org.infinispan.interceptors.EntryWrappingInterceptor@316eb858, PB=org.infinispan.interceptors.EntryWrappingInterceptor@316eb858}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:48,418 DEBUG (testng-LazyCacheAPITest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 13
2013-01-31 13:15:48,418 DEBUG (testng-LazyCacheAPITest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.IsMarshallableInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@3f100dc2}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@36f75be6}
	>> org.infinispan.interceptors.TxInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@29b2753b}
	>> org.infinispan.interceptors.MarshalledValueInterceptor
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@32e89e0, PB=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@32e89e0}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@645dd2c1, TO=org.infinispan.interceptors.EntryWrappingInterceptor@645dd2c1, PB=org.infinispan.interceptors.EntryWrappingInterceptor@645dd2c1}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:48,418 DEBUG (testng-AsyncAPITest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@1abade9b}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@626c9fd2}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@af6579a}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@7dee7fd3, PB=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@7dee7fd3}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@5c08b2c2, TO=org.infinispan.interceptors.EntryWrappingInterceptor@5c08b2c2, PB=org.infinispan.interceptors.EntryWrappingInterceptor@5c08b2c2}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:48,429 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 11
2013-01-31 13:15:48,430 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@70eeb555}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@47c3195f}
	>> org.infinispan.interceptors.TxInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@59b6d0c7}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.PessimisticLockingInterceptor@7144e6d4, PB=org.infinispan.interceptors.locking.PessimisticLockingInterceptor@7144e6d4}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@628ea264, TO=org.infinispan.interceptors.EntryWrappingInterceptor@628ea264, PB=org.infinispan.interceptors.EntryWrappingInterceptor@628ea264}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:48,430 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 11
2013-01-31 13:15:48,432 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@25a0504a}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@3ff73d92}
	>> org.infinispan.interceptors.TxInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@eb5d0d}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@5c2a00f3, PB=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@5c2a00f3}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@49a480ca, TO=org.infinispan.interceptors.EntryWrappingInterceptor@49a480ca, PB=org.infinispan.interceptors.EntryWrappingInterceptor@49a480ca}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:48,432 DEBUG (testng-Command line test) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 10
2013-01-31 13:15:48,433 DEBUG (testng-Command line test) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@25a59f15}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@1c6f2f02}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@47773ae3}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@64bb31bc, PB=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@64bb31bc}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@3dbe614e, TO=org.infinispan.interceptors.EntryWrappingInterceptor@3dbe614e, PB=org.infinispan.interceptors.EntryWrappingInterceptor@3dbe614e}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:48,433 DEBUG (testng-APINonTxTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 10
2013-01-31 13:15:48,433 DEBUG (testng-LockPerEntryTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 10
2013-01-31 13:15:48,435 DEBUG (testng-BatchWithTMTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 12
2013-01-31 13:15:48,435 DEBUG (testng-BatchWithTMTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.BatchingInterceptor
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@7cdf6322}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@2de58d3a}
	>> org.infinispan.interceptors.TxInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@399af260}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@6b9e9a2b, PB=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@6b9e9a2b}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@5d56d278, TO=org.infinispan.interceptors.EntryWrappingInterceptor@5d56d278, PB=org.infinispan.interceptors.EntryWrappingInterceptor@5d56d278}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:48,435 DEBUG (testng-BatchWithoutTMTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 12
2013-01-31 13:15:48,435 DEBUG (testng-BatchWithoutTMTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.BatchingInterceptor
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@6f13f427}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@702656a}
	>> org.infinispan.interceptors.TxInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@2e5015be}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@bc384b3, PB=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@bc384b3}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@513d09cd, TO=org.infinispan.interceptors.EntryWrappingInterceptor@513d09cd, PB=org.infinispan.interceptors.EntryWrappingInterceptor@513d09cd}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:48,436 DEBUG (testng-LazyCacheAPITest) [org.infinispan.CacheImpl] Started cache lazy-cache-test on null
2013-01-31 13:15:48,440 INFO  (testng-LazyCacheAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testReplace(org.infinispan.api.lazy.LazyCacheAPITest)
2013-01-31 13:15:48,437 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.CacheImpl] Started cache test on null
2013-01-31 13:15:48,435 DEBUG (testng-APINonTxTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@3d2a45a8}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@224337f7}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@6b0f4ab3}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@38f164ae, PB=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@38f164ae}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@7008f8b6, TO=org.infinispan.interceptors.EntryWrappingInterceptor@7008f8b6, PB=org.infinispan.interceptors.EntryWrappingInterceptor@7008f8b6}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:48,441 INFO  (testng-CacheAPIMVCCTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testConcurrentMapMethods(org.infinispan.api.lru.read_committed.CacheAPIMVCCTest)
2013-01-31 13:15:48,439 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.CacheImpl] Started cache test on null
2013-01-31 13:15:48,439 DEBUG (testng-Command line test) [org.infinispan.CacheImpl] Started cache my-cache on null
2013-01-31 13:15:48,443 INFO  (testng-CacheAPIPessimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testConcurrentMapMethods(org.infinispan.api.mvcc.read_committed.CacheAPIPessimisticTest)
2013-01-31 13:15:48,439 DEBUG (testng-BatchWithTMTest) [org.infinispan.CacheImpl] Started cache testBatchRollback on null
2013-01-31 13:15:48,441 DEBUG (testng-APINonTxTest) [org.infinispan.CacheImpl] Started cache test on null
2013-01-31 13:15:48,435 DEBUG (testng-LockPerEntryTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@1531dde4}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@7cdeae9a}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@7f994081}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@265a1699, PB=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@265a1699}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@6481aa7a, TO=org.infinispan.interceptors.EntryWrappingInterceptor@6481aa7a, PB=org.infinispan.interceptors.EntryWrappingInterceptor@6481aa7a}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:48,437 DEBUG (testng-BatchWithoutTMTest) [org.infinispan.CacheImpl] Started cache testBatchRollback on null
2013-01-31 13:15:48,441 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.CacheImpl] Started cache test on null
2013-01-31 13:15:48,446 INFO  (testng-CacheAPIOptimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testConcurrentMapMethods(org.infinispan.api.mvcc.read_committed.CacheAPIOptimisticTest)
2013-01-31 13:15:48,444 INFO  (testng-APINonTxTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testConcurrentMapMethods(org.infinispan.api.APINonTxTest)
2013-01-31 13:15:48,444 DEBUG (testng-LockPerEntryTest) [org.infinispan.CacheImpl] Started cache ___defaultcache on null
2013-01-31 13:15:48,443 DEBUG (testng-AsyncAPITest) [org.infinispan.CacheImpl] Started cache ___defaultcache on null
2013-01-31 13:15:48,448 INFO  (testng-AsyncAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testAsyncMethods(org.infinispan.api.AsyncAPITest)
2013-01-31 13:15:48,447 INFO  (testng-LockPerEntryTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testLocksCleanedUp(org.infinispan.api.mvcc.LockPerEntryTest)
2013-01-31 13:15:48,519 ERROR (testng-LockPerEntryTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Method testLocksCleanedUp(org.infinispan.api.mvcc.LockPerEntryTest) threw an exception
java.lang.AssertionError: Stale locks exist! NumLocksHeld is 2 and lock info is org.infinispan.util.concurrent.locks.containers.ReentrantPerEntryLockContainer@2216d438
	at org.infinispan.api.mvcc.LockAssert.assertNoLocks(LockAssert.java:48)
	at org.infinispan.api.mvcc.LockPerEntryTest.assertNoLocks(LockPerEntryTest.java:101)
	at org.infinispan.api.mvcc.LockPerEntryTest.testLocksCleanedUp(LockPerEntryTest.java:52)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:48,528 INFO  (testng-Command line test) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testConfigurationOverride(org.infinispan.configuration.ConfigurationOverrideTest).
2013-01-31 13:15:48,553 ERROR (testng-LockPerEntryTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test failed testLocksCleanedUp(org.infinispan.api.mvcc.LockPerEntryTest)
java.lang.AssertionError: Stale locks exist! NumLocksHeld is 2 and lock info is org.infinispan.util.concurrent.locks.containers.ReentrantPerEntryLockContainer@2216d438
	at org.infinispan.api.mvcc.LockAssert.assertNoLocks(LockAssert.java:48)
	at org.infinispan.api.mvcc.LockPerEntryTest.assertNoLocks(LockPerEntryTest.java:101)
	at org.infinispan.api.mvcc.LockPerEntryTest.testLocksCleanedUp(LockPerEntryTest.java:52)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:48,554 DEBUG (testng-Command line test) [org.infinispan.manager.DefaultCacheManager] Stopping cache manager ISPN on null
2013-01-31 13:15:48,555 INFO  (testng-APINonTxTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testConcurrentMapMethods(org.infinispan.api.APINonTxTest).
2013-01-31 13:15:48,555 DEBUG (testng-Command line test) [org.infinispan.CacheImpl] Stopping cache my-cache on null
2013-01-31 13:15:48,556 INFO  (testng-AsyncAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testAsyncMethods(org.infinispan.api.AsyncAPITest).
2013-01-31 13:15:48,579 DEBUG (testng-AsyncAPITest) [org.infinispan.test.TestingUtil] Cleaning data for cache '___defaultcache' on a non-clustered cache manager
2013-01-31 13:15:48,588 DEBUG (testng-APINonTxTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:48,590 DEBUG (testng-Command line test) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 30 seconds.
2013-01-31 13:15:48,590 DEBUG (testng-APINonTxTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [A=X]
2013-01-31 13:15:48,590 DEBUG (testng-Command line test) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:48,590 DEBUG (testng-APINonTxTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:48,590 DEBUG (testng-APINonTxTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:48,590 DEBUG (testng-APINonTxTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:48,591 INFO  (testng-APINonTxTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testConvenienceMethods(org.infinispan.api.APINonTxTest)
2013-01-31 13:15:48,591 INFO  (testng-Command line test) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testOldConfigurationOverride(org.infinispan.configuration.ConfigurationOverrideTest)
2013-01-31 13:15:48,593 DEBUG (testng-Command line test) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:48,598 DEBUG (testng-Command line test) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:48,599 DEBUG (testng-Command line test) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:48,601 DEBUG (testng-AsyncAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [k=v6]
2013-01-31 13:15:48,601 DEBUG (testng-AsyncAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:48,601 DEBUG (testng-AsyncAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:48,601 DEBUG (testng-AsyncAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:48,602 INFO  (testng-APINonTxTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testConvenienceMethods(org.infinispan.api.APINonTxTest).
2013-01-31 13:15:48,602 DEBUG (testng-AsyncAPITest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on null
2013-01-31 13:15:48,602 DEBUG (testng-APINonTxTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:48,602 DEBUG (testng-APINonTxTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [key=value]
2013-01-31 13:15:48,602 DEBUG (testng-APINonTxTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:48,602 DEBUG (testng-AsyncAPITest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 30 seconds.
2013-01-31 13:15:48,603 DEBUG (testng-AsyncAPITest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:48,603 DEBUG (testng-AsyncAPITest) [org.infinispan.manager.DefaultCacheManager] Stopping cache manager ISPN on null
2013-01-31 13:15:48,603 DEBUG (testng-AsyncAPITest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on null
2013-01-31 13:15:48,604 DEBUG (testng-APINonTxTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:48,604 DEBUG (testng-APINonTxTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:48,605 INFO  (testng-APINonTxTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testEvict(org.infinispan.api.APINonTxTest)
2013-01-31 13:15:48,607 INFO  (testng-APINonTxTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testEvict(org.infinispan.api.APINonTxTest).
2013-01-31 13:15:48,608 DEBUG (testng-APINonTxTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:48,608 DEBUG (testng-APINonTxTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == []
2013-01-31 13:15:48,608 DEBUG (testng-APINonTxTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:48,608 DEBUG (testng-APINonTxTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:48,608 DEBUG (testng-APINonTxTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:48,609 INFO  (testng-APINonTxTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testImmutabilityOfKeyValueEntryCollections(org.infinispan.api.APINonTxTest)
2013-01-31 13:15:48,609 INFO  (testng-CacheAPIMVCCTest) [com.arjuna.ats.arjuna] ARJUNA012163: Starting service com.arjuna.ats.arjuna.recovery.ActionStatusService on port 50257
2013-01-31 13:15:48,614 INFO  (testng-APINonTxTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testImmutabilityOfKeyValueEntryCollections(org.infinispan.api.APINonTxTest).
2013-01-31 13:15:48,615 DEBUG (testng-APINonTxTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:48,615 DEBUG (testng-APINonTxTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [1=one, 3=three, 2=two]
2013-01-31 13:15:48,615 DEBUG (testng-APINonTxTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:48,615 DEBUG (testng-APINonTxTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:48,615 DEBUG (testng-APINonTxTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:48,615 INFO  (testng-APINonTxTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testKeyValueEntryCollections(org.infinispan.api.APINonTxTest)
2013-01-31 13:15:48,625 DEBUG (testng-LockPerEntryTest) [org.infinispan.test.TestingUtil] Cleaning data for cache '___defaultcache' on a non-clustered cache manager
2013-01-31 13:15:48,625 DEBUG (testng-LockPerEntryTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [/a/b/c=v, /a/b/d=v]
2013-01-31 13:15:48,625 DEBUG (testng-LockPerEntryTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:48,625 DEBUG (testng-LockPerEntryTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:48,625 DEBUG (testng-LockPerEntryTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:48,626 DEBUG (testng-LockPerEntryTest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on null
2013-01-31 13:15:48,626 DEBUG (testng-LockPerEntryTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 1 seconds.
2013-01-31 13:15:48,626 DEBUG (testng-LockPerEntryTest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:48,626 DEBUG (testng-LockPerEntryTest) [org.infinispan.manager.DefaultCacheManager] Stopping cache manager ISPN on null
2013-01-31 13:15:48,626 DEBUG (testng-LockPerEntryTest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on null
2013-01-31 13:15:48,626 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:48,632 INFO  (testng-APINonTxTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testKeyValueEntryCollections(org.infinispan.api.APINonTxTest).
2013-01-31 13:15:48,632 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:48,633 DEBUG (testng-APINonTxTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:48,633 DEBUG (testng-APINonTxTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [1=one, 3=three, 2=two]
2013-01-31 13:15:48,633 DEBUG (testng-APINonTxTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:48,633 DEBUG (testng-APINonTxTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:48,633 DEBUG (testng-APINonTxTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:48,634 DEBUG (testng-Command line test) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:48,634 DEBUG (testng-Command line test) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:48,634 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:48,635 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:48,636 DEBUG (testng-Command line test) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:48,640 INFO  (testng-Command line test) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:48,642 DEBUG (testng-Command line test) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 10
2013-01-31 13:15:48,642 DEBUG (testng-Command line test) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@e8ef7ca}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@4c2df63d}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@5d8145dd}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@5211e020, PB=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@5211e020}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@13917ef8, TO=org.infinispan.interceptors.EntryWrappingInterceptor@13917ef8, PB=org.infinispan.interceptors.EntryWrappingInterceptor@13917ef8}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:48,651 INFO  (testng-ReadCommittedLockTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:48,653 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:48,653 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:48,654 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:48,683 DEBUG (testng-Command line test) [org.infinispan.CacheImpl] Started cache my-cache on null
2013-01-31 13:15:48,683 INFO  (testng-Command line test) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testOldConfigurationOverride(org.infinispan.configuration.ConfigurationOverrideTest).
2013-01-31 13:15:48,684 INFO  (testng-CacheAPIMVCCTest) [com.arjuna.ats.arjuna] ARJUNA012337: TransactionStatusManagerItem host: 127.0.0.1 port: 50257
2013-01-31 13:15:48,688 DEBUG (testng-Command line test) [org.infinispan.manager.DefaultCacheManager] Stopping cache manager ISPN on null
2013-01-31 13:15:48,689 DEBUG (testng-Command line test) [org.infinispan.CacheImpl] Stopping cache my-cache on null
2013-01-31 13:15:48,689 DEBUG (testng-Command line test) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 30 seconds.
2013-01-31 13:15:48,689 DEBUG (testng-Command line test) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:48,689 INFO  (testng-Command line test) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testSimpleDistributedClusterModeDefault(org.infinispan.configuration.ConfigurationOverrideTest)
2013-01-31 13:15:48,689 DEBUG (testng-Command line test) [org.infinispan.configuration.cache.L1ConfigurationBuilder] L1 is enabled and L1OnRehash was not defined, enabling it
2013-01-31 13:15:48,693 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 11
2013-01-31 13:15:48,693 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@32f3e2f5}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@29b95cf5}
	>> org.infinispan.interceptors.TxInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@4885ee39}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@50db0561, PB=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@50db0561}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@5b3e4cbf, TO=org.infinispan.interceptors.EntryWrappingInterceptor@5b3e4cbf, PB=org.infinispan.interceptors.EntryWrappingInterceptor@5b3e4cbf}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:48,694 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.CacheImpl] Started cache ___defaultcache on null
2013-01-31 13:15:48,694 INFO  (testng-ReadCommittedLockTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testLocksOnEvict(org.infinispan.api.mvcc.read_committed.ReadCommittedLockTest)
2013-01-31 13:15:48,705 INFO  (testng-APINonTxTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testNullKeyParameter(org.infinispan.api.APINonTxTest)
2013-01-31 13:15:48,705 ERROR (testng-APINonTxTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Method testNullKeyParameter(org.infinispan.api.APINonTxTest) threw an exception
java.lang.NullPointerException: Null keys are not supported!
	at org.infinispan.CacheImpl.assertKeyNotNull(CacheImpl.java:197)
	at org.infinispan.CacheImpl.assertKeyValueNotNull(CacheImpl.java:202)
	at org.infinispan.CacheImpl.put(CacheImpl.java:700)
	at org.infinispan.CacheImpl.put(CacheImpl.java:695)
	at org.infinispan.CacheSupport.put(CacheSupport.java:53)
	at org.infinispan.api.APINonTxTest.testNullKeyParameter(APINonTxTest.java:342)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:48,706 INFO  (testng-APINonTxTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testNullKeyParameter(org.infinispan.api.APINonTxTest).
2013-01-31 13:15:48,706 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:48,706 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:48,707 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.configuration.cache.L1ConfigurationBuilder] L1 is enabled and L1OnRehash was not defined, enabling it
2013-01-31 13:15:48,709 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Trying to lookup TransactionManager for JBoss AS 7
2013-01-31 13:15:48,709 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Failed to perform a lookup for [java:jboss/TransactionManager (JBoss AS 7)]
2013-01-31 13:15:48,709 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Trying to lookup TransactionManager for JBoss AS 4 ~ 6, JRun4
2013-01-31 13:15:48,709 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Failed to perform a lookup for [java:/TransactionManager (JBoss AS 4 ~ 6, JRun4)]
2013-01-31 13:15:48,709 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Trying to lookup TransactionManager for Resin 3.x
2013-01-31 13:15:48,709 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Failed to perform a lookup for [java:comp/TransactionManager (Resin 3.x)]
2013-01-31 13:15:48,709 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Trying to lookup TransactionManager for Sun Glassfish
2013-01-31 13:15:48,709 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Failed to perform a lookup for [java:appserver/TransactionManager (Sun Glassfish)]
2013-01-31 13:15:48,709 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Trying to lookup TransactionManager for Borland, Sun
2013-01-31 13:15:48,709 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Failed to perform a lookup for [java:pm/TransactionManager (Borland, Sun)]
2013-01-31 13:15:48,709 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Trying to lookup TransactionManager for BEA WebLogic
2013-01-31 13:15:48,709 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Failed to perform a lookup for [javax.transaction.TransactionManager (BEA WebLogic)]
2013-01-31 13:15:48,709 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Trying to lookup TransactionManager for Resin, Orion, JOnAS (JOTM)
2013-01-31 13:15:48,710 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Failed to perform a lookup for [java:comp/UserTransaction (Resin, Orion, JOnAS (JOTM))]
2013-01-31 13:15:48,710 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Trying WebSphere 5.1: com.ibm.ws.Transaction.TransactionManagerFactory
2013-01-31 13:15:48,724 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction DummyTransaction{xid=DummyXid{id=1}, status=0} is starting. check if switch is in progress...
2013-01-31 13:15:48,725 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-ReadCommittedLockTest] will wait until no switch is in progress
2013-01-31 13:15:48,725 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-ReadCommittedLockTest] no switch in progress. Moving on...
2013-01-31 13:15:48,725 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction DummyTransaction{xid=DummyXid{id=1}, status=0} will use 2PC while executing
2013-01-31 13:15:48,738 DEBUG (testng-APINonTxTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:48,738 DEBUG (testng-APINonTxTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == []
2013-01-31 13:15:48,738 DEBUG (testng-APINonTxTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:48,738 DEBUG (testng-APINonTxTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:48,738 DEBUG (testng-APINonTxTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:48,739 INFO  (testng-APINonTxTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testNullValueParameter(org.infinispan.api.APINonTxTest)
2013-01-31 13:15:48,739 ERROR (testng-APINonTxTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Method testNullValueParameter(org.infinispan.api.APINonTxTest) threw an exception
java.lang.NullPointerException: Null values are not supported!
	at org.infinispan.CacheImpl.assertKeyValueNotNull(CacheImpl.java:204)
	at org.infinispan.CacheImpl.put(CacheImpl.java:700)
	at org.infinispan.CacheImpl.put(CacheImpl.java:695)
	at org.infinispan.CacheSupport.put(CacheSupport.java:53)
	at org.infinispan.api.APINonTxTest.testNullValueParameter(APINonTxTest.java:347)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:48,741 INFO  (testng-APINonTxTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testNullValueParameter(org.infinispan.api.APINonTxTest).
2013-01-31 13:15:48,741 DEBUG (testng-APINonTxTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:48,741 DEBUG (testng-APINonTxTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == []
2013-01-31 13:15:48,741 DEBUG (testng-APINonTxTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:48,741 DEBUG (testng-APINonTxTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:48,741 DEBUG (testng-APINonTxTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:48,742 INFO  (testng-APINonTxTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testSizeAndContents(org.infinispan.api.APINonTxTest)
2013-01-31 13:15:48,744 INFO  (testng-APINonTxTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testSizeAndContents(org.infinispan.api.APINonTxTest).
2013-01-31 13:15:48,740 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction null:1 [DummyTransaction{xid=DummyXid{id=1}, status=7}] wants to commit
2013-01-31 13:15:48,744 DEBUG (testng-APINonTxTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:48,745 DEBUG (testng-APINonTxTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [1=newvalue, 3=three, 4=four, 2=two]
2013-01-31 13:15:48,745 DEBUG (testng-APINonTxTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:48,745 DEBUG (testng-APINonTxTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:48,745 DEBUG (testng-APINonTxTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:48,745 INFO  (testng-APINonTxTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testStopClearsData(org.infinispan.api.APINonTxTest)
2013-01-31 13:15:48,746 DEBUG (testng-APINonTxTest) [org.infinispan.CacheImpl] Stopping cache test on null
2013-01-31 13:15:48,746 DEBUG (testng-APINonTxTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 30 seconds.
2013-01-31 13:15:48,746 DEBUG (testng-APINonTxTest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:48,794 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction null:1 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:48,816 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Trying WebSphere 5.0: com.ibm.ejs.jts.jta.TransactionManagerFactory
2013-01-31 13:15:48,817 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Trying WebSphere 4: com.ibm.ejs.jts.jta.JTSXA
2013-01-31 13:15:48,817 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Couldn't find any WebSphere TransactionManager factory class, neither for WebSphere version 5.1 nor 5.0 nor 4
2013-01-31 13:15:48,817 INFO  (testng-CacheAPIOptimisticTest) [org.infinispan.transaction.lookup.JBossStandaloneJTAManagerLookup] ISPN000107: Retrieving transaction manager Transaction: unknown
2013-01-31 13:15:48,817 DEBUG (testng-APINonTxTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:48,818 DEBUG (testng-APINonTxTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:48,819 INFO  (testng-CacheAPIOptimisticTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:48,820 DEBUG (testng-APINonTxTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:48,820 INFO  (testng-APINonTxTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:48,821 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:48,821 DEBUG (testng-APINonTxTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 10
2013-01-31 13:15:48,821 DEBUG (testng-APINonTxTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@7ded679d}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@6d2db501}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@53c68ca6}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@103c1142, PB=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@103c1142}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@57910c61, TO=org.infinispan.interceptors.EntryWrappingInterceptor@57910c61, PB=org.infinispan.interceptors.EntryWrappingInterceptor@57910c61}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:48,821 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:48,821 DEBUG (testng-APINonTxTest) [org.infinispan.CacheImpl] Started cache test on null
2013-01-31 13:15:48,822 INFO  (testng-APINonTxTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testStopClearsData(org.infinispan.api.APINonTxTest).
2013-01-31 13:15:48,823 DEBUG (testng-APINonTxTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:48,823 DEBUG (testng-APINonTxTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == []
2013-01-31 13:15:48,823 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:48,826 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 11
2013-01-31 13:15:48,826 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@674eb0f5}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@5f43d9cf}
	>> org.infinispan.interceptors.TxInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@5f90d5e5}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@1dcade67, PB=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@1dcade67}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@71cf4b78, TO=org.infinispan.interceptors.EntryWrappingInterceptor@71cf4b78, PB=org.infinispan.interceptors.EntryWrappingInterceptor@71cf4b78}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:48,823 DEBUG (testng-APINonTxTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:48,826 DEBUG (testng-APINonTxTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:48,826 DEBUG (testng-APINonTxTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:48,827 DEBUG (testng-APINonTxTest) [org.infinispan.CacheImpl] Stopping cache test on null
2013-01-31 13:15:48,827 DEBUG (testng-APINonTxTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 30 seconds.
2013-01-31 13:15:48,827 DEBUG (testng-APINonTxTest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:48,827 DEBUG (testng-APINonTxTest) [org.infinispan.manager.DefaultCacheManager] Stopping cache manager ISPN on null
2013-01-31 13:15:48,827 DEBUG (testng-APINonTxTest) [org.infinispan.CacheImpl] Stopping cache test on null
2013-01-31 13:15:48,828 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.CacheImpl] Started cache test on null
2013-01-31 13:15:48,831 INFO  (testng-CacheAPIOptimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testConcurrentMapMethods(org.infinispan.api.mvcc.repeatable_read.CacheAPIOptimisticTest)
2013-01-31 13:15:48,835 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:48,840 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:48,840 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:48,841 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.configuration.cache.L1ConfigurationBuilder] L1 is enabled and L1OnRehash was not defined, enabling it
2013-01-31 13:15:48,843 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Trying to lookup TransactionManager for JBoss AS 7
2013-01-31 13:15:48,843 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Failed to perform a lookup for [java:jboss/TransactionManager (JBoss AS 7)]
2013-01-31 13:15:48,843 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Trying to lookup TransactionManager for JBoss AS 4 ~ 6, JRun4
2013-01-31 13:15:48,843 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Failed to perform a lookup for [java:/TransactionManager (JBoss AS 4 ~ 6, JRun4)]
2013-01-31 13:15:48,844 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Trying to lookup TransactionManager for Resin 3.x
2013-01-31 13:15:48,844 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Failed to perform a lookup for [java:comp/TransactionManager (Resin 3.x)]
2013-01-31 13:15:48,844 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Trying to lookup TransactionManager for Sun Glassfish
2013-01-31 13:15:48,844 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Failed to perform a lookup for [java:appserver/TransactionManager (Sun Glassfish)]
2013-01-31 13:15:48,844 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Trying to lookup TransactionManager for Borland, Sun
2013-01-31 13:15:48,844 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Failed to perform a lookup for [java:pm/TransactionManager (Borland, Sun)]
2013-01-31 13:15:48,844 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Trying to lookup TransactionManager for BEA WebLogic
2013-01-31 13:15:48,844 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Failed to perform a lookup for [javax.transaction.TransactionManager (BEA WebLogic)]
2013-01-31 13:15:48,844 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Trying to lookup TransactionManager for Resin, Orion, JOnAS (JOTM)
2013-01-31 13:15:48,844 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Failed to perform a lookup for [java:comp/UserTransaction (Resin, Orion, JOnAS (JOTM))]
2013-01-31 13:15:48,844 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Trying WebSphere 5.1: com.ibm.ws.Transaction.TransactionManagerFactory
2013-01-31 13:15:48,855 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Trying WebSphere 5.0: com.ibm.ejs.jts.jta.TransactionManagerFactory
2013-01-31 13:15:48,878 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Trying WebSphere 4: com.ibm.ejs.jts.jta.JTSXA
2013-01-31 13:15:48,878 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Couldn't find any WebSphere TransactionManager factory class, neither for WebSphere version 5.1 nor 5.0 nor 4
2013-01-31 13:15:48,879 INFO  (testng-CacheAPIPessimisticTest) [org.infinispan.transaction.lookup.JBossStandaloneJTAManagerLookup] ISPN000107: Retrieving transaction manager Transaction: unknown
2013-01-31 13:15:48,881 INFO  (testng-CacheAPIPessimisticTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:48,886 DEBUG (testng-Command line test) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:48,890 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction DummyTransaction{xid=DummyXid{id=2}, status=0} is starting. check if switch is in progress...
2013-01-31 13:15:48,890 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-ReadCommittedLockTest] will wait until no switch is in progress
2013-01-31 13:15:48,890 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-ReadCommittedLockTest] no switch in progress. Moving on...
2013-01-31 13:15:48,890 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction DummyTransaction{xid=DummyXid{id=2}, status=0} will use 2PC while executing
2013-01-31 13:15:48,890 ERROR (testng-ReadCommittedLockTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Method testLocksOnEvict(org.infinispan.api.mvcc.read_committed.ReadCommittedLockTest) threw an exception
java.lang.AssertionError: Stale locks exist! NumLocksHeld is 1 and lock info is org.infinispan.util.concurrent.locks.containers.OwnableReentrantPerEntryLockContainer@49513124
	at org.infinispan.api.mvcc.LockAssert.assertNoLocks(LockAssert.java:48)
	at org.infinispan.api.mvcc.LockTestBase.assertNoLocks(LockTestBase.java:102)
	at org.infinispan.api.mvcc.LockTestBase.testLocksOnEvict(LockTestBase.java:170)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:48,891 ERROR (testng-ReadCommittedLockTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test failed testLocksOnEvict(org.infinispan.api.mvcc.read_committed.ReadCommittedLockTest)
java.lang.AssertionError: Stale locks exist! NumLocksHeld is 1 and lock info is org.infinispan.util.concurrent.locks.containers.OwnableReentrantPerEntryLockContainer@49513124
	at org.infinispan.api.mvcc.LockAssert.assertNoLocks(LockAssert.java:48)
	at org.infinispan.api.mvcc.LockTestBase.assertNoLocks(LockTestBase.java:102)
	at org.infinispan.api.mvcc.LockTestBase.testLocksOnEvict(LockTestBase.java:170)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:48,895 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.api.mvcc.LockTestBase] **** - STARTING TEARDOWN - ****
2013-01-31 13:15:48,896 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on null
2013-01-31 13:15:48,896 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 1 seconds.
2013-01-31 13:15:48,896 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:48,896 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.manager.DefaultCacheManager] Stopping cache manager ISPN on null
2013-01-31 13:15:48,896 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on null
2013-01-31 13:15:48,940 DEBUG (testng-Command line test) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:48,941 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:48,968 DEBUG (testng-Command line test) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:48,968 INFO  (testng-Command line test) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000078: Starting JGroups Channel
2013-01-31 13:15:48,969 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:48,970 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:48,971 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:48,974 INFO  (testng-CacheAPIMVCCTest) [com.arjuna.ats.arjuna] ARJUNA012170: TransactionStatusManager started on port 50257 and host 127.0.0.1 with service com.arjuna.ats.arjuna.recovery.ActionStatusService
2013-01-31 13:15:48,975 WARN  (testng-AsyncWithTxTest) [org.jgroups.stack.Configurator] [JGRP00013] TP.discard_incompatible_packets has been deprecated: incompatible packets are discarded anyway
2013-01-31 13:15:48,980 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:48,980 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:48,983 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 11
2013-01-31 13:15:48,983 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@69634b4a}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@75e41d53}
	>> org.infinispan.interceptors.TxInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@5341709c}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.PessimisticLockingInterceptor@6d483c77, PB=org.infinispan.interceptors.locking.PessimisticLockingInterceptor@6d483c77}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@2179e0ae, TO=org.infinispan.interceptors.EntryWrappingInterceptor@2179e0ae, PB=org.infinispan.interceptors.EntryWrappingInterceptor@2179e0ae}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:48,985 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.CacheImpl] Started cache test on null
2013-01-31 13:15:48,986 INFO  (testng-CacheAPIPessimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testConcurrentMapMethods(org.infinispan.api.mvcc.repeatable_read.CacheAPIPessimisticTest)
2013-01-31 13:15:48,986 INFO  (testng-ReadCommittedLockTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:49,001 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:49,033 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:49,035 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:49,044 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 11
2013-01-31 13:15:49,044 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@56e57a1e}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@73b47423}
	>> org.infinispan.interceptors.TxInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@4c34e12d}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@23ab7871, PB=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@23ab7871}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@4e705502, TO=org.infinispan.interceptors.EntryWrappingInterceptor@4e705502, PB=org.infinispan.interceptors.EntryWrappingInterceptor@4e705502}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:49,054 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.CacheImpl] Started cache ___defaultcache on null
2013-01-31 13:15:49,054 INFO  (testng-ReadCommittedLockTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testLocksOnEvictNonexistent(org.infinispan.api.mvcc.read_committed.ReadCommittedLockTest)
2013-01-31 13:15:49,054 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction DummyTransaction{xid=DummyXid{id=3}, status=0} is starting. check if switch is in progress...
2013-01-31 13:15:49,054 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-ReadCommittedLockTest] will wait until no switch is in progress
2013-01-31 13:15:49,054 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-ReadCommittedLockTest] no switch in progress. Moving on...
2013-01-31 13:15:49,054 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction DummyTransaction{xid=DummyXid{id=3}, status=0} will use 2PC while executing
2013-01-31 13:15:49,055 ERROR (testng-ReadCommittedLockTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Method testLocksOnEvictNonexistent(org.infinispan.api.mvcc.read_committed.ReadCommittedLockTest) threw an exception
java.lang.AssertionError: Stale locks exist! NumLocksHeld is 1 and lock info is org.infinispan.util.concurrent.locks.containers.OwnableReentrantPerEntryLockContainer@31bd13b6
	at org.infinispan.api.mvcc.LockAssert.assertNoLocks(LockAssert.java:48)
	at org.infinispan.api.mvcc.LockTestBase.assertNoLocks(LockTestBase.java:102)
	at org.infinispan.api.mvcc.LockTestBase.testLocksOnEvictNonexistent(LockTestBase.java:200)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:49,060 ERROR (testng-ReadCommittedLockTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test failed testLocksOnEvictNonexistent(org.infinispan.api.mvcc.read_committed.ReadCommittedLockTest)
java.lang.AssertionError: Stale locks exist! NumLocksHeld is 1 and lock info is org.infinispan.util.concurrent.locks.containers.OwnableReentrantPerEntryLockContainer@31bd13b6
	at org.infinispan.api.mvcc.LockAssert.assertNoLocks(LockAssert.java:48)
	at org.infinispan.api.mvcc.LockTestBase.assertNoLocks(LockTestBase.java:102)
	at org.infinispan.api.mvcc.LockTestBase.testLocksOnEvictNonexistent(LockTestBase.java:200)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:49,071 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.api.mvcc.LockTestBase] **** - STARTING TEARDOWN - ****
2013-01-31 13:15:49,071 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on null
2013-01-31 13:15:49,072 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 1 seconds.
2013-01-31 13:15:49,072 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:49,072 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.manager.DefaultCacheManager] Stopping cache manager ISPN on null
2013-01-31 13:15:49,072 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on null
2013-01-31 13:15:49,074 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:49,079 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:49,080 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:49,095 INFO  (testng-ReadCommittedLockTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:49,111 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:9 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,112 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,112 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,112 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:9 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,108 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:5 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,107 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:6 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,115 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIMVCCTest] will wait until no switch is in progress
2013-01-31 13:15:49,115 DEBUG (testng-LazyCacheAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-LazyCacheAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:8 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,115 DEBUG (testng-LazyCacheAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-LazyCacheAPITest] will wait until no switch is in progress
2013-01-31 13:15:49,115 DEBUG (testng-LazyCacheAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-LazyCacheAPITest] no switch in progress. Moving on...
2013-01-31 13:15:49,115 DEBUG (testng-LazyCacheAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-LazyCacheAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:8 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,108 DEBUG (testng-BatchWithoutTMTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-BatchWithoutTMTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:2 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,116 DEBUG (testng-BatchWithoutTMTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-BatchWithoutTMTest] will wait until no switch is in progress
2013-01-31 13:15:49,116 DEBUG (testng-BatchWithoutTMTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-BatchWithoutTMTest] no switch in progress. Moving on...
2013-01-31 13:15:49,116 DEBUG (testng-BatchWithoutTMTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-BatchWithoutTMTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:2 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,115 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,118 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,118 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:5 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,108 DEBUG (testng-BatchWithTMTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-BatchWithTMTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:3 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,118 DEBUG (testng-BatchWithTMTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-BatchWithTMTest] will wait until no switch is in progress
2013-01-31 13:15:49,118 DEBUG (testng-BatchWithTMTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-BatchWithTMTest] no switch in progress. Moving on...
2013-01-31 13:15:49,118 DEBUG (testng-BatchWithTMTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-BatchWithTMTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:3 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,115 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIMVCCTest] no switch in progress. Moving on...
2013-01-31 13:15:49,118 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:6 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,112 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:4 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,118 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,118 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,119 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:4 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,109 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:7 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,119 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,119 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,119 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:7 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,201 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:49,202 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:49,202 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:7 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:5 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,202 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:7 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,203 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:13 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,203 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,203 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,203 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:2 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:9 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,203 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:13 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,203 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:2 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,203 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:9 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:13 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,203 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:9 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,204 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:17 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,204 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,204 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:18 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,204 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,204 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,204 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:18 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,204 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:10 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:18 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,204 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:10 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,204 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:1c status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,204 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,204 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,205 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:1c status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,205 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:11 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:1c status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,205 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:11 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,205 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:20 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,205 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,205 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,205 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:20 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,205 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:12 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:20 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,205 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:12 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,207 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:24 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,207 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,207 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,207 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:24 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,207 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:13 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:24 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,207 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:13 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,207 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:28 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,207 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,207 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,207 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:28 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,208 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:14 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:28 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,208 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:14 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,208 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:2c status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,208 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,208 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,208 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:2c status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,208 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:15 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:2c status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,208 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:15 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,209 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:30 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,209 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,209 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,209 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:30 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,209 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:16 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:30 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,209 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:16 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,209 INFO  (testng-CacheAPIOptimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testConcurrentMapMethods(org.infinispan.api.mvcc.read_committed.CacheAPIOptimisticTest).
2013-01-31 13:15:49,210 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:49,210 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [A=X]
2013-01-31 13:15:49,210 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:49,210 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:49,210 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:49,210 INFO  (testng-CacheAPIOptimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testConvenienceMethods(org.infinispan.api.mvcc.read_committed.CacheAPIOptimisticTest)
2013-01-31 13:15:49,211 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:34 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,211 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,211 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,211 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:34 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,211 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:17 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:34 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,211 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:17 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,211 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:38 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,211 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,211 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,204 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,212 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:17 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,212 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:18 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:17 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,212 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:18 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,212 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:3c status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,212 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,212 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,212 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:3c status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,212 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:19 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:3c status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,212 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:19 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,213 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:40 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,213 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,213 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,213 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:40 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,213 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:20 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:40 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,213 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:20 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,213 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:44 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,213 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,214 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,214 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:44 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,214 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:21 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:44 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,214 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:21 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,214 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:48 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,214 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,214 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,214 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:48 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,214 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:22 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:48 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,214 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:22 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,215 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:4c status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,215 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,215 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,215 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:4c status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,215 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:23 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:4c status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,215 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:23 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,215 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:50 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,215 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,215 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,215 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:50 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,216 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:24 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:50 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,216 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:24 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,216 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:54 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,216 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,216 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,216 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:54 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,216 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:25 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:54 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,216 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:25 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,217 INFO  (testng-CacheAPIOptimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testConcurrentMapMethods(org.infinispan.api.mvcc.repeatable_read.CacheAPIOptimisticTest).
2013-01-31 13:15:49,217 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:49,217 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [A=X]
2013-01-31 13:15:49,217 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:49,217 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:49,217 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:49,218 INFO  (testng-CacheAPIOptimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testConvenienceMethods(org.infinispan.api.mvcc.repeatable_read.CacheAPIOptimisticTest)
2013-01-31 13:15:49,218 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:58 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,218 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,218 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,218 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:58 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,218 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:26 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:58 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,218 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:26 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,219 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:5c status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,219 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,219 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,219 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:5c status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,219 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:27 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:5c status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,219 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:27 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,219 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:60 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,219 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,219 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,219 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:60 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,220 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:28 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:60 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,221 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:28 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,212 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:38 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,222 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:29 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:38 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,222 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:29 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,222 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:67 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,222 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,222 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,222 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:67 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,223 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:30 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:67 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,223 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:30 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,224 INFO  (testng-CacheAPIOptimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testConvenienceMethods(org.infinispan.api.mvcc.repeatable_read.CacheAPIOptimisticTest).
2013-01-31 13:15:49,224 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:49,225 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [key=value]
2013-01-31 13:15:49,225 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:49,225 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:49,226 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:49,225 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:4 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:4 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,226 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:4 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,226 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:74 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,226 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,226 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,227 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:74 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,227 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:31 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:74 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,227 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:31 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,227 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:78 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,227 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,227 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,227 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:78 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,227 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:32 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:78 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,228 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:32 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,228 INFO  (testng-CacheAPIOptimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testEvict(org.infinispan.api.mvcc.repeatable_read.CacheAPIOptimisticTest)
2013-01-31 13:15:49,228 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:7c status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,228 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,228 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,228 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:7c status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,228 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction null:5 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:6 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,228 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction null:5 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,225 INFO  (testng-CacheAPIOptimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testConvenienceMethods(org.infinispan.api.mvcc.read_committed.CacheAPIOptimisticTest).
2013-01-31 13:15:49,229 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:49,229 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [key=value]
2013-01-31 13:15:49,229 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:49,229 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:49,230 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:49,224 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:3 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:7 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,230 INFO  (testng-CacheAPIOptimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testEvict(org.infinispan.api.mvcc.read_committed.CacheAPIOptimisticTest)
2013-01-31 13:15:49,229 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:84 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,230 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIMVCCTest] will wait until no switch is in progress
2013-01-31 13:15:49,230 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIMVCCTest] no switch in progress. Moving on...
2013-01-31 13:15:49,230 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:84 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,230 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction null:34 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:84 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,230 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction null:34 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,231 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:89 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,231 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIMVCCTest] will wait until no switch is in progress
2013-01-31 13:15:49,231 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIMVCCTest] no switch in progress. Moving on...
2013-01-31 13:15:49,231 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:89 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,231 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction null:35 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:89 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,231 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction null:35 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,231 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:8d status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,231 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIMVCCTest] will wait until no switch is in progress
2013-01-31 13:15:49,231 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIMVCCTest] no switch in progress. Moving on...
2013-01-31 13:15:49,231 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:8d status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,232 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction null:36 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:8d status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,232 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction null:36 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,232 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:91 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,232 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIMVCCTest] will wait until no switch is in progress
2013-01-31 13:15:49,232 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIMVCCTest] no switch in progress. Moving on...
2013-01-31 13:15:49,232 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:91 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,232 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction null:37 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:91 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,232 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction null:37 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,233 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:95 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,233 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIMVCCTest] will wait until no switch is in progress
2013-01-31 13:15:49,233 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIMVCCTest] no switch in progress. Moving on...
2013-01-31 13:15:49,233 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:95 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,233 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction null:38 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:95 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,233 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction null:38 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,233 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:99 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,233 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIMVCCTest] will wait until no switch is in progress
2013-01-31 13:15:49,233 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIMVCCTest] no switch in progress. Moving on...
2013-01-31 13:15:49,233 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:99 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,233 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction null:39 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:99 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,234 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction null:39 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,234 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:9d status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,234 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIMVCCTest] will wait until no switch is in progress
2013-01-31 13:15:49,234 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIMVCCTest] no switch in progress. Moving on...
2013-01-31 13:15:49,234 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:9d status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,234 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction null:40 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:9d status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,234 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction null:40 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,234 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:a1 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,234 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIMVCCTest] will wait until no switch is in progress
2013-01-31 13:15:49,234 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIMVCCTest] no switch in progress. Moving on...
2013-01-31 13:15:49,235 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:a1 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,235 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction null:41 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:a1 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,235 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction null:41 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,235 INFO  (testng-CacheAPIMVCCTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testConcurrentMapMethods(org.infinispan.api.lru.read_committed.CacheAPIMVCCTest).
2013-01-31 13:15:49,236 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:49,228 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:33 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:7c status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,236 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:33 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,236 DEBUG (Thread-27) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [Thread-27] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:a5 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,228 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:7d status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,236 DEBUG (Thread-27) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [Thread-27] will wait until no switch is in progress
2013-01-31 13:15:49,236 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:a6 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,231 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:49,230 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:85 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,237 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,237 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,237 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:85 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,237 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:42 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:85 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,237 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:42 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,237 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:aa status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,237 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,237 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,237 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:aa status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,238 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:43 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:aa status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,238 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:43 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,244 INFO  (testng-CacheAPIOptimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testEvict(org.infinispan.api.mvcc.read_committed.CacheAPIOptimisticTest).
2013-01-31 13:15:49,245 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:49,245 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == []
2013-01-31 13:15:49,245 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:49,245 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:49,245 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:49,246 INFO  (testng-CacheAPIOptimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testImmutabilityOfKeyValueEntryCollections(org.infinispan.api.mvcc.read_committed.CacheAPIOptimisticTest)
2013-01-31 13:15:49,246 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:ae status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,249 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 11
2013-01-31 13:15:49,249 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@4bea06e1}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@7169c4b6}
	>> org.infinispan.interceptors.TxInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@56f1c2e5}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@1a3274fb, PB=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@1a3274fb}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@669e182c, TO=org.infinispan.interceptors.EntryWrappingInterceptor@669e182c, PB=org.infinispan.interceptors.EntryWrappingInterceptor@669e182c}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:49,230 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:3 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,250 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:af status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,250 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,250 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,250 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:af status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,250 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:44 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:af status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,250 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:44 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,250 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:b3 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,251 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,251 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,251 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:b3 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,251 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:45 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:b3 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,251 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:45 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,252 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:b7 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,252 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,274 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,274 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:ae status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,274 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:46 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:ae status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,274 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:46 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,237 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,275 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,275 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:a6 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,275 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:47 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:a6 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,275 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:47 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,275 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:be status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,275 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,275 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,276 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:be status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,276 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:48 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:be status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,276 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:48 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,276 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:c2 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,276 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,276 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,276 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:c2 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,276 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:49 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:c2 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,276 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:49 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,277 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:c6 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,277 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,277 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,277 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:c6 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,277 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:50 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:c6 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,277 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:50 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,277 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:ca status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,277 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,277 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,277 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:ca status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,278 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:51 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:ca status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,278 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:51 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,278 INFO  (testng-CacheAPIPessimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testConcurrentMapMethods(org.infinispan.api.mvcc.read_committed.CacheAPIPessimisticTest).
2013-01-31 13:15:49,278 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:49,278 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [A=X]
2013-01-31 13:15:49,278 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:49,278 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:49,279 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:49,279 INFO  (testng-CacheAPIPessimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testConvenienceMethods(org.infinispan.api.mvcc.read_committed.CacheAPIPessimisticTest)
2013-01-31 13:15:49,279 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:ce status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,279 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,279 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,279 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:ce status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,280 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:52 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:ce status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,280 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:52 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,280 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:d2 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,280 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,280 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,280 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:d2 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,280 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:53 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:d2 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,280 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:53 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,281 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:d6 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,281 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,281 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,281 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:d6 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,283 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:54 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:d6 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,283 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:54 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,284 INFO  (testng-CacheAPIPessimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testConvenienceMethods(org.infinispan.api.mvcc.read_committed.CacheAPIPessimisticTest).
2013-01-31 13:15:49,284 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:49,284 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [key=value]
2013-01-31 13:15:49,284 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:49,284 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:49,284 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:49,286 INFO  (testng-CacheAPIPessimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testEvict(org.infinispan.api.mvcc.read_committed.CacheAPIPessimisticTest)
2013-01-31 13:15:49,290 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:da status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,291 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,291 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,291 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:da status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,237 DEBUG (Thread-27) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [Thread-27] no switch in progress. Moving on...
2013-01-31 13:15:49,292 INFO  (testng-CacheAPIOptimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testImmutabilityOfKeyValueEntryCollections(org.infinispan.api.mvcc.read_committed.CacheAPIOptimisticTest).
2013-01-31 13:15:49,293 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:49,293 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [1=one, 3=three, 2=two]
2013-01-31 13:15:49,293 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:49,293 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:49,293 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:49,293 INFO  (testng-CacheAPIOptimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testKeyValueEntryCollections(org.infinispan.api.mvcc.read_committed.CacheAPIOptimisticTest)
2013-01-31 13:15:49,293 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:de status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,293 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,293 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,294 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:de status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,294 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:56 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:de status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,294 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:56 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,236 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,297 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,297 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:7d status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,297 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:57 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:7d status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,298 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:57 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,298 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:e5 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,298 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,298 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,298 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:e5 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,298 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:58 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:e5 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,298 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:58 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,299 DEBUG (Thread-28) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [Thread-28] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:e9 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,297 DEBUG (Thread-27) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [Thread-27] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:a5 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,304 DEBUG (Thread-27) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [Thread-27] local transaction null:59 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:a5 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,304 DEBUG (Thread-27) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [Thread-27] local transaction null:59 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,296 INFO  (testng-CacheAPIOptimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testKeyValueEntryCollections(org.infinispan.api.mvcc.read_committed.CacheAPIOptimisticTest).
2013-01-31 13:15:49,296 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:55 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:da status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,312 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:55 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,313 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:ed status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,313 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,313 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,313 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:ed status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,313 INFO  (testng-CacheAPIOptimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testEvict(org.infinispan.api.mvcc.repeatable_read.CacheAPIOptimisticTest).
2013-01-31 13:15:49,313 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:60 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:ed status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,313 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:60 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,272 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.CacheImpl] Started cache ___defaultcache on null
2013-01-31 13:15:49,252 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,300 DEBUG (Thread-28) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [Thread-28] will wait until no switch is in progress
2013-01-31 13:15:49,313 DEBUG (Thread-28) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [Thread-28] no switch in progress. Moving on...
2013-01-31 13:15:49,313 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,314 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:b7 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,314 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:61 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:b7 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,314 INFO  (testng-CacheAPIPessimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testEvict(org.infinispan.api.mvcc.read_committed.CacheAPIPessimisticTest).
2013-01-31 13:15:49,314 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:61 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,315 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:f4 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,315 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,315 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,315 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:f4 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,315 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:62 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:f4 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,315 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:62 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,316 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:f8 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,319 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [A=X]
2013-01-31 13:15:49,316 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,340 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,340 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:f8 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,340 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:63 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:f8 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,340 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:63 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,339 DEBUG (Thread-28) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [Thread-28] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:e9 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,341 DEBUG (Thread-28) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [Thread-28] local transaction null:64 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:e9 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,341 DEBUG (Thread-28) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [Thread-28] local transaction null:64 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,341 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:ff status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,341 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,340 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:49,341 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == []
2013-01-31 13:15:49,341 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:49,342 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:49,342 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:49,340 INFO  (testng-ReadCommittedLockTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testLocksOnPutData(org.infinispan.api.mvcc.read_committed.ReadCommittedLockTest)
2013-01-31 13:15:49,342 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction DummyTransaction{xid=DummyXid{id=4}, status=0} is starting. check if switch is in progress...
2013-01-31 13:15:49,342 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-ReadCommittedLockTest] will wait until no switch is in progress
2013-01-31 13:15:49,342 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-ReadCommittedLockTest] no switch in progress. Moving on...
2013-01-31 13:15:49,342 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction DummyTransaction{xid=DummyXid{id=4}, status=0} will use 2PC while executing
2013-01-31 13:15:49,342 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction null:65 [DummyTransaction{xid=DummyXid{id=4}, status=7}] wants to commit
2013-01-31 13:15:49,339 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:49,342 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == []
2013-01-31 13:15:49,343 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:49,341 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,343 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:49,343 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:49,343 INFO  (testng-CacheAPIPessimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testImmutabilityOfKeyValueEntryCollections(org.infinispan.api.mvcc.read_committed.CacheAPIPessimisticTest)
2013-01-31 13:15:49,343 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:100 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,343 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,343 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,343 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:100 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,344 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:66 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:100 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,344 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:66 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,344 INFO  (testng-CacheAPIPessimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testImmutabilityOfKeyValueEntryCollections(org.infinispan.api.mvcc.read_committed.CacheAPIPessimisticTest).
2013-01-31 13:15:49,345 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:49,345 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [1=one, 3=three, 2=two]
2013-01-31 13:15:49,345 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:49,343 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:ff status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,345 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:67 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:ff status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,345 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:67 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,346 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:107 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,346 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,346 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,346 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:107 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,346 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:68 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:107 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,346 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:68 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,346 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:10b status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,346 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,346 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,346 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:10b status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,347 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:69 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:10b status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,347 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:69 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,347 INFO  (testng-CacheAPIPessimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testConcurrentMapMethods(org.infinispan.api.mvcc.repeatable_read.CacheAPIPessimisticTest).
2013-01-31 13:15:49,347 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:49,347 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [A=X]
2013-01-31 13:15:49,347 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:49,347 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:49,347 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:49,348 INFO  (testng-CacheAPIPessimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testConvenienceMethods(org.infinispan.api.mvcc.repeatable_read.CacheAPIPessimisticTest)
2013-01-31 13:15:49,348 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:10f status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,348 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,348 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,348 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:10f status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,348 INFO  (testng-CacheAPIOptimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testImmutabilityOfKeyValueEntryCollections(org.infinispan.api.mvcc.repeatable_read.CacheAPIOptimisticTest)
2013-01-31 13:15:49,349 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:113 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,349 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,349 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,349 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:113 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,349 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:71 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:113 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,349 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:71 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,350 INFO  (testng-CacheAPIOptimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testImmutabilityOfKeyValueEntryCollections(org.infinispan.api.mvcc.repeatable_read.CacheAPIOptimisticTest).
2013-01-31 13:15:49,350 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:49,350 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [1=one, 3=three, 2=two]
2013-01-31 13:15:49,350 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:49,350 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:49,350 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:49,345 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:49,351 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:49,351 INFO  (testng-CacheAPIPessimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testKeyValueEntryCollections(org.infinispan.api.mvcc.read_committed.CacheAPIPessimisticTest)
2013-01-31 13:15:49,351 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:117 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,351 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,351 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,351 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:117 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,351 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:72 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:117 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,351 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:72 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,352 INFO  (testng-CacheAPIPessimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testKeyValueEntryCollections(org.infinispan.api.mvcc.read_committed.CacheAPIPessimisticTest).
2013-01-31 13:15:49,352 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:49,352 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [1=one, 3=three, 2=two]
2013-01-31 13:15:49,352 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:49,353 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:49,353 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:49,353 INFO  (testng-CacheAPIPessimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testNullKeyParameter(org.infinispan.api.mvcc.read_committed.CacheAPIPessimisticTest)
2013-01-31 13:15:49,353 ERROR (testng-CacheAPIPessimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Method testNullKeyParameter(org.infinispan.api.mvcc.read_committed.CacheAPIPessimisticTest) threw an exception
java.lang.NullPointerException: Null keys are not supported!
	at org.infinispan.CacheImpl.assertKeyNotNull(CacheImpl.java:197)
	at org.infinispan.CacheImpl.assertKeyValueNotNull(CacheImpl.java:202)
	at org.infinispan.CacheImpl.put(CacheImpl.java:700)
	at org.infinispan.CacheImpl.put(CacheImpl.java:695)
	at org.infinispan.CacheSupport.put(CacheSupport.java:53)
	at org.infinispan.api.APINonTxTest.testNullKeyParameter(APINonTxTest.java:342)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:49,358 INFO  (testng-CacheAPIPessimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testNullKeyParameter(org.infinispan.api.mvcc.read_committed.CacheAPIPessimisticTest).
2013-01-31 13:15:49,358 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:49,358 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == []
2013-01-31 13:15:49,358 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:49,358 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:49,358 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:49,359 INFO  (testng-CacheAPIPessimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testNullValueParameter(org.infinispan.api.mvcc.read_committed.CacheAPIPessimisticTest)
2013-01-31 13:15:49,359 ERROR (testng-CacheAPIPessimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Method testNullValueParameter(org.infinispan.api.mvcc.read_committed.CacheAPIPessimisticTest) threw an exception
java.lang.NullPointerException: Null values are not supported!
	at org.infinispan.CacheImpl.assertKeyValueNotNull(CacheImpl.java:204)
	at org.infinispan.CacheImpl.put(CacheImpl.java:700)
	at org.infinispan.CacheImpl.put(CacheImpl.java:695)
	at org.infinispan.CacheSupport.put(CacheSupport.java:53)
	at org.infinispan.api.APINonTxTest.testNullValueParameter(APINonTxTest.java:347)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:49,360 INFO  (testng-CacheAPIPessimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testNullValueParameter(org.infinispan.api.mvcc.read_committed.CacheAPIPessimisticTest).
2013-01-31 13:15:49,361 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:49,361 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == []
2013-01-31 13:15:49,361 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:49,361 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:49,361 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:49,361 INFO  (testng-CacheAPIPessimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testSizeAndContents(org.infinispan.api.mvcc.read_committed.CacheAPIPessimisticTest)
2013-01-31 13:15:49,362 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:11c status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,362 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,362 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,362 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:11c status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,362 DEBUG (Thread-29) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [Thread-29] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:11d status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,362 DEBUG (Thread-29) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [Thread-29] will wait until no switch is in progress
2013-01-31 13:15:49,362 DEBUG (Thread-29) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [Thread-29] no switch in progress. Moving on...
2013-01-31 13:15:49,362 DEBUG (Thread-29) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [Thread-29] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:11d status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,362 DEBUG (Thread-29) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [Thread-29] local transaction null:74 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:11d status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,362 DEBUG (Thread-29) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [Thread-29] local transaction null:74 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,350 INFO  (testng-CacheAPIOptimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testKeyValueEntryCollections(org.infinispan.api.mvcc.repeatable_read.CacheAPIOptimisticTest)
2013-01-31 13:15:49,366 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:124 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,366 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,366 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,366 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:124 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,366 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:75 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:124 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,366 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:75 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,367 INFO  (testng-CacheAPIOptimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testKeyValueEntryCollections(org.infinispan.api.mvcc.repeatable_read.CacheAPIOptimisticTest).
2013-01-31 13:15:49,349 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:70 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:10f status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,367 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:70 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,367 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:49,367 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [1=one, 3=three, 2=two]
2013-01-31 13:15:49,367 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:49,367 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:49,368 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:128 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,368 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,368 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,368 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:128 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,368 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:76 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:128 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,368 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:76 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,368 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:12c status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,368 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,368 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,369 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:12c status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,369 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:77 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:12c status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,369 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:77 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,369 INFO  (testng-CacheAPIPessimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testConvenienceMethods(org.infinispan.api.mvcc.repeatable_read.CacheAPIPessimisticTest).
2013-01-31 13:15:49,370 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:49,370 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [key=value]
2013-01-31 13:15:49,370 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:49,370 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:49,370 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:49,370 INFO  (testng-CacheAPIPessimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testEvict(org.infinispan.api.mvcc.repeatable_read.CacheAPIPessimisticTest)
2013-01-31 13:15:49,370 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:130 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,370 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,370 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,370 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:130 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,371 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:78 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:130 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,371 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:78 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,371 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:134 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,371 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,371 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,371 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:134 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,371 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:79 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:134 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,371 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:79 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,372 INFO  (testng-CacheAPIPessimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testEvict(org.infinispan.api.mvcc.repeatable_read.CacheAPIPessimisticTest).
2013-01-31 13:15:49,373 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:49,373 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == []
2013-01-31 13:15:49,373 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:49,373 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:49,373 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:49,373 INFO  (testng-CacheAPIPessimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testImmutabilityOfKeyValueEntryCollections(org.infinispan.api.mvcc.repeatable_read.CacheAPIPessimisticTest)
2013-01-31 13:15:49,373 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:138 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,373 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,374 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,374 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:138 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,374 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:80 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:138 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,374 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:80 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,374 INFO  (testng-CacheAPIPessimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testImmutabilityOfKeyValueEntryCollections(org.infinispan.api.mvcc.repeatable_read.CacheAPIPessimisticTest).
2013-01-31 13:15:49,377 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:49,346 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction null:65 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,377 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [1=one, 3=three, 2=two]
2013-01-31 13:15:49,377 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:49,377 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:49,377 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:49,368 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:49,382 INFO  (testng-CacheAPIOptimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testNullKeyParameter(org.infinispan.api.mvcc.repeatable_read.CacheAPIOptimisticTest)
2013-01-31 13:15:49,362 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:73 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:11c status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,382 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:73 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,383 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:13c status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,383 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,383 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,383 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:13c status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,384 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:81 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:13c status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,384 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:81 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,384 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:140 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,384 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,384 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,384 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:140 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,385 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:82 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:140 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,385 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:82 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,385 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:144 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,385 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,386 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,386 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:144 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,386 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:83 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:144 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,387 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:83 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,387 INFO  (testng-CacheAPIPessimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testSizeAndContents(org.infinispan.api.mvcc.read_committed.CacheAPIPessimisticTest).
2013-01-31 13:15:49,354 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:49,387 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:49,388 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:49,388 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:49,388 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [1=newvalue, 3=three, 4=four, 2=two]
2013-01-31 13:15:49,393 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:49,393 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:49,393 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:49,394 INFO  (testng-CacheAPIPessimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testStopClearsData(org.infinispan.api.mvcc.read_committed.CacheAPIPessimisticTest)
2013-01-31 13:15:49,394 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:148 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,394 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,394 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,394 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:148 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,394 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:84 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:148 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,395 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:84 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,395 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.CacheImpl] Stopping cache test on null
2013-01-31 13:15:49,395 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 30 seconds.
2013-01-31 13:15:49,395 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:49,354 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:49,353 DEBUG (Thread-30) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [Thread-30] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:11b status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,397 DEBUG (Thread-30) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [Thread-30] will wait until no switch is in progress
2013-01-31 13:15:49,397 DEBUG (Thread-30) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [Thread-30] no switch in progress. Moving on...
2013-01-31 13:15:49,397 DEBUG (Thread-30) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [Thread-30] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:11b status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,397 DEBUG (Thread-30) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [Thread-30] local transaction null:85 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:11b status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,397 DEBUG (Thread-30) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [Thread-30] local transaction null:85 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,401 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [1=one, 3=three, 2=two]
2013-01-31 13:15:49,403 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:49,403 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:49,403 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:49,388 ERROR (testng-CacheAPIOptimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Method testNullKeyParameter(org.infinispan.api.mvcc.repeatable_read.CacheAPIOptimisticTest) threw an exception
java.lang.NullPointerException: Null keys are not supported!
	at org.infinispan.CacheImpl.assertKeyNotNull(CacheImpl.java:197)
	at org.infinispan.CacheImpl.assertKeyValueNotNull(CacheImpl.java:202)
	at org.infinispan.CacheImpl.put(CacheImpl.java:700)
	at org.infinispan.CacheImpl.put(CacheImpl.java:695)
	at org.infinispan.CacheSupport.put(CacheSupport.java:53)
	at org.infinispan.api.APINonTxTest.testNullKeyParameter(APINonTxTest.java:342)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:49,415 INFO  (testng-CacheAPIOptimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testNullKeyParameter(org.infinispan.api.mvcc.repeatable_read.CacheAPIOptimisticTest).
2013-01-31 13:15:49,388 INFO  (testng-CacheAPIMVCCTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testConvenienceMethods(org.infinispan.api.lru.read_committed.CacheAPIMVCCTest)
2013-01-31 13:15:49,381 ERROR (testng-ReadCommittedLockTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Method testLocksOnPutData(org.infinispan.api.mvcc.read_committed.ReadCommittedLockTest) threw an exception
java.lang.AssertionError: Stale locks exist! NumLocksHeld is 1 and lock info is org.infinispan.util.concurrent.locks.containers.OwnableReentrantPerEntryLockContainer@67590474
	at org.infinispan.api.mvcc.LockAssert.assertNoLocks(LockAssert.java:48)
	at org.infinispan.api.mvcc.LockTestBase.assertNoLocks(LockTestBase.java:102)
	at org.infinispan.api.mvcc.LockTestBase.testLocksOnPutData(LockTestBase.java:145)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:49,416 ERROR (testng-ReadCommittedLockTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test failed testLocksOnPutData(org.infinispan.api.mvcc.read_committed.ReadCommittedLockTest)
java.lang.AssertionError: Stale locks exist! NumLocksHeld is 1 and lock info is org.infinispan.util.concurrent.locks.containers.OwnableReentrantPerEntryLockContainer@67590474
	at org.infinispan.api.mvcc.LockAssert.assertNoLocks(LockAssert.java:48)
	at org.infinispan.api.mvcc.LockTestBase.assertNoLocks(LockTestBase.java:102)
	at org.infinispan.api.mvcc.LockTestBase.testLocksOnPutData(LockTestBase.java:145)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:49,425 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.api.mvcc.LockTestBase] **** - STARTING TEARDOWN - ****
2013-01-31 13:15:49,425 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on null
2013-01-31 13:15:49,425 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 1 seconds.
2013-01-31 13:15:49,425 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:49,426 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.manager.DefaultCacheManager] Stopping cache manager ISPN on null
2013-01-31 13:15:49,426 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on null
2013-01-31 13:15:49,381 INFO  (testng-CacheAPIPessimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testKeyValueEntryCollections(org.infinispan.api.mvcc.repeatable_read.CacheAPIPessimisticTest)
2013-01-31 13:15:49,431 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:14f status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,431 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,431 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,431 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:14f status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,432 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:86 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:14f status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,432 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:86 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,432 INFO  (testng-CacheAPIPessimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testKeyValueEntryCollections(org.infinispan.api.mvcc.repeatable_read.CacheAPIPessimisticTest).
2013-01-31 13:15:49,433 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:49,433 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [1=one, 3=three, 2=two]
2013-01-31 13:15:49,438 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:49,438 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:49,446 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:49,460 INFO  (testng-CacheAPIPessimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testNullKeyParameter(org.infinispan.api.mvcc.repeatable_read.CacheAPIPessimisticTest)
2013-01-31 13:15:49,460 ERROR (testng-CacheAPIPessimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Method testNullKeyParameter(org.infinispan.api.mvcc.repeatable_read.CacheAPIPessimisticTest) threw an exception
java.lang.NullPointerException: Null keys are not supported!
	at org.infinispan.CacheImpl.assertKeyNotNull(CacheImpl.java:197)
	at org.infinispan.CacheImpl.assertKeyValueNotNull(CacheImpl.java:202)
	at org.infinispan.CacheImpl.put(CacheImpl.java:700)
	at org.infinispan.CacheImpl.put(CacheImpl.java:695)
	at org.infinispan.CacheSupport.put(CacheSupport.java:53)
	at org.infinispan.api.APINonTxTest.testNullKeyParameter(APINonTxTest.java:342)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:49,462 INFO  (testng-CacheAPIPessimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testNullKeyParameter(org.infinispan.api.mvcc.repeatable_read.CacheAPIPessimisticTest).
2013-01-31 13:15:49,463 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:49,463 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == []
2013-01-31 13:15:49,463 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:49,463 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:49,463 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:49,415 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:49,413 DEBUG (testng-BatchWithoutTMTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-BatchWithoutTMTest] local transaction null:8 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:2 status: ActionStatus.ABORTING >] wants to rollback
2013-01-31 13:15:49,413 DEBUG (testng-BatchWithTMTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-BatchWithTMTest] local transaction null:6 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:3 status: ActionStatus.ABORTING >] wants to rollback
2013-01-31 13:15:49,404 INFO  (testng-CacheAPIOptimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testNullKeyParameter(org.infinispan.api.mvcc.read_committed.CacheAPIOptimisticTest)
2013-01-31 13:15:49,464 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == []
2013-01-31 13:15:49,464 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:49,464 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:49,464 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:49,464 INFO  (testng-CacheAPIOptimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testNullValueParameter(org.infinispan.api.mvcc.repeatable_read.CacheAPIOptimisticTest)
2013-01-31 13:15:49,464 ERROR (testng-CacheAPIOptimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Method testNullValueParameter(org.infinispan.api.mvcc.repeatable_read.CacheAPIOptimisticTest) threw an exception
java.lang.NullPointerException: Null values are not supported!
	at org.infinispan.CacheImpl.assertKeyValueNotNull(CacheImpl.java:204)
	at org.infinispan.CacheImpl.put(CacheImpl.java:700)
	at org.infinispan.CacheImpl.put(CacheImpl.java:695)
	at org.infinispan.CacheSupport.put(CacheSupport.java:53)
	at org.infinispan.api.APINonTxTest.testNullValueParameter(APINonTxTest.java:347)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:49,471 INFO  (testng-CacheAPIOptimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testNullValueParameter(org.infinispan.api.mvcc.repeatable_read.CacheAPIOptimisticTest).
2013-01-31 13:15:49,471 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:49,471 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == []
2013-01-31 13:15:49,472 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:49,472 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:49,472 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:49,472 INFO  (testng-CacheAPIOptimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testSizeAndContents(org.infinispan.api.mvcc.repeatable_read.CacheAPIOptimisticTest)
2013-01-31 13:15:49,473 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:157 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,473 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,473 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,473 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:157 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,473 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:88 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:157 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,473 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:88 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,474 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:15b status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,474 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,474 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,475 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:15b status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,475 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:89 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:15b status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,475 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:89 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,476 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:160 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,476 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,476 INFO  (testng-CacheAPIPessimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testNullValueParameter(org.infinispan.api.mvcc.repeatable_read.CacheAPIPessimisticTest)
2013-01-31 13:15:49,477 ERROR (testng-CacheAPIPessimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Method testNullValueParameter(org.infinispan.api.mvcc.repeatable_read.CacheAPIPessimisticTest) threw an exception
java.lang.NullPointerException: Null values are not supported!
	at org.infinispan.CacheImpl.assertKeyValueNotNull(CacheImpl.java:204)
	at org.infinispan.CacheImpl.put(CacheImpl.java:700)
	at org.infinispan.CacheImpl.put(CacheImpl.java:695)
	at org.infinispan.CacheSupport.put(CacheSupport.java:53)
	at org.infinispan.api.APINonTxTest.testNullValueParameter(APINonTxTest.java:347)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:49,478 INFO  (testng-CacheAPIPessimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testNullValueParameter(org.infinispan.api.mvcc.repeatable_read.CacheAPIPessimisticTest).
2013-01-31 13:15:49,478 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:49,478 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == []
2013-01-31 13:15:49,478 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:49,478 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:49,478 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:49,478 INFO  (testng-CacheAPIPessimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testSizeAndContents(org.infinispan.api.mvcc.repeatable_read.CacheAPIPessimisticTest)
2013-01-31 13:15:49,479 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:162 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,479 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,479 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,479 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:162 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,479 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:90 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:162 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,479 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:90 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,480 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:166 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,480 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,480 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,480 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:166 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,480 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:91 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:166 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,480 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:91 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,480 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:16a status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,480 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,481 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,481 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:16a status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,481 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:92 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:16a status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,459 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:49,456 DEBUG (testng-LazyCacheAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-LazyCacheAPITest] local transaction null:87 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:8 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,481 DEBUG (testng-LazyCacheAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-LazyCacheAPITest] local transaction null:87 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,481 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:92 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,482 DEBUG (testng-LazyCacheAPITest) [org.infinispan.api.lazy.LazyCacheAPITest$CustomPojo] class org.infinispan.api.lazy.LazyCacheAPITest$CustomPojo
2013-01-31 13:15:49,482 DEBUG (testng-LazyCacheAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-LazyCacheAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:16e status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,482 DEBUG (testng-LazyCacheAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-LazyCacheAPITest] will wait until no switch is in progress
2013-01-31 13:15:49,482 DEBUG (testng-LazyCacheAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-LazyCacheAPITest] no switch in progress. Moving on...
2013-01-31 13:15:49,482 DEBUG (testng-LazyCacheAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-LazyCacheAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:16e status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,482 DEBUG (testng-LazyCacheAPITest) [org.infinispan.api.lazy.LazyCacheAPITest$CustomPojo] class org.infinispan.api.lazy.LazyCacheAPITest$CustomPojo
2013-01-31 13:15:49,482 DEBUG (testng-LazyCacheAPITest) [org.infinispan.api.lazy.LazyCacheAPITest$CustomPojo] class org.infinispan.api.lazy.LazyCacheAPITest$CustomPojo
2013-01-31 13:15:49,434 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:49,482 DEBUG (testng-LazyCacheAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-LazyCacheAPITest] local transaction null:93 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:16e status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,482 DEBUG (testng-LazyCacheAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-LazyCacheAPITest] local transaction null:93 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,483 DEBUG (testng-LazyCacheAPITest) [org.infinispan.api.lazy.LazyCacheAPITest$CustomPojo] class org.infinispan.api.lazy.LazyCacheAPITest$CustomPojo
2013-01-31 13:15:49,483 DEBUG (testng-LazyCacheAPITest) [org.infinispan.api.lazy.LazyCacheAPITest$CustomPojo] class org.infinispan.api.lazy.LazyCacheAPITest$CustomPojo
2013-01-31 13:15:49,483 DEBUG (testng-LazyCacheAPITest) [org.infinispan.api.lazy.LazyCacheAPITest$CustomPojo] class org.infinispan.api.lazy.LazyCacheAPITest$CustomPojo
2013-01-31 13:15:49,483 DEBUG (testng-LazyCacheAPITest) [org.infinispan.api.lazy.LazyCacheAPITest$CustomPojo] class org.infinispan.api.lazy.LazyCacheAPITest$CustomPojo
2013-01-31 13:15:49,483 DEBUG (testng-LazyCacheAPITest) [org.infinispan.api.lazy.LazyCacheAPITest$CustomPojo] class org.infinispan.api.lazy.LazyCacheAPITest$CustomPojo
2013-01-31 13:15:49,483 INFO  (testng-LazyCacheAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testReplace(org.infinispan.api.lazy.LazyCacheAPITest).
2013-01-31 13:15:49,483 DEBUG (testng-LazyCacheAPITest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'lazy-cache-test' on a non-clustered cache manager
2013-01-31 13:15:49,484 DEBUG (testng-LazyCacheAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [MarshalledValue{instance=org.infinispan.api.lazy.LazyCacheAPITest$CustomPojo@29d61dc2, serialized=false, cachedHashCode=701898178}@51351fa5=2]
2013-01-31 13:15:49,484 DEBUG (testng-LazyCacheAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:49,484 DEBUG (testng-LazyCacheAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:49,484 DEBUG (testng-LazyCacheAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:49,484 INFO  (testng-LazyCacheAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testReplaceWithOld(org.infinispan.api.lazy.LazyCacheAPITest)
2013-01-31 13:15:49,484 DEBUG (testng-LazyCacheAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-LazyCacheAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:173 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,484 DEBUG (testng-LazyCacheAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-LazyCacheAPITest] will wait until no switch is in progress
2013-01-31 13:15:49,484 DEBUG (testng-LazyCacheAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-LazyCacheAPITest] no switch in progress. Moving on...
2013-01-31 13:15:49,482 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:172 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,477 DEBUG (Thread-32) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [Thread-32] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:161 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,485 DEBUG (Thread-32) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [Thread-32] will wait until no switch is in progress
2013-01-31 13:15:49,485 DEBUG (Thread-32) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [Thread-32] no switch in progress. Moving on...
2013-01-31 13:15:49,485 DEBUG (Thread-32) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [Thread-32] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:161 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,485 DEBUG (Thread-32) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [Thread-32] local transaction null:94 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:161 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,485 DEBUG (Thread-32) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [Thread-32] local transaction null:94 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,485 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,485 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,485 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:172 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,486 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:95 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:172 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,486 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:95 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,477 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,474 DEBUG (Thread-31) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [Thread-31] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:15c status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,486 DEBUG (Thread-31) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [Thread-31] will wait until no switch is in progress
2013-01-31 13:15:49,486 DEBUG (Thread-31) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [Thread-31] no switch in progress. Moving on...
2013-01-31 13:15:49,486 DEBUG (Thread-31) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [Thread-31] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:15c status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,486 DEBUG (Thread-31) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [Thread-31] local transaction null:96 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:15c status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,487 DEBUG (Thread-31) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [Thread-31] local transaction null:96 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,467 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:156 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,487 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIMVCCTest] will wait until no switch is in progress
2013-01-31 13:15:49,487 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIMVCCTest] no switch in progress. Moving on...
2013-01-31 13:15:49,487 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:156 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,488 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:160 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,488 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:98 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:160 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,488 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:98 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,489 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:183 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,489 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,489 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,489 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:183 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,489 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:99 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:183 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,489 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:99 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,464 ERROR (testng-CacheAPIOptimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Method testNullKeyParameter(org.infinispan.api.mvcc.read_committed.CacheAPIOptimisticTest) threw an exception
java.lang.NullPointerException: Null keys are not supported!
	at org.infinispan.CacheImpl.assertKeyNotNull(CacheImpl.java:197)
	at org.infinispan.CacheImpl.assertKeyValueNotNull(CacheImpl.java:202)
	at org.infinispan.CacheImpl.put(CacheImpl.java:700)
	at org.infinispan.CacheImpl.put(CacheImpl.java:695)
	at org.infinispan.CacheSupport.put(CacheSupport.java:53)
	at org.infinispan.api.APINonTxTest.testNullKeyParameter(APINonTxTest.java:342)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:49,496 INFO  (testng-CacheAPIPessimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testSizeAndContents(org.infinispan.api.mvcc.repeatable_read.CacheAPIPessimisticTest).
2013-01-31 13:15:49,496 INFO  (testng-CacheAPIOptimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testNullKeyParameter(org.infinispan.api.mvcc.read_committed.CacheAPIOptimisticTest).
2013-01-31 13:15:49,495 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:49,496 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:49,496 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:49,496 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [1=newvalue, 3=three, 4=four, 2=two]
2013-01-31 13:15:49,496 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:49,496 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:49,496 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:49,497 DEBUG (Thread-33) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [Thread-33] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:187 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,497 DEBUG (Thread-33) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [Thread-33] will wait until no switch is in progress
2013-01-31 13:15:49,497 DEBUG (Thread-33) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [Thread-33] no switch in progress. Moving on...
2013-01-31 13:15:49,497 DEBUG (Thread-33) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [Thread-33] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:187 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,497 DEBUG (Thread-33) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [Thread-33] local transaction null:100 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:187 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,497 DEBUG (Thread-33) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [Thread-33] local transaction null:100 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,532 INFO  (testng-ReadCommittedLockTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:49,492 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:49,488 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction null:97 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:156 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,534 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction null:97 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,535 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:18c status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,535 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIMVCCTest] will wait until no switch is in progress
2013-01-31 13:15:49,535 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIMVCCTest] no switch in progress. Moving on...
2013-01-31 13:15:49,535 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:18c status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,535 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction null:101 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:18c status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,535 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction null:101 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,536 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:190 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,536 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIMVCCTest] will wait until no switch is in progress
2013-01-31 13:15:49,536 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIMVCCTest] no switch in progress. Moving on...
2013-01-31 13:15:49,536 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:190 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,536 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction null:102 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:190 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,536 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction null:102 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,484 DEBUG (testng-LazyCacheAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-LazyCacheAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:173 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,498 DEBUG (Thread-34) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [Thread-34] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:18b status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,545 DEBUG (Thread-34) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [Thread-34] will wait until no switch is in progress
2013-01-31 13:15:49,545 DEBUG (Thread-34) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [Thread-34] no switch in progress. Moving on...
2013-01-31 13:15:49,545 DEBUG (Thread-34) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [Thread-34] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:18b status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,545 DEBUG (Thread-34) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [Thread-34] local transaction null:103 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:18b status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,545 DEBUG (Thread-34) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [Thread-34] local transaction null:103 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,546 DEBUG (testng-LazyCacheAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-LazyCacheAPITest] local transaction null:104 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:173 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,546 DEBUG (testng-LazyCacheAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-LazyCacheAPITest] local transaction null:104 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,546 DEBUG (testng-LazyCacheAPITest) [org.infinispan.api.lazy.LazyCacheAPITest$CustomPojo] class org.infinispan.api.lazy.LazyCacheAPITest$CustomPojo
2013-01-31 13:15:49,546 DEBUG (testng-LazyCacheAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-LazyCacheAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:19a status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,546 DEBUG (testng-LazyCacheAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-LazyCacheAPITest] will wait until no switch is in progress
2013-01-31 13:15:49,547 DEBUG (testng-LazyCacheAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-LazyCacheAPITest] no switch in progress. Moving on...
2013-01-31 13:15:49,547 DEBUG (testng-LazyCacheAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-LazyCacheAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:19a status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,547 DEBUG (testng-LazyCacheAPITest) [org.infinispan.api.lazy.LazyCacheAPITest$CustomPojo] class org.infinispan.api.lazy.LazyCacheAPITest$CustomPojo
2013-01-31 13:15:49,547 DEBUG (testng-LazyCacheAPITest) [org.infinispan.api.lazy.LazyCacheAPITest$CustomPojo] class org.infinispan.api.lazy.LazyCacheAPITest$CustomPojo
2013-01-31 13:15:49,547 DEBUG (testng-LazyCacheAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-LazyCacheAPITest] local transaction null:105 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:19a status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,547 DEBUG (testng-LazyCacheAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-LazyCacheAPITest] local transaction null:105 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,547 DEBUG (testng-LazyCacheAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-LazyCacheAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:19e status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,547 DEBUG (testng-LazyCacheAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-LazyCacheAPITest] will wait until no switch is in progress
2013-01-31 13:15:49,547 DEBUG (testng-LazyCacheAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-LazyCacheAPITest] no switch in progress. Moving on...
2013-01-31 13:15:49,547 DEBUG (testng-LazyCacheAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-LazyCacheAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:19e status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,548 DEBUG (testng-LazyCacheAPITest) [org.infinispan.api.lazy.LazyCacheAPITest$CustomPojo] class org.infinispan.api.lazy.LazyCacheAPITest$CustomPojo
2013-01-31 13:15:49,548 DEBUG (testng-LazyCacheAPITest) [org.infinispan.api.lazy.LazyCacheAPITest$CustomPojo] class org.infinispan.api.lazy.LazyCacheAPITest$CustomPojo
2013-01-31 13:15:49,548 DEBUG (testng-LazyCacheAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-LazyCacheAPITest] local transaction null:106 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:19e status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,548 DEBUG (testng-LazyCacheAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-LazyCacheAPITest] local transaction null:106 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,548 DEBUG (testng-LazyCacheAPITest) [org.infinispan.api.lazy.LazyCacheAPITest$CustomPojo] class org.infinispan.api.lazy.LazyCacheAPITest$CustomPojo
2013-01-31 13:15:49,548 DEBUG (testng-LazyCacheAPITest) [org.infinispan.api.lazy.LazyCacheAPITest$CustomPojo] class org.infinispan.api.lazy.LazyCacheAPITest$CustomPojo
2013-01-31 13:15:49,548 DEBUG (testng-LazyCacheAPITest) [org.infinispan.api.lazy.LazyCacheAPITest$CustomPojo] class org.infinispan.api.lazy.LazyCacheAPITest$CustomPojo
2013-01-31 13:15:49,548 DEBUG (testng-LazyCacheAPITest) [org.infinispan.api.lazy.LazyCacheAPITest$CustomPojo] class org.infinispan.api.lazy.LazyCacheAPITest$CustomPojo
2013-01-31 13:15:49,498 INFO  (testng-CacheAPIPessimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testStopClearsData(org.infinispan.api.mvcc.repeatable_read.CacheAPIPessimisticTest)
2013-01-31 13:15:49,548 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:1a2 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,548 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,548 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,498 INFO  (testng-CacheAPIOptimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testSizeAndContents(org.infinispan.api.mvcc.repeatable_read.CacheAPIOptimisticTest).
2013-01-31 13:15:49,549 INFO  (testng-BatchWithoutTMTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testBatchRollback(org.infinispan.api.batch.BatchWithoutTMTest).
2013-01-31 13:15:49,549 INFO  (testng-BatchWithoutTMTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testBatchVisibility(org.infinispan.api.batch.BatchWithoutTMTest)
2013-01-31 13:15:49,549 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:49,550 INFO  (testng-CacheAPIPessimisticTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:49,550 INFO  (testng-BatchWithoutTMTest) [org.infinispan.transaction.lookup.JBossStandaloneJTAManagerLookup] ISPN000107: Retrieving transaction manager Transaction: unknown
2013-01-31 13:15:49,550 DEBUG (testng-BatchWithoutTMTest) [org.infinispan.configuration.cache.TransactionConfigurationBuilder] Switching to Synchronization based enlistment.
2013-01-31 13:15:49,551 INFO  (testng-BatchWithoutTMTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:49,551 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 11
2013-01-31 13:15:49,551 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@6d19ddb8}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@3d2b92fd}
	>> org.infinispan.interceptors.TxInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@77bf3f6a}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.PessimisticLockingInterceptor@2cdc8591, PB=org.infinispan.interceptors.locking.PessimisticLockingInterceptor@2cdc8591}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@41c50999, TO=org.infinispan.interceptors.EntryWrappingInterceptor@41c50999, PB=org.infinispan.interceptors.EntryWrappingInterceptor@41c50999}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:49,551 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.CacheImpl] Started cache test on null
2013-01-31 13:15:49,551 INFO  (testng-CacheAPIPessimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testStopClearsData(org.infinispan.api.mvcc.read_committed.CacheAPIPessimisticTest).
2013-01-31 13:15:49,552 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:49,552 INFO  (testng-CacheAPIMVCCTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testConvenienceMethods(org.infinispan.api.lru.read_committed.CacheAPIMVCCTest).
2013-01-31 13:15:49,553 INFO  (testng-BatchWithTMTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testBatchRollback(org.infinispan.api.batch.BatchWithTMTest).
2013-01-31 13:15:49,553 INFO  (testng-BatchWithTMTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testBatchWithOngoingTM(org.infinispan.api.batch.BatchWithTMTest)
2013-01-31 13:15:49,553 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == []
2013-01-31 13:15:49,553 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:49,553 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:49,553 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:49,553 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:49,554 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [key=value]
2013-01-31 13:15:49,554 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:49,554 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:49,554 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:49,554 INFO  (testng-CacheAPIMVCCTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testEvict(org.infinispan.api.lru.read_committed.CacheAPIMVCCTest)
2013-01-31 13:15:49,554 INFO  (testng-BatchWithTMTest) [org.infinispan.transaction.lookup.JBossStandaloneJTAManagerLookup] ISPN000107: Retrieving transaction manager Transaction: unknown
2013-01-31 13:15:49,554 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:1a3 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,554 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIMVCCTest] will wait until no switch is in progress
2013-01-31 13:15:49,554 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIMVCCTest] no switch in progress. Moving on...
2013-01-31 13:15:49,554 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:1a3 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,555 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction null:107 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:1a3 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,555 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction null:107 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,555 DEBUG (testng-BatchWithTMTest) [org.infinispan.configuration.cache.TransactionConfigurationBuilder] Switching to Synchronization based enlistment.
2013-01-31 13:15:49,555 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:1a7 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,555 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIMVCCTest] will wait until no switch is in progress
2013-01-31 13:15:49,555 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIMVCCTest] no switch in progress. Moving on...
2013-01-31 13:15:49,555 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:1a7 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,555 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction null:108 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:1a7 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,555 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction null:108 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,498 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:49,555 INFO  (testng-BatchWithTMTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:49,556 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == []
2013-01-31 13:15:49,556 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:49,556 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:49,556 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:49,557 INFO  (testng-CacheAPIMVCCTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testEvict(org.infinispan.api.lru.read_committed.CacheAPIMVCCTest).
2013-01-31 13:15:49,557 INFO  (testng-CacheAPIOptimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testNullValueParameter(org.infinispan.api.mvcc.read_committed.CacheAPIOptimisticTest)
2013-01-31 13:15:49,557 ERROR (testng-CacheAPIOptimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Method testNullValueParameter(org.infinispan.api.mvcc.read_committed.CacheAPIOptimisticTest) threw an exception
java.lang.NullPointerException: Null values are not supported!
	at org.infinispan.CacheImpl.assertKeyValueNotNull(CacheImpl.java:204)
	at org.infinispan.CacheImpl.put(CacheImpl.java:700)
	at org.infinispan.CacheImpl.put(CacheImpl.java:695)
	at org.infinispan.CacheSupport.put(CacheSupport.java:53)
	at org.infinispan.api.APINonTxTest.testNullValueParameter(APINonTxTest.java:347)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:49,560 INFO  (testng-CacheAPIOptimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testNullValueParameter(org.infinispan.api.mvcc.read_committed.CacheAPIOptimisticTest).
2013-01-31 13:15:49,560 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:49,560 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == []
2013-01-31 13:15:49,560 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:49,560 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:49,560 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:49,560 DEBUG (testng-BatchWithoutTMTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:49,561 INFO  (testng-CacheAPIOptimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testSizeAndContents(org.infinispan.api.mvcc.read_committed.CacheAPIOptimisticTest)
2013-01-31 13:15:49,561 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:1ac status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,561 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,561 DEBUG (testng-BatchWithoutTMTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:49,553 INFO  (testng-CacheAPIPessimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testConfiguration(org.infinispan.api.mvcc.read_committed.CacheAPIPessimisticTest)
2013-01-31 13:15:49,562 DEBUG (testng-BatchWithoutTMTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:49,562 INFO  (testng-CacheAPIPessimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testConfiguration(org.infinispan.api.mvcc.read_committed.CacheAPIPessimisticTest).
2013-01-31 13:15:49,562 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:49,562 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == []
2013-01-31 13:15:49,563 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:49,563 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:49,563 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:49,563 INFO  (testng-CacheAPIPessimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testEntrySetEqualityInTx(org.infinispan.api.mvcc.read_committed.CacheAPIPessimisticTest)
2013-01-31 13:15:49,563 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:1ad status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,563 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,563 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,563 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:1ad status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,564 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:49,564 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:109 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:1ad status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,564 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:109 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,564 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:49,552 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:1a2 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,564 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:110 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:1a2 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,564 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:110 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,565 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:49,565 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.CacheImpl] Stopping cache test on null
2013-01-31 13:15:49,565 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 30 seconds.
2013-01-31 13:15:49,565 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:49,566 INFO  (testng-CacheAPIPessimisticTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:49,561 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,568 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:1ac status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,568 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:111 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:1ac status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,568 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:111 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,568 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:49,568 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [1=newvalue, 3=three, 4=four, 2=two]
2013-01-31 13:15:49,568 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:49,569 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:49,569 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:49,569 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:1b8 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,569 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,569 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,569 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:1b8 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,569 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:112 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:1b8 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,569 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:112 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,569 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:1bc status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,569 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,569 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,570 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:1bc status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,570 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:113 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:1bc status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,570 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:113 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,570 DEBUG (testng-BatchWithTMTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:49,570 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:1c0 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,570 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,570 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,570 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:1c0 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,570 DEBUG (testng-BatchWithTMTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:49,571 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:114 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:1c0 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,571 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:114 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,571 DEBUG (testng-BatchWithTMTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:49,571 INFO  (testng-CacheAPIOptimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testSizeAndContents(org.infinispan.api.mvcc.read_committed.CacheAPIOptimisticTest).
2013-01-31 13:15:49,571 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:49,571 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [1=newvalue, 3=three, 4=four, 2=two]
2013-01-31 13:15:49,571 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:49,572 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:49,572 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:49,572 INFO  (testng-CacheAPIOptimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testStopClearsData(org.infinispan.api.mvcc.read_committed.CacheAPIOptimisticTest)
2013-01-31 13:15:49,572 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:1c4 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,572 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,572 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,572 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:1c4 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,572 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:115 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:1c4 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,572 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:115 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,573 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.CacheImpl] Stopping cache test on null
2013-01-31 13:15:49,573 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 30 seconds.
2013-01-31 13:15:49,573 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:49,575 DEBUG (testng-BatchWithTMTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 12
2013-01-31 13:15:49,575 DEBUG (testng-BatchWithTMTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.BatchingInterceptor
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@53ccaac7}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@21e019cc}
	>> org.infinispan.interceptors.TxInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@7fbdb173}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@7ecd3689, PB=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@7ecd3689}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@52b79d68, TO=org.infinispan.interceptors.EntryWrappingInterceptor@52b79d68, PB=org.infinispan.interceptors.EntryWrappingInterceptor@52b79d68}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:49,576 DEBUG (testng-BatchWithTMTest) [org.infinispan.CacheImpl] Started cache testBatchWithOngoingTM on null
2013-01-31 13:15:49,579 DEBUG (testng-BatchWithTMTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-BatchWithTMTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:1c8 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,579 DEBUG (testng-BatchWithTMTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-BatchWithTMTest] will wait until no switch is in progress
2013-01-31 13:15:49,579 DEBUG (testng-BatchWithTMTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-BatchWithTMTest] no switch in progress. Moving on...
2013-01-31 13:15:49,579 DEBUG (testng-BatchWithTMTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-BatchWithTMTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:1c8 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,579 DEBUG (testng-BatchWithTMTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-BatchWithTMTest] local transaction null:116 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:1c8 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,579 DEBUG (testng-BatchWithTMTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-BatchWithTMTest] local transaction null:116 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,580 INFO  (testng-BatchWithTMTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testBatchWithOngoingTM(org.infinispan.api.batch.BatchWithTMTest).
2013-01-31 13:15:49,580 INFO  (testng-BatchWithTMTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testBatchWithoutOngoingTMSuspension(org.infinispan.api.batch.BatchWithTMTest)
2013-01-31 13:15:49,581 INFO  (testng-BatchWithTMTest) [org.infinispan.transaction.lookup.JBossStandaloneJTAManagerLookup] ISPN000107: Retrieving transaction manager Transaction: unknown
2013-01-31 13:15:49,582 DEBUG (testng-BatchWithTMTest) [org.infinispan.configuration.cache.TransactionConfigurationBuilder] Switching to Synchronization based enlistment.
2013-01-31 13:15:49,582 INFO  (testng-BatchWithTMTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:49,585 DEBUG (testng-BatchWithTMTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:49,587 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:49,558 DEBUG (testng-LazyCacheAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-LazyCacheAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:1ab status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,588 DEBUG (testng-LazyCacheAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-LazyCacheAPITest] will wait until no switch is in progress
2013-01-31 13:15:49,588 DEBUG (testng-LazyCacheAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-LazyCacheAPITest] no switch in progress. Moving on...
2013-01-31 13:15:49,588 DEBUG (testng-LazyCacheAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-LazyCacheAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:1ab status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,588 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:49,588 DEBUG (testng-LazyCacheAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-LazyCacheAPITest] local transaction null:117 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:1ab status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,588 DEBUG (testng-LazyCacheAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-LazyCacheAPITest] local transaction null:117 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,588 DEBUG (testng-LazyCacheAPITest) [org.infinispan.api.lazy.LazyCacheAPITest$CustomPojo] class org.infinispan.api.lazy.LazyCacheAPITest$CustomPojo
2013-01-31 13:15:49,588 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:49,589 DEBUG (testng-LazyCacheAPITest) [org.infinispan.api.lazy.LazyCacheAPITest$CustomPojo] class org.infinispan.api.lazy.LazyCacheAPITest$CustomPojo
2013-01-31 13:15:49,557 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:49,589 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == []
2013-01-31 13:15:49,589 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:49,589 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:49,589 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:49,569 INFO  (testng-CacheAPIOptimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testStopClearsData(org.infinispan.api.mvcc.repeatable_read.CacheAPIOptimisticTest)
2013-01-31 13:15:49,590 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:1d0 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,590 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,590 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,590 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:1d0 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,591 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:118 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:1d0 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,591 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:118 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,592 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.CacheImpl] Stopping cache test on null
2013-01-31 13:15:49,592 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 30 seconds.
2013-01-31 13:15:49,593 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:49,593 INFO  (testng-CacheAPIOptimisticTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:49,594 DEBUG (testng-LazyCacheAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-LazyCacheAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:1cf status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,594 DEBUG (testng-LazyCacheAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-LazyCacheAPITest] will wait until no switch is in progress
2013-01-31 13:15:49,594 DEBUG (testng-LazyCacheAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-LazyCacheAPITest] no switch in progress. Moving on...
2013-01-31 13:15:49,594 DEBUG (testng-LazyCacheAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-LazyCacheAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:1cf status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,594 DEBUG (testng-LazyCacheAPITest) [org.infinispan.api.lazy.LazyCacheAPITest$CustomPojo] class org.infinispan.api.lazy.LazyCacheAPITest$CustomPojo
2013-01-31 13:15:49,594 DEBUG (testng-LazyCacheAPITest) [org.infinispan.api.lazy.LazyCacheAPITest$CustomPojo] class org.infinispan.api.lazy.LazyCacheAPITest$CustomPojo
2013-01-31 13:15:49,594 DEBUG (testng-LazyCacheAPITest) [org.infinispan.api.lazy.LazyCacheAPITest$CustomPojo] class org.infinispan.api.lazy.LazyCacheAPITest$CustomPojo
2013-01-31 13:15:49,594 DEBUG (testng-LazyCacheAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-LazyCacheAPITest] local transaction null:119 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:1cf status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,594 DEBUG (testng-LazyCacheAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-LazyCacheAPITest] local transaction null:119 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,595 DEBUG (testng-LazyCacheAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-LazyCacheAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:1d7 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,595 DEBUG (testng-LazyCacheAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-LazyCacheAPITest] will wait until no switch is in progress
2013-01-31 13:15:49,595 DEBUG (testng-LazyCacheAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-LazyCacheAPITest] no switch in progress. Moving on...
2013-01-31 13:15:49,595 DEBUG (testng-LazyCacheAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-LazyCacheAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:1d7 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,595 DEBUG (testng-LazyCacheAPITest) [org.infinispan.api.lazy.LazyCacheAPITest$CustomPojo] class org.infinispan.api.lazy.LazyCacheAPITest$CustomPojo
2013-01-31 13:15:49,595 DEBUG (testng-LazyCacheAPITest) [org.infinispan.api.lazy.LazyCacheAPITest$CustomPojo] class org.infinispan.api.lazy.LazyCacheAPITest$CustomPojo
2013-01-31 13:15:49,595 DEBUG (testng-LazyCacheAPITest) [org.infinispan.api.lazy.LazyCacheAPITest$CustomPojo] class org.infinispan.api.lazy.LazyCacheAPITest$CustomPojo
2013-01-31 13:15:49,595 DEBUG (testng-LazyCacheAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-LazyCacheAPITest] local transaction null:120 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:1d7 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,595 DEBUG (testng-LazyCacheAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-LazyCacheAPITest] local transaction null:120 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,595 DEBUG (testng-LazyCacheAPITest) [org.infinispan.api.lazy.LazyCacheAPITest$CustomPojo] class org.infinispan.api.lazy.LazyCacheAPITest$CustomPojo
2013-01-31 13:15:49,595 DEBUG (testng-LazyCacheAPITest) [org.infinispan.api.lazy.LazyCacheAPITest$CustomPojo] class org.infinispan.api.lazy.LazyCacheAPITest$CustomPojo
2013-01-31 13:15:49,595 DEBUG (testng-LazyCacheAPITest) [org.infinispan.api.lazy.LazyCacheAPITest$CustomPojo] class org.infinispan.api.lazy.LazyCacheAPITest$CustomPojo
2013-01-31 13:15:49,595 DEBUG (testng-LazyCacheAPITest) [org.infinispan.api.lazy.LazyCacheAPITest$CustomPojo] class org.infinispan.api.lazy.LazyCacheAPITest$CustomPojo
2013-01-31 13:15:49,596 INFO  (testng-LazyCacheAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testReplaceWithOld(org.infinispan.api.lazy.LazyCacheAPITest).
2013-01-31 13:15:49,596 DEBUG (testng-LazyCacheAPITest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'lazy-cache-test' on a non-clustered cache manager
2013-01-31 13:15:49,596 DEBUG (testng-LazyCacheAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [MarshalledValue{instance=org.infinispan.api.lazy.LazyCacheAPITest$CustomPojo@2821635f, serialized=false, cachedHashCode=673276767}@6d8e9360=2, MarshalledValue{instance=org.infinispan.api.lazy.LazyCacheAPITest$CustomPojo@a218396c, serialized=false, cachedHashCode=-1575470740}@2b6dbbd1=MarshalledValue{instance=org.infinispan.api.lazy.LazyCacheAPITest$CustomPojo@cee59ce1, serialized=false, cachedHashCode=-823812895}@3145ac9d]
2013-01-31 13:15:49,596 DEBUG (testng-LazyCacheAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:49,596 DEBUG (testng-LazyCacheAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:49,596 DEBUG (testng-LazyCacheAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:49,597 DEBUG (testng-LazyCacheAPITest) [org.infinispan.CacheImpl] Stopping cache lazy-cache-test on null
2013-01-31 13:15:49,598 DEBUG (testng-LazyCacheAPITest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 30 seconds.
2013-01-31 13:15:49,598 DEBUG (testng-LazyCacheAPITest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:49,598 DEBUG (testng-LazyCacheAPITest) [org.infinispan.manager.DefaultCacheManager] Stopping cache manager ISPN on null
2013-01-31 13:15:49,598 DEBUG (testng-LazyCacheAPITest) [org.infinispan.CacheImpl] Stopping cache lazy-cache-test on null
2013-01-31 13:15:49,590 INFO  (testng-CacheAPIOptimisticTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:49,600 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 11
2013-01-31 13:15:49,600 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@519157d}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@31d1c428}
	>> org.infinispan.interceptors.TxInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@42a537a5}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@6ce853d1, PB=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@6ce853d1}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@8d6f633, TO=org.infinispan.interceptors.EntryWrappingInterceptor@8d6f633, PB=org.infinispan.interceptors.EntryWrappingInterceptor@8d6f633}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:49,601 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.CacheImpl] Started cache test on null
2013-01-31 13:15:49,601 INFO  (testng-CacheAPIOptimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testStopClearsData(org.infinispan.api.mvcc.read_committed.CacheAPIOptimisticTest).
2013-01-31 13:15:49,590 INFO  (testng-CacheAPIMVCCTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testImmutabilityOfKeyValueEntryCollections(org.infinispan.api.lru.read_committed.CacheAPIMVCCTest)
2013-01-31 13:15:49,635 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:49,635 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:1db status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,635 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIMVCCTest] will wait until no switch is in progress
2013-01-31 13:15:49,635 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIMVCCTest] no switch in progress. Moving on...
2013-01-31 13:15:49,635 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:1db status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,636 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction null:121 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:1db status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,636 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction null:121 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,637 INFO  (testng-CacheAPIMVCCTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testImmutabilityOfKeyValueEntryCollections(org.infinispan.api.lru.read_committed.CacheAPIMVCCTest).
2013-01-31 13:15:49,637 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:49,637 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [1=one, 3=three, 2=two]
2013-01-31 13:15:49,637 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:49,637 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:49,637 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:49,638 INFO  (testng-CacheAPIMVCCTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testKeyValueEntryCollections(org.infinispan.api.lru.read_committed.CacheAPIMVCCTest)
2013-01-31 13:15:49,638 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:1df status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,638 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIMVCCTest] will wait until no switch is in progress
2013-01-31 13:15:49,638 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIMVCCTest] no switch in progress. Moving on...
2013-01-31 13:15:49,638 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:1df status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,638 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction null:122 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:1df status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,638 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction null:122 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,639 INFO  (testng-CacheAPIMVCCTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testKeyValueEntryCollections(org.infinispan.api.lru.read_committed.CacheAPIMVCCTest).
2013-01-31 13:15:49,639 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:49,639 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [1=one, 3=three, 2=two]
2013-01-31 13:15:49,639 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:49,639 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:49,639 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:49,640 INFO  (testng-CacheAPIMVCCTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testNullKeyParameter(org.infinispan.api.lru.read_committed.CacheAPIMVCCTest)
2013-01-31 13:15:49,640 ERROR (testng-CacheAPIMVCCTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Method testNullKeyParameter(org.infinispan.api.lru.read_committed.CacheAPIMVCCTest) threw an exception
java.lang.NullPointerException: Null keys are not supported!
	at org.infinispan.CacheImpl.assertKeyNotNull(CacheImpl.java:197)
	at org.infinispan.CacheImpl.assertKeyValueNotNull(CacheImpl.java:202)
	at org.infinispan.CacheImpl.put(CacheImpl.java:700)
	at org.infinispan.CacheImpl.put(CacheImpl.java:695)
	at org.infinispan.CacheSupport.put(CacheSupport.java:53)
	at org.infinispan.api.APINonTxTest.testNullKeyParameter(APINonTxTest.java:342)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:49,640 INFO  (testng-CacheAPIMVCCTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testNullKeyParameter(org.infinispan.api.lru.read_committed.CacheAPIMVCCTest).
2013-01-31 13:15:49,641 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:49,641 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == []
2013-01-31 13:15:49,641 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:49,641 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:49,641 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:49,641 INFO  (testng-CacheAPIMVCCTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testNullValueParameter(org.infinispan.api.lru.read_committed.CacheAPIMVCCTest)
2013-01-31 13:15:49,642 ERROR (testng-CacheAPIMVCCTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Method testNullValueParameter(org.infinispan.api.lru.read_committed.CacheAPIMVCCTest) threw an exception
java.lang.NullPointerException: Null values are not supported!
	at org.infinispan.CacheImpl.assertKeyValueNotNull(CacheImpl.java:204)
	at org.infinispan.CacheImpl.put(CacheImpl.java:700)
	at org.infinispan.CacheImpl.put(CacheImpl.java:695)
	at org.infinispan.CacheSupport.put(CacheSupport.java:53)
	at org.infinispan.api.APINonTxTest.testNullValueParameter(APINonTxTest.java:347)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:49,645 INFO  (testng-CacheAPIMVCCTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testNullValueParameter(org.infinispan.api.lru.read_committed.CacheAPIMVCCTest).
2013-01-31 13:15:49,646 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:49,646 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == []
2013-01-31 13:15:49,646 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:49,646 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:49,646 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:49,648 INFO  (testng-CacheAPIMVCCTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testSizeAndContents(org.infinispan.api.lru.read_committed.CacheAPIMVCCTest)
2013-01-31 13:15:49,648 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:1e3 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,648 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIMVCCTest] will wait until no switch is in progress
2013-01-31 13:15:49,648 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIMVCCTest] no switch in progress. Moving on...
2013-01-31 13:15:49,648 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:1e3 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,648 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction null:123 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:1e3 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,648 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction null:123 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,649 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:1e7 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,649 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIMVCCTest] will wait until no switch is in progress
2013-01-31 13:15:49,649 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIMVCCTest] no switch in progress. Moving on...
2013-01-31 13:15:49,649 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:1e7 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,649 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction null:124 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:1e7 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,649 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction null:124 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,650 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:1eb status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,650 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIMVCCTest] will wait until no switch is in progress
2013-01-31 13:15:49,650 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIMVCCTest] no switch in progress. Moving on...
2013-01-31 13:15:49,650 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:1eb status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,650 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction null:125 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:1eb status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,650 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction null:125 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,651 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:1ef status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,651 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIMVCCTest] will wait until no switch is in progress
2013-01-31 13:15:49,651 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIMVCCTest] no switch in progress. Moving on...
2013-01-31 13:15:49,651 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:1ef status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,651 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction null:126 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:1ef status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,651 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction null:126 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,652 INFO  (testng-CacheAPIMVCCTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testSizeAndContents(org.infinispan.api.lru.read_committed.CacheAPIMVCCTest).
2013-01-31 13:15:49,652 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:49,652 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [1=newvalue, 3=three, 4=four, 2=two]
2013-01-31 13:15:49,652 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:49,652 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:49,652 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:49,653 INFO  (testng-CacheAPIMVCCTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testStopClearsData(org.infinispan.api.lru.read_committed.CacheAPIMVCCTest)
2013-01-31 13:15:49,653 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:1f3 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,653 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIMVCCTest] will wait until no switch is in progress
2013-01-31 13:15:49,653 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIMVCCTest] no switch in progress. Moving on...
2013-01-31 13:15:49,653 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:1f3 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,653 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction null:127 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:1f3 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,653 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction null:127 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,654 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.CacheImpl] Stopping cache test on null
2013-01-31 13:15:49,654 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 30 seconds.
2013-01-31 13:15:49,654 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:49,660 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:49,597 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:1b1 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,660 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,660 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,661 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:1b1 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,597 DEBUG (testng-BatchWithoutTMTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 12
2013-01-31 13:15:49,663 DEBUG (testng-BatchWithoutTMTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.BatchingInterceptor
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@4adf1d27}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@7df311d7}
	>> org.infinispan.interceptors.TxInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@61187ada}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@e29b003, PB=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@e29b003}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@52e29c38, TO=org.infinispan.interceptors.EntryWrappingInterceptor@52e29c38, PB=org.infinispan.interceptors.EntryWrappingInterceptor@52e29c38}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:49,663 DEBUG (testng-BatchWithoutTMTest) [org.infinispan.CacheImpl] Started cache testBatchVisibility on null
2013-01-31 13:15:49,663 INFO  (testng-BatchWithoutTMTest) [org.infinispan.api.batch.BatchWithoutTMTest] Here it starts...
2013-01-31 13:15:49,664 DEBUG (testng-BatchWithoutTMTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-BatchWithoutTMTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:1fa status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,664 DEBUG (testng-BatchWithoutTMTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-BatchWithoutTMTest] will wait until no switch is in progress
2013-01-31 13:15:49,664 DEBUG (testng-BatchWithoutTMTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-BatchWithoutTMTest] no switch in progress. Moving on...
2013-01-31 13:15:49,664 DEBUG (testng-BatchWithoutTMTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-BatchWithoutTMTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:1fa status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,597 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 11
2013-01-31 13:15:49,677 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@1587be37}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@2d917ec}
	>> org.infinispan.interceptors.TxInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@7ab18869}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@1d72e46d, PB=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@1d72e46d}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@61f2bf35, TO=org.infinispan.interceptors.EntryWrappingInterceptor@61f2bf35, PB=org.infinispan.interceptors.EntryWrappingInterceptor@61f2bf35}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:49,660 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:49,643 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:49,681 DEBUG (Thread-36) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [Thread-36] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:1fe status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,643 DEBUG (testng-BatchWithTMTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:49,637 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:49,683 DEBUG (testng-BatchWithTMTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:49,684 DEBUG (testng-BatchWithTMTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 12
2013-01-31 13:15:49,684 DEBUG (testng-BatchWithTMTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.BatchingInterceptor
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@3e2fc14c}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@313b8479}
	>> org.infinispan.interceptors.TxInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@28aaf6a5}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@81b02b8, PB=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@81b02b8}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@6ec3073, TO=org.infinispan.interceptors.EntryWrappingInterceptor@6ec3073, PB=org.infinispan.interceptors.EntryWrappingInterceptor@6ec3073}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:49,685 DEBUG (testng-BatchWithTMTest) [org.infinispan.CacheImpl] Started cache testBatchWithoutOngoingTMSuspension on null
2013-01-31 13:15:49,685 DEBUG (testng-BatchWithTMTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-BatchWithTMTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:1ff status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,685 DEBUG (testng-BatchWithTMTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-BatchWithTMTest] will wait until no switch is in progress
2013-01-31 13:15:49,685 DEBUG (testng-BatchWithTMTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-BatchWithTMTest] no switch in progress. Moving on...
2013-01-31 13:15:49,685 DEBUG (testng-BatchWithTMTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-BatchWithTMTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:1ff status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,687 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:49,692 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:49,635 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == []
2013-01-31 13:15:49,690 DEBUG (Thread-37) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [Thread-37] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:203 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,688 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:49,688 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:128 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:1b1 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,682 DEBUG (Thread-36) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [Thread-36] will wait until no switch is in progress
2013-01-31 13:15:49,700 DEBUG (Thread-36) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [Thread-36] no switch in progress. Moving on...
2013-01-31 13:15:49,679 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:49,700 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:49,701 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:49,701 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:49,701 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 11
2013-01-31 13:15:49,701 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@dc11819}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@15185d}
	>> org.infinispan.interceptors.TxInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@68f281b5}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@921c7e7, PB=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@921c7e7}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@8cb1360, TO=org.infinispan.interceptors.EntryWrappingInterceptor@8cb1360, PB=org.infinispan.interceptors.EntryWrappingInterceptor@8cb1360}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:49,702 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:128 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,702 INFO  (testng-CacheAPIPessimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testEntrySetEqualityInTx(org.infinispan.api.mvcc.read_committed.CacheAPIPessimisticTest).
2013-01-31 13:15:49,702 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:49,702 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [2=v2-testEntrySetEqualityInTx, 1=v1-testEntrySetEqualityInTx, 3=v3-testEntrySetEqualityInTx]
2013-01-31 13:15:49,702 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:49,702 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:49,702 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:49,703 INFO  (testng-CacheAPIPessimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testGetMembersInLocalMode(org.infinispan.api.mvcc.read_committed.CacheAPIPessimisticTest)
2013-01-31 13:15:49,703 INFO  (testng-CacheAPIPessimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testGetMembersInLocalMode(org.infinispan.api.mvcc.read_committed.CacheAPIPessimisticTest).
2013-01-31 13:15:49,679 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.CacheImpl] Started cache ___defaultcache on null
2013-01-31 13:15:49,705 INFO  (testng-ReadCommittedLockTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testLocksOnPutKeyVal(org.infinispan.api.mvcc.read_committed.ReadCommittedLockTest)
2013-01-31 13:15:49,679 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:49,705 INFO  (testng-CacheAPIMVCCTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:49,705 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction DummyTransaction{xid=DummyXid{id=5}, status=0} is starting. check if switch is in progress...
2013-01-31 13:15:49,705 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-ReadCommittedLockTest] will wait until no switch is in progress
2013-01-31 13:15:49,705 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-ReadCommittedLockTest] no switch in progress. Moving on...
2013-01-31 13:15:49,705 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction DummyTransaction{xid=DummyXid{id=5}, status=0} will use 2PC while executing
2013-01-31 13:15:49,706 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction null:131 [DummyTransaction{xid=DummyXid{id=5}, status=7}] wants to commit
2013-01-31 13:15:49,706 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction null:131 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,706 ERROR (testng-ReadCommittedLockTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Method testLocksOnPutKeyVal(org.infinispan.api.mvcc.read_committed.ReadCommittedLockTest) threw an exception
java.lang.AssertionError: Stale locks exist! NumLocksHeld is 1 and lock info is org.infinispan.util.concurrent.locks.containers.OwnableReentrantPerEntryLockContainer@631a645f
	at org.infinispan.api.mvcc.LockAssert.assertNoLocks(LockAssert.java:48)
	at org.infinispan.api.mvcc.LockTestBase.assertNoLocks(LockTestBase.java:102)
	at org.infinispan.api.mvcc.LockTestBase.testLocksOnPutKeyVal(LockTestBase.java:116)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:49,704 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:49,713 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == []
2013-01-31 13:15:49,713 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:49,713 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:49,713 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:49,713 ERROR (testng-ReadCommittedLockTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test failed testLocksOnPutKeyVal(org.infinispan.api.mvcc.read_committed.ReadCommittedLockTest)
java.lang.AssertionError: Stale locks exist! NumLocksHeld is 1 and lock info is org.infinispan.util.concurrent.locks.containers.OwnableReentrantPerEntryLockContainer@631a645f
	at org.infinispan.api.mvcc.LockAssert.assertNoLocks(LockAssert.java:48)
	at org.infinispan.api.mvcc.LockTestBase.assertNoLocks(LockTestBase.java:102)
	at org.infinispan.api.mvcc.LockTestBase.testLocksOnPutKeyVal(LockTestBase.java:116)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:49,719 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.api.mvcc.LockTestBase] **** - STARTING TEARDOWN - ****
2013-01-31 13:15:49,719 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on null
2013-01-31 13:15:49,702 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.CacheImpl] Started cache test on null
2013-01-31 13:15:49,700 DEBUG (Thread-36) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [Thread-36] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:1fe status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,720 DEBUG (Thread-36) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [Thread-36] local transaction null:132 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:1fe status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,720 DEBUG (Thread-36) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [Thread-36] local transaction null:132 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,720 DEBUG (testng-BatchWithoutTMTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-BatchWithoutTMTest] local transaction null:129 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:1fa status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,721 DEBUG (testng-BatchWithoutTMTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-BatchWithoutTMTest] local transaction null:129 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,721 INFO  (testng-CacheAPIOptimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testStopClearsData(org.infinispan.api.mvcc.repeatable_read.CacheAPIOptimisticTest).
2013-01-31 13:15:49,721 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:49,721 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == []
2013-01-31 13:15:49,721 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:49,721 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:49,721 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:49,722 INFO  (testng-CacheAPIOptimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testConfiguration(org.infinispan.api.mvcc.repeatable_read.CacheAPIOptimisticTest)
2013-01-31 13:15:49,722 INFO  (testng-CacheAPIOptimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testConfiguration(org.infinispan.api.mvcc.repeatable_read.CacheAPIOptimisticTest).
2013-01-31 13:15:49,722 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:49,722 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == []
2013-01-31 13:15:49,722 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:49,722 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:49,722 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:49,723 INFO  (testng-CacheAPIOptimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testEntrySetEqualityInTx(org.infinispan.api.mvcc.repeatable_read.CacheAPIOptimisticTest)
2013-01-31 13:15:49,723 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:207 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,723 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,723 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,723 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:207 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,723 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:133 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:207 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,723 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:133 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,724 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:20b status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,724 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,724 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,724 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:20b status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,724 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:134 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:20b status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,724 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:134 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,724 INFO  (testng-CacheAPIOptimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testEntrySetEqualityInTx(org.infinispan.api.mvcc.repeatable_read.CacheAPIOptimisticTest).
2013-01-31 13:15:49,725 DEBUG (Thread-39) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [Thread-39] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:20f status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,725 DEBUG (Thread-39) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [Thread-39] will wait until no switch is in progress
2013-01-31 13:15:49,725 DEBUG (Thread-39) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [Thread-39] no switch in progress. Moving on...
2013-01-31 13:15:49,726 DEBUG (Thread-39) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [Thread-39] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:20f status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,726 DEBUG (Thread-39) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [Thread-39] local transaction null:135 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:20f status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,726 DEBUG (Thread-39) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [Thread-39] local transaction null:135 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,728 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:49,728 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [2=v2-testEntrySetEqualityInTx, 1=v1-testEntrySetEqualityInTx, 3=v3-testEntrySetEqualityInTx]
2013-01-31 13:15:49,728 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:49,729 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:49,729 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:49,729 INFO  (testng-CacheAPIOptimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testGetMembersInLocalMode(org.infinispan.api.mvcc.repeatable_read.CacheAPIOptimisticTest)
2013-01-31 13:15:49,729 INFO  (testng-CacheAPIOptimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testGetMembersInLocalMode(org.infinispan.api.mvcc.repeatable_read.CacheAPIOptimisticTest).
2013-01-31 13:15:49,729 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:49,730 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == []
2013-01-31 13:15:49,730 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:49,730 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:49,730 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:49,730 INFO  (testng-BatchWithoutTMTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testBatchVisibility(org.infinispan.api.batch.BatchWithoutTMTest).
2013-01-31 13:15:49,730 INFO  (testng-BatchWithoutTMTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testBatchWithoutCfg(org.infinispan.api.batch.BatchWithoutTMTest)
2013-01-31 13:15:49,730 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 1 seconds.
2013-01-31 13:15:49,730 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:49,733 INFO  (testng-BatchWithoutTMTest) [org.infinispan.transaction.lookup.JBossStandaloneJTAManagerLookup] ISPN000107: Retrieving transaction manager Transaction: unknown
2013-01-31 13:15:49,733 INFO  (testng-BatchWithoutTMTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:49,735 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.manager.DefaultCacheManager] Stopping cache manager ISPN on null
2013-01-31 13:15:49,735 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on null
2013-01-31 13:15:49,735 DEBUG (testng-BatchWithoutTMTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:49,699 INFO  (testng-RepeatableReadLockTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:49,696 DEBUG (testng-AsyncWithTxTest) [org.jgroups.stack.Configurator] set property TCP.diagnostics_addr to default value /224.0.75.75
2013-01-31 13:15:49,694 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:49,694 DEBUG (Thread-37) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [Thread-37] will wait until no switch is in progress
2013-01-31 13:15:49,736 DEBUG (Thread-37) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [Thread-37] no switch in progress. Moving on...
2013-01-31 13:15:49,736 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:49,736 DEBUG (testng-BatchWithoutTMTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:49,730 INFO  (testng-CacheAPIOptimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testPutIfAbsentAfterRemoveInTx(org.infinispan.api.mvcc.repeatable_read.CacheAPIOptimisticTest)
2013-01-31 13:15:49,744 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:213 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,744 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,744 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,744 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:213 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,744 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:136 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:213 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,744 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:136 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,745 DEBUG (testng-BatchWithoutTMTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:49,745 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:217 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,745 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,745 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,745 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:217 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,745 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:137 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:217 status: ActionStatus.ABORTING >] wants to rollback
2013-01-31 13:15:49,745 INFO  (testng-CacheAPIOptimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testPutIfAbsentAfterRemoveInTx(org.infinispan.api.mvcc.repeatable_read.CacheAPIOptimisticTest).
2013-01-31 13:15:49,746 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:49,746 DEBUG (testng-BatchWithoutTMTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 11
2013-01-31 13:15:49,746 DEBUG (testng-BatchWithoutTMTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@5636f88c}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@32f7db8c}
	>> org.infinispan.interceptors.TxInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@2e6ede78}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@70cfb018, PB=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@70cfb018}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@53323184, TO=org.infinispan.interceptors.EntryWrappingInterceptor@53323184, PB=org.infinispan.interceptors.EntryWrappingInterceptor@53323184}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:49,747 DEBUG (testng-BatchWithoutTMTest) [org.infinispan.CacheImpl] Started cache testBatchWithoutCfg on null
2013-01-31 13:15:49,747 INFO  (testng-BatchWithoutTMTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testBatchWithoutCfg(org.infinispan.api.batch.BatchWithoutTMTest).
2013-01-31 13:15:49,747 INFO  (testng-BatchWithoutTMTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testEndBatchWithoutStartBatch(org.infinispan.api.batch.BatchWithoutTMTest)
2013-01-31 13:15:49,751 INFO  (testng-BatchWithoutTMTest) [org.infinispan.transaction.lookup.JBossStandaloneJTAManagerLookup] ISPN000107: Retrieving transaction manager Transaction: unknown
2013-01-31 13:15:49,751 DEBUG (testng-BatchWithoutTMTest) [org.infinispan.configuration.cache.TransactionConfigurationBuilder] Switching to Synchronization based enlistment.
2013-01-31 13:15:49,752 INFO  (testng-BatchWithoutTMTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:49,717 INFO  (testng-CacheAPIPessimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testPutIfAbsentAfterRemoveInTx(org.infinispan.api.mvcc.read_committed.CacheAPIPessimisticTest)
2013-01-31 13:15:49,769 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:21b status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,769 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,769 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,769 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:21b status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,769 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:138 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:21b status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,769 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:138 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,770 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:21f status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,770 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,770 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,770 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:21f status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,770 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:139 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:21f status: ActionStatus.ABORTING >] wants to rollback
2013-01-31 13:15:49,770 INFO  (testng-CacheAPIPessimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testPutIfAbsentAfterRemoveInTx(org.infinispan.api.mvcc.read_committed.CacheAPIPessimisticTest).
2013-01-31 13:15:49,771 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:49,771 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [key_1=old_value]
2013-01-31 13:15:49,771 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:49,771 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:49,771 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:49,772 INFO  (testng-CacheAPIPessimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testRollbackAfterClear(org.infinispan.api.mvcc.read_committed.CacheAPIPessimisticTest)
2013-01-31 13:15:49,772 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:223 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,772 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,772 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,772 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:223 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,772 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:140 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:223 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,772 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:140 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,773 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:227 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,773 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,773 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,773 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:227 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,706 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 11
2013-01-31 13:15:49,774 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@64104cea}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@6a29c9f8}
	>> org.infinispan.interceptors.TxInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@5d8aef3b}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@4c603a77, PB=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@4c603a77}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@419e81cd, TO=org.infinispan.interceptors.EntryWrappingInterceptor@419e81cd, PB=org.infinispan.interceptors.EntryWrappingInterceptor@419e81cd}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:49,706 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 11
2013-01-31 13:15:49,769 DEBUG (Thread-37) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [Thread-37] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:203 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,775 DEBUG (Thread-37) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [Thread-37] local transaction null:142 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:203 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,775 DEBUG (Thread-37) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [Thread-37] local transaction null:142 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,754 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:49,775 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:49,753 DEBUG (testng-BatchWithoutTMTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:49,746 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [key_1=old_value]
2013-01-31 13:15:49,776 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:49,776 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:49,776 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:49,743 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:49,776 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:49,777 INFO  (testng-CacheAPIOptimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testConfiguration(org.infinispan.api.mvcc.read_committed.CacheAPIOptimisticTest)
2013-01-31 13:15:49,777 INFO  (testng-CacheAPIOptimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testConfiguration(org.infinispan.api.mvcc.read_committed.CacheAPIOptimisticTest).
2013-01-31 13:15:49,777 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:49,777 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == []
2013-01-31 13:15:49,777 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:49,777 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:49,777 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:49,778 INFO  (testng-CacheAPIOptimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testEntrySetEqualityInTx(org.infinispan.api.mvcc.read_committed.CacheAPIOptimisticTest)
2013-01-31 13:15:49,778 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:22e status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,778 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,778 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,778 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:22e status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,778 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:143 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:22e status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,778 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:143 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,742 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:49,779 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:232 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,779 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,778 INFO  (testng-CacheAPIOptimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testRollbackAfterClear(org.infinispan.api.mvcc.repeatable_read.CacheAPIOptimisticTest)
2013-01-31 13:15:49,779 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:233 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,779 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,779 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,779 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:233 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,779 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:144 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:233 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,779 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:144 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,780 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:237 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,780 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,780 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,780 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:237 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,774 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@d5bdb63}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@9a0476f}
	>> org.infinispan.interceptors.TxInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@79b1cd58}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.PessimisticLockingInterceptor@8208ad3, PB=org.infinispan.interceptors.locking.PessimisticLockingInterceptor@8208ad3}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@107a26d0, TO=org.infinispan.interceptors.EntryWrappingInterceptor@107a26d0, PB=org.infinispan.interceptors.EntryWrappingInterceptor@107a26d0}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:49,780 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.CacheImpl] Started cache test on null
2013-01-31 13:15:49,780 INFO  (testng-CacheAPIPessimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testStopClearsData(org.infinispan.api.mvcc.repeatable_read.CacheAPIPessimisticTest).
2013-01-31 13:15:49,781 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:49,781 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == []
2013-01-31 13:15:49,781 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:49,781 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:49,781 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:49,781 INFO  (testng-CacheAPIPessimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testConfiguration(org.infinispan.api.mvcc.repeatable_read.CacheAPIPessimisticTest)
2013-01-31 13:15:49,782 INFO  (testng-CacheAPIPessimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testConfiguration(org.infinispan.api.mvcc.repeatable_read.CacheAPIPessimisticTest).
2013-01-31 13:15:49,782 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:49,782 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == []
2013-01-31 13:15:49,782 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:49,782 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:49,782 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:49,782 INFO  (testng-CacheAPIPessimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testEntrySetEqualityInTx(org.infinispan.api.mvcc.repeatable_read.CacheAPIPessimisticTest)
2013-01-31 13:15:49,782 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:23b status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,783 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,783 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,774 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.CacheImpl] Started cache test on null
2013-01-31 13:15:49,786 DEBUG (Thread-40) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [Thread-40] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:23c status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,789 DEBUG (Thread-40) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [Thread-40] will wait until no switch is in progress
2013-01-31 13:15:49,789 DEBUG (Thread-40) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [Thread-40] no switch in progress. Moving on...
2013-01-31 13:15:49,789 DEBUG (Thread-40) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [Thread-40] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:23c status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,783 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:23b status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,790 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:147 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:23b status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,790 INFO  (testng-CacheAPIMVCCTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testStopClearsData(org.infinispan.api.lru.read_committed.CacheAPIMVCCTest).
2013-01-31 13:15:49,790 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:147 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,790 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:49,790 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == []
2013-01-31 13:15:49,790 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:49,790 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:49,791 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:49,791 INFO  (testng-CacheAPIMVCCTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testConfiguration(org.infinispan.api.lru.read_committed.CacheAPIMVCCTest)
2013-01-31 13:15:49,791 INFO  (testng-CacheAPIMVCCTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testConfiguration(org.infinispan.api.lru.read_committed.CacheAPIMVCCTest).
2013-01-31 13:15:49,791 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:49,791 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == []
2013-01-31 13:15:49,792 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:49,792 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:49,792 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:49,792 INFO  (testng-CacheAPIMVCCTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testEntrySetEqualityInTx(org.infinispan.api.lru.read_committed.CacheAPIMVCCTest)
2013-01-31 13:15:49,792 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:243 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,792 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIMVCCTest] will wait until no switch is in progress
2013-01-31 13:15:49,792 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIMVCCTest] no switch in progress. Moving on...
2013-01-31 13:15:49,792 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:243 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,792 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction null:148 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:243 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,793 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction null:148 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,793 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:247 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,793 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIMVCCTest] will wait until no switch is in progress
2013-01-31 13:15:49,793 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIMVCCTest] no switch in progress. Moving on...
2013-01-31 13:15:49,793 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:247 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,793 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction null:149 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:247 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,793 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction null:149 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,794 INFO  (testng-CacheAPIMVCCTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testEntrySetEqualityInTx(org.infinispan.api.lru.read_committed.CacheAPIMVCCTest).
2013-01-31 13:15:49,794 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:24b status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,794 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,794 INFO  (testng-ReadCommittedLockTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:49,794 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:49,779 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,795 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:232 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,803 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:150 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:232 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,803 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:150 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,804 INFO  (testng-CacheAPIOptimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testEntrySetEqualityInTx(org.infinispan.api.mvcc.read_committed.CacheAPIOptimisticTest).
2013-01-31 13:15:49,804 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:49,804 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [2=v2-testEntrySetEqualityInTx, 1=v1-testEntrySetEqualityInTx, 3=v3-testEntrySetEqualityInTx]
2013-01-31 13:15:49,804 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:49,804 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:49,804 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:49,805 INFO  (testng-CacheAPIOptimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testGetMembersInLocalMode(org.infinispan.api.mvcc.read_committed.CacheAPIOptimisticTest)
2013-01-31 13:15:49,805 INFO  (testng-CacheAPIOptimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testGetMembersInLocalMode(org.infinispan.api.mvcc.read_committed.CacheAPIOptimisticTest).
2013-01-31 13:15:49,805 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:49,805 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == []
2013-01-31 13:15:49,805 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:49,805 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:49,805 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:49,794 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,808 INFO  (testng-CacheAPIOptimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testPutIfAbsentAfterRemoveInTx(org.infinispan.api.mvcc.read_committed.CacheAPIOptimisticTest)
2013-01-31 13:15:49,790 DEBUG (Thread-40) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [Thread-40] local transaction null:146 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:23c status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,808 DEBUG (Thread-40) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [Thread-40] local transaction null:146 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,809 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:24f status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,809 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,809 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,809 DEBUG (Thread-42) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [Thread-42] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:250 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,809 DEBUG (Thread-42) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [Thread-42] will wait until no switch is in progress
2013-01-31 13:15:49,809 DEBUG (Thread-42) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [Thread-42] no switch in progress. Moving on...
2013-01-31 13:15:49,809 DEBUG (Thread-42) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [Thread-42] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:250 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,809 DEBUG (Thread-42) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [Thread-42] local transaction null:151 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:250 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,809 DEBUG (Thread-42) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [Thread-42] local transaction null:151 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,808 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:24b status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,799 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:49,837 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:152 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:24b status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,837 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:152 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,837 INFO  (testng-CacheAPIPessimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testEntrySetEqualityInTx(org.infinispan.api.mvcc.repeatable_read.CacheAPIPessimisticTest).
2013-01-31 13:15:49,837 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:49,837 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [2=v2-testEntrySetEqualityInTx, 1=v1-testEntrySetEqualityInTx, 3=v3-testEntrySetEqualityInTx]
2013-01-31 13:15:49,837 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:49,837 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:49,838 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:49,798 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:141 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:227 status: ActionStatus.ABORTING >] wants to rollback
2013-01-31 13:15:49,798 DEBUG (testng-BatchWithoutTMTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:49,838 INFO  (testng-CacheAPIPessimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testGetMembersInLocalMode(org.infinispan.api.mvcc.repeatable_read.CacheAPIPessimisticTest)
2013-01-31 13:15:49,838 INFO  (testng-CacheAPIPessimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testGetMembersInLocalMode(org.infinispan.api.mvcc.repeatable_read.CacheAPIPessimisticTest).
2013-01-31 13:15:49,839 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:49,839 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == []
2013-01-31 13:15:49,839 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:49,839 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:49,839 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:49,839 DEBUG (testng-BatchWithoutTMTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:49,839 INFO  (testng-CacheAPIPessimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testPutIfAbsentAfterRemoveInTx(org.infinispan.api.mvcc.repeatable_read.CacheAPIPessimisticTest)
2013-01-31 13:15:49,839 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:257 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,839 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,839 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,839 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:257 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,840 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:153 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:257 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,840 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:153 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,840 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:25b status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,840 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,840 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,840 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:25b status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,840 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:154 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:25b status: ActionStatus.ABORTING >] wants to rollback
2013-01-31 13:15:49,841 DEBUG (testng-BatchWithoutTMTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 12
2013-01-31 13:15:49,841 DEBUG (testng-BatchWithoutTMTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.BatchingInterceptor
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@bf614e2}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@48d50790}
	>> org.infinispan.interceptors.TxInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@19e3a44b}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@30374534, PB=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@30374534}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@7ca071a6, TO=org.infinispan.interceptors.EntryWrappingInterceptor@7ca071a6, PB=org.infinispan.interceptors.EntryWrappingInterceptor@7ca071a6}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:49,841 DEBUG (testng-BatchWithoutTMTest) [org.infinispan.CacheImpl] Started cache testEndBatchWithoutStartBatch on null
2013-01-31 13:15:49,841 INFO  (testng-BatchWithoutTMTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testEndBatchWithoutStartBatch(org.infinispan.api.batch.BatchWithoutTMTest).
2013-01-31 13:15:49,841 INFO  (testng-BatchWithoutTMTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testStartBatchIdempotency(org.infinispan.api.batch.BatchWithoutTMTest)
2013-01-31 13:15:49,842 INFO  (testng-BatchWithoutTMTest) [org.infinispan.transaction.lookup.JBossStandaloneJTAManagerLookup] ISPN000107: Retrieving transaction manager Transaction: unknown
2013-01-31 13:15:49,843 DEBUG (testng-BatchWithoutTMTest) [org.infinispan.configuration.cache.TransactionConfigurationBuilder] Switching to Synchronization based enlistment.
2013-01-31 13:15:49,843 INFO  (testng-BatchWithoutTMTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:49,844 DEBUG (testng-BatchWithoutTMTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:49,844 DEBUG (testng-BatchWithoutTMTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:49,846 DEBUG (testng-BatchWithoutTMTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:49,847 DEBUG (testng-BatchWithoutTMTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 12
2013-01-31 13:15:49,848 DEBUG (testng-BatchWithoutTMTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.BatchingInterceptor
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@1df33d1c}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@4c3108a0}
	>> org.infinispan.interceptors.TxInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@272d6774}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@15e304c4, PB=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@15e304c4}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@6b4deb15, TO=org.infinispan.interceptors.EntryWrappingInterceptor@6b4deb15, PB=org.infinispan.interceptors.EntryWrappingInterceptor@6b4deb15}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:49,848 DEBUG (testng-BatchWithoutTMTest) [org.infinispan.CacheImpl] Started cache testStartBatchIdempotency on null
2013-01-31 13:15:49,848 DEBUG (testng-BatchWithoutTMTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-BatchWithoutTMTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:25f status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,848 DEBUG (testng-BatchWithoutTMTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-BatchWithoutTMTest] will wait until no switch is in progress
2013-01-31 13:15:49,848 DEBUG (testng-BatchWithoutTMTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-BatchWithoutTMTest] no switch in progress. Moving on...
2013-01-31 13:15:49,848 DEBUG (testng-BatchWithoutTMTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-BatchWithoutTMTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:25f status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,848 DEBUG (testng-BatchWithoutTMTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-BatchWithoutTMTest] local transaction null:155 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:25f status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,849 INFO  (testng-CacheAPIPessimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testRollbackAfterClear(org.infinispan.api.mvcc.read_committed.CacheAPIPessimisticTest).
2013-01-31 13:15:49,854 DEBUG (testng-BatchWithoutTMTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-BatchWithoutTMTest] local transaction null:155 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,855 INFO  (testng-BatchWithoutTMTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testStartBatchIdempotency(org.infinispan.api.batch.BatchWithoutTMTest).
2013-01-31 13:15:49,855 DEBUG (testng-BatchWithoutTMTest) [org.infinispan.CacheImpl] Stopping cache testBatchVisibility on null
2013-01-31 13:15:49,855 DEBUG (testng-BatchWithoutTMTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 1 seconds.
2013-01-31 13:15:49,855 DEBUG (testng-BatchWithoutTMTest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:49,858 DEBUG (testng-BatchWithoutTMTest) [org.infinispan.CacheImpl] Stopping cache testStartBatchIdempotency on null
2013-01-31 13:15:49,859 DEBUG (testng-BatchWithoutTMTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 1 seconds.
2013-01-31 13:15:49,859 DEBUG (testng-BatchWithoutTMTest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:49,859 DEBUG (testng-BatchWithoutTMTest) [org.infinispan.CacheImpl] Stopping cache testBatchWithoutCfg on null
2013-01-31 13:15:49,859 DEBUG (testng-BatchWithoutTMTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 1 seconds.
2013-01-31 13:15:49,859 DEBUG (testng-BatchWithoutTMTest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:49,859 DEBUG (testng-BatchWithoutTMTest) [org.infinispan.CacheImpl] Stopping cache testBatchRollback on null
2013-01-31 13:15:49,860 DEBUG (testng-BatchWithoutTMTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 1 seconds.
2013-01-31 13:15:49,860 DEBUG (testng-BatchWithoutTMTest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:49,860 DEBUG (testng-BatchWithoutTMTest) [org.infinispan.CacheImpl] Stopping cache testEndBatchWithoutStartBatch on null
2013-01-31 13:15:49,860 DEBUG (testng-BatchWithoutTMTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 1 seconds.
2013-01-31 13:15:49,860 DEBUG (testng-BatchWithoutTMTest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:49,860 DEBUG (testng-BatchWithoutTMTest) [org.infinispan.manager.DefaultCacheManager] Stopping cache manager ISPN on null
2013-01-31 13:15:49,860 DEBUG (testng-BatchWithoutTMTest) [org.infinispan.CacheImpl] Stopping cache testBatchRollback on null
2013-01-31 13:15:49,860 DEBUG (testng-BatchWithoutTMTest) [org.infinispan.CacheImpl] Stopping cache testBatchVisibility on null
2013-01-31 13:15:49,860 DEBUG (testng-BatchWithoutTMTest) [org.infinispan.CacheImpl] Stopping cache testBatchWithoutCfg on null
2013-01-31 13:15:49,860 DEBUG (testng-BatchWithoutTMTest) [org.infinispan.CacheImpl] Stopping cache testEndBatchWithoutStartBatch on null
2013-01-31 13:15:49,861 DEBUG (testng-BatchWithoutTMTest) [org.infinispan.CacheImpl] Stopping cache testStartBatchIdempotency on null
2013-01-31 13:15:49,863 DEBUG (testng-WriteSkewTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:49,797 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:49,876 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:49,878 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 11
2013-01-31 13:15:49,878 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@6a86ad83}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@2fe9aa18}
	>> org.infinispan.interceptors.TxInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@159e263b}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@41dff693, PB=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@41dff693}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@56b54eae, TO=org.infinispan.interceptors.EntryWrappingInterceptor@56b54eae, PB=org.infinispan.interceptors.EntryWrappingInterceptor@56b54eae}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:49,797 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:145 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:237 status: ActionStatus.ABORTING >] wants to rollback
2013-01-31 13:15:49,795 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [2=v2-testEntrySetEqualityInTx, 1=v1-testEntrySetEqualityInTx, 3=v3-testEntrySetEqualityInTx]
2013-01-31 13:15:49,915 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:49,915 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:49,915 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:49,916 INFO  (testng-CacheAPIMVCCTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testGetMembersInLocalMode(org.infinispan.api.lru.read_committed.CacheAPIMVCCTest)
2013-01-31 13:15:49,888 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.CacheImpl] Started cache ___defaultcache on null
2013-01-31 13:15:49,882 DEBUG (testng-WriteSkewTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:49,868 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:49,917 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [key=value]
2013-01-31 13:15:49,917 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:49,917 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:49,917 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:49,917 INFO  (testng-CacheAPIPessimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testRollbackAfterOverwrite(org.infinispan.api.mvcc.read_committed.CacheAPIPessimisticTest)
2013-01-31 13:15:49,858 INFO  (testng-CacheAPIPessimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testPutIfAbsentAfterRemoveInTx(org.infinispan.api.mvcc.repeatable_read.CacheAPIPessimisticTest).
2013-01-31 13:15:49,918 DEBUG (testng-AsyncWithTxTest) [org.jgroups.protocols.FRAG2] received CONFIG event: {bind_addr=/127.0.0.1}
2013-01-31 13:15:49,918 INFO  (testng-CacheAPIMVCCTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testGetMembersInLocalMode(org.infinispan.api.lru.read_committed.CacheAPIMVCCTest).
2013-01-31 13:15:49,918 INFO  (testng-CacheAPIOptimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testRollbackAfterClear(org.infinispan.api.mvcc.repeatable_read.CacheAPIOptimisticTest).
2013-01-31 13:15:49,837 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:49,809 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:24f status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,922 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:49,925 DEBUG (testng-WriteSkewTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:49,926 INFO  (testng-WriteSkewTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testCheckWriteSkew(org.infinispan.api.mvcc.repeatable_read.WriteSkewTest)
2013-01-31 13:15:49,925 WARN  (testng-Command line test) [org.jgroups.stack.Configurator] [JGRP00013] TP.discard_incompatible_packets has been deprecated: incompatible packets are discarded anyway
2013-01-31 13:15:49,928 INFO  (testng-RepeatableReadLockTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testConcurrentWriters(org.infinispan.api.mvcc.repeatable_read.RepeatableReadLockTest)
2013-01-31 13:15:49,928 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepeatableReadLockTest] local transaction DummyTransaction{xid=DummyXid{id=6}, status=0} is starting. check if switch is in progress...
2013-01-31 13:15:49,928 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepeatableReadLockTest] will wait until no switch is in progress
2013-01-31 13:15:49,928 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepeatableReadLockTest] no switch in progress. Moving on...
2013-01-31 13:15:49,928 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepeatableReadLockTest] local transaction DummyTransaction{xid=DummyXid{id=6}, status=0} will use 2PC while executing
2013-01-31 13:15:49,928 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepeatableReadLockTest] local transaction null:156 [DummyTransaction{xid=DummyXid{id=6}, status=7}] wants to commit
2013-01-31 13:15:49,928 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepeatableReadLockTest] local transaction null:156 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,928 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepeatableReadLockTest] local transaction DummyTransaction{xid=DummyXid{id=7}, status=0} is starting. check if switch is in progress...
2013-01-31 13:15:49,928 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepeatableReadLockTest] will wait until no switch is in progress
2013-01-31 13:15:49,928 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepeatableReadLockTest] no switch in progress. Moving on...
2013-01-31 13:15:49,928 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepeatableReadLockTest] local transaction DummyTransaction{xid=DummyXid{id=7}, status=0} will use 2PC while executing
2013-01-31 13:15:49,929 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepeatableReadLockTest] local transaction null:157 [DummyTransaction{xid=DummyXid{id=7}, status=7}] wants to commit
2013-01-31 13:15:49,929 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepeatableReadLockTest] local transaction null:157 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,930 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:158 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:24f status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,930 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:158 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,931 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:49,931 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [key=value]
2013-01-31 13:15:49,931 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:49,931 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:268 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,931 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:49,931 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:49,931 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,931 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,931 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:268 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,931 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:159 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:268 status: ActionStatus.ABORTING >] wants to rollback
2013-01-31 13:15:49,931 INFO  (testng-CacheAPIOptimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testRollbackAfterOverwrite(org.infinispan.api.mvcc.repeatable_read.CacheAPIOptimisticTest)
2013-01-31 13:15:49,931 INFO  (testng-CacheAPIOptimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testPutIfAbsentAfterRemoveInTx(org.infinispan.api.mvcc.read_committed.CacheAPIOptimisticTest).
2013-01-31 13:15:49,932 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:26c status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,932 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,932 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,932 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:26c status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,932 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:49,932 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [key_1=old_value]
2013-01-31 13:15:49,932 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:49,932 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:49,932 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == []
2013-01-31 13:15:49,932 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:49,932 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:49,932 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:49,933 INFO  (testng-CacheAPIMVCCTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testPutIfAbsentAfterRemoveInTx(org.infinispan.api.lru.read_committed.CacheAPIMVCCTest)
2013-01-31 13:15:49,933 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:264 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,933 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,933 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,933 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:264 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,932 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:160 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:26c status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,933 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:160 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,934 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:272 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,934 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,934 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,934 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:272 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,934 DEBUG (Thread-43) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [Thread-43] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:263 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,934 DEBUG (Thread-43) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [Thread-43] will wait until no switch is in progress
2013-01-31 13:15:49,934 DEBUG (Thread-43) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [Thread-43] no switch in progress. Moving on...
2013-01-31 13:15:49,934 DEBUG (Thread-43) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [Thread-43] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:263 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,934 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:162 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:272 status: ActionStatus.ABORTING >] wants to rollback
2013-01-31 13:15:49,934 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:161 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:264 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,934 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:161 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,934 INFO  (testng-CacheAPIOptimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testRollbackAfterOverwrite(org.infinispan.api.mvcc.repeatable_read.CacheAPIOptimisticTest).
2013-01-31 13:15:49,935 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:27b status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,935 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,935 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,935 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:27b status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,933 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:270 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,935 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIMVCCTest] will wait until no switch is in progress
2013-01-31 13:15:49,935 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIMVCCTest] no switch in progress. Moving on...
2013-01-31 13:15:49,935 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:270 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,935 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:164 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:27b status: ActionStatus.ABORTING >] wants to rollback
2013-01-31 13:15:49,933 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:49,935 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [key_1=old_value]
2013-01-31 13:15:49,935 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:49,936 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:49,936 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:49,936 INFO  (testng-CacheAPIPessimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testRollbackAfterClear(org.infinispan.api.mvcc.repeatable_read.CacheAPIPessimisticTest)
2013-01-31 13:15:49,936 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:282 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,936 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,936 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,936 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:282 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,936 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:166 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:282 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,937 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:166 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,937 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 11
2013-01-31 13:15:49,937 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:286 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,937 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,937 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,937 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:286 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,937 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:167 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:286 status: ActionStatus.ABORTING >] wants to rollback
2013-01-31 13:15:49,932 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:49,938 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:49,938 INFO  (testng-CacheAPIOptimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testRollbackAfterClear(org.infinispan.api.mvcc.read_committed.CacheAPIOptimisticTest)
2013-01-31 13:15:49,938 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:28a status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,938 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,939 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,939 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:28a status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,939 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:168 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:28a status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,939 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:168 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,939 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:28e status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,939 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,939 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,939 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:28e status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,941 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:169 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:28e status: ActionStatus.ABORTING >] wants to rollback
2013-01-31 13:15:49,937 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@23a83610}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@787566b9}
	>> org.infinispan.interceptors.TxInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@63ab3977}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@7e49e6bf, PB=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@7e49e6bf}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@25cc465f, TO=org.infinispan.interceptors.EntryWrappingInterceptor@25cc465f, PB=org.infinispan.interceptors.EntryWrappingInterceptor@25cc465f}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:49,936 INFO  (testng-CacheAPIPessimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testRollbackAfterOverwrite(org.infinispan.api.mvcc.read_committed.CacheAPIPessimisticTest).
2013-01-31 13:15:49,944 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:49,944 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [key=value]
2013-01-31 13:15:49,944 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:49,944 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:49,944 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:49,945 INFO  (testng-CacheAPIPessimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testRollbackAfterPut(org.infinispan.api.mvcc.read_committed.CacheAPIPessimisticTest)
2013-01-31 13:15:49,945 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:292 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,945 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,945 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,945 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:292 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,946 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:170 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:292 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,946 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:170 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,946 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:296 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,946 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,946 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,946 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:296 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,951 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:171 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:296 status: ActionStatus.ABORTING >] wants to rollback
2013-01-31 13:15:49,951 INFO  (testng-CacheAPIPessimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testRollbackAfterPut(org.infinispan.api.mvcc.read_committed.CacheAPIPessimisticTest).
2013-01-31 13:15:49,952 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:49,952 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [key=value]
2013-01-31 13:15:49,952 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:49,952 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:49,952 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:49,952 INFO  (testng-CacheAPIPessimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testRollbackAfterRemove(org.infinispan.api.mvcc.read_committed.CacheAPIPessimisticTest)
2013-01-31 13:15:49,952 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:29a status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,952 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,952 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,952 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:29a status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,953 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:172 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:29a status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,953 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:172 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,953 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:29e status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,953 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,953 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,953 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:29e status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,954 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:173 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:29e status: ActionStatus.ABORTING >] wants to rollback
2013-01-31 13:15:49,954 INFO  (testng-CacheAPIPessimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testRollbackAfterRemove(org.infinispan.api.mvcc.read_committed.CacheAPIPessimisticTest).
2013-01-31 13:15:49,954 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:49,954 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [key=value]
2013-01-31 13:15:49,954 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:49,954 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:49,954 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:49,955 INFO  (testng-CacheAPIPessimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testSizeAfterClear(org.infinispan.api.mvcc.read_committed.CacheAPIPessimisticTest)
2013-01-31 13:15:49,955 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:2a2 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,955 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,955 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,955 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:2a2 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,955 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:174 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:2a2 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,955 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:174 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,956 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:2a6 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,956 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,956 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,956 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:2a6 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,956 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:175 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:2a6 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,956 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:175 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,956 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:2aa status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,956 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,956 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,956 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:2aa status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,957 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:176 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:2aa status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,957 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:176 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,957 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:2ae status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,957 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,957 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,957 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:2ae status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,957 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:177 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:2ae status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,957 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:177 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,957 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:2b2 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,957 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,957 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,958 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:2b2 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,958 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:178 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:2b2 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,958 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:178 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,958 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:2b6 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,958 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,966 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,966 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:2b6 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,966 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:179 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:2b6 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,966 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:179 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,966 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:2ba status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,966 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,935 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction null:165 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:270 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,980 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction null:165 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,981 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:2bb status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,981 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIMVCCTest] will wait until no switch is in progress
2013-01-31 13:15:49,981 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIMVCCTest] no switch in progress. Moving on...
2013-01-31 13:15:49,981 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:2bb status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,981 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction null:180 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:2bb status: ActionStatus.ABORTING >] wants to rollback
2013-01-31 13:15:49,935 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:49,934 DEBUG (Thread-43) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [Thread-43] local transaction null:163 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:263 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,982 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [key=value]
2013-01-31 13:15:49,982 DEBUG (Thread-43) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [Thread-43] local transaction null:163 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,970 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.CacheImpl] Started cache ___defaultcache on null
2013-01-31 13:15:49,982 INFO  (testng-ReadCommittedLockTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testLocksOnRemoveData(org.infinispan.api.mvcc.read_committed.ReadCommittedLockTest)
2013-01-31 13:15:49,982 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction DummyTransaction{xid=DummyXid{id=8}, status=0} is starting. check if switch is in progress...
2013-01-31 13:15:49,982 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-ReadCommittedLockTest] will wait until no switch is in progress
2013-01-31 13:15:49,983 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-ReadCommittedLockTest] no switch in progress. Moving on...
2013-01-31 13:15:49,983 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction DummyTransaction{xid=DummyXid{id=8}, status=0} will use 2PC while executing
2013-01-31 13:15:49,960 INFO  (testng-CacheAPIOptimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testRollbackAfterClear(org.infinispan.api.mvcc.read_committed.CacheAPIOptimisticTest).
2013-01-31 13:15:49,983 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:49,983 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [key=value]
2013-01-31 13:15:49,983 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:49,983 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:49,983 DEBUG (testng-BatchWithTMTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-BatchWithTMTest] local transaction null:130 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:1ff status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,984 DEBUG (testng-BatchWithTMTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-BatchWithTMTest] local transaction null:130 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,982 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:49,984 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:49,984 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:49,984 INFO  (testng-CacheAPIOptimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testRollbackAfterPut(org.infinispan.api.mvcc.repeatable_read.CacheAPIOptimisticTest)
2013-01-31 13:15:49,985 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:2bf status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,985 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,985 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,985 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:2bf status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,985 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:182 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:2bf status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,985 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:182 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,985 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:2c3 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,985 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,985 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,985 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:2c3 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,983 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:49,987 INFO  (testng-CacheAPIOptimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testRollbackAfterOverwrite(org.infinispan.api.mvcc.read_committed.CacheAPIOptimisticTest)
2013-01-31 13:15:49,987 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:2c7 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,987 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,987 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,987 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:2c7 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,987 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:184 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:2c7 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,987 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:184 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,988 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:2cb status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,988 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,988 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,988 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:2cb status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,989 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:185 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:2cb status: ActionStatus.ABORTING >] wants to rollback
2013-01-31 13:15:49,989 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction null:181 [DummyTransaction{xid=DummyXid{id=8}, status=7}] wants to commit
2013-01-31 13:15:49,989 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction null:181 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,989 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction DummyTransaction{xid=DummyXid{id=9}, status=0} is starting. check if switch is in progress...
2013-01-31 13:15:49,989 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-ReadCommittedLockTest] will wait until no switch is in progress
2013-01-31 13:15:49,989 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-ReadCommittedLockTest] no switch in progress. Moving on...
2013-01-31 13:15:49,989 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction DummyTransaction{xid=DummyXid{id=9}, status=0} will use 2PC while executing
2013-01-31 13:15:49,989 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction null:186 [DummyTransaction{xid=DummyXid{id=9}, status=7}] wants to commit
2013-01-31 13:15:49,989 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction null:186 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,983 INFO  (testng-CacheAPIPessimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testRollbackAfterClear(org.infinispan.api.mvcc.repeatable_read.CacheAPIPessimisticTest).
2013-01-31 13:15:49,990 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:49,990 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [key=value]
2013-01-31 13:15:49,990 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:49,990 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:49,990 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:49,991 INFO  (testng-CacheAPIPessimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testRollbackAfterOverwrite(org.infinispan.api.mvcc.repeatable_read.CacheAPIPessimisticTest)
2013-01-31 13:15:49,991 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:2cf status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,991 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,991 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,991 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:2cf status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,991 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:187 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:2cf status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,991 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:187 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,991 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:2d3 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,992 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,992 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,992 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:2d3 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,992 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:188 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:2d3 status: ActionStatus.ABORTING >] wants to rollback
2013-01-31 13:15:49,992 INFO  (testng-CacheAPIPessimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testRollbackAfterOverwrite(org.infinispan.api.mvcc.repeatable_read.CacheAPIPessimisticTest).
2013-01-31 13:15:49,993 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:49,993 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [key=value]
2013-01-31 13:15:49,993 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:49,993 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:49,993 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:49,993 INFO  (testng-CacheAPIPessimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testRollbackAfterPut(org.infinispan.api.mvcc.repeatable_read.CacheAPIPessimisticTest)
2013-01-31 13:15:49,993 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:2d7 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,993 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,993 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,993 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:2d7 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,994 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:189 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:2d7 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,994 INFO  (testng-CacheAPIOptimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testRollbackAfterOverwrite(org.infinispan.api.mvcc.read_committed.CacheAPIOptimisticTest).
2013-01-31 13:15:49,994 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:189 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,994 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:49,994 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [key=value]
2013-01-31 13:15:49,994 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:2db status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,994 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,994 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,994 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:2db status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,994 DEBUG (Thread-45) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [Thread-45] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:2dc status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,994 DEBUG (Thread-45) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [Thread-45] will wait until no switch is in progress
2013-01-31 13:15:49,994 DEBUG (Thread-45) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [Thread-45] no switch in progress. Moving on...
2013-01-31 13:15:49,994 DEBUG (Thread-45) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [Thread-45] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:2dc status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,995 DEBUG (Thread-45) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [Thread-45] local transaction null:191 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:2dc status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,995 DEBUG (Thread-45) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [Thread-45] local transaction null:191 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,994 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:49,995 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:49,995 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:49,995 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction DummyTransaction{xid=DummyXid{id=10}, status=0} is starting. check if switch is in progress...
2013-01-31 13:15:49,995 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-ReadCommittedLockTest] will wait until no switch is in progress
2013-01-31 13:15:49,995 INFO  (testng-CacheAPIOptimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testRollbackAfterPut(org.infinispan.api.mvcc.read_committed.CacheAPIOptimisticTest)
2013-01-31 13:15:49,996 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:2e3 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,996 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,996 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,996 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:2e3 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,996 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:192 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:2e3 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,996 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:192 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,996 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:2e7 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,996 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] will wait until no switch is in progress
2013-01-31 13:15:49,996 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:49,996 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:2e7 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,997 INFO  (testng-CacheAPIMVCCTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testPutIfAbsentAfterRemoveInTx(org.infinispan.api.lru.read_committed.CacheAPIMVCCTest).
2013-01-31 13:15:49,997 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:49,997 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [key_1=old_value]
2013-01-31 13:15:49,997 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:49,997 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:49,997 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:49,998 INFO  (testng-CacheAPIMVCCTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testRollbackAfterOverwrite(org.infinispan.api.lru.read_committed.CacheAPIMVCCTest)
2013-01-31 13:15:49,998 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:2eb status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,998 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIMVCCTest] will wait until no switch is in progress
2013-01-31 13:15:49,998 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIMVCCTest] no switch in progress. Moving on...
2013-01-31 13:15:49,998 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:2eb status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,998 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction null:194 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:2eb status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:49,998 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction null:194 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:49,999 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:2ef status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:49,999 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIMVCCTest] will wait until no switch is in progress
2013-01-31 13:15:49,999 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIMVCCTest] no switch in progress. Moving on...
2013-01-31 13:15:49,999 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:2ef status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,999 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction null:195 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:2ef status: ActionStatus.ABORTING >] wants to rollback
2013-01-31 13:15:49,999 INFO  (testng-CacheAPIMVCCTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testRollbackAfterOverwrite(org.infinispan.api.lru.read_committed.CacheAPIMVCCTest).
2013-01-31 13:15:50,000 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:50,000 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [key=value]
2013-01-31 13:15:50,000 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:50,000 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:50,000 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:50,000 INFO  (testng-CacheAPIMVCCTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testRollbackAfterPut(org.infinispan.api.lru.read_committed.CacheAPIMVCCTest)
2013-01-31 13:15:50,000 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:2f3 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:50,000 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIMVCCTest] will wait until no switch is in progress
2013-01-31 13:15:50,000 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIMVCCTest] no switch in progress. Moving on...
2013-01-31 13:15:50,001 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:2f3 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:50,001 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction null:196 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:2f3 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:50,001 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction null:196 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:50,001 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:2f7 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:50,001 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIMVCCTest] will wait until no switch is in progress
2013-01-31 13:15:50,001 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIMVCCTest] no switch in progress. Moving on...
2013-01-31 13:15:50,001 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:2f7 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:49,995 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-ReadCommittedLockTest] no switch in progress. Moving on...
2013-01-31 13:15:50,004 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction DummyTransaction{xid=DummyXid{id=10}, status=0} will use 2PC while executing
2013-01-31 13:15:50,004 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction null:198 [DummyTransaction{xid=DummyXid{id=10}, status=7}] wants to commit
2013-01-31 13:15:50,004 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction null:198 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:50,004 ERROR (testng-ReadCommittedLockTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Method testLocksOnRemoveData(org.infinispan.api.mvcc.read_committed.ReadCommittedLockTest) threw an exception
java.lang.AssertionError: Stale locks exist! NumLocksHeld is 2 and lock info is org.infinispan.util.concurrent.locks.containers.OwnableReentrantPerEntryLockContainer@714494ca
	at org.infinispan.api.mvcc.LockAssert.assertNoLocks(LockAssert.java:48)
	at org.infinispan.api.mvcc.LockTestBase.assertNoLocks(LockTestBase.java:102)
	at org.infinispan.api.mvcc.LockTestBase.testLocksOnRemoveData(LockTestBase.java:224)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:50,027 ERROR (testng-ReadCommittedLockTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test failed testLocksOnRemoveData(org.infinispan.api.mvcc.read_committed.ReadCommittedLockTest)
java.lang.AssertionError: Stale locks exist! NumLocksHeld is 2 and lock info is org.infinispan.util.concurrent.locks.containers.OwnableReentrantPerEntryLockContainer@714494ca
	at org.infinispan.api.mvcc.LockAssert.assertNoLocks(LockAssert.java:48)
	at org.infinispan.api.mvcc.LockTestBase.assertNoLocks(LockTestBase.java:102)
	at org.infinispan.api.mvcc.LockTestBase.testLocksOnRemoveData(LockTestBase.java:224)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:50,037 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction null:197 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:2f7 status: ActionStatus.ABORTING >] wants to rollback
2013-01-31 13:15:50,037 INFO  (testng-CacheAPIMVCCTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testRollbackAfterPut(org.infinispan.api.lru.read_committed.CacheAPIMVCCTest).
2013-01-31 13:15:50,038 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:50,038 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [key=value]
2013-01-31 13:15:50,038 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:50,038 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:50,038 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:50,038 INFO  (testng-CacheAPIMVCCTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testRollbackAfterRemove(org.infinispan.api.lru.read_committed.CacheAPIMVCCTest)
2013-01-31 13:15:50,039 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:2fc status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:50,039 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIMVCCTest] will wait until no switch is in progress
2013-01-31 13:15:50,039 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIMVCCTest] no switch in progress. Moving on...
2013-01-31 13:15:50,039 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:2fc status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:50,039 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction null:199 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:2fc status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:50,039 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction null:199 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:50,040 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:300 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:50,040 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIMVCCTest] will wait until no switch is in progress
2013-01-31 13:15:50,040 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIMVCCTest] no switch in progress. Moving on...
2013-01-31 13:15:50,040 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:300 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:50,040 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction null:200 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:300 status: ActionStatus.ABORTING >] wants to rollback
2013-01-31 13:15:50,041 INFO  (testng-CacheAPIMVCCTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testRollbackAfterRemove(org.infinispan.api.lru.read_committed.CacheAPIMVCCTest).
2013-01-31 13:15:50,041 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:50,041 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [key=value]
2013-01-31 13:15:50,041 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:50,041 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:50,041 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:50,042 INFO  (testng-CacheAPIMVCCTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testSizeAfterClear(org.infinispan.api.lru.read_committed.CacheAPIMVCCTest)
2013-01-31 13:15:50,042 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:304 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:50,042 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIMVCCTest] will wait until no switch is in progress
2013-01-31 13:15:50,042 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIMVCCTest] no switch in progress. Moving on...
2013-01-31 13:15:50,042 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:304 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:50,042 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction null:201 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:304 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:50,042 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction null:201 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:50,043 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:308 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:50,043 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIMVCCTest] will wait until no switch is in progress
2013-01-31 13:15:50,043 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIMVCCTest] no switch in progress. Moving on...
2013-01-31 13:15:50,043 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:308 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:50,043 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction null:202 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:308 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:50,043 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction null:202 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:50,043 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:30c status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:50,043 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIMVCCTest] will wait until no switch is in progress
2013-01-31 13:15:50,044 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIMVCCTest] no switch in progress. Moving on...
2013-01-31 13:15:50,044 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:30c status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:50,044 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction null:203 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:30c status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:50,044 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction null:203 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:50,044 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:310 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:50,044 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIMVCCTest] will wait until no switch is in progress
2013-01-31 13:15:50,044 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIMVCCTest] no switch in progress. Moving on...
2013-01-31 13:15:50,044 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:310 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:50,051 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction null:204 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:310 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:50,051 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction null:204 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:50,052 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:314 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:50,052 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIMVCCTest] will wait until no switch is in progress
2013-01-31 13:15:50,052 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIMVCCTest] no switch in progress. Moving on...
2013-01-31 13:15:50,052 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:314 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:50,052 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction null:205 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:314 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:50,052 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction null:205 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:50,052 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:318 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:50,052 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIMVCCTest] will wait until no switch is in progress
2013-01-31 13:15:50,052 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIMVCCTest] no switch in progress. Moving on...
2013-01-31 13:15:50,052 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:318 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:50,053 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction null:206 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:318 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:50,053 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction null:206 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:50,053 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:31c status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:50,053 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIMVCCTest] will wait until no switch is in progress
2013-01-31 13:15:50,053 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIMVCCTest] no switch in progress. Moving on...
2013-01-31 13:15:50,053 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:31c status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:50,053 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction null:207 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:31c status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:50,053 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction null:207 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:50,053 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:320 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:50,054 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIMVCCTest] will wait until no switch is in progress
2013-01-31 13:15:50,054 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIMVCCTest] no switch in progress. Moving on...
2013-01-31 13:15:50,054 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:320 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:50,054 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction null:208 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:320 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:50,017 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:50,013 DEBUG (Thread-46) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [Thread-46] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:2fb status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:50,076 DEBUG (Thread-46) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [Thread-46] will wait until no switch is in progress
2013-01-31 13:15:50,076 DEBUG (Thread-46) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [Thread-46] no switch in progress. Moving on...
2013-01-31 13:15:50,076 DEBUG (Thread-46) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [Thread-46] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:2fb status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:50,076 DEBUG (Thread-46) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [Thread-46] local transaction null:209 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:2fb status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:50,076 DEBUG (Thread-46) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [Thread-46] local transaction null:209 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:50,077 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:2ba status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:50,077 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:210 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:2ba status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:50,077 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:210 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:50,077 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:32a status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:50,077 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] will wait until no switch is in progress
2013-01-31 13:15:50,077 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:50,077 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:32a status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:50,078 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:211 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:32a status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:50,078 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:211 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:50,078 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:32e status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:50,078 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] will wait until no switch is in progress
2013-01-31 13:15:50,078 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:50,078 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:32e status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:50,078 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:212 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:32e status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:50,078 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:212 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:50,078 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:332 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:50,078 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] will wait until no switch is in progress
2013-01-31 13:15:50,079 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:50,079 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:332 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:50,079 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:213 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:332 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:50,079 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:213 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:50,079 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:336 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:50,079 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] will wait until no switch is in progress
2013-01-31 13:15:50,079 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:50,079 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:336 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:50,080 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:214 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:336 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:50,080 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:214 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:50,080 INFO  (testng-CacheAPIPessimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testSizeAfterClear(org.infinispan.api.mvcc.read_committed.CacheAPIPessimisticTest).
2013-01-31 13:15:50,080 INFO  (testng-BatchWithTMTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testBatchWithoutOngoingTMSuspension(org.infinispan.api.batch.BatchWithTMTest).
2013-01-31 13:15:50,080 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:50,080 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == []
2013-01-31 13:15:50,081 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:50,081 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:50,081 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:50,081 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.CacheImpl] Stopping cache test on null
2013-01-31 13:15:50,081 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 30 seconds.
2013-01-31 13:15:50,081 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:50,081 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.manager.DefaultCacheManager] Stopping cache manager ISPN on null
2013-01-31 13:15:50,081 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.CacheImpl] Stopping cache test on null
2013-01-31 13:15:50,084 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction null:208 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:50,084 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:33a status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:50,084 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIMVCCTest] will wait until no switch is in progress
2013-01-31 13:15:50,084 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIMVCCTest] no switch in progress. Moving on...
2013-01-31 13:15:50,084 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:33a status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:50,089 DEBUG (testng-ParallelCacheStartTest) [org.infinispan.api.ParallelCacheStartTest] Creating cache managers
2013-01-31 13:15:50,073 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.api.mvcc.LockTestBase] **** - STARTING TEARDOWN - ****
2013-01-31 13:15:50,090 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on null
2013-01-31 13:15:50,070 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:193 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:2e7 status: ActionStatus.ABORTING >] wants to rollback
2013-01-31 13:15:50,091 INFO  (testng-CacheAPIOptimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testRollbackAfterPut(org.infinispan.api.mvcc.read_committed.CacheAPIOptimisticTest).
2013-01-31 13:15:50,091 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:50,091 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [key=value]
2013-01-31 13:15:50,091 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:50,091 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:50,091 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:50,092 INFO  (testng-CacheAPIOptimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testRollbackAfterRemove(org.infinispan.api.mvcc.read_committed.CacheAPIOptimisticTest)
2013-01-31 13:15:50,092 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:33e status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:50,092 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] will wait until no switch is in progress
2013-01-31 13:15:50,092 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:50,092 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:33e status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:50,092 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:216 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:33e status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:50,092 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:216 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:50,093 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:342 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:50,093 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] will wait until no switch is in progress
2013-01-31 13:15:50,093 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:50,093 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:342 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:50,062 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:190 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:2db status: ActionStatus.ABORTING >] wants to rollback
2013-01-31 13:15:50,093 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:217 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:342 status: ActionStatus.ABORTING >] wants to rollback
2013-01-31 13:15:50,094 INFO  (testng-CacheAPIOptimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testRollbackAfterRemove(org.infinispan.api.mvcc.read_committed.CacheAPIOptimisticTest).
2013-01-31 13:15:50,094 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:50,094 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [key=value]
2013-01-31 13:15:50,095 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:50,095 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:50,095 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:50,028 DEBUG (testng-Command line test) [org.jgroups.stack.Configurator] set property TCP.diagnostics_addr to default value /224.0.75.75
2013-01-31 13:15:50,095 INFO  (testng-CacheAPIPessimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testRollbackAfterPut(org.infinispan.api.mvcc.repeatable_read.CacheAPIPessimisticTest).
2013-01-31 13:15:50,028 INFO  (testng-WriteSkewTest) [org.infinispan.transaction.lookup.JBossStandaloneJTAManagerLookup] ISPN000107: Retrieving transaction manager Transaction: unknown
2013-01-31 13:15:50,095 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:50,095 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [key=value]
2013-01-31 13:15:50,096 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:50,096 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:50,096 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:50,027 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:183 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:2c3 status: ActionStatus.ABORTING >] wants to rollback
2013-01-31 13:15:50,096 INFO  (testng-CacheAPIOptimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testRollbackAfterPut(org.infinispan.api.mvcc.repeatable_read.CacheAPIOptimisticTest).
2013-01-31 13:15:50,097 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:50,097 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [key=value]
2013-01-31 13:15:50,097 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:50,097 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:50,099 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:50,099 INFO  (testng-CacheAPIOptimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testRollbackAfterRemove(org.infinispan.api.mvcc.repeatable_read.CacheAPIOptimisticTest)
2013-01-31 13:15:50,099 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:346 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:50,099 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] will wait until no switch is in progress
2013-01-31 13:15:50,099 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:50,099 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:346 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:50,100 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:218 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:346 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:50,100 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:218 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:50,100 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:34a status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:50,100 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] will wait until no switch is in progress
2013-01-31 13:15:50,100 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:50,100 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:34a status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:50,101 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:219 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:34a status: ActionStatus.ABORTING >] wants to rollback
2013-01-31 13:15:50,101 INFO  (testng-CacheAPIOptimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testRollbackAfterRemove(org.infinispan.api.mvcc.repeatable_read.CacheAPIOptimisticTest).
2013-01-31 13:15:50,101 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:50,101 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [key=value]
2013-01-31 13:15:50,101 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:50,101 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:50,101 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:50,102 INFO  (testng-CacheAPIOptimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testSizeAfterClear(org.infinispan.api.mvcc.repeatable_read.CacheAPIOptimisticTest)
2013-01-31 13:15:50,102 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:34e status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:50,102 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] will wait until no switch is in progress
2013-01-31 13:15:50,102 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:50,102 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:34e status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:50,102 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:220 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:34e status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:50,102 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:220 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:50,102 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:352 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:50,103 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] will wait until no switch is in progress
2013-01-31 13:15:50,103 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:50,103 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:352 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:50,103 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:221 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:352 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:50,103 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:221 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:50,103 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:356 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:50,103 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] will wait until no switch is in progress
2013-01-31 13:15:50,103 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:50,103 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:356 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:50,103 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:222 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:356 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:50,103 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:222 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:50,104 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:35a status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:50,104 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] will wait until no switch is in progress
2013-01-31 13:15:50,104 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:50,104 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:35a status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:50,104 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:223 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:35a status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:50,104 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:223 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:50,104 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:35e status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:50,104 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] will wait until no switch is in progress
2013-01-31 13:15:50,104 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:50,104 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:35e status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:50,105 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:224 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:35e status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:50,105 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:224 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:50,105 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:362 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:50,108 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] will wait until no switch is in progress
2013-01-31 13:15:50,108 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:50,108 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:362 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:50,108 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:225 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:362 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:50,108 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:225 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:50,109 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:366 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:50,109 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] will wait until no switch is in progress
2013-01-31 13:15:50,109 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:50,109 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:366 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:50,109 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:226 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:366 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:50,109 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:226 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:50,109 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:36a status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:50,110 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] will wait until no switch is in progress
2013-01-31 13:15:50,110 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:50,110 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:36a status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:50,110 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:227 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:36a status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:50,110 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:227 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:50,110 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:36e status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:50,110 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] will wait until no switch is in progress
2013-01-31 13:15:50,110 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:50,110 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:36e status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:50,110 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:228 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:36e status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:50,111 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:228 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:50,111 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:372 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:50,112 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] will wait until no switch is in progress
2013-01-31 13:15:50,112 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:50,112 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:372 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:50,112 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:229 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:372 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:50,112 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:229 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:50,112 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:376 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:50,112 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] will wait until no switch is in progress
2013-01-31 13:15:50,112 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:50,112 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:376 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:50,113 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:230 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:376 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:50,113 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:230 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:50,113 INFO  (testng-CacheAPIOptimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testSizeAfterClear(org.infinispan.api.mvcc.repeatable_read.CacheAPIOptimisticTest).
2013-01-31 13:15:50,114 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:50,114 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == []
2013-01-31 13:15:50,114 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:50,114 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:50,114 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:50,117 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.CacheImpl] Stopping cache test on null
2013-01-31 13:15:50,117 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 30 seconds.
2013-01-31 13:15:50,117 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:50,117 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.manager.DefaultCacheManager] Stopping cache manager ISPN on null
2013-01-31 13:15:50,117 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.CacheImpl] Stopping cache test on null
2013-01-31 13:15:50,095 INFO  (testng-CacheAPIOptimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testSizeAfterClear(org.infinispan.api.mvcc.read_committed.CacheAPIOptimisticTest)
2013-01-31 13:15:50,081 DEBUG (testng-BatchWithTMTest) [org.infinispan.CacheImpl] Stopping cache testBatchRollback on null
2013-01-31 13:15:50,120 DEBUG (testng-BatchWithTMTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 30 seconds.
2013-01-31 13:15:50,120 DEBUG (testng-BatchWithTMTest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:50,120 DEBUG (testng-BatchWithTMTest) [org.infinispan.CacheImpl] Stopping cache testBatchWithOngoingTM on null
2013-01-31 13:15:50,120 DEBUG (testng-BatchWithTMTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 30 seconds.
2013-01-31 13:15:50,120 DEBUG (testng-BatchWithTMTest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:50,121 DEBUG (testng-BatchWithTMTest) [org.infinispan.CacheImpl] Stopping cache testBatchWithoutOngoingTMSuspension on null
2013-01-31 13:15:50,121 DEBUG (testng-BatchWithTMTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 30 seconds.
2013-01-31 13:15:50,121 DEBUG (testng-BatchWithTMTest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:50,121 DEBUG (testng-BatchWithTMTest) [org.infinispan.manager.DefaultCacheManager] Stopping cache manager ISPN on null
2013-01-31 13:15:50,121 DEBUG (testng-BatchWithTMTest) [org.infinispan.CacheImpl] Stopping cache testBatchRollback on null
2013-01-31 13:15:50,121 DEBUG (testng-BatchWithTMTest) [org.infinispan.CacheImpl] Stopping cache testBatchWithoutOngoingTMSuspension on null
2013-01-31 13:15:50,121 DEBUG (testng-BatchWithTMTest) [org.infinispan.CacheImpl] Stopping cache testBatchWithOngoingTM on null
2013-01-31 13:15:50,129 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:37a status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:50,129 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] will wait until no switch is in progress
2013-01-31 13:15:50,129 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:50,130 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:37a status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:50,130 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:231 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:37a status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:50,130 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:231 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:50,131 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:37e status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:50,131 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] will wait until no switch is in progress
2013-01-31 13:15:50,131 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:50,131 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:37e status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:50,131 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:232 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:37e status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:50,131 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:232 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:50,131 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:382 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:50,132 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] will wait until no switch is in progress
2013-01-31 13:15:50,132 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:50,132 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:382 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:50,132 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:233 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:382 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:50,132 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:233 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:50,132 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:386 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:50,132 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] will wait until no switch is in progress
2013-01-31 13:15:50,132 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:50,132 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:386 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:50,132 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:234 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:386 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:50,132 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:234 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:50,133 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:38a status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:50,137 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] will wait until no switch is in progress
2013-01-31 13:15:50,137 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:50,137 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:38a status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:50,137 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:235 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:38a status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:50,138 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:235 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:50,138 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:38e status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:50,138 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] will wait until no switch is in progress
2013-01-31 13:15:50,138 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:50,138 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:38e status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:50,138 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:236 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:38e status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:50,138 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:236 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:50,138 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:392 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:50,138 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] will wait until no switch is in progress
2013-01-31 13:15:50,139 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:50,139 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:392 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:50,139 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:237 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:392 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:50,139 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:237 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:50,139 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:396 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:50,139 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] will wait until no switch is in progress
2013-01-31 13:15:50,139 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:50,139 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:396 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:50,139 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:238 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:396 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:50,139 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:238 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:50,140 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:39a status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:50,140 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] will wait until no switch is in progress
2013-01-31 13:15:50,140 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:50,140 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:39a status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:50,140 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:239 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:39a status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:50,140 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:239 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:50,140 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:39e status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:50,140 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] will wait until no switch is in progress
2013-01-31 13:15:50,140 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:50,140 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:39e status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:50,141 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:240 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:39e status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:50,141 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:240 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:50,141 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:3a2 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:50,141 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] will wait until no switch is in progress
2013-01-31 13:15:50,141 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIOptimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:50,141 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:3a2 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:50,097 INFO  (testng-CacheAPIPessimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testRollbackAfterRemove(org.infinispan.api.mvcc.repeatable_read.CacheAPIPessimisticTest)
2013-01-31 13:15:50,141 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:241 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:3a2 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:50,141 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIOptimisticTest] local transaction null:241 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:50,141 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:3a6 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:50,141 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] will wait until no switch is in progress
2013-01-31 13:15:50,141 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:50,141 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:3a6 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:50,142 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:242 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:3a6 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:50,142 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:242 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:50,142 INFO  (testng-CacheAPIOptimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testSizeAfterClear(org.infinispan.api.mvcc.read_committed.CacheAPIOptimisticTest).
2013-01-31 13:15:50,142 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:3aa status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:50,142 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] will wait until no switch is in progress
2013-01-31 13:15:50,142 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:50,142 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:3aa status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:50,143 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:243 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:3aa status: ActionStatus.ABORTING >] wants to rollback
2013-01-31 13:15:50,143 DEBUG (testng-ParallelCacheStartTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:50,143 INFO  (testng-CacheAPIPessimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testRollbackAfterRemove(org.infinispan.api.mvcc.repeatable_read.CacheAPIPessimisticTest).
2013-01-31 13:15:50,143 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:50,143 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [key=value]
2013-01-31 13:15:50,143 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:50,144 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:50,144 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:50,144 INFO  (testng-CacheAPIPessimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testSizeAfterClear(org.infinispan.api.mvcc.repeatable_read.CacheAPIPessimisticTest)
2013-01-31 13:15:50,144 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:3ae status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:50,144 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] will wait until no switch is in progress
2013-01-31 13:15:50,145 DEBUG (testng-SkipLockingTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:50,145 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:50,145 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:3ae status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:50,145 DEBUG (testng-TerminatedCacheTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:50,133 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction null:215 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:33a status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:50,146 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction null:215 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:50,147 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:3b2 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:50,147 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIMVCCTest] will wait until no switch is in progress
2013-01-31 13:15:50,147 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIMVCCTest] no switch in progress. Moving on...
2013-01-31 13:15:50,147 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:3b2 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:50,147 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction null:245 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:3b2 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:50,147 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction null:245 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:50,147 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:3b6 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:50,147 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIMVCCTest] will wait until no switch is in progress
2013-01-31 13:15:50,147 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIMVCCTest] no switch in progress. Moving on...
2013-01-31 13:15:50,147 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:3b6 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:50,133 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 1 seconds.
2013-01-31 13:15:50,148 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction null:246 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:3b6 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:50,133 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.util.concurrent.locks.LockManagerImpl] Failed to acquire lock k, owner is GlobalTransaction:<null>:156:local
2013-01-31 13:15:50,148 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.util.concurrent.locks.LockManagerImpl] This transaction (GlobalTransaction:<null>:157:local) already owned locks []
2013-01-31 13:15:50,148 ERROR (testng-RepeatableReadLockTest) [org.infinispan.interceptors.InvocationContextInterceptor] ISPN000136: Execution error
org.infinispan.util.concurrent.TimeoutException: Unable to acquire lock after [200 milliseconds] on key [k] for requestor [GlobalTransaction:<null>:157:local]! Lock held by [GlobalTransaction:<null>:156:local]
	at org.infinispan.util.concurrent.locks.LockManagerImpl.lock(LockManagerImpl.java:206)
	at org.infinispan.util.concurrent.locks.LockManagerImpl.acquireLock(LockManagerImpl.java:179)
	at org.infinispan.util.concurrent.locks.LockManagerImpl.acquireLock(LockManagerImpl.java:169)
	at org.infinispan.interceptors.locking.AbstractTxLockingInterceptor.lockKeyAndCheckOwnership(AbstractTxLockingInterceptor.java:217)
	at org.infinispan.interceptors.locking.AbstractTxLockingInterceptor.internalLockAndRegisterBackupLock(AbstractTxLockingInterceptor.java:144)
	at org.infinispan.interceptors.locking.AbstractTxLockingInterceptor.lockAndRegisterBackupLock(AbstractTxLockingInterceptor.java:135)
	at org.infinispan.interceptors.locking.OptimisticLockingInterceptor$LockAcquisitionVisitor.visitPutKeyValueCommand(OptimisticLockingInterceptor.java:251)
	at org.infinispan.commands.write.PutKeyValueCommand.acceptVisitor(PutKeyValueCommand.java:77)
	at org.infinispan.interceptors.locking.OptimisticLockingInterceptor.acquireLocksVisitingCommands(OptimisticLockingInterceptor.java:326)
	at org.infinispan.interceptors.locking.OptimisticLockingInterceptor.visitPrepareCommand(OptimisticLockingInterceptor.java:119)
	at org.infinispan.commands.tx.PrepareCommand.acceptVisitor(PrepareCommand.java:132)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleTxBoundaryCommand(ReconfigurableProtocolAwareWrapperInterceptor.java:89)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.visitPrepareCommand(ReconfigurableProtocolAwareWrapperInterceptor.java:31)
	at org.infinispan.commands.tx.PrepareCommand.acceptVisitor(PrepareCommand.java:132)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.NotificationInterceptor.visitPrepareCommand(NotificationInterceptor.java:58)
	at org.infinispan.commands.tx.PrepareCommand.acceptVisitor(PrepareCommand.java:132)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleTxBoundaryCommand(ReconfigurableProtocolAwareWrapperInterceptor.java:89)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.visitPrepareCommand(ReconfigurableProtocolAwareWrapperInterceptor.java:31)
	at org.infinispan.commands.tx.PrepareCommand.acceptVisitor(PrepareCommand.java:132)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.TxInterceptor.visitPrepareCommand(TxInterceptor.java:139)
	at org.infinispan.commands.tx.PrepareCommand.acceptVisitor(PrepareCommand.java:132)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleTxBoundaryCommand(ReconfigurableProtocolAwareWrapperInterceptor.java:89)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.visitPrepareCommand(ReconfigurableProtocolAwareWrapperInterceptor.java:31)
	at org.infinispan.commands.tx.PrepareCommand.acceptVisitor(PrepareCommand.java:132)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleTxBoundaryCommand(ReconfigurableProtocolAwareWrapperInterceptor.java:89)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.visitPrepareCommand(ReconfigurableProtocolAwareWrapperInterceptor.java:31)
	at org.infinispan.commands.tx.PrepareCommand.acceptVisitor(PrepareCommand.java:132)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitPrepareCommand(AbstractVisitor.java:126)
	at org.infinispan.commands.tx.PrepareCommand.acceptVisitor(PrepareCommand.java:132)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.transaction.TransactionCoordinator.prepare(TransactionCoordinator.java:176)
	at org.infinispan.transaction.TransactionCoordinator.prepare(TransactionCoordinator.java:145)
	at org.infinispan.transaction.xa.TransactionXaAdapter.prepare(TransactionXaAdapter.java:106)
	at org.infinispan.transaction.tm.DummyTransaction.runPrepare(DummyTransaction.java:254)
	at org.infinispan.api.mvcc.LockTestBase.testConcurrentWriters(LockTestBase.java:333)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:50,154 ERROR (testng-RepeatableReadLockTest) [org.infinispan.transaction.TransactionCoordinator] Error while processing prepare: Unable to acquire lock after [200 milliseconds] on key [k] for requestor [GlobalTransaction:<null>:157:local]! Lock held by [GlobalTransaction:<null>:156:local]
2013-01-31 13:15:50,154 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.transaction.TransactionCoordinator] Error while processing prepare
org.infinispan.util.concurrent.TimeoutException: Unable to acquire lock after [200 milliseconds] on key [k] for requestor [GlobalTransaction:<null>:157:local]! Lock held by [GlobalTransaction:<null>:156:local]
	at org.infinispan.util.concurrent.locks.LockManagerImpl.lock(LockManagerImpl.java:206)
	at org.infinispan.util.concurrent.locks.LockManagerImpl.acquireLock(LockManagerImpl.java:179)
	at org.infinispan.util.concurrent.locks.LockManagerImpl.acquireLock(LockManagerImpl.java:169)
	at org.infinispan.interceptors.locking.AbstractTxLockingInterceptor.lockKeyAndCheckOwnership(AbstractTxLockingInterceptor.java:217)
	at org.infinispan.interceptors.locking.AbstractTxLockingInterceptor.internalLockAndRegisterBackupLock(AbstractTxLockingInterceptor.java:144)
	at org.infinispan.interceptors.locking.AbstractTxLockingInterceptor.lockAndRegisterBackupLock(AbstractTxLockingInterceptor.java:135)
	at org.infinispan.interceptors.locking.OptimisticLockingInterceptor$LockAcquisitionVisitor.visitPutKeyValueCommand(OptimisticLockingInterceptor.java:251)
	at org.infinispan.commands.write.PutKeyValueCommand.acceptVisitor(PutKeyValueCommand.java:77)
	at org.infinispan.interceptors.locking.OptimisticLockingInterceptor.acquireLocksVisitingCommands(OptimisticLockingInterceptor.java:326)
	at org.infinispan.interceptors.locking.OptimisticLockingInterceptor.visitPrepareCommand(OptimisticLockingInterceptor.java:119)
	at org.infinispan.commands.tx.PrepareCommand.acceptVisitor(PrepareCommand.java:132)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleTxBoundaryCommand(ReconfigurableProtocolAwareWrapperInterceptor.java:89)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.visitPrepareCommand(ReconfigurableProtocolAwareWrapperInterceptor.java:31)
	at org.infinispan.commands.tx.PrepareCommand.acceptVisitor(PrepareCommand.java:132)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.NotificationInterceptor.visitPrepareCommand(NotificationInterceptor.java:58)
	at org.infinispan.commands.tx.PrepareCommand.acceptVisitor(PrepareCommand.java:132)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleTxBoundaryCommand(ReconfigurableProtocolAwareWrapperInterceptor.java:89)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.visitPrepareCommand(ReconfigurableProtocolAwareWrapperInterceptor.java:31)
	at org.infinispan.commands.tx.PrepareCommand.acceptVisitor(PrepareCommand.java:132)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.TxInterceptor.visitPrepareCommand(TxInterceptor.java:139)
	at org.infinispan.commands.tx.PrepareCommand.acceptVisitor(PrepareCommand.java:132)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleTxBoundaryCommand(ReconfigurableProtocolAwareWrapperInterceptor.java:89)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.visitPrepareCommand(ReconfigurableProtocolAwareWrapperInterceptor.java:31)
	at org.infinispan.commands.tx.PrepareCommand.acceptVisitor(PrepareCommand.java:132)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleTxBoundaryCommand(ReconfigurableProtocolAwareWrapperInterceptor.java:89)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.visitPrepareCommand(ReconfigurableProtocolAwareWrapperInterceptor.java:31)
	at org.infinispan.commands.tx.PrepareCommand.acceptVisitor(PrepareCommand.java:132)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitPrepareCommand(AbstractVisitor.java:126)
	at org.infinispan.commands.tx.PrepareCommand.acceptVisitor(PrepareCommand.java:132)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.transaction.TransactionCoordinator.prepare(TransactionCoordinator.java:176)
	at org.infinispan.transaction.TransactionCoordinator.prepare(TransactionCoordinator.java:145)
	at org.infinispan.transaction.xa.TransactionXaAdapter.prepare(TransactionXaAdapter.java:106)
	at org.infinispan.transaction.tm.DummyTransaction.runPrepare(DummyTransaction.java:254)
	at org.infinispan.api.mvcc.LockTestBase.testConcurrentWriters(LockTestBase.java:333)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:50,156 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepeatableReadLockTest] local transaction null:157 [DummyTransaction{xid=DummyXid{id=7}, status=1}] wants to rollback
2013-01-31 13:15:50,157 ERROR (testng-RepeatableReadLockTest) [org.infinispan.transaction.tm.DummyTransaction] ISPN000098: Exception while rollback
javax.transaction.xa.XAException
	at org.infinispan.transaction.xa.TransactionXaAdapter.getLocalTransactionAndValidateImpl(TransactionXaAdapter.java:248)
	at org.infinispan.transaction.xa.TransactionXaAdapter.rollback(TransactionXaAdapter.java:134)
	at org.infinispan.transaction.tm.DummyTransaction.runRollback(DummyTransaction.java:302)
	at org.infinispan.transaction.tm.DummyTransaction.rollback(DummyTransaction.java:109)
	at org.infinispan.transaction.tm.DummyBaseTransactionManager.rollback(DummyBaseTransactionManager.java:125)
	at org.infinispan.api.mvcc.LockTestBase.testConcurrentWriters(LockTestBase.java:335)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:50,161 ERROR (testng-RepeatableReadLockTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Method testConcurrentWriters(org.infinispan.api.mvcc.repeatable_read.RepeatableReadLockTest) threw an exception
java.lang.AssertionError: Stale locks exist! NumLocksHeld is 1 and lock info is org.infinispan.util.concurrent.locks.containers.OwnableReentrantPerEntryLockContainer@e25044e
	at org.infinispan.api.mvcc.LockAssert.assertNoLocks(LockAssert.java:48)
	at org.infinispan.api.mvcc.LockTestBase.assertNoLocks(LockTestBase.java:102)
	at org.infinispan.api.mvcc.LockTestBase.testConcurrentWriters(LockTestBase.java:339)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:50,167 ERROR (testng-RepeatableReadLockTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test failed testConcurrentWriters(org.infinispan.api.mvcc.repeatable_read.RepeatableReadLockTest)
java.lang.AssertionError: Stale locks exist! NumLocksHeld is 1 and lock info is org.infinispan.util.concurrent.locks.containers.OwnableReentrantPerEntryLockContainer@e25044e
	at org.infinispan.api.mvcc.LockAssert.assertNoLocks(LockAssert.java:48)
	at org.infinispan.api.mvcc.LockTestBase.assertNoLocks(LockTestBase.java:102)
	at org.infinispan.api.mvcc.LockTestBase.testConcurrentWriters(LockTestBase.java:339)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:50,171 DEBUG (testng-SkipLockingTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:50,171 DEBUG (testng-SkipLockingTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:50,148 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction null:246 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:50,148 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:50,175 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.manager.DefaultCacheManager] Stopping cache manager ISPN on null
2013-01-31 13:15:50,175 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on null
2013-01-31 13:15:50,177 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:50,145 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:244 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:3ae status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:50,180 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:244 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:50,180 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:3ba status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:50,180 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] will wait until no switch is in progress
2013-01-31 13:15:50,180 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:50,180 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:3ba status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:50,142 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:50,180 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == []
2013-01-31 13:15:50,180 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:50,181 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:50,181 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:50,160 DEBUG (testng-TerminatedCacheTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:50,183 DEBUG (testng-TerminatedCacheTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:50,136 DEBUG (testng-Command line test) [org.jgroups.protocols.FRAG2] received CONFIG event: {bind_addr=/127.0.0.1}
2013-01-31 13:15:50,152 DEBUG (testng-ParallelCacheStartTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:50,196 INFO  (testng-CacheAPIMVCCTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testSizeAfterClear(org.infinispan.api.lru.read_committed.CacheAPIMVCCTest).
2013-01-31 13:15:50,273 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:50,274 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == []
2013-01-31 13:15:50,274 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:50,274 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:50,274 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:50,274 INFO  (testng-CacheAPIMVCCTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testRollbackAfterClear(org.infinispan.api.lru.read_committed.CacheAPIMVCCTest)
2013-01-31 13:15:50,274 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:3be status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:50,274 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIMVCCTest] will wait until no switch is in progress
2013-01-31 13:15:50,274 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIMVCCTest] no switch in progress. Moving on...
2013-01-31 13:15:50,275 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:3be status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:50,275 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction null:248 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:3be status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:50,275 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction null:248 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:50,276 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:3c2 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:50,276 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIMVCCTest] will wait until no switch is in progress
2013-01-31 13:15:50,276 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIMVCCTest] no switch in progress. Moving on...
2013-01-31 13:15:50,276 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:3c2 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:50,276 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIMVCCTest] local transaction null:249 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:3c2 status: ActionStatus.ABORTING >] wants to rollback
2013-01-31 13:15:50,277 INFO  (testng-CacheAPIMVCCTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testRollbackAfterClear(org.infinispan.api.lru.read_committed.CacheAPIMVCCTest).
2013-01-31 13:15:50,277 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:50,277 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [key=value]
2013-01-31 13:15:50,277 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:50,277 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:50,277 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:50,278 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.CacheImpl] Stopping cache test on null
2013-01-31 13:15:50,278 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 30 seconds.
2013-01-31 13:15:50,278 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:50,278 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.manager.DefaultCacheManager] Stopping cache manager ISPN on null
2013-01-31 13:15:50,278 DEBUG (testng-CacheAPIMVCCTest) [org.infinispan.CacheImpl] Stopping cache test on null
2013-01-31 13:15:50,278 DEBUG (testng-SkipLockingTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:50,279 DEBUG (testng-SkipLockingTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:50,281 DEBUG (testng-SkipLockingTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:50,282 INFO  (testng-SkipLockingTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:50,232 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:50,282 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:50,169 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.api.mvcc.LockTestBase] **** - STARTING TEARDOWN - ****
2013-01-31 13:15:50,283 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on null
2013-01-31 13:15:50,283 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 1 seconds.
2013-01-31 13:15:50,283 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:50,283 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.manager.DefaultCacheManager] Stopping cache manager ISPN on null
2013-01-31 13:15:50,283 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on null
2013-01-31 13:15:50,286 INFO  (testng-ReadCommittedLockTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:50,289 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:50,290 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:50,290 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:50,291 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:50,292 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 11
2013-01-31 13:15:50,292 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@31b76950}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@631cb0}
	>> org.infinispan.interceptors.TxInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@6af06702}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@6d6474ec, PB=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@6d6474ec}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@280bef3f, TO=org.infinispan.interceptors.EntryWrappingInterceptor@280bef3f, PB=org.infinispan.interceptors.EntryWrappingInterceptor@280bef3f}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:50,293 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.CacheImpl] Started cache ___defaultcache on null
2013-01-31 13:15:50,293 INFO  (testng-ReadCommittedLockTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testLocksOnRemoveNonexistent(org.infinispan.api.mvcc.read_committed.ReadCommittedLockTest)
2013-01-31 13:15:50,293 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction DummyTransaction{xid=DummyXid{id=11}, status=0} is starting. check if switch is in progress...
2013-01-31 13:15:50,293 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-ReadCommittedLockTest] will wait until no switch is in progress
2013-01-31 13:15:50,293 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-ReadCommittedLockTest] no switch in progress. Moving on...
2013-01-31 13:15:50,294 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction DummyTransaction{xid=DummyXid{id=11}, status=0} will use 2PC while executing
2013-01-31 13:15:50,294 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction null:250 [DummyTransaction{xid=DummyXid{id=11}, status=7}] wants to commit
2013-01-31 13:15:50,294 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction null:250 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:50,294 ERROR (testng-ReadCommittedLockTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Method testLocksOnRemoveNonexistent(org.infinispan.api.mvcc.read_committed.ReadCommittedLockTest) threw an exception
java.lang.AssertionError: Stale locks exist! NumLocksHeld is 1 and lock info is org.infinispan.util.concurrent.locks.containers.OwnableReentrantPerEntryLockContainer@63637de8
	at org.infinispan.api.mvcc.LockAssert.assertNoLocks(LockAssert.java:48)
	at org.infinispan.api.mvcc.LockTestBase.assertNoLocks(LockTestBase.java:102)
	at org.infinispan.api.mvcc.LockTestBase.testLocksOnRemoveNonexistent(LockTestBase.java:186)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:50,309 ERROR (testng-ReadCommittedLockTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test failed testLocksOnRemoveNonexistent(org.infinispan.api.mvcc.read_committed.ReadCommittedLockTest)
java.lang.AssertionError: Stale locks exist! NumLocksHeld is 1 and lock info is org.infinispan.util.concurrent.locks.containers.OwnableReentrantPerEntryLockContainer@63637de8
	at org.infinispan.api.mvcc.LockAssert.assertNoLocks(LockAssert.java:48)
	at org.infinispan.api.mvcc.LockTestBase.assertNoLocks(LockTestBase.java:102)
	at org.infinispan.api.mvcc.LockTestBase.testLocksOnRemoveNonexistent(LockTestBase.java:186)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:50,311 DEBUG (testng-ParallelCacheStartTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:50,310 DEBUG (testng-SkipLockingTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 10
2013-01-31 13:15:50,317 DEBUG (testng-SkipLockingTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@21ab6b5e}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@7d15f996}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@2db52702}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@50140bbf, PB=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@50140bbf}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@540f51ab, TO=org.infinispan.interceptors.EntryWrappingInterceptor@540f51ab, PB=org.infinispan.interceptors.EntryWrappingInterceptor@540f51ab}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:50,317 DEBUG (testng-ParallelCacheStartTest) [org.infinispan.api.ParallelCacheStartTest] Cache managers created, ready to start the test
2013-01-31 13:15:50,318 INFO  (testng-ParallelCacheStartTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testParallelStartup(org.infinispan.api.ParallelCacheStartTest)
2013-01-31 13:15:50,310 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:247 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:3ba status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:50,324 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:247 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:50,324 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:3c6 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:50,324 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] will wait until no switch is in progress
2013-01-31 13:15:50,324 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:50,324 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:50,324 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:50,310 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.CacheImpl] Stopping cache test on null
2013-01-31 13:15:50,325 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 30 seconds.
2013-01-31 13:15:50,325 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:50,324 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:3c6 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:50,326 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:251 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:3c6 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:50,326 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:251 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:50,327 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:3ca status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:50,327 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] will wait until no switch is in progress
2013-01-31 13:15:50,327 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:50,327 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:3ca status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:50,327 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:252 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:3ca status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:50,327 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:252 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:50,327 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:3ce status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:50,327 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] will wait until no switch is in progress
2013-01-31 13:15:50,327 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:50,328 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:3ce status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:50,328 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:253 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:3ce status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:50,328 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:253 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:50,328 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:3d2 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:50,328 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] will wait until no switch is in progress
2013-01-31 13:15:50,328 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:50,328 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:3d2 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:50,328 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:254 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:3d2 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:50,328 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:254 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:50,329 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:3d6 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:50,329 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] will wait until no switch is in progress
2013-01-31 13:15:50,329 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:50,329 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:3d6 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:50,329 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:255 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:3d6 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:50,329 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:255 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:50,329 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:3da status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:50,329 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] will wait until no switch is in progress
2013-01-31 13:15:50,329 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:50,329 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:3da status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:50,330 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:256 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:3da status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:50,330 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:256 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:50,330 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:3de status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:50,330 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] will wait until no switch is in progress
2013-01-31 13:15:50,330 DEBUG (testng-AsyncWithTxTest) [org.jgroups.protocols.pbcast.GMS] address=AsyncWithTxTest-NodeA-43597, cluster=ISPN, physical address=127.0.0.1:8100
2013-01-31 13:15:50,330 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.manager.DefaultCacheManager] Stopping cache manager ISPN on null
2013-01-31 13:15:50,331 DEBUG (testng-CacheAPIOptimisticTest) [org.infinispan.CacheImpl] Stopping cache test on null
2013-01-31 13:15:50,323 DEBUG (testng-TxAndAsyncOpsTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:50,319 INFO  (CacheStartThread,ISPN,cache1) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000078: Starting JGroups Channel
2013-01-31 13:15:50,319 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.api.mvcc.LockTestBase] **** - STARTING TEARDOWN - ****
2013-01-31 13:15:50,334 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on null
2013-01-31 13:15:50,334 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 1 seconds.
2013-01-31 13:15:50,334 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:50,334 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.manager.DefaultCacheManager] Stopping cache manager ISPN on null
2013-01-31 13:15:50,334 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on null
2013-01-31 13:15:50,335 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:50,318 DEBUG (testng-SkipLockingTest) [org.infinispan.CacheImpl] Started cache ___defaultcache on null
2013-01-31 13:15:50,336 INFO  (testng-SkipLockingTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testSkipLockingAfterPutWithTm(org.infinispan.api.SkipLockingTest)
2013-01-31 13:15:50,336 DEBUG (testng-SkipLockingTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:50,330 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:50,336 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:3de status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:50,337 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:257 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:3de status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:50,337 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:257 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:50,337 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:3e2 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:50,337 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] will wait until no switch is in progress
2013-01-31 13:15:50,337 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:50,337 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:3e2 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:50,337 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:258 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:3e2 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:50,338 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:258 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:50,338 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:3e6 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:50,338 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] will wait until no switch is in progress
2013-01-31 13:15:50,338 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-CacheAPIPessimisticTest] no switch in progress. Moving on...
2013-01-31 13:15:50,338 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:3e6 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:50,338 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:259 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:3e6 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:50,338 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-CacheAPIPessimisticTest] local transaction null:259 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:50,327 INFO  (testng-RepeatableReadLockTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:50,347 DEBUG (testng-WithClassLoaderTest) [org.infinispan.api.WithClassLoaderTest] Creating cache managers
2013-01-31 13:15:50,348 DEBUG (testng-WithClassLoaderTest) [org.infinispan.configuration.cache.L1ConfigurationBuilder] L1 is enabled and L1OnRehash was not defined, enabling it
2013-01-31 13:15:50,345 ERROR (testng-WriteSkewTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Method testCheckWriteSkew(org.infinispan.api.mvcc.repeatable_read.WriteSkewTest) threw an exception
org.infinispan.config.ConfigurationException: Write-skew checking requires versioning to be enabled and versioning scheme 'SIMPLE' to be configured
	at org.infinispan.configuration.cache.LockingConfigurationBuilder.validate(LockingConfigurationBuilder.java:103)
	at org.infinispan.configuration.cache.ConfigurationBuilder.validate(ConfigurationBuilder.java:171)
	at org.infinispan.configuration.cache.ConfigurationBuilder.build(ConfigurationBuilder.java:184)
	at org.infinispan.configuration.cache.ConfigurationBuilder.build(ConfigurationBuilder.java:179)
	at org.infinispan.configuration.cache.LegacyConfigurationAdaptor.adapt(LegacyConfigurationAdaptor.java:547)
	at org.infinispan.factories.BootstrapFactory.construct(BootstrapFactory.java:61)
	at org.infinispan.factories.AbstractComponentRegistry.getOrCreateComponent(AbstractComponentRegistry.java:286)
	at org.infinispan.factories.AbstractComponentRegistry.invokeInjectionMethod(AbstractComponentRegistry.java:246)
	at org.infinispan.factories.AbstractComponentRegistry.access$000(AbstractComponentRegistry.java:83)
	at org.infinispan.factories.AbstractComponentRegistry$Component.injectDependencies(AbstractComponentRegistry.java:792)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponentInternal(AbstractComponentRegistry.java:220)
	at org.infinispan.factories.ComponentRegistry.registerComponentInternal(ComponentRegistry.java:156)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponent(AbstractComponentRegistry.java:175)
	at org.infinispan.factories.AbstractComponentRegistry.getOrCreateComponent(AbstractComponentRegistry.java:291)
	at org.infinispan.factories.AbstractComponentRegistry.invokeInjectionMethod(AbstractComponentRegistry.java:246)
	at org.infinispan.factories.AbstractComponentRegistry.access$000(AbstractComponentRegistry.java:83)
	at org.infinispan.factories.AbstractComponentRegistry$Component.injectDependencies(AbstractComponentRegistry.java:792)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponentInternal(AbstractComponentRegistry.java:220)
	at org.infinispan.factories.ComponentRegistry.registerComponentInternal(ComponentRegistry.java:156)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponent(AbstractComponentRegistry.java:175)
	at org.infinispan.factories.AbstractComponentRegistry.getOrCreateComponent(AbstractComponentRegistry.java:291)
	at org.infinispan.factories.AbstractComponentRegistry.invokeInjectionMethod(AbstractComponentRegistry.java:246)
	at org.infinispan.factories.AbstractComponentRegistry.access$000(AbstractComponentRegistry.java:83)
	at org.infinispan.factories.AbstractComponentRegistry$Component.injectDependencies(AbstractComponentRegistry.java:792)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponentInternal(AbstractComponentRegistry.java:220)
	at org.infinispan.factories.ComponentRegistry.registerComponentInternal(ComponentRegistry.java:156)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponent(AbstractComponentRegistry.java:175)
	at org.infinispan.factories.AbstractComponentRegistry.getOrCreateComponent(AbstractComponentRegistry.java:291)
	at org.infinispan.factories.AbstractComponentRegistry.invokeInjectionMethod(AbstractComponentRegistry.java:246)
	at org.infinispan.factories.AbstractComponentRegistry.access$000(AbstractComponentRegistry.java:83)
	at org.infinispan.factories.AbstractComponentRegistry$Component.injectDependencies(AbstractComponentRegistry.java:792)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponentInternal(AbstractComponentRegistry.java:220)
	at org.infinispan.factories.ComponentRegistry.registerComponentInternal(ComponentRegistry.java:156)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponent(AbstractComponentRegistry.java:175)
	at org.infinispan.factories.AbstractComponentRegistry.getOrCreateComponent(AbstractComponentRegistry.java:291)
	at org.infinispan.factories.AbstractComponentRegistry.invokeInjectionMethod(AbstractComponentRegistry.java:246)
	at org.infinispan.factories.AbstractComponentRegistry.access$000(AbstractComponentRegistry.java:83)
	at org.infinispan.factories.AbstractComponentRegistry$Component.injectDependencies(AbstractComponentRegistry.java:792)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponentInternal(AbstractComponentRegistry.java:220)
	at org.infinispan.factories.ComponentRegistry.registerComponentInternal(ComponentRegistry.java:156)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponent(AbstractComponentRegistry.java:175)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponent(AbstractComponentRegistry.java:167)
	at org.infinispan.factories.InterceptorChainFactory.buildInterceptorChain(InterceptorChainFactory.java:87)
	at org.infinispan.factories.InterceptorChainFactory.construct(InterceptorChainFactory.java:231)
	at org.infinispan.factories.AbstractComponentRegistry.getOrCreateComponent(AbstractComponentRegistry.java:286)
	at org.infinispan.factories.AbstractComponentRegistry.invokeInjectionMethod(AbstractComponentRegistry.java:246)
	at org.infinispan.factories.AbstractComponentRegistry.access$000(AbstractComponentRegistry.java:83)
	at org.infinispan.factories.AbstractComponentRegistry$Component.injectDependencies(AbstractComponentRegistry.java:792)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponentInternal(AbstractComponentRegistry.java:220)
	at org.infinispan.factories.ComponentRegistry.registerComponentInternal(ComponentRegistry.java:156)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponent(AbstractComponentRegistry.java:175)
	at org.infinispan.factories.AbstractComponentRegistry.getOrCreateComponent(AbstractComponentRegistry.java:291)
	at org.infinispan.factories.AbstractComponentRegistry.invokeInjectionMethod(AbstractComponentRegistry.java:246)
	at org.infinispan.factories.AbstractComponentRegistry.access$000(AbstractComponentRegistry.java:83)
	at org.infinispan.factories.AbstractComponentRegistry$Component.injectDependencies(AbstractComponentRegistry.java:792)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponentInternal(AbstractComponentRegistry.java:220)
	at org.infinispan.factories.ComponentRegistry.registerComponentInternal(ComponentRegistry.java:156)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponent(AbstractComponentRegistry.java:175)
	at org.infinispan.factories.AbstractComponentRegistry.getOrCreateComponent(AbstractComponentRegistry.java:291)
	at org.infinispan.factories.AbstractComponentRegistry.invokeInjectionMethod(AbstractComponentRegistry.java:246)
	at org.infinispan.factories.AbstractComponentRegistry.access$000(AbstractComponentRegistry.java:83)
	at org.infinispan.factories.AbstractComponentRegistry$Component.injectDependencies(AbstractComponentRegistry.java:792)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponentInternal(AbstractComponentRegistry.java:220)
	at org.infinispan.factories.ComponentRegistry.registerComponentInternal(ComponentRegistry.java:156)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponent(AbstractComponentRegistry.java:175)
	at org.infinispan.factories.AbstractComponentRegistry.getOrCreateComponent(AbstractComponentRegistry.java:291)
	at org.infinispan.factories.AbstractComponentRegistry.invokeInjectionMethod(AbstractComponentRegistry.java:246)
	at org.infinispan.factories.AbstractComponentRegistry.access$000(AbstractComponentRegistry.java:83)
	at org.infinispan.factories.AbstractComponentRegistry$Component.injectDependencies(AbstractComponentRegistry.java:792)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponentInternal(AbstractComponentRegistry.java:220)
	at org.infinispan.factories.ComponentRegistry.registerComponentInternal(ComponentRegistry.java:156)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponent(AbstractComponentRegistry.java:175)
	at org.infinispan.factories.AbstractComponentRegistry.getOrCreateComponent(AbstractComponentRegistry.java:291)
	at org.infinispan.factories.AbstractComponentRegistry.invokeInjectionMethod(AbstractComponentRegistry.java:246)
	at org.infinispan.factories.AbstractComponentRegistry.access$000(AbstractComponentRegistry.java:83)
	at org.infinispan.factories.AbstractComponentRegistry$Component.injectDependencies(AbstractComponentRegistry.java:792)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponentInternal(AbstractComponentRegistry.java:220)
	at org.infinispan.factories.ComponentRegistry.registerComponentInternal(ComponentRegistry.java:156)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponent(AbstractComponentRegistry.java:175)
	at org.infinispan.factories.AbstractComponentRegistry.getOrCreateComponent(AbstractComponentRegistry.java:291)
	at org.infinispan.factories.AbstractComponentRegistry.invokeInjectionMethod(AbstractComponentRegistry.java:246)
	at org.infinispan.factories.AbstractComponentRegistry.access$000(AbstractComponentRegistry.java:83)
	at org.infinispan.factories.AbstractComponentRegistry$Component.injectDependencies(AbstractComponentRegistry.java:792)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponentInternal(AbstractComponentRegistry.java:220)
	at org.infinispan.factories.ComponentRegistry.registerComponentInternal(ComponentRegistry.java:156)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponent(AbstractComponentRegistry.java:175)
	at org.infinispan.factories.AbstractComponentRegistry.getOrCreateComponent(AbstractComponentRegistry.java:291)
	at org.infinispan.factories.AbstractComponentRegistry.invokeInjectionMethod(AbstractComponentRegistry.java:246)
	at org.infinispan.factories.AbstractComponentRegistry.access$000(AbstractComponentRegistry.java:83)
	at org.infinispan.factories.AbstractComponentRegistry$Component.injectDependencies(AbstractComponentRegistry.java:792)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponentInternal(AbstractComponentRegistry.java:220)
	at org.infinispan.factories.ComponentRegistry.registerComponentInternal(ComponentRegistry.java:156)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponent(AbstractComponentRegistry.java:175)
	at org.infinispan.factories.AbstractComponentRegistry.getOrCreateComponent(AbstractComponentRegistry.java:291)
	at org.infinispan.factories.AbstractComponentRegistry.invokeInjectionMethod(AbstractComponentRegistry.java:246)
	at org.infinispan.factories.AbstractComponentRegistry.access$000(AbstractComponentRegistry.java:83)
	at org.infinispan.factories.AbstractComponentRegistry$Component.injectDependencies(AbstractComponentRegistry.java:792)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponentInternal(AbstractComponentRegistry.java:220)
	at org.infinispan.factories.ComponentRegistry.registerComponentInternal(ComponentRegistry.java:156)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponent(AbstractComponentRegistry.java:175)
	at org.infinispan.factories.InternalCacheFactory.bootstrap(InternalCacheFactory.java:103)
	at org.infinispan.factories.InternalCacheFactory.createAndWire(InternalCacheFactory.java:79)
	at org.infinispan.factories.InternalCacheFactory.createCache(InternalCacheFactory.java:63)
	at org.infinispan.manager.DefaultCacheManager.wireCache(DefaultCacheManager.java:701)
	at org.infinispan.manager.DefaultCacheManager.createCache(DefaultCacheManager.java:658)
	at org.infinispan.manager.DefaultCacheManager.getCache(DefaultCacheManager.java:550)
	at org.infinispan.api.mvcc.repeatable_read.WriteSkewTest.testCheckWriteSkew(WriteSkewTest.java:111)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:50,344 DEBUG (testng-AsyncWithTxTest) [org.jgroups.protocols.pbcast.NAKACK2] 
[AsyncWithTxTest-NodeA-43597 setDigest()]
existing digest:  []
new digest:       AsyncWithTxTest-NodeA-43597: [0 (0)]
resulting digest: AsyncWithTxTest-NodeA-43597: [0 (0)]
2013-01-31 13:15:50,379 DEBUG (testng-AsyncWithTxTest) [org.jgroups.protocols.pbcast.GMS] AsyncWithTxTest-NodeA-43597: installing view [AsyncWithTxTest-NodeA-43597|0] [AsyncWithTxTest-NodeA-43597]
2013-01-31 13:15:50,341 INFO  (testng-CacheAPIPessimisticTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testSizeAfterClear(org.infinispan.api.mvcc.repeatable_read.CacheAPIPessimisticTest).
2013-01-31 13:15:50,381 DEBUG (testng-AsyncWithTxTest) [org.jgroups.protocols.pbcast.STABLE] resuming message garbage collection
2013-01-31 13:15:50,381 ERROR (testng-WriteSkewTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test failed testCheckWriteSkew(org.infinispan.api.mvcc.repeatable_read.WriteSkewTest)
org.infinispan.config.ConfigurationException: Write-skew checking requires versioning to be enabled and versioning scheme 'SIMPLE' to be configured
	at org.infinispan.configuration.cache.LockingConfigurationBuilder.validate(LockingConfigurationBuilder.java:103)
	at org.infinispan.configuration.cache.ConfigurationBuilder.validate(ConfigurationBuilder.java:171)
	at org.infinispan.configuration.cache.ConfigurationBuilder.build(ConfigurationBuilder.java:184)
	at org.infinispan.configuration.cache.ConfigurationBuilder.build(ConfigurationBuilder.java:179)
	at org.infinispan.configuration.cache.LegacyConfigurationAdaptor.adapt(LegacyConfigurationAdaptor.java:547)
	at org.infinispan.factories.BootstrapFactory.construct(BootstrapFactory.java:61)
	at org.infinispan.factories.AbstractComponentRegistry.getOrCreateComponent(AbstractComponentRegistry.java:286)
	at org.infinispan.factories.AbstractComponentRegistry.invokeInjectionMethod(AbstractComponentRegistry.java:246)
	at org.infinispan.factories.AbstractComponentRegistry.access$000(AbstractComponentRegistry.java:83)
	at org.infinispan.factories.AbstractComponentRegistry$Component.injectDependencies(AbstractComponentRegistry.java:792)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponentInternal(AbstractComponentRegistry.java:220)
	at org.infinispan.factories.ComponentRegistry.registerComponentInternal(ComponentRegistry.java:156)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponent(AbstractComponentRegistry.java:175)
	at org.infinispan.factories.AbstractComponentRegistry.getOrCreateComponent(AbstractComponentRegistry.java:291)
	at org.infinispan.factories.AbstractComponentRegistry.invokeInjectionMethod(AbstractComponentRegistry.java:246)
	at org.infinispan.factories.AbstractComponentRegistry.access$000(AbstractComponentRegistry.java:83)
	at org.infinispan.factories.AbstractComponentRegistry$Component.injectDependencies(AbstractComponentRegistry.java:792)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponentInternal(AbstractComponentRegistry.java:220)
	at org.infinispan.factories.ComponentRegistry.registerComponentInternal(ComponentRegistry.java:156)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponent(AbstractComponentRegistry.java:175)
	at org.infinispan.factories.AbstractComponentRegistry.getOrCreateComponent(AbstractComponentRegistry.java:291)
	at org.infinispan.factories.AbstractComponentRegistry.invokeInjectionMethod(AbstractComponentRegistry.java:246)
	at org.infinispan.factories.AbstractComponentRegistry.access$000(AbstractComponentRegistry.java:83)
	at org.infinispan.factories.AbstractComponentRegistry$Component.injectDependencies(AbstractComponentRegistry.java:792)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponentInternal(AbstractComponentRegistry.java:220)
	at org.infinispan.factories.ComponentRegistry.registerComponentInternal(ComponentRegistry.java:156)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponent(AbstractComponentRegistry.java:175)
	at org.infinispan.factories.AbstractComponentRegistry.getOrCreateComponent(AbstractComponentRegistry.java:291)
	at org.infinispan.factories.AbstractComponentRegistry.invokeInjectionMethod(AbstractComponentRegistry.java:246)
	at org.infinispan.factories.AbstractComponentRegistry.access$000(AbstractComponentRegistry.java:83)
	at org.infinispan.factories.AbstractComponentRegistry$Component.injectDependencies(AbstractComponentRegistry.java:792)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponentInternal(AbstractComponentRegistry.java:220)
	at org.infinispan.factories.ComponentRegistry.registerComponentInternal(ComponentRegistry.java:156)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponent(AbstractComponentRegistry.java:175)
	at org.infinispan.factories.AbstractComponentRegistry.getOrCreateComponent(AbstractComponentRegistry.java:291)
	at org.infinispan.factories.AbstractComponentRegistry.invokeInjectionMethod(AbstractComponentRegistry.java:246)
	at org.infinispan.factories.AbstractComponentRegistry.access$000(AbstractComponentRegistry.java:83)
	at org.infinispan.factories.AbstractComponentRegistry$Component.injectDependencies(AbstractComponentRegistry.java:792)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponentInternal(AbstractComponentRegistry.java:220)
	at org.infinispan.factories.ComponentRegistry.registerComponentInternal(ComponentRegistry.java:156)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponent(AbstractComponentRegistry.java:175)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponent(AbstractComponentRegistry.java:167)
	at org.infinispan.factories.InterceptorChainFactory.buildInterceptorChain(InterceptorChainFactory.java:87)
	at org.infinispan.factories.InterceptorChainFactory.construct(InterceptorChainFactory.java:231)
	at org.infinispan.factories.AbstractComponentRegistry.getOrCreateComponent(AbstractComponentRegistry.java:286)
	at org.infinispan.factories.AbstractComponentRegistry.invokeInjectionMethod(AbstractComponentRegistry.java:246)
	at org.infinispan.factories.AbstractComponentRegistry.access$000(AbstractComponentRegistry.java:83)
	at org.infinispan.factories.AbstractComponentRegistry$Component.injectDependencies(AbstractComponentRegistry.java:792)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponentInternal(AbstractComponentRegistry.java:220)
	at org.infinispan.factories.ComponentRegistry.registerComponentInternal(ComponentRegistry.java:156)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponent(AbstractComponentRegistry.java:175)
	at org.infinispan.factories.AbstractComponentRegistry.getOrCreateComponent(AbstractComponentRegistry.java:291)
	at org.infinispan.factories.AbstractComponentRegistry.invokeInjectionMethod(AbstractComponentRegistry.java:246)
	at org.infinispan.factories.AbstractComponentRegistry.access$000(AbstractComponentRegistry.java:83)
	at org.infinispan.factories.AbstractComponentRegistry$Component.injectDependencies(AbstractComponentRegistry.java:792)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponentInternal(AbstractComponentRegistry.java:220)
	at org.infinispan.factories.ComponentRegistry.registerComponentInternal(ComponentRegistry.java:156)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponent(AbstractComponentRegistry.java:175)
	at org.infinispan.factories.AbstractComponentRegistry.getOrCreateComponent(AbstractComponentRegistry.java:291)
	at org.infinispan.factories.AbstractComponentRegistry.invokeInjectionMethod(AbstractComponentRegistry.java:246)
	at org.infinispan.factories.AbstractComponentRegistry.access$000(AbstractComponentRegistry.java:83)
	at org.infinispan.factories.AbstractComponentRegistry$Component.injectDependencies(AbstractComponentRegistry.java:792)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponentInternal(AbstractComponentRegistry.java:220)
	at org.infinispan.factories.ComponentRegistry.registerComponentInternal(ComponentRegistry.java:156)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponent(AbstractComponentRegistry.java:175)
	at org.infinispan.factories.AbstractComponentRegistry.getOrCreateComponent(AbstractComponentRegistry.java:291)
	at org.infinispan.factories.AbstractComponentRegistry.invokeInjectionMethod(AbstractComponentRegistry.java:246)
	at org.infinispan.factories.AbstractComponentRegistry.access$000(AbstractComponentRegistry.java:83)
	at org.infinispan.factories.AbstractComponentRegistry$Component.injectDependencies(AbstractComponentRegistry.java:792)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponentInternal(AbstractComponentRegistry.java:220)
	at org.infinispan.factories.ComponentRegistry.registerComponentInternal(ComponentRegistry.java:156)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponent(AbstractComponentRegistry.java:175)
	at org.infinispan.factories.AbstractComponentRegistry.getOrCreateComponent(AbstractComponentRegistry.java:291)
	at org.infinispan.factories.AbstractComponentRegistry.invokeInjectionMethod(AbstractComponentRegistry.java:246)
	at org.infinispan.factories.AbstractComponentRegistry.access$000(AbstractComponentRegistry.java:83)
	at org.infinispan.factories.AbstractComponentRegistry$Component.injectDependencies(AbstractComponentRegistry.java:792)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponentInternal(AbstractComponentRegistry.java:220)
	at org.infinispan.factories.ComponentRegistry.registerComponentInternal(ComponentRegistry.java:156)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponent(AbstractComponentRegistry.java:175)
	at org.infinispan.factories.AbstractComponentRegistry.getOrCreateComponent(AbstractComponentRegistry.java:291)
	at org.infinispan.factories.AbstractComponentRegistry.invokeInjectionMethod(AbstractComponentRegistry.java:246)
	at org.infinispan.factories.AbstractComponentRegistry.access$000(AbstractComponentRegistry.java:83)
	at org.infinispan.factories.AbstractComponentRegistry$Component.injectDependencies(AbstractComponentRegistry.java:792)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponentInternal(AbstractComponentRegistry.java:220)
	at org.infinispan.factories.ComponentRegistry.registerComponentInternal(ComponentRegistry.java:156)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponent(AbstractComponentRegistry.java:175)
	at org.infinispan.factories.AbstractComponentRegistry.getOrCreateComponent(AbstractComponentRegistry.java:291)
	at org.infinispan.factories.AbstractComponentRegistry.invokeInjectionMethod(AbstractComponentRegistry.java:246)
	at org.infinispan.factories.AbstractComponentRegistry.access$000(AbstractComponentRegistry.java:83)
	at org.infinispan.factories.AbstractComponentRegistry$Component.injectDependencies(AbstractComponentRegistry.java:792)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponentInternal(AbstractComponentRegistry.java:220)
	at org.infinispan.factories.ComponentRegistry.registerComponentInternal(ComponentRegistry.java:156)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponent(AbstractComponentRegistry.java:175)
	at org.infinispan.factories.AbstractComponentRegistry.getOrCreateComponent(AbstractComponentRegistry.java:291)
	at org.infinispan.factories.AbstractComponentRegistry.invokeInjectionMethod(AbstractComponentRegistry.java:246)
	at org.infinispan.factories.AbstractComponentRegistry.access$000(AbstractComponentRegistry.java:83)
	at org.infinispan.factories.AbstractComponentRegistry$Component.injectDependencies(AbstractComponentRegistry.java:792)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponentInternal(AbstractComponentRegistry.java:220)
	at org.infinispan.factories.ComponentRegistry.registerComponentInternal(ComponentRegistry.java:156)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponent(AbstractComponentRegistry.java:175)
	at org.infinispan.factories.InternalCacheFactory.bootstrap(InternalCacheFactory.java:103)
	at org.infinispan.factories.InternalCacheFactory.createAndWire(InternalCacheFactory.java:79)
	at org.infinispan.factories.InternalCacheFactory.createCache(InternalCacheFactory.java:63)
	at org.infinispan.manager.DefaultCacheManager.wireCache(DefaultCacheManager.java:701)
	at org.infinispan.manager.DefaultCacheManager.createCache(DefaultCacheManager.java:658)
	at org.infinispan.manager.DefaultCacheManager.getCache(DefaultCacheManager.java:550)
	at org.infinispan.api.mvcc.repeatable_read.WriteSkewTest.testCheckWriteSkew(WriteSkewTest.java:111)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:50,364 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:50,390 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:50,390 INFO  (testng-WriteSkewTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testDontCheckWriteSkew(org.infinispan.api.mvcc.repeatable_read.WriteSkewTest)
2013-01-31 13:15:50,392 INFO  (testng-WriteSkewTest) [org.infinispan.transaction.lookup.JBossStandaloneJTAManagerLookup] ISPN000107: Retrieving transaction manager Transaction: unknown
2013-01-31 13:15:50,394 INFO  (testng-WriteSkewTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:50,362 DEBUG (testng-WithClassLoaderTest) [org.infinispan.configuration.cache.L1ConfigurationBuilder] L1 is enabled and L1OnRehash was not defined, enabling it
2013-01-31 13:15:50,395 DEBUG (testng-WithClassLoaderTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:50,397 DEBUG (testng-WriteSkewTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:50,398 DEBUG (testng-WriteSkewTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:50,399 DEBUG (testng-WriteSkewTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:50,362 DEBUG (testng-TerminatedCacheTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:50,400 DEBUG (testng-TerminatedCacheTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:50,349 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:50,401 DEBUG (testng-WithClassLoaderTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:50,401 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:50,402 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:50,403 DEBUG (testng-WriteSkewTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 11
2013-01-31 13:15:50,404 DEBUG (testng-WriteSkewTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@7b95c5b}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@1a5e5e53}
	>> org.infinispan.interceptors.TxInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@2982a8ab}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@410f87d7, PB=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@410f87d7}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@629f559f, TO=org.infinispan.interceptors.EntryWrappingInterceptor@629f559f, PB=org.infinispan.interceptors.EntryWrappingInterceptor@629f559f}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:50,404 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 11
2013-01-31 13:15:50,404 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@4aae6c4e}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@1489b30}
	>> org.infinispan.interceptors.TxInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@45c46cf8}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@62ce3190, PB=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@62ce3190}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@4f18179d, TO=org.infinispan.interceptors.EntryWrappingInterceptor@4f18179d, PB=org.infinispan.interceptors.EntryWrappingInterceptor@4f18179d}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:50,338 DEBUG (testng-Command line test) [org.jgroups.protocols.pbcast.GMS] address=Command line test-NodeA-7883, cluster=ISPN, physical address=127.0.0.1:8400
2013-01-31 13:15:50,360 DEBUG (testng-SkipLockingTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:50,417 DEBUG (testng-SkipLockingTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:50,424 INFO  (testng-SkipLockingTest) [org.infinispan.transaction.lookup.JBossStandaloneJTAManagerLookup] ISPN000107: Retrieving transaction manager Transaction: unknown
2013-01-31 13:15:50,429 INFO  (testng-SkipLockingTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:50,431 DEBUG (testng-SkipLockingTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:50,435 DEBUG (testng-SkipLockingTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:50,436 DEBUG (testng-SkipLockingTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:50,441 DEBUG (testng-SkipLockingTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 11
2013-01-31 13:15:50,441 DEBUG (testng-SkipLockingTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@65dea9ea}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@7d6575e5}
	>> org.infinispan.interceptors.TxInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@101f4db4}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@77266cb0, PB=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@77266cb0}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@7ba9d3ec, TO=org.infinispan.interceptors.EntryWrappingInterceptor@7ba9d3ec, PB=org.infinispan.interceptors.EntryWrappingInterceptor@7ba9d3ec}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:50,441 DEBUG (testng-SkipLockingTest) [org.infinispan.CacheImpl] Started cache ___defaultcache on null
2013-01-31 13:15:50,441 DEBUG (testng-SkipLockingTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-SkipLockingTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:3ea status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:50,441 DEBUG (testng-SkipLockingTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-SkipLockingTest] will wait until no switch is in progress
2013-01-31 13:15:50,442 DEBUG (testng-SkipLockingTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-SkipLockingTest] no switch in progress. Moving on...
2013-01-31 13:15:50,442 DEBUG (testng-SkipLockingTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-SkipLockingTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:3ea status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:50,442 DEBUG (testng-SkipLockingTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-SkipLockingTest] local transaction null:260 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:3ea status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:50,442 DEBUG (testng-SkipLockingTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-SkipLockingTest] local transaction null:260 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:50,443 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.CacheImpl] Started cache ___defaultcache on null
2013-01-31 13:15:50,443 INFO  (testng-RepeatableReadLockTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testLocksOnEvict(org.infinispan.api.mvcc.repeatable_read.RepeatableReadLockTest)
2013-01-31 13:15:50,443 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepeatableReadLockTest] local transaction DummyTransaction{xid=DummyXid{id=12}, status=0} is starting. check if switch is in progress...
2013-01-31 13:15:50,443 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepeatableReadLockTest] will wait until no switch is in progress
2013-01-31 13:15:50,443 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepeatableReadLockTest] no switch in progress. Moving on...
2013-01-31 13:15:50,444 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepeatableReadLockTest] local transaction DummyTransaction{xid=DummyXid{id=12}, status=0} will use 2PC while executing
2013-01-31 13:15:50,444 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepeatableReadLockTest] local transaction null:261 [DummyTransaction{xid=DummyXid{id=12}, status=7}] wants to commit
2013-01-31 13:15:50,444 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepeatableReadLockTest] local transaction null:261 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:50,444 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepeatableReadLockTest] local transaction DummyTransaction{xid=DummyXid{id=13}, status=0} is starting. check if switch is in progress...
2013-01-31 13:15:50,444 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepeatableReadLockTest] will wait until no switch is in progress
2013-01-31 13:15:50,444 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepeatableReadLockTest] no switch in progress. Moving on...
2013-01-31 13:15:50,444 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepeatableReadLockTest] local transaction DummyTransaction{xid=DummyXid{id=13}, status=0} will use 2PC while executing
2013-01-31 13:15:50,444 ERROR (testng-RepeatableReadLockTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Method testLocksOnEvict(org.infinispan.api.mvcc.repeatable_read.RepeatableReadLockTest) threw an exception
java.lang.AssertionError: Stale locks exist! NumLocksHeld is 1 and lock info is org.infinispan.util.concurrent.locks.containers.OwnableReentrantPerEntryLockContainer@1dc04e10
	at org.infinispan.api.mvcc.LockAssert.assertNoLocks(LockAssert.java:48)
	at org.infinispan.api.mvcc.LockTestBase.assertNoLocks(LockTestBase.java:102)
	at org.infinispan.api.mvcc.LockTestBase.testLocksOnEvict(LockTestBase.java:170)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:50,354 DEBUG (testng-TxAndAsyncOpsTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:50,352 WARN  (testng-FlagsEnabledTest) [org.jgroups.stack.Configurator] [JGRP00013] TP.discard_incompatible_packets has been deprecated: incompatible packets are discarded anyway
2013-01-31 13:15:50,451 ERROR (testng-RepeatableReadLockTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test failed testLocksOnEvict(org.infinispan.api.mvcc.repeatable_read.RepeatableReadLockTest)
java.lang.AssertionError: Stale locks exist! NumLocksHeld is 1 and lock info is org.infinispan.util.concurrent.locks.containers.OwnableReentrantPerEntryLockContainer@1dc04e10
	at org.infinispan.api.mvcc.LockAssert.assertNoLocks(LockAssert.java:48)
	at org.infinispan.api.mvcc.LockTestBase.assertNoLocks(LockTestBase.java:102)
	at org.infinispan.api.mvcc.LockTestBase.testLocksOnEvict(LockTestBase.java:170)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:50,451 DEBUG (testng-TxAndAsyncOpsTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:50,459 INFO  (testng-TxAndAsyncOpsTest) [org.infinispan.transaction.lookup.JBossStandaloneJTAManagerLookup] ISPN000107: Retrieving transaction manager Transaction: unknown
2013-01-31 13:15:50,448 DEBUG (testng-SkipLockingTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-SkipLockingTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:3ee status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:50,460 DEBUG (testng-SkipLockingTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-SkipLockingTest] will wait until no switch is in progress
2013-01-31 13:15:50,460 DEBUG (testng-SkipLockingTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-SkipLockingTest] no switch in progress. Moving on...
2013-01-31 13:15:50,460 DEBUG (testng-SkipLockingTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-SkipLockingTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:3ee status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:50,460 DEBUG (testng-SkipLockingTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-SkipLockingTest] local transaction null:262 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:3ee status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:50,460 DEBUG (testng-SkipLockingTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-SkipLockingTest] local transaction null:262 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:50,460 DEBUG (testng-SkipLockingTest) [org.infinispan.manager.DefaultCacheManager] Stopping cache manager ISPN on null
2013-01-31 13:15:50,460 DEBUG (testng-SkipLockingTest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on null
2013-01-31 13:15:50,461 DEBUG (testng-SkipLockingTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 30 seconds.
2013-01-31 13:15:50,461 DEBUG (testng-SkipLockingTest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:50,462 INFO  (testng-TxAndAsyncOpsTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:50,447 DEBUG (testng-WriteSkewTest) [org.infinispan.CacheImpl] Started cache noWriteSkewCheck on null
2013-01-31 13:15:50,463 DEBUG (testng-WriteSkewTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-WriteSkewTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:3f2 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:50,463 DEBUG (testng-WriteSkewTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-WriteSkewTest] will wait until no switch is in progress
2013-01-31 13:15:50,463 DEBUG (testng-WriteSkewTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-WriteSkewTest] no switch in progress. Moving on...
2013-01-31 13:15:50,463 DEBUG (testng-WriteSkewTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-WriteSkewTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:3f2 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:50,464 DEBUG (testng-WriteSkewTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-WriteSkewTest] local transaction null:263 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:3f2 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:50,413 DEBUG (testng-Command line test) [org.jgroups.protocols.pbcast.NAKACK2] 
[Command line test-NodeA-7883 setDigest()]
existing digest:  []
new digest:       Command line test-NodeA-7883: [0 (0)]
resulting digest: Command line test-NodeA-7883: [0 (0)]
2013-01-31 13:15:50,464 DEBUG (testng-Command line test) [org.jgroups.protocols.pbcast.GMS] Command line test-NodeA-7883: installing view [Command line test-NodeA-7883|0] [Command line test-NodeA-7883]
2013-01-31 13:15:50,405 DEBUG (testng-TerminatedCacheTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:50,468 INFO  (testng-TerminatedCacheTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:50,470 DEBUG (testng-TerminatedCacheTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 10
2013-01-31 13:15:50,470 DEBUG (testng-TerminatedCacheTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@f709fd0}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@2b0c189b}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@27237e31}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@b31d70a, PB=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@b31d70a}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@751cd743, TO=org.infinispan.interceptors.EntryWrappingInterceptor@751cd743, PB=org.infinispan.interceptors.EntryWrappingInterceptor@751cd743}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:50,470 DEBUG (testng-TerminatedCacheTest) [org.infinispan.CacheImpl] Started cache ___defaultcache on null
2013-01-31 13:15:50,475 INFO  (testng-TerminatedCacheTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testCacheStopFollowedByCacheOp(org.infinispan.api.TerminatedCacheTest)
2013-01-31 13:15:50,477 INFO  (testng-SkipLockingTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testSkipLockingAfterPutWithTm(org.infinispan.api.SkipLockingTest).
2013-01-31 13:15:50,478 DEBUG (testng-SkipLockingTest) [org.infinispan.test.TestingUtil] Cleaning data for cache '___defaultcache' on a non-clustered cache manager
2013-01-31 13:15:50,478 DEBUG (testng-SkipLockingTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == []
2013-01-31 13:15:50,478 DEBUG (testng-SkipLockingTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:50,478 DEBUG (testng-SkipLockingTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:50,478 DEBUG (testng-SkipLockingTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:50,479 INFO  (testng-SkipLockingTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testSkipLockingAfterPutWithoutTm(org.infinispan.api.SkipLockingTest)
2013-01-31 13:15:50,479 INFO  (testng-SkipLockingTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testSkipLockingAfterPutWithoutTm(org.infinispan.api.SkipLockingTest).
2013-01-31 13:15:50,487 DEBUG (testng-SkipLockingTest) [org.infinispan.test.TestingUtil] Cleaning data for cache '___defaultcache' on a non-clustered cache manager
2013-01-31 13:15:50,487 DEBUG (testng-SkipLockingTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [k-testSkipLockingAfterPutWithoutTm=v2-testSkipLockingAfterPutWithoutTm]
2013-01-31 13:15:50,487 DEBUG (testng-SkipLockingTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:50,487 DEBUG (testng-SkipLockingTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:50,487 DEBUG (testng-SkipLockingTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:50,487 DEBUG (testng-SkipLockingTest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on null
2013-01-31 13:15:50,493 DEBUG (testng-SkipLockingTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 30 seconds.
2013-01-31 13:15:50,493 DEBUG (testng-SkipLockingTest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:50,493 DEBUG (testng-SkipLockingTest) [org.infinispan.manager.DefaultCacheManager] Stopping cache manager ISPN on null
2013-01-31 13:15:50,493 DEBUG (testng-SkipLockingTest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on null
2013-01-31 13:15:50,494 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.api.mvcc.LockTestBase] **** - STARTING TEARDOWN - ****
2013-01-31 13:15:50,494 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on null
2013-01-31 13:15:50,494 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 1 seconds.
2013-01-31 13:15:50,494 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:50,495 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.manager.DefaultCacheManager] Stopping cache manager ISPN on null
2013-01-31 13:15:50,495 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on null
2013-01-31 13:15:50,404 DEBUG (testng-WithClassLoaderTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:50,516 DEBUG (testng-WithClassLoaderTest) [org.infinispan.test.CherryPickClassLoader] Created org.infinispan.test.CherryPickClassLoader[includedClasses=null;excludedClasses=null;notFoundClasses=org.infinispan.api.WithClassLoaderTest$Car;parent=IsolatedClassLoader{roleName='test'}]
2013-01-31 13:15:50,516 DEBUG (testng-WithClassLoaderTest) [org.infinispan.configuration.cache.L1ConfigurationBuilder] L1 is enabled and L1OnRehash was not defined, enabling it
2013-01-31 13:15:50,516 DEBUG (testng-WithClassLoaderTest) [org.infinispan.configuration.cache.L1ConfigurationBuilder] L1 is enabled and L1OnRehash was not defined, enabling it
2013-01-31 13:15:50,517 DEBUG (testng-APITest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:50,517 DEBUG (testng-WithClassLoaderTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:50,518 DEBUG (testng-TerminatedCacheTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:50,518 DEBUG (testng-TerminatedCacheTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:50,519 DEBUG (testng-TerminatedCacheTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:50,519 INFO  (testng-TerminatedCacheTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:50,521 DEBUG (testng-TerminatedCacheTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 10
2013-01-31 13:15:50,521 DEBUG (testng-TerminatedCacheTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@200ece1b}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@2bfd5f0e}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@76ba6b2}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@2c8cf3ec, PB=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@2c8cf3ec}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@59e221cd, TO=org.infinispan.interceptors.EntryWrappingInterceptor@59e221cd, PB=org.infinispan.interceptors.EntryWrappingInterceptor@59e221cd}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:50,523 DEBUG (testng-APITest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:50,523 DEBUG (testng-APITest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:50,524 DEBUG (testng-TerminatedCacheTest) [org.infinispan.CacheImpl] Started cache big on null
2013-01-31 13:15:50,524 DEBUG (testng-TerminatedCacheTest) [org.infinispan.CacheImpl] Stopping cache big on null
2013-01-31 13:15:50,524 DEBUG (testng-TerminatedCacheTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 30 seconds.
2013-01-31 13:15:50,524 DEBUG (testng-TerminatedCacheTest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:50,524 ERROR (testng-TerminatedCacheTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Method testCacheStopFollowedByCacheOp(org.infinispan.api.TerminatedCacheTest) threw an exception
java.lang.IllegalStateException: Cache 'big' is in 'TERMINATED' state and so it does not accept new invocations. Either restart it or recreate the cache container.
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:110)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitPutKeyValueCommand(AbstractVisitor.java:62)
	at org.infinispan.commands.write.PutKeyValueCommand.acceptVisitor(PutKeyValueCommand.java:77)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.CacheImpl.executeCommandAndCommitIfNeeded(CacheImpl.java:1007)
	at org.infinispan.CacheImpl.put(CacheImpl.java:703)
	at org.infinispan.CacheImpl.put(CacheImpl.java:695)
	at org.infinispan.CacheSupport.put(CacheSupport.java:53)
	at org.infinispan.api.TerminatedCacheTest.testCacheStopFollowedByCacheOp(TerminatedCacheTest.java:62)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:50,535 INFO  (testng-TerminatedCacheTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testCacheStopFollowedByCacheOp(org.infinispan.api.TerminatedCacheTest).
2013-01-31 13:15:50,536 DEBUG (testng-TerminatedCacheTest) [org.infinispan.test.TestingUtil] Cleaning data for cache '___defaultcache' on a non-clustered cache manager
2013-01-31 13:15:50,536 DEBUG (testng-TerminatedCacheTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == []
2013-01-31 13:15:50,536 DEBUG (testng-TerminatedCacheTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:50,536 DEBUG (testng-TerminatedCacheTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:50,536 DEBUG (testng-TerminatedCacheTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:50,537 INFO  (testng-TerminatedCacheTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testCacheStopFollowedByGetCache(org.infinispan.api.TerminatedCacheTest)
2013-01-31 13:15:50,394 INFO  (testng-ReadCommittedLockTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:50,381 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'test' on a non-clustered cache manager
2013-01-31 13:15:50,538 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == []
2013-01-31 13:15:50,529 DEBUG (testng-WithClassLoaderTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:50,538 DEBUG (testng-TerminatedCacheTest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on null
2013-01-31 13:15:50,538 DEBUG (testng-TerminatedCacheTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 30 seconds.
2013-01-31 13:15:50,538 DEBUG (testng-TerminatedCacheTest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:50,538 ERROR (testng-TerminatedCacheTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Method testCacheStopFollowedByGetCache(org.infinispan.api.TerminatedCacheTest) threw an exception
java.lang.IllegalStateException: Default cache is in 'TERMINATED' state and so it does not accept new invocations. Either restart it or recreate the cache container.
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:110)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitPutKeyValueCommand(AbstractVisitor.java:62)
	at org.infinispan.commands.write.PutKeyValueCommand.acceptVisitor(PutKeyValueCommand.java:77)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.CacheImpl.executeCommandAndCommitIfNeeded(CacheImpl.java:1007)
	at org.infinispan.CacheImpl.put(CacheImpl.java:703)
	at org.infinispan.CacheImpl.put(CacheImpl.java:695)
	at org.infinispan.CacheSupport.put(CacheSupport.java:53)
	at org.infinispan.api.TerminatedCacheTest.testCacheStopFollowedByGetCache(TerminatedCacheTest.java:54)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:50,541 INFO  (testng-TerminatedCacheTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testCacheStopFollowedByGetCache(org.infinispan.api.TerminatedCacheTest).
2013-01-31 13:15:50,541 DEBUG (testng-TerminatedCacheTest) [org.infinispan.manager.DefaultCacheManager] Stopping cache manager ISPN on null
2013-01-31 13:15:50,542 DEBUG (testng-TerminatedCacheTest) [org.infinispan.CacheImpl] Stopping cache big on null
2013-01-31 13:15:50,542 DEBUG (testng-TerminatedCacheTest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on null
2013-01-31 13:15:50,528 INFO  (testng-APITest) [org.infinispan.transaction.lookup.JBossStandaloneJTAManagerLookup] ISPN000107: Retrieving transaction manager Transaction: unknown
2013-01-31 13:15:50,512 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:50,555 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:50,555 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:50,558 DEBUG (testng-APITest) [org.infinispan.configuration.cache.TransactionConfigurationBuilder] Switching to Synchronization based enlistment.
2013-01-31 13:15:50,559 INFO  (testng-APITest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:50,560 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:50,510 DEBUG (testng-FlagsEnabledTest) [org.jgroups.stack.Configurator] set property TCP.diagnostics_addr to default value /224.0.75.75
2013-01-31 13:15:50,464 DEBUG (testng-WriteSkewTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-WriteSkewTest] local transaction null:263 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:50,467 DEBUG (testng-TxAndAsyncOpsTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:50,464 DEBUG (testng-Command line test) [org.jgroups.protocols.pbcast.STABLE] resuming message garbage collection
2013-01-31 13:15:50,559 INFO  (testng-RepeatableReadLockTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:50,538 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:50,564 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:50,564 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:50,564 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.CacheImpl] Stopping cache test on null
2013-01-31 13:15:50,564 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 30 seconds.
2013-01-31 13:15:50,564 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:50,564 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:50,565 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.manager.DefaultCacheManager] Stopping cache manager ISPN on null
2013-01-31 13:15:50,565 DEBUG (testng-CacheAPIPessimisticTest) [org.infinispan.CacheImpl] Stopping cache test on null
2013-01-31 13:15:50,567 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:50,568 DEBUG (testng-WithClassLoaderTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:50,568 DEBUG (testng-WithClassLoaderTest) [org.infinispan.api.WithClassLoaderTest] Cache managers created, ready to start the test
2013-01-31 13:15:50,569 INFO  (testng-WithClassLoaderTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testReadingWithCorrectClassLoaderAfterReplication(org.infinispan.api.WithClassLoaderTest)
2013-01-31 13:15:50,570 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 11
2013-01-31 13:15:50,570 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:50,570 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@71ad7c17}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@34ae044f}
	>> org.infinispan.interceptors.TxInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@c9cf98e}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@15c3e01a, PB=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@15c3e01a}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@6eadd61f, TO=org.infinispan.interceptors.EntryWrappingInterceptor@6eadd61f, PB=org.infinispan.interceptors.EntryWrappingInterceptor@6eadd61f}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:50,571 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:50,571 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:50,572 INFO  (testng-WithClassLoaderTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000078: Starting JGroups Channel
2013-01-31 13:15:50,573 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 11
2013-01-31 13:15:50,573 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@210186dc}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@6b3ce671}
	>> org.infinispan.interceptors.TxInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@6b3d3bb7}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@11ba262, PB=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@11ba262}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@3d41d07f, TO=org.infinispan.interceptors.EntryWrappingInterceptor@3d41d07f, PB=org.infinispan.interceptors.EntryWrappingInterceptor@3d41d07f}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:50,574 DEBUG (testng-TxAndAsyncOpsTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:50,574 DEBUG (testng-TxAndAsyncOpsTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:50,576 DEBUG (testng-TxAndAsyncOpsTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 11
2013-01-31 13:15:50,576 DEBUG (testng-TxAndAsyncOpsTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@2bdf6144}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@566acddc}
	>> org.infinispan.interceptors.TxInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@7df152d6}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@6e75a032, PB=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@6e75a032}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@6c686b45, TO=org.infinispan.interceptors.EntryWrappingInterceptor@6c686b45, PB=org.infinispan.interceptors.EntryWrappingInterceptor@6c686b45}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:50,577 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:50,577 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:50,578 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:50,583 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.CacheImpl] Started cache ___defaultcache on null
2013-01-31 13:15:50,583 INFO  (testng-ReadCommittedLockTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testRollbacks(org.infinispan.api.mvcc.read_committed.ReadCommittedLockTest)
2013-01-31 13:15:50,583 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction DummyTransaction{xid=DummyXid{id=14}, status=0} is starting. check if switch is in progress...
2013-01-31 13:15:50,583 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-ReadCommittedLockTest] will wait until no switch is in progress
2013-01-31 13:15:50,583 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-ReadCommittedLockTest] no switch in progress. Moving on...
2013-01-31 13:15:50,583 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction DummyTransaction{xid=DummyXid{id=14}, status=0} will use 2PC while executing
2013-01-31 13:15:50,584 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction null:264 [DummyTransaction{xid=DummyXid{id=14}, status=7}] wants to commit
2013-01-31 13:15:50,593 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction null:264 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:50,594 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction DummyTransaction{xid=DummyXid{id=15}, status=0} is starting. check if switch is in progress...
2013-01-31 13:15:50,594 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-ReadCommittedLockTest] will wait until no switch is in progress
2013-01-31 13:15:50,594 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-ReadCommittedLockTest] no switch in progress. Moving on...
2013-01-31 13:15:50,594 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction DummyTransaction{xid=DummyXid{id=15}, status=0} will use 2PC while executing
2013-01-31 13:15:50,594 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction DummyTransaction{xid=DummyXid{id=16}, status=0} is starting. check if switch is in progress...
2013-01-31 13:15:50,594 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-ReadCommittedLockTest] will wait until no switch is in progress
2013-01-31 13:15:50,594 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-ReadCommittedLockTest] no switch in progress. Moving on...
2013-01-31 13:15:50,594 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction DummyTransaction{xid=DummyXid{id=16}, status=0} will use 2PC while executing
2013-01-31 13:15:50,594 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction null:266 [DummyTransaction{xid=DummyXid{id=16}, status=9}] wants to rollback
2013-01-31 13:15:50,595 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction null:265 [DummyTransaction{xid=DummyXid{id=15}, status=7}] wants to commit
2013-01-31 13:15:50,595 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction null:265 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:50,595 DEBUG (testng-FlagsEnabledTest) [org.jgroups.protocols.FRAG2] received CONFIG event: {bind_addr=/127.0.0.1}
2013-01-31 13:15:50,595 ERROR (testng-ReadCommittedLockTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Method testRollbacks(org.infinispan.api.mvcc.read_committed.ReadCommittedLockTest) threw an exception
java.lang.AssertionError: Stale locks exist! NumLocksHeld is 1 and lock info is org.infinispan.util.concurrent.locks.containers.OwnableReentrantPerEntryLockContainer@30ef513a
	at org.infinispan.api.mvcc.LockAssert.assertNoLocks(LockAssert.java:48)
	at org.infinispan.api.mvcc.LockTestBase.assertNoLocks(LockTestBase.java:102)
	at org.infinispan.api.mvcc.LockTestBase.testRollbacks(LockTestBase.java:362)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:50,593 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.CacheImpl] Started cache ___defaultcache on null
2013-01-31 13:15:50,593 DEBUG (Writer-2, WriteSkewTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [Writer-2, WriteSkewTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:3f7 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:50,590 DEBUG (Writer-1, WriteSkewTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [Writer-1, WriteSkewTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:3f6 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:50,608 INFO  (testng-RepeatableReadLockTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testLocksOnEvictNonexistent(org.infinispan.api.mvcc.repeatable_read.RepeatableReadLockTest)
2013-01-31 13:15:50,608 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepeatableReadLockTest] local transaction DummyTransaction{xid=DummyXid{id=17}, status=0} is starting. check if switch is in progress...
2013-01-31 13:15:50,608 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepeatableReadLockTest] will wait until no switch is in progress
2013-01-31 13:15:50,608 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepeatableReadLockTest] no switch in progress. Moving on...
2013-01-31 13:15:50,608 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepeatableReadLockTest] local transaction DummyTransaction{xid=DummyXid{id=17}, status=0} will use 2PC while executing
2013-01-31 13:15:50,608 ERROR (testng-RepeatableReadLockTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Method testLocksOnEvictNonexistent(org.infinispan.api.mvcc.repeatable_read.RepeatableReadLockTest) threw an exception
java.lang.AssertionError: Stale locks exist! NumLocksHeld is 1 and lock info is org.infinispan.util.concurrent.locks.containers.OwnableReentrantPerEntryLockContainer@1beb6bba
	at org.infinispan.api.mvcc.LockAssert.assertNoLocks(LockAssert.java:48)
	at org.infinispan.api.mvcc.LockTestBase.assertNoLocks(LockTestBase.java:102)
	at org.infinispan.api.mvcc.LockTestBase.testLocksOnEvictNonexistent(LockTestBase.java:200)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:50,589 DEBUG (testng-TxAndAsyncOpsTest) [org.infinispan.CacheImpl] Started cache ___defaultcache on null
2013-01-31 13:15:50,613 INFO  (testng-TxAndAsyncOpsTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testAsyncOps(org.infinispan.api.TxCacheAndAsyncOpsTest)
2013-01-31 13:15:50,613 DEBUG (testng-TxAndAsyncOpsTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-TxAndAsyncOpsTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:3f8 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:50,613 DEBUG (testng-TxAndAsyncOpsTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-TxAndAsyncOpsTest] will wait until no switch is in progress
2013-01-31 13:15:50,613 DEBUG (testng-TxAndAsyncOpsTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-TxAndAsyncOpsTest] no switch in progress. Moving on...
2013-01-31 13:15:50,613 DEBUG (testng-TxAndAsyncOpsTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-TxAndAsyncOpsTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:3f8 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:50,614 DEBUG (testng-TxAndAsyncOpsTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-TxAndAsyncOpsTest] local transaction null:267 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:3f8 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:50,614 DEBUG (testng-TxAndAsyncOpsTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-TxAndAsyncOpsTest] local transaction null:267 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:50,589 DEBUG (testng-Command line test) [org.jgroups.protocols.pbcast.STABLE] [ergonomics] setting max_bytes to 400KB (1 members)
2013-01-31 13:15:50,615 DEBUG (testng-TxAndAsyncOpsTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-TxAndAsyncOpsTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:3fc status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:50,615 DEBUG (testng-TxAndAsyncOpsTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-TxAndAsyncOpsTest] will wait until no switch is in progress
2013-01-31 13:15:50,615 DEBUG (testng-TxAndAsyncOpsTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-TxAndAsyncOpsTest] no switch in progress. Moving on...
2013-01-31 13:15:50,585 DEBUG (testng-APITest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 12
2013-01-31 13:15:50,616 DEBUG (testng-APITest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.BatchingInterceptor
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@d0893d5}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@2e218ba2}
	>> org.infinispan.interceptors.TxInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@1c565057}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@66b48e49, PB=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@66b48e49}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@57e98f4c, TO=org.infinispan.interceptors.EntryWrappingInterceptor@57e98f4c, PB=org.infinispan.interceptors.EntryWrappingInterceptor@57e98f4c}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:50,585 DEBUG (testng-AsyncWithTxTest) [org.jgroups.protocols.pbcast.STABLE] [ergonomics] setting max_bytes to 400KB (1 members)
2013-01-31 13:15:50,616 DEBUG (testng-AsyncWithTxTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] New view accepted: [AsyncWithTxTest-NodeA-43597|0] [AsyncWithTxTest-NodeA-43597]
2013-01-31 13:15:50,616 DEBUG (testng-TxAndAsyncOpsTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-TxAndAsyncOpsTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:3fc status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:50,616 INFO  (testng-AsyncWithTxTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000094: Received new cluster view: [AsyncWithTxTest-NodeA-43597|0] [AsyncWithTxTest-NodeA-43597]
2013-01-31 13:15:50,616 DEBUG (testng-TxAndAsyncOpsTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-TxAndAsyncOpsTest] local transaction null:268 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:3fc status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:50,616 DEBUG (testng-Command line test) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] New view accepted: [Command line test-NodeA-7883|0] [Command line test-NodeA-7883]
2013-01-31 13:15:50,617 INFO  (testng-Command line test) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000094: Received new cluster view: [Command line test-NodeA-7883|0] [Command line test-NodeA-7883]
2013-01-31 13:15:50,617 DEBUG (testng-TxAndAsyncOpsTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-TxAndAsyncOpsTest] local transaction null:268 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:50,609 ERROR (testng-ReadCommittedLockTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test failed testRollbacks(org.infinispan.api.mvcc.read_committed.ReadCommittedLockTest)
java.lang.AssertionError: Stale locks exist! NumLocksHeld is 1 and lock info is org.infinispan.util.concurrent.locks.containers.OwnableReentrantPerEntryLockContainer@30ef513a
	at org.infinispan.api.mvcc.LockAssert.assertNoLocks(LockAssert.java:48)
	at org.infinispan.api.mvcc.LockTestBase.assertNoLocks(LockTestBase.java:102)
	at org.infinispan.api.mvcc.LockTestBase.testRollbacks(LockTestBase.java:362)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:50,606 DEBUG (Writer-2, WriteSkewTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [Writer-2, WriteSkewTest] will wait until no switch is in progress
2013-01-31 13:15:50,602 WARN  (testng-KeyAffinityServiceShutdownTest) [org.jgroups.stack.Configurator] [JGRP00013] TP.discard_incompatible_packets has been deprecated: incompatible packets are discarded anyway
2013-01-31 13:15:50,620 ERROR (testng-RepeatableReadLockTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test failed testLocksOnEvictNonexistent(org.infinispan.api.mvcc.repeatable_read.RepeatableReadLockTest)
java.lang.AssertionError: Stale locks exist! NumLocksHeld is 1 and lock info is org.infinispan.util.concurrent.locks.containers.OwnableReentrantPerEntryLockContainer@1beb6bba
	at org.infinispan.api.mvcc.LockAssert.assertNoLocks(LockAssert.java:48)
	at org.infinispan.api.mvcc.LockTestBase.assertNoLocks(LockTestBase.java:102)
	at org.infinispan.api.mvcc.LockTestBase.testLocksOnEvictNonexistent(LockTestBase.java:200)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:50,627 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.api.mvcc.LockTestBase] **** - STARTING TEARDOWN - ****
2013-01-31 13:15:50,628 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on null
2013-01-31 13:15:50,628 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 1 seconds.
2013-01-31 13:15:50,628 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:50,628 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.manager.DefaultCacheManager] Stopping cache manager ISPN on null
2013-01-31 13:15:50,628 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on null
2013-01-31 13:15:50,628 ERROR (testng-ReadCommittedLockTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test failed testRollbacks(org.infinispan.api.mvcc.read_committed.ReadCommittedLockTest)
java.util.ConcurrentModificationException
	at java.util.AbstractList$Itr.checkForComodification(AbstractList.java:372)
	at java.util.AbstractList$Itr.next(AbstractList.java:343)
	at org.apache.maven.plugin.surefire.report.TestSetRunListener.getAsString(TestSetRunListener.java:209)
	at org.apache.maven.plugin.surefire.report.TestSetRunListener.testFailed(TestSetRunListener.java:168)
	at org.apache.maven.surefire.testng.TestNGReporter.onTestFailure(TestNGReporter.java:104)
	at org.testng.internal.Invoker.runTestListeners(Invoker.java:1796)
	at org.testng.internal.Invoker.runTestListeners(Invoker.java:1780)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:749)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:50,601 DEBUG (testng-AtomicHashMapPassivationTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:50,599 DEBUG (testng-AtomicHashMapConcurrencyTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:50,651 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:50,652 DEBUG (testng-AtomicHashMapPassivationTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:50,652 DEBUG (testng-AtomicHashMapPassivationTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:50,653 INFO  (testng-AtomicHashMapPassivationTest) [org.infinispan.config.ConfigurationValidatingVisitor] ISPN000152: Passivation configured without an eviction policy being selected. Only manually evicted entities will be pasivated.
2013-01-31 13:15:50,654 INFO  (testng-AtomicHashMapPassivationTest) [org.infinispan.transaction.lookup.JBossStandaloneJTAManagerLookup] ISPN000107: Retrieving transaction manager Transaction: unknown
2013-01-31 13:15:50,663 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:50,663 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:50,596 DEBUG (testng-FlagsEnabledTest) [org.jgroups.protocols.pbcast.GMS] address=FlagsEnabledTest-NodeA-50771, cluster=ISPN, physical address=127.0.0.1:8350
2013-01-31 13:15:50,644 DEBUG (testng-AsyncWithTxTest) [org.jgroups.protocols.pbcast.STABLE] resuming message garbage collection
2013-01-31 13:15:50,664 DEBUG (testng-AsyncWithTxTest) [org.jgroups.protocols.pbcast.GMS] created group (first member). My view is [AsyncWithTxTest-NodeA-43597|0], impl is org.jgroups.protocols.pbcast.CoordGmsImpl
2013-01-31 13:15:50,664 INFO  (testng-AsyncWithTxTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000079: Cache local address is AsyncWithTxTest-NodeA-43597, physical addresses are [127.0.0.1:8100]
2013-01-31 13:15:50,664 DEBUG (testng-AsyncWithTxTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] Waiting on view being accepted
2013-01-31 13:15:50,669 DEBUG (testng-AtomicHashMapConcurrencyTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:50,669 DEBUG (testng-AtomicHashMapConcurrencyTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:50,675 INFO  (testng-ReadCommittedLockTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:50,677 DEBUG (testng-KeyAffinityServiceShutdownTest) [org.jgroups.stack.Configurator] set property TCP.diagnostics_addr to default value /224.0.75.75
2013-01-31 13:15:50,634 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:50,630 DEBUG (testng-Command line test) [org.jgroups.protocols.pbcast.STABLE] resuming message garbage collection
2013-01-31 13:15:50,620 DEBUG (Writer-2, WriteSkewTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [Writer-2, WriteSkewTest] no switch in progress. Moving on...
2013-01-31 13:15:50,750 DEBUG (Writer-1, WriteSkewTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [Writer-1, WriteSkewTest] will wait until no switch is in progress
2013-01-31 13:15:50,750 DEBUG (Writer-1, WriteSkewTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [Writer-1, WriteSkewTest] no switch in progress. Moving on...
2013-01-31 13:15:50,750 DEBUG (Writer-1, WriteSkewTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [Writer-1, WriteSkewTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:3f6 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:50,754 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:50,755 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:50,619 DEBUG (testng-APITest) [org.infinispan.CacheImpl] Started cache ___defaultcache on null
2013-01-31 13:15:50,756 INFO  (testng-APITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testAtomicMap(org.infinispan.atomic.APITest)
2013-01-31 13:15:50,617 DEBUG (testng-TxAndAsyncOpsTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-TxAndAsyncOpsTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:400 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:50,757 DEBUG (testng-TxAndAsyncOpsTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-TxAndAsyncOpsTest] will wait until no switch is in progress
2013-01-31 13:15:50,757 DEBUG (testng-TxAndAsyncOpsTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-TxAndAsyncOpsTest] no switch in progress. Moving on...
2013-01-31 13:15:50,750 DEBUG (Writer-2, WriteSkewTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [Writer-2, WriteSkewTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:3f7 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:50,750 DEBUG (testng-Command line test) [org.jgroups.protocols.pbcast.GMS] created group (first member). My view is [Command line test-NodeA-7883|0], impl is org.jgroups.protocols.pbcast.CoordGmsImpl
2013-01-31 13:15:50,758 DEBUG (Writer-1, WriteSkewTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [Writer-1, WriteSkewTest] local transaction null:269 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:3f6 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:50,758 DEBUG (Writer-1, WriteSkewTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [Writer-1, WriteSkewTest] local transaction null:269 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:50,758 DEBUG (testng-KeyAffinityServiceShutdownTest) [org.jgroups.protocols.FRAG2] received CONFIG event: {bind_addr=/127.0.0.1}
2013-01-31 13:15:50,760 INFO  (testng-RepeatableReadLockTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:50,749 INFO  (testng-AtomicHashMapPassivationTest) [org.infinispan.configuration.cache.EvictionConfigurationBuilder] ISPN000152: Passivation configured without an eviction policy being selected. Only manually evicted entities will be pasivated.
2013-01-31 13:15:50,760 DEBUG (testng-AtomicHashMapPassivationTest) [org.infinispan.configuration.cache.TransactionConfigurationBuilder] Switching to Synchronization based enlistment.
2013-01-31 13:15:50,761 DEBUG (testng-KeyAffinityServiceShutdownTest) [org.jgroups.protocols.pbcast.GMS] address=KeyAffinityServiceShutdownTest-NodeA-53318, cluster=ISPN, physical address=127.0.0.1:8300
2013-01-31 13:15:50,761 INFO  (testng-AtomicHashMapPassivationTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:50,706 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:50,701 INFO  (testng-AsyncWithTxTest) [org.infinispan.transaction.lookup.JBossStandaloneJTAManagerLookup] ISPN000107: Retrieving transaction manager Transaction: unknown
2013-01-31 13:15:50,700 DEBUG (testng-FlagsEnabledTest) [org.jgroups.protocols.pbcast.NAKACK2] 
[FlagsEnabledTest-NodeA-50771 setDigest()]
existing digest:  []
new digest:       FlagsEnabledTest-NodeA-50771: [0 (0)]
resulting digest: FlagsEnabledTest-NodeA-50771: [0 (0)]
2013-01-31 13:15:50,761 DEBUG (testng-FlagsEnabledTest) [org.jgroups.protocols.pbcast.GMS] FlagsEnabledTest-NodeA-50771: installing view [FlagsEnabledTest-NodeA-50771|0] [FlagsEnabledTest-NodeA-50771]
2013-01-31 13:15:50,761 DEBUG (testng-KeyAffinityServiceShutdownTest) [org.jgroups.protocols.pbcast.NAKACK2] 
[KeyAffinityServiceShutdownTest-NodeA-53318 setDigest()]
existing digest:  []
new digest:       KeyAffinityServiceShutdownTest-NodeA-53318: [0 (0)]
resulting digest: KeyAffinityServiceShutdownTest-NodeA-53318: [0 (0)]
2013-01-31 13:15:50,761 DEBUG (testng-KeyAffinityServiceShutdownTest) [org.jgroups.protocols.pbcast.GMS] KeyAffinityServiceShutdownTest-NodeA-53318: installing view [KeyAffinityServiceShutdownTest-NodeA-53318|0] [KeyAffinityServiceShutdownTest-NodeA-53318]
2013-01-31 13:15:50,761 DEBUG (testng-FlagsEnabledTest) [org.jgroups.protocols.pbcast.STABLE] resuming message garbage collection
2013-01-31 13:15:50,761 DEBUG (testng-KeyAffinityServiceShutdownTest) [org.jgroups.protocols.pbcast.STABLE] resuming message garbage collection
2013-01-31 13:15:50,762 DEBUG (testng-FlagsEnabledTest) [org.jgroups.protocols.pbcast.STABLE] [ergonomics] setting max_bytes to 400KB (1 members)
2013-01-31 13:15:50,762 DEBUG (testng-FlagsEnabledTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] New view accepted: [FlagsEnabledTest-NodeA-50771|0] [FlagsEnabledTest-NodeA-50771]
2013-01-31 13:15:50,762 INFO  (testng-FlagsEnabledTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000094: Received new cluster view: [FlagsEnabledTest-NodeA-50771|0] [FlagsEnabledTest-NodeA-50771]
2013-01-31 13:15:50,689 INFO  (testng-AtomicHashMapConcurrencyTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:50,762 DEBUG (testng-KeyAffinityServiceShutdownTest) [org.jgroups.protocols.pbcast.STABLE] [ergonomics] setting max_bytes to 400KB (1 members)
2013-01-31 13:15:50,762 DEBUG (testng-KeyAffinityServiceShutdownTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] New view accepted: [KeyAffinityServiceShutdownTest-NodeA-53318|0] [KeyAffinityServiceShutdownTest-NodeA-53318]
2013-01-31 13:15:50,762 INFO  (testng-KeyAffinityServiceShutdownTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000094: Received new cluster view: [KeyAffinityServiceShutdownTest-NodeA-53318|0] [KeyAffinityServiceShutdownTest-NodeA-53318]
2013-01-31 13:15:50,758 INFO  (testng-Command line test) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000079: Cache local address is Command line test-NodeA-7883, physical addresses are [127.0.0.1:8400]
2013-01-31 13:15:50,762 DEBUG (testng-Command line test) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] Waiting on view being accepted
2013-01-31 13:15:50,757 DEBUG (testng-TxAndAsyncOpsTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-TxAndAsyncOpsTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:400 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:50,763 DEBUG (testng-TxAndAsyncOpsTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-TxAndAsyncOpsTest] local transaction null:271 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:400 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:50,763 DEBUG (testng-TxAndAsyncOpsTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-TxAndAsyncOpsTest] local transaction null:271 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:50,763 INFO  (testng-TxAndAsyncOpsTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testAsyncOps(org.infinispan.api.TxCacheAndAsyncOpsTest).
2013-01-31 13:15:50,764 DEBUG (testng-TxAndAsyncOpsTest) [org.infinispan.test.TestingUtil] Cleaning data for cache '___defaultcache' on a non-clustered cache manager
2013-01-31 13:15:50,764 DEBUG (testng-TxAndAsyncOpsTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [k=v]
2013-01-31 13:15:50,764 DEBUG (testng-TxAndAsyncOpsTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:50,764 DEBUG (testng-TxAndAsyncOpsTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:50,764 DEBUG (testng-TxAndAsyncOpsTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:50,764 DEBUG (testng-TxAndAsyncOpsTest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on null
2013-01-31 13:15:50,764 DEBUG (testng-TxAndAsyncOpsTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 1 seconds.
2013-01-31 13:15:50,764 DEBUG (testng-TxAndAsyncOpsTest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:50,765 DEBUG (testng-TxAndAsyncOpsTest) [org.infinispan.manager.DefaultCacheManager] Stopping cache manager ISPN on null
2013-01-31 13:15:50,765 DEBUG (testng-TxAndAsyncOpsTest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on null
2013-01-31 13:15:50,766 DEBUG (testng-FlagsEnabledTest) [org.jgroups.protocols.pbcast.STABLE] resuming message garbage collection
2013-01-31 13:15:50,766 DEBUG (testng-FlagsEnabledTest) [org.jgroups.protocols.pbcast.GMS] created group (first member). My view is [FlagsEnabledTest-NodeA-50771|0], impl is org.jgroups.protocols.pbcast.CoordGmsImpl
2013-01-31 13:15:50,766 INFO  (testng-FlagsEnabledTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000079: Cache local address is FlagsEnabledTest-NodeA-50771, physical addresses are [127.0.0.1:8350]
2013-01-31 13:15:50,766 DEBUG (testng-FlagsEnabledTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] Waiting on view being accepted
2013-01-31 13:15:50,770 INFO  (testng-AtomicHashMapTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testDeltasWithEmptyMap(org.infinispan.atomic.AtomicHashMapTest)
2013-01-31 13:15:50,774 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-APITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:40a status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:50,774 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-APITest] will wait until no switch is in progress
2013-01-31 13:15:50,774 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-APITest] no switch in progress. Moving on...
2013-01-31 13:15:50,774 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-APITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:40a status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:50,774 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-APITest] local transaction null:272 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:40a status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:50,774 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-APITest] local transaction null:272 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:50,767 WARN  (testng-FlagsEnabledTest) [org.infinispan.config.ConfigurationValidatingVisitor] ISPN000149: Fetch persistent state and purge on startup are both disabled, cache may contain stale entries on startup
2013-01-31 13:15:50,788 WARN  (testng-FlagsEnabledTest) [org.infinispan.config.ConfigurationValidatingVisitor] ISPN000149: Fetch persistent state and purge on startup are both disabled, cache may contain stale entries on startup
2013-01-31 13:15:50,788 DEBUG (Writer-2, WriteSkewTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [Writer-2, WriteSkewTest] local transaction null:270 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:3f7 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:50,788 DEBUG (Writer-2, WriteSkewTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [Writer-2, WriteSkewTest] local transaction null:270 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:50,789 DEBUG (testng-FlagsEnabledTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Trying to lookup TransactionManager for JBoss AS 7
2013-01-31 13:15:50,789 DEBUG (testng-FlagsEnabledTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Failed to perform a lookup for [java:jboss/TransactionManager (JBoss AS 7)]
2013-01-31 13:15:50,789 DEBUG (testng-FlagsEnabledTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Trying to lookup TransactionManager for JBoss AS 4 ~ 6, JRun4
2013-01-31 13:15:50,789 DEBUG (testng-FlagsEnabledTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Failed to perform a lookup for [java:/TransactionManager (JBoss AS 4 ~ 6, JRun4)]
2013-01-31 13:15:50,789 DEBUG (testng-FlagsEnabledTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Trying to lookup TransactionManager for Resin 3.x
2013-01-31 13:15:50,789 DEBUG (testng-FlagsEnabledTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Failed to perform a lookup for [java:comp/TransactionManager (Resin 3.x)]
2013-01-31 13:15:50,789 DEBUG (testng-FlagsEnabledTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Trying to lookup TransactionManager for Sun Glassfish
2013-01-31 13:15:50,789 DEBUG (testng-FlagsEnabledTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Failed to perform a lookup for [java:appserver/TransactionManager (Sun Glassfish)]
2013-01-31 13:15:50,789 DEBUG (testng-FlagsEnabledTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Trying to lookup TransactionManager for Borland, Sun
2013-01-31 13:15:50,789 DEBUG (testng-FlagsEnabledTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Failed to perform a lookup for [java:pm/TransactionManager (Borland, Sun)]
2013-01-31 13:15:50,790 DEBUG (testng-FlagsEnabledTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Trying to lookup TransactionManager for BEA WebLogic
2013-01-31 13:15:50,790 DEBUG (testng-KeyAffinityServiceShutdownTest) [org.jgroups.protocols.pbcast.STABLE] resuming message garbage collection
2013-01-31 13:15:50,790 DEBUG (testng-KeyAffinityServiceShutdownTest) [org.jgroups.protocols.pbcast.GMS] created group (first member). My view is [KeyAffinityServiceShutdownTest-NodeA-53318|0], impl is org.jgroups.protocols.pbcast.CoordGmsImpl
2013-01-31 13:15:50,790 INFO  (testng-KeyAffinityServiceShutdownTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000079: Cache local address is KeyAffinityServiceShutdownTest-NodeA-53318, physical addresses are [127.0.0.1:8300]
2013-01-31 13:15:50,791 DEBUG (testng-KeyAffinityServiceShutdownTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] Waiting on view being accepted
2013-01-31 13:15:50,790 DEBUG (testng-FlagsEnabledTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Failed to perform a lookup for [javax.transaction.TransactionManager (BEA WebLogic)]
2013-01-31 13:15:50,819 DEBUG (testng-FlagsEnabledTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Trying to lookup TransactionManager for Resin, Orion, JOnAS (JOTM)
2013-01-31 13:15:50,819 DEBUG (testng-FlagsEnabledTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Failed to perform a lookup for [java:comp/UserTransaction (Resin, Orion, JOnAS (JOTM))]
2013-01-31 13:15:50,819 DEBUG (testng-FlagsEnabledTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Trying WebSphere 5.1: com.ibm.ws.Transaction.TransactionManagerFactory
2013-01-31 13:15:50,819 DEBUG (testng-AtomicHashMapConcurrencyTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:50,820 DEBUG (testng-FlagsEnabledTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Trying WebSphere 5.0: com.ibm.ejs.jts.jta.TransactionManagerFactory
2013-01-31 13:15:50,820 DEBUG (testng-FlagsEnabledTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Trying WebSphere 4: com.ibm.ejs.jts.jta.JTSXA
2013-01-31 13:15:50,821 DEBUG (testng-FlagsEnabledTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Couldn't find any WebSphere TransactionManager factory class, neither for WebSphere version 5.1 nor 5.0 nor 4
2013-01-31 13:15:50,821 INFO  (testng-FlagsEnabledTest) [org.infinispan.transaction.lookup.JBossStandaloneJTAManagerLookup] ISPN000107: Retrieving transaction manager Transaction: unknown
2013-01-31 13:15:50,818 INFO  (testng-AtomicHashMapTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testDeltasWithEmptyMap(org.infinispan.atomic.AtomicHashMapTest).
2013-01-31 13:15:50,823 INFO  (testng-AtomicHashMapTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testDeltasWithNoChanges(org.infinispan.atomic.AtomicHashMapTest)
2013-01-31 13:15:50,813 ERROR (testng-WriteSkewTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Method testDontCheckWriteSkew(org.infinispan.api.mvcc.repeatable_read.WriteSkewTest) threw an exception
java.lang.AssertionError: Stale locks exist! NumLocksHeld is 1 and lock info is org.infinispan.util.concurrent.locks.containers.OwnableReentrantPerEntryLockContainer@2f3409c5
	at org.infinispan.api.mvcc.LockAssert.assertNoLocks(LockAssert.java:48)
	at org.infinispan.api.mvcc.repeatable_read.WriteSkewTest.assertNoLocks(WriteSkewTest.java:95)
	at org.infinispan.api.mvcc.repeatable_read.WriteSkewTest.doTest(WriteSkewTest.java:241)
	at org.infinispan.api.mvcc.repeatable_read.WriteSkewTest.testDontCheckWriteSkew(WriteSkewTest.java:104)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:50,828 INFO  (testng-AtomicHashMapTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testDeltasWithNoChanges(org.infinispan.atomic.AtomicHashMapTest).
2013-01-31 13:15:50,828 INFO  (testng-AtomicHashMapTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testDeltasWithRepeatedChanges(org.infinispan.atomic.AtomicHashMapTest)
2013-01-31 13:15:50,829 INFO  (testng-AtomicHashMapTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testDeltasWithRepeatedChanges(org.infinispan.atomic.AtomicHashMapTest).
2013-01-31 13:15:50,829 ERROR (testng-WriteSkewTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test failed testDontCheckWriteSkew(org.infinispan.api.mvcc.repeatable_read.WriteSkewTest)
java.lang.AssertionError: Stale locks exist! NumLocksHeld is 1 and lock info is org.infinispan.util.concurrent.locks.containers.OwnableReentrantPerEntryLockContainer@2f3409c5
	at org.infinispan.api.mvcc.LockAssert.assertNoLocks(LockAssert.java:48)
	at org.infinispan.api.mvcc.repeatable_read.WriteSkewTest.assertNoLocks(WriteSkewTest.java:95)
	at org.infinispan.api.mvcc.repeatable_read.WriteSkewTest.doTest(WriteSkewTest.java:241)
	at org.infinispan.api.mvcc.repeatable_read.WriteSkewTest.testDontCheckWriteSkew(WriteSkewTest.java:104)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:50,830 INFO  (testng-WriteSkewTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testWriteSkewWithOnlyPut(org.infinispan.api.mvcc.repeatable_read.WriteSkewTest)
2013-01-31 13:15:50,832 INFO  (testng-WriteSkewTest) [org.infinispan.transaction.lookup.JBossStandaloneJTAManagerLookup] ISPN000107: Retrieving transaction manager Transaction: unknown
2013-01-31 13:15:50,833 ERROR (testng-WriteSkewTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Method testWriteSkewWithOnlyPut(org.infinispan.api.mvcc.repeatable_read.WriteSkewTest) threw an exception
org.infinispan.config.ConfigurationException: Write-skew checking requires versioning to be enabled and versioning scheme 'SIMPLE' to be configured
	at org.infinispan.configuration.cache.LockingConfigurationBuilder.validate(LockingConfigurationBuilder.java:103)
	at org.infinispan.configuration.cache.ConfigurationBuilder.validate(ConfigurationBuilder.java:171)
	at org.infinispan.configuration.cache.ConfigurationBuilder.build(ConfigurationBuilder.java:184)
	at org.infinispan.configuration.cache.ConfigurationBuilder.build(ConfigurationBuilder.java:179)
	at org.infinispan.configuration.cache.LegacyConfigurationAdaptor.adapt(LegacyConfigurationAdaptor.java:547)
	at org.infinispan.factories.BootstrapFactory.construct(BootstrapFactory.java:61)
	at org.infinispan.factories.AbstractComponentRegistry.getOrCreateComponent(AbstractComponentRegistry.java:286)
	at org.infinispan.factories.AbstractComponentRegistry.invokeInjectionMethod(AbstractComponentRegistry.java:246)
	at org.infinispan.factories.AbstractComponentRegistry.access$000(AbstractComponentRegistry.java:83)
	at org.infinispan.factories.AbstractComponentRegistry$Component.injectDependencies(AbstractComponentRegistry.java:792)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponentInternal(AbstractComponentRegistry.java:220)
	at org.infinispan.factories.ComponentRegistry.registerComponentInternal(ComponentRegistry.java:156)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponent(AbstractComponentRegistry.java:175)
	at org.infinispan.factories.AbstractComponentRegistry.getOrCreateComponent(AbstractComponentRegistry.java:291)
	at org.infinispan.factories.AbstractComponentRegistry.invokeInjectionMethod(AbstractComponentRegistry.java:246)
	at org.infinispan.factories.AbstractComponentRegistry.access$000(AbstractComponentRegistry.java:83)
	at org.infinispan.factories.AbstractComponentRegistry$Component.injectDependencies(AbstractComponentRegistry.java:792)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponentInternal(AbstractComponentRegistry.java:220)
	at org.infinispan.factories.ComponentRegistry.registerComponentInternal(ComponentRegistry.java:156)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponent(AbstractComponentRegistry.java:175)
	at org.infinispan.factories.AbstractComponentRegistry.getOrCreateComponent(AbstractComponentRegistry.java:291)
	at org.infinispan.factories.AbstractComponentRegistry.invokeInjectionMethod(AbstractComponentRegistry.java:246)
	at org.infinispan.factories.AbstractComponentRegistry.access$000(AbstractComponentRegistry.java:83)
	at org.infinispan.factories.AbstractComponentRegistry$Component.injectDependencies(AbstractComponentRegistry.java:792)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponentInternal(AbstractComponentRegistry.java:220)
	at org.infinispan.factories.ComponentRegistry.registerComponentInternal(ComponentRegistry.java:156)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponent(AbstractComponentRegistry.java:175)
	at org.infinispan.factories.AbstractComponentRegistry.getOrCreateComponent(AbstractComponentRegistry.java:291)
	at org.infinispan.factories.AbstractComponentRegistry.invokeInjectionMethod(AbstractComponentRegistry.java:246)
	at org.infinispan.factories.AbstractComponentRegistry.access$000(AbstractComponentRegistry.java:83)
	at org.infinispan.factories.AbstractComponentRegistry$Component.injectDependencies(AbstractComponentRegistry.java:792)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponentInternal(AbstractComponentRegistry.java:220)
	at org.infinispan.factories.ComponentRegistry.registerComponentInternal(ComponentRegistry.java:156)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponent(AbstractComponentRegistry.java:175)
	at org.infinispan.factories.AbstractComponentRegistry.getOrCreateComponent(AbstractComponentRegistry.java:291)
	at org.infinispan.factories.AbstractComponentRegistry.invokeInjectionMethod(AbstractComponentRegistry.java:246)
	at org.infinispan.factories.AbstractComponentRegistry.access$000(AbstractComponentRegistry.java:83)
	at org.infinispan.factories.AbstractComponentRegistry$Component.injectDependencies(AbstractComponentRegistry.java:792)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponentInternal(AbstractComponentRegistry.java:220)
	at org.infinispan.factories.ComponentRegistry.registerComponentInternal(ComponentRegistry.java:156)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponent(AbstractComponentRegistry.java:175)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponent(AbstractComponentRegistry.java:167)
	at org.infinispan.factories.InterceptorChainFactory.buildInterceptorChain(InterceptorChainFactory.java:87)
	at org.infinispan.factories.InterceptorChainFactory.construct(InterceptorChainFactory.java:231)
	at org.infinispan.factories.AbstractComponentRegistry.getOrCreateComponent(AbstractComponentRegistry.java:286)
	at org.infinispan.factories.AbstractComponentRegistry.invokeInjectionMethod(AbstractComponentRegistry.java:246)
	at org.infinispan.factories.AbstractComponentRegistry.access$000(AbstractComponentRegistry.java:83)
	at org.infinispan.factories.AbstractComponentRegistry$Component.injectDependencies(AbstractComponentRegistry.java:792)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponentInternal(AbstractComponentRegistry.java:220)
	at org.infinispan.factories.ComponentRegistry.registerComponentInternal(ComponentRegistry.java:156)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponent(AbstractComponentRegistry.java:175)
	at org.infinispan.factories.AbstractComponentRegistry.getOrCreateComponent(AbstractComponentRegistry.java:291)
	at org.infinispan.factories.AbstractComponentRegistry.invokeInjectionMethod(AbstractComponentRegistry.java:246)
	at org.infinispan.factories.AbstractComponentRegistry.access$000(AbstractComponentRegistry.java:83)
	at org.infinispan.factories.AbstractComponentRegistry$Component.injectDependencies(AbstractComponentRegistry.java:792)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponentInternal(AbstractComponentRegistry.java:220)
	at org.infinispan.factories.ComponentRegistry.registerComponentInternal(ComponentRegistry.java:156)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponent(AbstractComponentRegistry.java:175)
	at org.infinispan.factories.AbstractComponentRegistry.getOrCreateComponent(AbstractComponentRegistry.java:291)
	at org.infinispan.factories.AbstractComponentRegistry.invokeInjectionMethod(AbstractComponentRegistry.java:246)
	at org.infinispan.factories.AbstractComponentRegistry.access$000(AbstractComponentRegistry.java:83)
	at org.infinispan.factories.AbstractComponentRegistry$Component.injectDependencies(AbstractComponentRegistry.java:792)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponentInternal(AbstractComponentRegistry.java:220)
	at org.infinispan.factories.ComponentRegistry.registerComponentInternal(ComponentRegistry.java:156)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponent(AbstractComponentRegistry.java:175)
	at org.infinispan.factories.AbstractComponentRegistry.getOrCreateComponent(AbstractComponentRegistry.java:291)
	at org.infinispan.factories.AbstractComponentRegistry.invokeInjectionMethod(AbstractComponentRegistry.java:246)
	at org.infinispan.factories.AbstractComponentRegistry.access$000(AbstractComponentRegistry.java:83)
	at org.infinispan.factories.AbstractComponentRegistry$Component.injectDependencies(AbstractComponentRegistry.java:792)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponentInternal(AbstractComponentRegistry.java:220)
	at org.infinispan.factories.ComponentRegistry.registerComponentInternal(ComponentRegistry.java:156)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponent(AbstractComponentRegistry.java:175)
	at org.infinispan.factories.AbstractComponentRegistry.getOrCreateComponent(AbstractComponentRegistry.java:291)
	at org.infinispan.factories.AbstractComponentRegistry.invokeInjectionMethod(AbstractComponentRegistry.java:246)
	at org.infinispan.factories.AbstractComponentRegistry.access$000(AbstractComponentRegistry.java:83)
	at org.infinispan.factories.AbstractComponentRegistry$Component.injectDependencies(AbstractComponentRegistry.java:792)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponentInternal(AbstractComponentRegistry.java:220)
	at org.infinispan.factories.ComponentRegistry.registerComponentInternal(ComponentRegistry.java:156)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponent(AbstractComponentRegistry.java:175)
	at org.infinispan.factories.AbstractComponentRegistry.getOrCreateComponent(AbstractComponentRegistry.java:291)
	at org.infinispan.factories.AbstractComponentRegistry.invokeInjectionMethod(AbstractComponentRegistry.java:246)
	at org.infinispan.factories.AbstractComponentRegistry.access$000(AbstractComponentRegistry.java:83)
	at org.infinispan.factories.AbstractComponentRegistry$Component.injectDependencies(AbstractComponentRegistry.java:792)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponentInternal(AbstractComponentRegistry.java:220)
	at org.infinispan.factories.ComponentRegistry.registerComponentInternal(ComponentRegistry.java:156)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponent(AbstractComponentRegistry.java:175)
	at org.infinispan.factories.AbstractComponentRegistry.getOrCreateComponent(AbstractComponentRegistry.java:291)
	at org.infinispan.factories.AbstractComponentRegistry.invokeInjectionMethod(AbstractComponentRegistry.java:246)
	at org.infinispan.factories.AbstractComponentRegistry.access$000(AbstractComponentRegistry.java:83)
	at org.infinispan.factories.AbstractComponentRegistry$Component.injectDependencies(AbstractComponentRegistry.java:792)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponentInternal(AbstractComponentRegistry.java:220)
	at org.infinispan.factories.ComponentRegistry.registerComponentInternal(ComponentRegistry.java:156)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponent(AbstractComponentRegistry.java:175)
	at org.infinispan.factories.AbstractComponentRegistry.getOrCreateComponent(AbstractComponentRegistry.java:291)
	at org.infinispan.factories.AbstractComponentRegistry.invokeInjectionMethod(AbstractComponentRegistry.java:246)
	at org.infinispan.factories.AbstractComponentRegistry.access$000(AbstractComponentRegistry.java:83)
	at org.infinispan.factories.AbstractComponentRegistry$Component.injectDependencies(AbstractComponentRegistry.java:792)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponentInternal(AbstractComponentRegistry.java:220)
	at org.infinispan.factories.ComponentRegistry.registerComponentInternal(ComponentRegistry.java:156)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponent(AbstractComponentRegistry.java:175)
	at org.infinispan.factories.InternalCacheFactory.bootstrap(InternalCacheFactory.java:103)
	at org.infinispan.factories.InternalCacheFactory.createAndWire(InternalCacheFactory.java:79)
	at org.infinispan.factories.InternalCacheFactory.createCache(InternalCacheFactory.java:63)
	at org.infinispan.manager.DefaultCacheManager.wireCache(DefaultCacheManager.java:701)
	at org.infinispan.manager.DefaultCacheManager.createCache(DefaultCacheManager.java:658)
	at org.infinispan.manager.DefaultCacheManager.getCache(DefaultCacheManager.java:550)
	at org.infinispan.api.mvcc.repeatable_read.WriteSkewTest.testWriteSkewWithOnlyPut(WriteSkewTest.java:120)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:50,851 ERROR (testng-WriteSkewTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test failed testWriteSkewWithOnlyPut(org.infinispan.api.mvcc.repeatable_read.WriteSkewTest)
org.infinispan.config.ConfigurationException: Write-skew checking requires versioning to be enabled and versioning scheme 'SIMPLE' to be configured
	at org.infinispan.configuration.cache.LockingConfigurationBuilder.validate(LockingConfigurationBuilder.java:103)
	at org.infinispan.configuration.cache.ConfigurationBuilder.validate(ConfigurationBuilder.java:171)
	at org.infinispan.configuration.cache.ConfigurationBuilder.build(ConfigurationBuilder.java:184)
	at org.infinispan.configuration.cache.ConfigurationBuilder.build(ConfigurationBuilder.java:179)
	at org.infinispan.configuration.cache.LegacyConfigurationAdaptor.adapt(LegacyConfigurationAdaptor.java:547)
	at org.infinispan.factories.BootstrapFactory.construct(BootstrapFactory.java:61)
	at org.infinispan.factories.AbstractComponentRegistry.getOrCreateComponent(AbstractComponentRegistry.java:286)
	at org.infinispan.factories.AbstractComponentRegistry.invokeInjectionMethod(AbstractComponentRegistry.java:246)
	at org.infinispan.factories.AbstractComponentRegistry.access$000(AbstractComponentRegistry.java:83)
	at org.infinispan.factories.AbstractComponentRegistry$Component.injectDependencies(AbstractComponentRegistry.java:792)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponentInternal(AbstractComponentRegistry.java:220)
	at org.infinispan.factories.ComponentRegistry.registerComponentInternal(ComponentRegistry.java:156)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponent(AbstractComponentRegistry.java:175)
	at org.infinispan.factories.AbstractComponentRegistry.getOrCreateComponent(AbstractComponentRegistry.java:291)
	at org.infinispan.factories.AbstractComponentRegistry.invokeInjectionMethod(AbstractComponentRegistry.java:246)
	at org.infinispan.factories.AbstractComponentRegistry.access$000(AbstractComponentRegistry.java:83)
	at org.infinispan.factories.AbstractComponentRegistry$Component.injectDependencies(AbstractComponentRegistry.java:792)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponentInternal(AbstractComponentRegistry.java:220)
	at org.infinispan.factories.ComponentRegistry.registerComponentInternal(ComponentRegistry.java:156)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponent(AbstractComponentRegistry.java:175)
	at org.infinispan.factories.AbstractComponentRegistry.getOrCreateComponent(AbstractComponentRegistry.java:291)
	at org.infinispan.factories.AbstractComponentRegistry.invokeInjectionMethod(AbstractComponentRegistry.java:246)
	at org.infinispan.factories.AbstractComponentRegistry.access$000(AbstractComponentRegistry.java:83)
	at org.infinispan.factories.AbstractComponentRegistry$Component.injectDependencies(AbstractComponentRegistry.java:792)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponentInternal(AbstractComponentRegistry.java:220)
	at org.infinispan.factories.ComponentRegistry.registerComponentInternal(ComponentRegistry.java:156)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponent(AbstractComponentRegistry.java:175)
	at org.infinispan.factories.AbstractComponentRegistry.getOrCreateComponent(AbstractComponentRegistry.java:291)
	at org.infinispan.factories.AbstractComponentRegistry.invokeInjectionMethod(AbstractComponentRegistry.java:246)
	at org.infinispan.factories.AbstractComponentRegistry.access$000(AbstractComponentRegistry.java:83)
	at org.infinispan.factories.AbstractComponentRegistry$Component.injectDependencies(AbstractComponentRegistry.java:792)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponentInternal(AbstractComponentRegistry.java:220)
	at org.infinispan.factories.ComponentRegistry.registerComponentInternal(ComponentRegistry.java:156)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponent(AbstractComponentRegistry.java:175)
	at org.infinispan.factories.AbstractComponentRegistry.getOrCreateComponent(AbstractComponentRegistry.java:291)
	at org.infinispan.factories.AbstractComponentRegistry.invokeInjectionMethod(AbstractComponentRegistry.java:246)
	at org.infinispan.factories.AbstractComponentRegistry.access$000(AbstractComponentRegistry.java:83)
	at org.infinispan.factories.AbstractComponentRegistry$Component.injectDependencies(AbstractComponentRegistry.java:792)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponentInternal(AbstractComponentRegistry.java:220)
	at org.infinispan.factories.ComponentRegistry.registerComponentInternal(ComponentRegistry.java:156)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponent(AbstractComponentRegistry.java:175)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponent(AbstractComponentRegistry.java:167)
	at org.infinispan.factories.InterceptorChainFactory.buildInterceptorChain(InterceptorChainFactory.java:87)
	at org.infinispan.factories.InterceptorChainFactory.construct(InterceptorChainFactory.java:231)
	at org.infinispan.factories.AbstractComponentRegistry.getOrCreateComponent(AbstractComponentRegistry.java:286)
	at org.infinispan.factories.AbstractComponentRegistry.invokeInjectionMethod(AbstractComponentRegistry.java:246)
	at org.infinispan.factories.AbstractComponentRegistry.access$000(AbstractComponentRegistry.java:83)
	at org.infinispan.factories.AbstractComponentRegistry$Component.injectDependencies(AbstractComponentRegistry.java:792)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponentInternal(AbstractComponentRegistry.java:220)
	at org.infinispan.factories.ComponentRegistry.registerComponentInternal(ComponentRegistry.java:156)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponent(AbstractComponentRegistry.java:175)
	at org.infinispan.factories.AbstractComponentRegistry.getOrCreateComponent(AbstractComponentRegistry.java:291)
	at org.infinispan.factories.AbstractComponentRegistry.invokeInjectionMethod(AbstractComponentRegistry.java:246)
	at org.infinispan.factories.AbstractComponentRegistry.access$000(AbstractComponentRegistry.java:83)
	at org.infinispan.factories.AbstractComponentRegistry$Component.injectDependencies(AbstractComponentRegistry.java:792)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponentInternal(AbstractComponentRegistry.java:220)
	at org.infinispan.factories.ComponentRegistry.registerComponentInternal(ComponentRegistry.java:156)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponent(AbstractComponentRegistry.java:175)
	at org.infinispan.factories.AbstractComponentRegistry.getOrCreateComponent(AbstractComponentRegistry.java:291)
	at org.infinispan.factories.AbstractComponentRegistry.invokeInjectionMethod(AbstractComponentRegistry.java:246)
	at org.infinispan.factories.AbstractComponentRegistry.access$000(AbstractComponentRegistry.java:83)
	at org.infinispan.factories.AbstractComponentRegistry$Component.injectDependencies(AbstractComponentRegistry.java:792)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponentInternal(AbstractComponentRegistry.java:220)
	at org.infinispan.factories.ComponentRegistry.registerComponentInternal(ComponentRegistry.java:156)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponent(AbstractComponentRegistry.java:175)
	at org.infinispan.factories.AbstractComponentRegistry.getOrCreateComponent(AbstractComponentRegistry.java:291)
	at org.infinispan.factories.AbstractComponentRegistry.invokeInjectionMethod(AbstractComponentRegistry.java:246)
	at org.infinispan.factories.AbstractComponentRegistry.access$000(AbstractComponentRegistry.java:83)
	at org.infinispan.factories.AbstractComponentRegistry$Component.injectDependencies(AbstractComponentRegistry.java:792)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponentInternal(AbstractComponentRegistry.java:220)
	at org.infinispan.factories.ComponentRegistry.registerComponentInternal(ComponentRegistry.java:156)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponent(AbstractComponentRegistry.java:175)
	at org.infinispan.factories.AbstractComponentRegistry.getOrCreateComponent(AbstractComponentRegistry.java:291)
	at org.infinispan.factories.AbstractComponentRegistry.invokeInjectionMethod(AbstractComponentRegistry.java:246)
	at org.infinispan.factories.AbstractComponentRegistry.access$000(AbstractComponentRegistry.java:83)
	at org.infinispan.factories.AbstractComponentRegistry$Component.injectDependencies(AbstractComponentRegistry.java:792)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponentInternal(AbstractComponentRegistry.java:220)
	at org.infinispan.factories.ComponentRegistry.registerComponentInternal(ComponentRegistry.java:156)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponent(AbstractComponentRegistry.java:175)
	at org.infinispan.factories.AbstractComponentRegistry.getOrCreateComponent(AbstractComponentRegistry.java:291)
	at org.infinispan.factories.AbstractComponentRegistry.invokeInjectionMethod(AbstractComponentRegistry.java:246)
	at org.infinispan.factories.AbstractComponentRegistry.access$000(AbstractComponentRegistry.java:83)
	at org.infinispan.factories.AbstractComponentRegistry$Component.injectDependencies(AbstractComponentRegistry.java:792)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponentInternal(AbstractComponentRegistry.java:220)
	at org.infinispan.factories.ComponentRegistry.registerComponentInternal(ComponentRegistry.java:156)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponent(AbstractComponentRegistry.java:175)
	at org.infinispan.factories.AbstractComponentRegistry.getOrCreateComponent(AbstractComponentRegistry.java:291)
	at org.infinispan.factories.AbstractComponentRegistry.invokeInjectionMethod(AbstractComponentRegistry.java:246)
	at org.infinispan.factories.AbstractComponentRegistry.access$000(AbstractComponentRegistry.java:83)
	at org.infinispan.factories.AbstractComponentRegistry$Component.injectDependencies(AbstractComponentRegistry.java:792)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponentInternal(AbstractComponentRegistry.java:220)
	at org.infinispan.factories.ComponentRegistry.registerComponentInternal(ComponentRegistry.java:156)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponent(AbstractComponentRegistry.java:175)
	at org.infinispan.factories.AbstractComponentRegistry.getOrCreateComponent(AbstractComponentRegistry.java:291)
	at org.infinispan.factories.AbstractComponentRegistry.invokeInjectionMethod(AbstractComponentRegistry.java:246)
	at org.infinispan.factories.AbstractComponentRegistry.access$000(AbstractComponentRegistry.java:83)
	at org.infinispan.factories.AbstractComponentRegistry$Component.injectDependencies(AbstractComponentRegistry.java:792)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponentInternal(AbstractComponentRegistry.java:220)
	at org.infinispan.factories.ComponentRegistry.registerComponentInternal(ComponentRegistry.java:156)
	at org.infinispan.factories.AbstractComponentRegistry.registerComponent(AbstractComponentRegistry.java:175)
	at org.infinispan.factories.InternalCacheFactory.bootstrap(InternalCacheFactory.java:103)
	at org.infinispan.factories.InternalCacheFactory.createAndWire(InternalCacheFactory.java:79)
	at org.infinispan.factories.InternalCacheFactory.createCache(InternalCacheFactory.java:63)
	at org.infinispan.manager.DefaultCacheManager.wireCache(DefaultCacheManager.java:701)
	at org.infinispan.manager.DefaultCacheManager.createCache(DefaultCacheManager.java:658)
	at org.infinispan.manager.DefaultCacheManager.getCache(DefaultCacheManager.java:550)
	at org.infinispan.api.mvcc.repeatable_read.WriteSkewTest.testWriteSkewWithOnlyPut(WriteSkewTest.java:120)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:50,880 DEBUG (testng-WriteSkewTest) [org.infinispan.CacheImpl] Stopping cache noWriteSkewCheck on null
2013-01-31 13:15:50,881 DEBUG (testng-WriteSkewTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 1 seconds.
2013-01-31 13:15:50,881 DEBUG (testng-WriteSkewTest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:50,881 DEBUG (testng-WriteSkewTest) [org.infinispan.manager.DefaultCacheManager] Stopping cache manager ISPN on null
2013-01-31 13:15:50,881 DEBUG (testng-WriteSkewTest) [org.infinispan.CacheImpl] Stopping cache noWriteSkewCheck on null
2013-01-31 13:15:50,848 DEBUG (testng-AtomicHashMapConcurrencyTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:50,846 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:50,840 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:50,888 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:50,888 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:50,839 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:50,837 WARN  (testng-LocalKeyAffinityServiceTest) [org.jgroups.stack.Configurator] [JGRP00013] TP.discard_incompatible_packets has been deprecated: incompatible packets are discarded anyway
2013-01-31 13:15:50,834 DEBUG (testng-AtomicHashMapPassivationTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:50,833 DEBUG (testng-FlagsEnabledTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:50,918 INFO  (testng-AtomicMapFunctionalTest) [org.infinispan.transaction.lookup.JBossStandaloneJTAManagerLookup] ISPN000107: Retrieving transaction manager Transaction: unknown
2013-01-31 13:15:50,935 DEBUG (testng-FlagsEnabledTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:50,936 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:50,945 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 11
2013-01-31 13:15:50,945 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@7b9a7448}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@5948625d}
	>> org.infinispan.interceptors.TxInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@1f31f576}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@8ea25fa, PB=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@8ea25fa}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@446344a8, TO=org.infinispan.interceptors.EntryWrappingInterceptor@446344a8, PB=org.infinispan.interceptors.EntryWrappingInterceptor@446344a8}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:50,946 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.CacheImpl] Started cache ___defaultcache on null
2013-01-31 13:15:50,946 INFO  (testng-ReadCommittedLockTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testRollbacksOnNullEntry(org.infinispan.api.mvcc.read_committed.ReadCommittedLockTest)
2013-01-31 13:15:50,946 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction DummyTransaction{xid=DummyXid{id=18}, status=0} is starting. check if switch is in progress...
2013-01-31 13:15:50,946 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-ReadCommittedLockTest] will wait until no switch is in progress
2013-01-31 13:15:50,946 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-ReadCommittedLockTest] no switch in progress. Moving on...
2013-01-31 13:15:50,947 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction DummyTransaction{xid=DummyXid{id=18}, status=0} will use 2PC while executing
2013-01-31 13:15:50,947 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction DummyTransaction{xid=DummyXid{id=19}, status=0} is starting. check if switch is in progress...
2013-01-31 13:15:50,947 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-ReadCommittedLockTest] will wait until no switch is in progress
2013-01-31 13:15:50,947 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-ReadCommittedLockTest] no switch in progress. Moving on...
2013-01-31 13:15:50,947 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction DummyTransaction{xid=DummyXid{id=19}, status=0} will use 2PC while executing
2013-01-31 13:15:50,947 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction null:274 [DummyTransaction{xid=DummyXid{id=19}, status=9}] wants to rollback
2013-01-31 13:15:50,948 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction null:273 [DummyTransaction{xid=DummyXid{id=18}, status=7}] wants to commit
2013-01-31 13:15:50,948 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction null:273 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:50,952 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.configuration.cache.TransactionConfigurationBuilder] Switching to Synchronization based enlistment.
2013-01-31 13:15:50,955 DEBUG (testng-AtomicHashMapPassivationTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:50,955 DEBUG (testng-AtomicHashMapPassivationTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:50,948 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.transaction.tm.DummyTransaction] This is a read-only tx
2013-01-31 13:15:50,961 INFO  (testng-ReadCommittedLockTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testRollbacksOnNullEntry(org.infinispan.api.mvcc.read_committed.ReadCommittedLockTest).
2013-01-31 13:15:50,961 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.api.mvcc.LockTestBase] **** - STARTING TEARDOWN - ****
2013-01-31 13:15:50,962 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on null
2013-01-31 13:15:50,962 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 1 seconds.
2013-01-31 13:15:50,962 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:50,962 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.manager.DefaultCacheManager] Stopping cache manager ISPN on null
2013-01-31 13:15:50,962 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on null
2013-01-31 13:15:50,963 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:50,963 DEBUG (testng-AtomicHashMapPassivationTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 16
2013-01-31 13:15:50,963 DEBUG (testng-AtomicHashMapPassivationTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.BatchingInterceptor
	>> org.infinispan.interceptors.IsMarshallableInterceptor
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@1bdf2b7c}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@589fe82f}
	>> org.infinispan.interceptors.TxInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@6a44931d}
	>> org.infinispan.interceptors.MarshalledValueInterceptor
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@3c168b6c, PB=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@3c168b6c}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@6c1b7e45, TO=org.infinispan.interceptors.EntryWrappingInterceptor@6c1b7e45, PB=org.infinispan.interceptors.EntryWrappingInterceptor@6c1b7e45}
	>> org.infinispan.interceptors.ActivationInterceptor
	>> org.infinispan.interceptors.PassivationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:50,965 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:50,966 DEBUG (testng-AtomicHashMapConcurrencyTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:50,969 DEBUG (testng-AtomicHashMapConcurrencyTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 12
2013-01-31 13:15:50,969 DEBUG (testng-AtomicHashMapConcurrencyTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.BatchingInterceptor
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@6a79d49d}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@6475c607}
	>> org.infinispan.interceptors.TxInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@701c2917}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.PessimisticLockingInterceptor@48cdde81, PB=org.infinispan.interceptors.locking.PessimisticLockingInterceptor@48cdde81}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@43cb0c7e, TO=org.infinispan.interceptors.EntryWrappingInterceptor@43cb0c7e, PB=org.infinispan.interceptors.EntryWrappingInterceptor@43cb0c7e}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:50,970 DEBUG (testng-AtomicHashMapConcurrencyTest) [org.infinispan.CacheImpl] Started cache ___defaultcache on null
2013-01-31 13:15:50,970 INFO  (testng-AtomicHashMapConcurrencyTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testConcurrentCreate(org.infinispan.atomic.AtomicHashMapConcurrencyTest)
2013-01-31 13:15:50,970 DEBUG (testng-AtomicHashMapConcurrencyTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AtomicHashMapConcurrencyTest] local transaction DummyTransaction{xid=DummyXid{id=20}, status=0} is starting. check if switch is in progress...
2013-01-31 13:15:50,970 DEBUG (testng-AtomicHashMapConcurrencyTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-AtomicHashMapConcurrencyTest] will wait until no switch is in progress
2013-01-31 13:15:50,970 DEBUG (testng-AtomicHashMapConcurrencyTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-AtomicHashMapConcurrencyTest] no switch in progress. Moving on...
2013-01-31 13:15:50,970 DEBUG (testng-AtomicHashMapConcurrencyTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AtomicHashMapConcurrencyTest] local transaction DummyTransaction{xid=DummyXid{id=20}, status=0} will use 2PC while executing
2013-01-31 13:15:50,971 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:50,972 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:50,972 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:50,975 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 11
2013-01-31 13:15:50,975 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@15a28df8}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@63169fe0}
	>> org.infinispan.interceptors.TxInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@625a5df2}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@1acded50, PB=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@1acded50}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@45972cef, TO=org.infinispan.interceptors.EntryWrappingInterceptor@45972cef, PB=org.infinispan.interceptors.EntryWrappingInterceptor@45972cef}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:50,979 INFO  (testng-AtomicMapFunctionalTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:50,980 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.CacheImpl] Started cache ___defaultcache on null
2013-01-31 13:15:50,980 INFO  (testng-RepeatableReadLockTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testLocksOnPutData(org.infinispan.api.mvcc.repeatable_read.RepeatableReadLockTest)
2013-01-31 13:15:50,981 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepeatableReadLockTest] local transaction DummyTransaction{xid=DummyXid{id=21}, status=0} is starting. check if switch is in progress...
2013-01-31 13:15:50,981 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepeatableReadLockTest] will wait until no switch is in progress
2013-01-31 13:15:50,981 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepeatableReadLockTest] no switch in progress. Moving on...
2013-01-31 13:15:50,981 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepeatableReadLockTest] local transaction DummyTransaction{xid=DummyXid{id=21}, status=0} will use 2PC while executing
2013-01-31 13:15:50,981 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepeatableReadLockTest] local transaction null:276 [DummyTransaction{xid=DummyXid{id=21}, status=7}] wants to commit
2013-01-31 13:15:50,981 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepeatableReadLockTest] local transaction null:276 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:50,981 ERROR (testng-RepeatableReadLockTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Method testLocksOnPutData(org.infinispan.api.mvcc.repeatable_read.RepeatableReadLockTest) threw an exception
java.lang.AssertionError: Stale locks exist! NumLocksHeld is 1 and lock info is org.infinispan.util.concurrent.locks.containers.OwnableReentrantPerEntryLockContainer@5b356c94
	at org.infinispan.api.mvcc.LockAssert.assertNoLocks(LockAssert.java:48)
	at org.infinispan.api.mvcc.LockTestBase.assertNoLocks(LockTestBase.java:102)
	at org.infinispan.api.mvcc.LockTestBase.testLocksOnPutData(LockTestBase.java:145)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:50,988 ERROR (testng-RepeatableReadLockTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test failed testLocksOnPutData(org.infinispan.api.mvcc.repeatable_read.RepeatableReadLockTest)
java.lang.AssertionError: Stale locks exist! NumLocksHeld is 1 and lock info is org.infinispan.util.concurrent.locks.containers.OwnableReentrantPerEntryLockContainer@5b356c94
	at org.infinispan.api.mvcc.LockAssert.assertNoLocks(LockAssert.java:48)
	at org.infinispan.api.mvcc.LockTestBase.assertNoLocks(LockTestBase.java:102)
	at org.infinispan.api.mvcc.LockTestBase.testLocksOnPutData(LockTestBase.java:145)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:50,994 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.api.mvcc.LockTestBase] **** - STARTING TEARDOWN - ****
2013-01-31 13:15:50,994 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on null
2013-01-31 13:15:50,995 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 1 seconds.
2013-01-31 13:15:50,996 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:50,996 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.manager.DefaultCacheManager] Stopping cache manager ISPN on null
2013-01-31 13:15:50,996 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on null
2013-01-31 13:15:50,999 DEBUG (ForkThread-AtomicHashMapConcurrencyTest-46393446) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [ForkThread-AtomicHashMapConcurrencyTest-46393446] local transaction DummyTransaction{xid=DummyXid{id=22}, status=0} is starting. check if switch is in progress...
2013-01-31 13:15:51,025 DEBUG (ForkThread-AtomicHashMapConcurrencyTest-46393446) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [ForkThread-AtomicHashMapConcurrencyTest-46393446] will wait until no switch is in progress
2013-01-31 13:15:51,025 DEBUG (ForkThread-AtomicHashMapConcurrencyTest-46393446) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [ForkThread-AtomicHashMapConcurrencyTest-46393446] no switch in progress. Moving on...
2013-01-31 13:15:51,026 DEBUG (testng-AtomicHashMapPassivationTest) [org.infinispan.CacheImpl] Started cache ___defaultcache on null
2013-01-31 13:15:51,026 INFO  (testng-AtomicHashMapPassivationTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testPassivateAndUpdate(org.infinispan.atomic.AtomicHashMapPassivationTest)
2013-01-31 13:15:51,026 DEBUG (testng-AtomicHashMapPassivationTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AtomicHashMapPassivationTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:40e status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:51,026 DEBUG (testng-AtomicHashMapPassivationTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-AtomicHashMapPassivationTest] will wait until no switch is in progress
2013-01-31 13:15:51,026 DEBUG (testng-AtomicHashMapPassivationTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-AtomicHashMapPassivationTest] no switch in progress. Moving on...
2013-01-31 13:15:51,027 DEBUG (testng-AtomicHashMapPassivationTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AtomicHashMapPassivationTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:40e status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:51,029 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:51,034 DEBUG (testng-Command line test) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:51,035 DEBUG (testng-Command line test) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:51,056 DEBUG (ForkThread-AtomicHashMapConcurrencyTest-46393446) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [ForkThread-AtomicHashMapConcurrencyTest-46393446] local transaction DummyTransaction{xid=DummyXid{id=22}, status=0} will use 2PC while executing
2013-01-31 13:15:51,057 DEBUG (testng-FlagsEnabledTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:51,059 INFO  (testng-ReadCommittedLockTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:51,064 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:51,064 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:51,067 DEBUG (testng-Command line test) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:51,068 INFO  (testng-Command line test) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:51,075 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:51,075 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:51,076 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:51,078 INFO  (testng-RepeatableReadLockTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:51,079 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 11
2013-01-31 13:15:51,080 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@26f1e633}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@5340323e}
	>> org.infinispan.interceptors.TxInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@1ba2af25}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@5598b44f, PB=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@5598b44f}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@1c65da70, TO=org.infinispan.interceptors.EntryWrappingInterceptor@1c65da70, PB=org.infinispan.interceptors.EntryWrappingInterceptor@1c65da70}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:51,083 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.CacheImpl] Started cache ___defaultcache on null
2013-01-31 13:15:51,083 INFO  (testng-ReadCommittedLockTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testUpdateDoesntBlockRead(org.infinispan.api.mvcc.read_committed.ReadCommittedLockTest)
2013-01-31 13:15:51,083 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction DummyTransaction{xid=DummyXid{id=23}, status=0} is starting. check if switch is in progress...
2013-01-31 13:15:51,083 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-ReadCommittedLockTest] will wait until no switch is in progress
2013-01-31 13:15:51,083 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-ReadCommittedLockTest] no switch in progress. Moving on...
2013-01-31 13:15:51,083 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction DummyTransaction{xid=DummyXid{id=23}, status=0} will use 2PC while executing
2013-01-31 13:15:51,090 INFO  (testng-FlagsEnabledTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:51,099 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:51,100 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:51,102 DEBUG (testng-AsyncWithTxTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:51,103 DEBUG (testng-AsyncWithTxTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:51,103 DEBUG (testng-AsyncWithTxTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:51,104 INFO  (testng-AsyncWithTxTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:51,106 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:51,108 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 12
2013-01-31 13:15:51,108 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.BatchingInterceptor
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@2d5d1dec}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@3c578838}
	>> org.infinispan.interceptors.TxInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@16b0337b}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@a03dbe0, PB=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@a03dbe0}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@3585443, TO=org.infinispan.interceptors.EntryWrappingInterceptor@3585443, PB=org.infinispan.interceptors.EntryWrappingInterceptor@3585443}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:51,109 DEBUG (testng-KeyAffinityServiceShutdownTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:51,109 DEBUG (testng-KeyAffinityServiceShutdownTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:51,111 DEBUG (testng-KeyAffinityServiceShutdownTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:51,112 INFO  (testng-KeyAffinityServiceShutdownTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:51,114 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.CacheImpl] Started cache ___defaultcache on null
2013-01-31 13:15:51,114 INFO  (testng-AtomicMapFunctionalTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testChangesOnAtomicMap(org.infinispan.atomic.AtomicMapFunctionalTest)
2013-01-31 13:15:51,117 DEBUG (testng-FlagsEnabledTest) [org.infinispan.transaction.TransactionTable] Min view id set to 0
2013-01-31 13:15:51,117 DEBUG (testng-FlagsEnabledTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 13
2013-01-31 13:15:51,117 DEBUG (testng-FlagsEnabledTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.StateTransferLockInterceptor@843735, TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@684478d6, PB=org.infinispan.interceptors.StateTransferLockInterceptor@843735}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@67595f14}
	>> org.infinispan.interceptors.TxInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@1c714f0e}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@52fd2eb8, PB=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@52fd2eb8}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.VersionedEntryWrappingInterceptor@6c065c98, TO=org.infinispan.interceptors.totalorder.TotalOrderVersionedEntryWrappingInterceptor@15a93690, PB=org.infinispan.interceptors.VersionedEntryWrappingInterceptor@6c065c98}
	>> org.infinispan.interceptors.ClusteredCacheLoaderInterceptor
	>> org.infinispan.interceptors.CacheStoreInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.VersionedReplicationInterceptor@183d330c, TO=org.infinispan.interceptors.totalorder.TotalOrderVersionedReplicationInterceptor@59e26542, PB=org.infinispan.interceptors.VersionedReplicationInterceptor@183d330c}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:51,121 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AtomicMapFunctionalTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:412 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:51,122 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-AtomicMapFunctionalTest] will wait until no switch is in progress
2013-01-31 13:15:51,122 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-AtomicMapFunctionalTest] no switch in progress. Moving on...
2013-01-31 13:15:51,122 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AtomicMapFunctionalTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:412 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:51,122 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AtomicMapFunctionalTest] local transaction null:279 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:412 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:51,122 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AtomicMapFunctionalTest] local transaction null:279 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:51,123 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction null:280 [DummyTransaction{xid=DummyXid{id=23}, status=7}] wants to commit
2013-01-31 13:15:51,123 DEBUG (testng-ClusteredAPITest) [org.infinispan.atomic.ClusteredAPITest] Creating cache managers
2013-01-31 13:15:51,123 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction null:280 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:51,123 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction DummyTransaction{xid=DummyXid{id=24}, status=0} is starting. check if switch is in progress...
2013-01-31 13:15:51,123 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-ReadCommittedLockTest] will wait until no switch is in progress
2013-01-31 13:15:51,123 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-ReadCommittedLockTest] no switch in progress. Moving on...
2013-01-31 13:15:51,123 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction DummyTransaction{xid=DummyXid{id=24}, status=0} will use 2PC while executing
2013-01-31 13:15:51,123 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction DummyTransaction{xid=DummyXid{id=25}, status=0} is starting. check if switch is in progress...
2013-01-31 13:15:51,123 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-ReadCommittedLockTest] will wait until no switch is in progress
2013-01-31 13:15:51,123 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-ReadCommittedLockTest] no switch in progress. Moving on...
2013-01-31 13:15:51,123 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction DummyTransaction{xid=DummyXid{id=25}, status=0} will use 2PC while executing
2013-01-31 13:15:51,123 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction null:281 [DummyTransaction{xid=DummyXid{id=24}, status=7}] wants to commit
2013-01-31 13:15:51,123 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction null:281 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:51,124 ERROR (testng-ReadCommittedLockTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Method testUpdateDoesntBlockRead(org.infinispan.api.mvcc.read_committed.ReadCommittedLockTest) threw an exception
java.lang.AssertionError: Stale locks exist! NumLocksHeld is 1 and lock info is org.infinispan.util.concurrent.locks.containers.OwnableReentrantPerEntryLockContainer@14dec8d7
	at org.infinispan.api.mvcc.LockAssert.assertNoLocks(LockAssert.java:48)
	at org.infinispan.api.mvcc.LockTestBase.assertNoLocks(LockTestBase.java:102)
	at org.infinispan.api.mvcc.LockTestBase.testUpdateDoesntBlockRead(LockTestBase.java:279)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:51,124 DEBUG (testng-ClusteredAPITest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:51,129 ERROR (testng-ReadCommittedLockTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test failed testUpdateDoesntBlockRead(org.infinispan.api.mvcc.read_committed.ReadCommittedLockTest)
java.lang.AssertionError: Stale locks exist! NumLocksHeld is 1 and lock info is org.infinispan.util.concurrent.locks.containers.OwnableReentrantPerEntryLockContainer@14dec8d7
	at org.infinispan.api.mvcc.LockAssert.assertNoLocks(LockAssert.java:48)
	at org.infinispan.api.mvcc.LockTestBase.assertNoLocks(LockTestBase.java:102)
	at org.infinispan.api.mvcc.LockTestBase.testUpdateDoesntBlockRead(LockTestBase.java:279)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:51,132 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.api.mvcc.LockTestBase] **** - STARTING TEARDOWN - ****
2013-01-31 13:15:51,132 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on null
2013-01-31 13:15:51,132 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 1 seconds.
2013-01-31 13:15:51,136 DEBUG (testng-ClusteredAPITest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:51,140 DEBUG (testng-ClusteredAPITest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:51,143 INFO  (testng-ClusteredAPITest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000078: Starting JGroups Channel
2013-01-31 13:15:51,153 DEBUG (testng-FlagsEnabledTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Setting configuration tunned parameters
2013-01-31 13:15:51,153 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-APITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:416 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:51,153 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-APITest] will wait until no switch is in progress
2013-01-31 13:15:51,153 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-APITest] no switch in progress. Moving on...
2013-01-31 13:15:51,153 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-APITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:416 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:51,154 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-APITest] local transaction null:283 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:416 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:51,154 DEBUG (testng-AtomicHashMapPassivationTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AtomicHashMapPassivationTest] local transaction null:277 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:40e status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:51,154 DEBUG (testng-AtomicHashMapPassivationTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AtomicHashMapPassivationTest] local transaction null:277 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:51,153 DEBUG (testng-Command line test) [org.infinispan.transaction.TransactionTable] Min view id set to 0
2013-01-31 13:15:51,155 DEBUG (testng-Command line test) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 10
2013-01-31 13:15:51,155 DEBUG (testng-Command line test) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.StateTransferLockInterceptor@37ebae65, TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@52068591, PB=org.infinispan.interceptors.StateTransferLockInterceptor@37ebae65}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@2a2b1ca9}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@7466b0df}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@1e63c2d, PB=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@1e63c2d}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@3278af54, TO=org.infinispan.interceptors.EntryWrappingInterceptor@3278af54, PB=org.infinispan.interceptors.EntryWrappingInterceptor@3278af54}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.DistributionInterceptor@113ecdaf, TO=org.infinispan.interceptors.totalorder.TotalOrderDistributionInterceptor@3231a501, PB=org.infinispan.interceptors.DistributionInterceptor@113ecdaf}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:51,154 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-APITest] local transaction null:283 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:51,155 DEBUG (testng-AtomicHashMapPassivationTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AtomicHashMapPassivationTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:41a status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:51,155 DEBUG (testng-AtomicHashMapPassivationTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-AtomicHashMapPassivationTest] will wait until no switch is in progress
2013-01-31 13:15:51,155 DEBUG (testng-AtomicHashMapPassivationTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-AtomicHashMapPassivationTest] no switch in progress. Moving on...
2013-01-31 13:15:51,155 DEBUG (testng-AtomicHashMapPassivationTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AtomicHashMapPassivationTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:41a status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:51,155 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-APITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:41b status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:51,155 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-APITest] will wait until no switch is in progress
2013-01-31 13:15:51,155 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-APITest] no switch in progress. Moving on...
2013-01-31 13:15:51,155 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-APITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:41b status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:51,156 DEBUG (testng-AtomicHashMapPassivationTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AtomicHashMapPassivationTest] local transaction null:284 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:41a status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:51,156 DEBUG (testng-AtomicHashMapPassivationTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AtomicHashMapPassivationTest] local transaction null:284 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:51,156 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-APITest] local transaction null:285 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:41b status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:51,156 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-APITest] local transaction null:285 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:51,156 INFO  (testng-AtomicHashMapPassivationTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testPassivateAndUpdate(org.infinispan.atomic.AtomicHashMapPassivationTest).
2013-01-31 13:15:51,156 DEBUG (testng-AtomicHashMapPassivationTest) [org.infinispan.test.TestingUtil] Cleaning data for cache '___defaultcache' on a non-clustered cache manager
2013-01-31 13:15:51,156 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-APITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:422 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:51,156 DEBUG (testng-AtomicHashMapPassivationTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [k-testPassivateAndUpdate=MarshalledValue{instance=AtomicHashMap, serialized=false, cachedHashCode=1620429915}@a9b9be7]
2013-01-31 13:15:51,156 DEBUG (testng-AtomicHashMapPassivationTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:51,157 DEBUG (testng-AtomicHashMapPassivationTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:51,157 DEBUG (testng-AtomicHashMapPassivationTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:51,157 DEBUG (testng-AtomicHashMapPassivationTest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on null
2013-01-31 13:15:51,157 INFO  (testng-AtomicHashMapPassivationTest) [org.infinispan.eviction.PassivationManagerImpl] ISPN000029: Passivating all entries to disk
2013-01-31 13:15:51,157 INFO  (testng-AtomicHashMapPassivationTest) [org.infinispan.eviction.PassivationManagerImpl] ISPN000030: Passivated 0 entries in 0 milliseconds
2013-01-31 13:15:51,157 DEBUG (testng-AtomicHashMapPassivationTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 1 seconds.
2013-01-31 13:15:51,157 DEBUG (testng-AtomicHashMapPassivationTest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:51,158 DEBUG (testng-AtomicHashMapPassivationTest) [org.infinispan.manager.DefaultCacheManager] Stopping cache manager ISPN on null
2013-01-31 13:15:51,158 DEBUG (testng-AtomicHashMapPassivationTest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on null
2013-01-31 13:15:51,161 DEBUG (testng-Command line test) [org.infinispan.distribution.ch.DefaultConsistentHash] Using 51 virtualNodes to initialize consistent hash wheel 
2013-01-31 13:15:51,160 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AtomicMapFunctionalTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:423 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:51,161 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-AtomicMapFunctionalTest] will wait until no switch is in progress
2013-01-31 13:15:51,161 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-AtomicMapFunctionalTest] no switch in progress. Moving on...
2013-01-31 13:15:51,162 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AtomicMapFunctionalTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:423 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:51,162 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AtomicMapFunctionalTest] local transaction null:286 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:423 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:51,162 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AtomicMapFunctionalTest] local transaction null:286 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:51,162 INFO  (testng-AtomicMapFunctionalTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testChangesOnAtomicMap(org.infinispan.atomic.AtomicMapFunctionalTest).
2013-01-31 13:15:51,163 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on null
2013-01-31 13:15:51,163 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 1 seconds.
2013-01-31 13:15:51,163 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:51,163 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.manager.DefaultCacheManager] Stopping cache manager ISPN on null
2013-01-31 13:15:51,163 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on null
2013-01-31 13:15:51,163 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.atomic.FineGrainedAtomicMapAPITest] Creating cache managers
2013-01-31 13:15:51,164 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:51,153 DEBUG (testng-FlagsEnabledTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Configuration State responses are {}
2013-01-31 13:15:51,190 DEBUG (testng-LocalKeyAffinityServiceTest) [org.jgroups.stack.Configurator] set property TCP.diagnostics_addr to default value /224.0.75.75
2013-01-31 13:15:51,193 DEBUG (testng-AsyncWithTxTest) [org.infinispan.transaction.TransactionTable] Min view id set to 0
2013-01-31 13:15:51,193 DEBUG (testng-AsyncWithTxTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 11
2013-01-31 13:15:51,193 DEBUG (testng-AsyncWithTxTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.StateTransferLockInterceptor@5cbf3245, TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@c7d7f95, PB=org.infinispan.interceptors.StateTransferLockInterceptor@5cbf3245}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@343159b}
	>> org.infinispan.interceptors.TxInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@293f74c9}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@50c4d47, PB=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@50c4d47}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@6aa572e7, TO=org.infinispan.interceptors.EntryWrappingInterceptor@6aa572e7, PB=org.infinispan.interceptors.EntryWrappingInterceptor@6aa572e7}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.DistributionInterceptor@141ad264, TO=org.infinispan.interceptors.totalorder.TotalOrderDistributionInterceptor@6ceaad8b, PB=org.infinispan.interceptors.DistributionInterceptor@141ad264}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:51,176 DEBUG (testng-Command line test) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Setting configuration tunned parameters
2013-01-31 13:15:51,197 DEBUG (testng-Command line test) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Configuration State responses are {}
2013-01-31 13:15:51,197 DEBUG (testng-Command line test) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] No Configuration State found in cluster
2013-01-31 13:15:51,197 DEBUG (testng-Command line test) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] No State found. Using original configuration parameters
2013-01-31 13:15:51,185 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:51,156 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-APITest] will wait until no switch is in progress
2013-01-31 13:15:51,198 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-APITest] no switch in progress. Moving on...
2013-01-31 13:15:51,198 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-APITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:422 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:51,198 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-APITest] local transaction null:287 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:422 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:51,198 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-APITest] local transaction null:287 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:51,199 INFO  (testng-APITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testAtomicMap(org.infinispan.atomic.APITest).
2013-01-31 13:15:51,199 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-APITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:42a status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:51,199 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-APITest] will wait until no switch is in progress
2013-01-31 13:15:51,199 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-APITest] no switch in progress. Moving on...
2013-01-31 13:15:51,199 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-APITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:42a status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:51,199 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-APITest] local transaction null:288 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:42a status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:51,200 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-APITest] local transaction null:288 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:51,200 INFO  (testng-APITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testReadSafetyEmptyCache(org.infinispan.atomic.APITest)
2013-01-31 13:15:51,200 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-APITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:42e status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:51,200 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-APITest] will wait until no switch is in progress
2013-01-31 13:15:51,200 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-APITest] no switch in progress. Moving on...
2013-01-31 13:15:51,200 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-APITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:42e status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:51,200 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-APITest] local transaction null:289 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:42e status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:51,200 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-APITest] local transaction null:289 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:51,201 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-APITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:432 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:51,201 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-APITest] will wait until no switch is in progress
2013-01-31 13:15:51,201 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-APITest] no switch in progress. Moving on...
2013-01-31 13:15:51,201 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-APITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:432 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:51,201 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-APITest] local transaction null:290 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:432 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:51,201 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-APITest] local transaction null:290 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:51,202 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-APITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:436 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:51,202 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-APITest] will wait until no switch is in progress
2013-01-31 13:15:51,202 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-APITest] no switch in progress. Moving on...
2013-01-31 13:15:51,202 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-APITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:436 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:51,202 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-APITest] local transaction null:291 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:436 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:51,202 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-APITest] local transaction null:291 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:51,202 INFO  (testng-APITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testReadSafetyEmptyCache(org.infinispan.atomic.APITest).
2013-01-31 13:15:51,203 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-APITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:43a status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:51,203 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-APITest] will wait until no switch is in progress
2013-01-31 13:15:51,203 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-APITest] no switch in progress. Moving on...
2013-01-31 13:15:51,203 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-APITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:43a status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:51,203 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-APITest] local transaction null:292 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:43a status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:51,203 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-APITest] local transaction null:292 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:51,204 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:51,204 INFO  (testng-APITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testReadSafetyNotEmptyCache(org.infinispan.atomic.APITest)
2013-01-31 13:15:51,204 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-APITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:43e status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:51,204 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-APITest] will wait until no switch is in progress
2013-01-31 13:15:51,204 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-APITest] no switch in progress. Moving on...
2013-01-31 13:15:51,204 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-APITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:43e status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:51,204 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-APITest] local transaction null:293 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:43e status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:51,204 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-APITest] local transaction null:293 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:51,204 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-APITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:442 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:51,205 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-APITest] will wait until no switch is in progress
2013-01-31 13:15:51,205 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-APITest] no switch in progress. Moving on...
2013-01-31 13:15:51,205 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-APITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:442 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:51,205 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-APITest] local transaction null:294 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:442 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:51,205 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-APITest] local transaction null:294 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:51,206 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-APITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:446 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:51,206 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-APITest] will wait until no switch is in progress
2013-01-31 13:15:51,206 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-APITest] no switch in progress. Moving on...
2013-01-31 13:15:51,206 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-APITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:446 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:51,206 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-APITest] local transaction null:295 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:446 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:51,206 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-APITest] local transaction null:295 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:51,206 INFO  (testng-APITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testReadSafetyNotEmptyCache(org.infinispan.atomic.APITest).
2013-01-31 13:15:51,207 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-APITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:44a status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:51,207 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-APITest] will wait until no switch is in progress
2013-01-31 13:15:51,207 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-APITest] no switch in progress. Moving on...
2013-01-31 13:15:51,207 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-APITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:44a status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:51,207 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-APITest] local transaction null:296 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:44a status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:51,207 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-APITest] local transaction null:296 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:51,207 INFO  (testng-APITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testReadSafetyRollback(org.infinispan.atomic.APITest)
2013-01-31 13:15:51,207 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-APITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:44e status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:51,207 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-APITest] will wait until no switch is in progress
2013-01-31 13:15:51,208 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-APITest] no switch in progress. Moving on...
2013-01-31 13:15:51,208 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-APITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:44e status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:51,208 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-APITest] local transaction null:297 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:44e status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:51,208 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-APITest] local transaction null:297 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:51,208 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-APITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:452 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:51,208 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-APITest] will wait until no switch is in progress
2013-01-31 13:15:51,208 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-APITest] no switch in progress. Moving on...
2013-01-31 13:15:51,209 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-APITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:452 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:51,209 DEBUG (testng-KeyAffinityServiceShutdownTest) [org.infinispan.transaction.TransactionTable] Min view id set to 0
2013-01-31 13:15:51,209 DEBUG (testng-KeyAffinityServiceShutdownTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 10
2013-01-31 13:15:51,210 DEBUG (testng-KeyAffinityServiceShutdownTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.StateTransferLockInterceptor@650d154b, TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@3df122c1, PB=org.infinispan.interceptors.StateTransferLockInterceptor@650d154b}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@2220ccac}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@175d41b5}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@6b84de0e, PB=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@6b84de0e}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@600ea047, TO=org.infinispan.interceptors.EntryWrappingInterceptor@600ea047, PB=org.infinispan.interceptors.EntryWrappingInterceptor@600ea047}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.DistributionInterceptor@603cc695, TO=org.infinispan.interceptors.totalorder.TotalOrderDistributionInterceptor@3611918f, PB=org.infinispan.interceptors.DistributionInterceptor@603cc695}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:51,210 DEBUG (testng-KeyAffinityServiceShutdownTest) [org.infinispan.distribution.ch.DefaultConsistentHash] Using 1 virtualNodes to initialize consistent hash wheel 
2013-01-31 13:15:51,210 DEBUG (testng-KeyAffinityServiceShutdownTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Setting configuration tunned parameters
2013-01-31 13:15:51,210 DEBUG (testng-KeyAffinityServiceShutdownTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Configuration State responses are {}
2013-01-31 13:15:51,210 DEBUG (testng-KeyAffinityServiceShutdownTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] No Configuration State found in cluster
2013-01-31 13:15:51,210 DEBUG (testng-KeyAffinityServiceShutdownTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] No State found. Using original configuration parameters
2013-01-31 13:15:51,196 DEBUG (testng-FlagsEnabledTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] No Configuration State found in cluster
2013-01-31 13:15:51,213 DEBUG (testng-FlagsEnabledTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] No State found. Using original configuration parameters
2013-01-31 13:15:51,213 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:51,216 INFO  (testng-AtomicMapFunctionalTest) [org.infinispan.transaction.lookup.JBossStandaloneJTAManagerLookup] ISPN000107: Retrieving transaction manager Transaction: unknown
2013-01-31 13:15:51,194 DEBUG (testng-AsyncWithTxTest) [org.infinispan.distribution.ch.DefaultConsistentHash] Using 1 virtualNodes to initialize consistent hash wheel 
2013-01-31 13:15:51,219 DEBUG (testng-KeyAffinityServiceShutdownTest) [org.infinispan.cacheviews.CacheViewsManagerImpl] dist: Node KeyAffinityServiceShutdownTest-NodeA-53318 is joining
2013-01-31 13:15:51,219 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:51,219 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.configuration.cache.TransactionConfigurationBuilder] Switching to Synchronization based enlistment.
2013-01-31 13:15:51,209 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-APITest] local transaction null:298 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:452 status: ActionStatus.ABORTING >] wants to rollback
2013-01-31 13:15:51,220 INFO  (testng-APITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testReadSafetyRollback(org.infinispan.atomic.APITest).
2013-01-31 13:15:51,220 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-APITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:456 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:51,221 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:51,222 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-APITest] will wait until no switch is in progress
2013-01-31 13:15:51,222 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-APITest] no switch in progress. Moving on...
2013-01-31 13:15:51,222 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-APITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:456 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:51,223 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-APITest] local transaction null:299 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:456 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:51,223 DEBUG (testng-APITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-APITest] local transaction null:299 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:51,224 DEBUG (testng-APITest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on null
2013-01-31 13:15:51,224 DEBUG (testng-APITest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 1 seconds.
2013-01-31 13:15:51,224 DEBUG (testng-APITest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:51,224 DEBUG (testng-APITest) [org.infinispan.manager.DefaultCacheManager] Stopping cache manager ISPN on null
2013-01-31 13:15:51,224 DEBUG (testng-APITest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on null
2013-01-31 13:15:51,220 INFO  (testng-AtomicMapFunctionalTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:51,228 DEBUG (testng-LocalKeyAffinityServiceTest) [org.jgroups.protocols.FRAG2] received CONFIG event: {bind_addr=/127.0.0.1}
2013-01-31 13:15:51,224 INFO  (testng-FineGrainedAtomicMapAPITest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000078: Starting JGroups Channel
2013-01-31 13:15:51,233 WARN  (testng-PutForExternalReadTest) [org.jgroups.stack.Configurator] [JGRP00013] TP.discard_incompatible_packets has been deprecated: incompatible packets are discarded anyway
2013-01-31 13:15:51,241 DEBUG (testng-LocalKeyAffinityServiceTest) [org.jgroups.protocols.pbcast.GMS] address=LocalKeyAffinityServiceTest-NodeA-40360, cluster=ISPN, physical address=127.0.0.1:8050
2013-01-31 13:15:51,241 DEBUG (testng-LocalKeyAffinityServiceTest) [org.jgroups.protocols.pbcast.NAKACK2] 
[LocalKeyAffinityServiceTest-NodeA-40360 setDigest()]
existing digest:  []
new digest:       LocalKeyAffinityServiceTest-NodeA-40360: [0 (0)]
resulting digest: LocalKeyAffinityServiceTest-NodeA-40360: [0 (0)]
2013-01-31 13:15:51,241 DEBUG (testng-LocalKeyAffinityServiceTest) [org.jgroups.protocols.pbcast.GMS] LocalKeyAffinityServiceTest-NodeA-40360: installing view [LocalKeyAffinityServiceTest-NodeA-40360|0] [LocalKeyAffinityServiceTest-NodeA-40360]
2013-01-31 13:15:51,241 DEBUG (testng-LocalKeyAffinityServiceTest) [org.jgroups.protocols.pbcast.STABLE] resuming message garbage collection
2013-01-31 13:15:51,242 DEBUG (testng-LocalKeyAffinityServiceTest) [org.jgroups.protocols.pbcast.STABLE] [ergonomics] setting max_bytes to 400KB (1 members)
2013-01-31 13:15:51,242 DEBUG (testng-LocalKeyAffinityServiceTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] New view accepted: [LocalKeyAffinityServiceTest-NodeA-40360|0] [LocalKeyAffinityServiceTest-NodeA-40360]
2013-01-31 13:15:51,242 INFO  (testng-LocalKeyAffinityServiceTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000094: Received new cluster view: [LocalKeyAffinityServiceTest-NodeA-40360|0] [LocalKeyAffinityServiceTest-NodeA-40360]
2013-01-31 13:15:51,242 DEBUG (testng-LocalKeyAffinityServiceTest) [org.jgroups.protocols.pbcast.STABLE] resuming message garbage collection
2013-01-31 13:15:51,242 DEBUG (testng-LocalKeyAffinityServiceTest) [org.jgroups.protocols.pbcast.GMS] created group (first member). My view is [LocalKeyAffinityServiceTest-NodeA-40360|0], impl is org.jgroups.protocols.pbcast.CoordGmsImpl
2013-01-31 13:15:51,242 INFO  (testng-LocalKeyAffinityServiceTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000079: Cache local address is LocalKeyAffinityServiceTest-NodeA-40360, physical addresses are [127.0.0.1:8050]
2013-01-31 13:15:51,242 DEBUG (testng-LocalKeyAffinityServiceTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] Waiting on view being accepted
2013-01-31 13:15:51,249 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:51,250 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:51,251 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:51,252 DEBUG (testng-LocalKeyAffinityServiceTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:51,253 DEBUG (testng-LocalKeyAffinityServiceTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:51,253 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 12
2013-01-31 13:15:51,253 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.BatchingInterceptor
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@6415f669}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@5de49ad4}
	>> org.infinispan.interceptors.TxInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@4b710474}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@68db825d, PB=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@68db825d}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@234bdd73, TO=org.infinispan.interceptors.EntryWrappingInterceptor@234bdd73, PB=org.infinispan.interceptors.EntryWrappingInterceptor@234bdd73}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:51,254 DEBUG (testng-LocalKeyAffinityServiceTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:51,254 INFO  (testng-LocalKeyAffinityServiceTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:51,267 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.CacheImpl] Started cache ___defaultcache on null
2013-01-31 13:15:51,268 INFO  (testng-AtomicMapFunctionalTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testChangesOnAtomicMapNoLocks(org.infinispan.atomic.AtomicMapFunctionalTest)
2013-01-31 13:15:51,268 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AtomicMapFunctionalTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:45a status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:51,268 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-AtomicMapFunctionalTest] will wait until no switch is in progress
2013-01-31 13:15:51,268 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-AtomicMapFunctionalTest] no switch in progress. Moving on...
2013-01-31 13:15:51,268 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AtomicMapFunctionalTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:45a status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:51,268 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AtomicMapFunctionalTest] local transaction null:300 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:45a status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:51,269 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AtomicMapFunctionalTest] local transaction null:300 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:51,270 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.atomic.AtomicMapFunctionalTest] Doing a put
2013-01-31 13:15:51,270 DEBUG (testng-PutForExternalReadTest) [org.jgroups.stack.Configurator] set property TCP.diagnostics_addr to default value /224.0.75.75
2013-01-31 13:15:51,270 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AtomicMapFunctionalTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:45e status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:51,270 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-AtomicMapFunctionalTest] will wait until no switch is in progress
2013-01-31 13:15:51,270 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-AtomicMapFunctionalTest] no switch in progress. Moving on...
2013-01-31 13:15:51,270 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AtomicMapFunctionalTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:45e status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:51,270 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AtomicMapFunctionalTest] local transaction null:301 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:45e status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:51,270 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AtomicMapFunctionalTest] local transaction null:301 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:51,270 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.atomic.AtomicMapFunctionalTest] Put complete
2013-01-31 13:15:51,271 INFO  (testng-AtomicMapFunctionalTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testChangesOnAtomicMapNoLocks(org.infinispan.atomic.AtomicMapFunctionalTest).
2013-01-31 13:15:51,271 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on null
2013-01-31 13:15:51,271 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 1 seconds.
2013-01-31 13:15:51,271 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:51,271 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.manager.DefaultCacheManager] Stopping cache manager ISPN on null
2013-01-31 13:15:51,271 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on null
2013-01-31 13:15:51,272 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:51,275 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:51,314 DEBUG (testng-AsyncWithTxTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Setting configuration tunned parameters
2013-01-31 13:15:51,235 DEBUG (testng-FlagsEnabledTest) [org.infinispan.cacheviews.CacheViewsManagerImpl] replication: Node FlagsEnabledTest-NodeA-50771 is joining
2013-01-31 13:15:51,314 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:51,314 DEBUG (testng-AsyncWithTxTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Configuration State responses are {}
2013-01-31 13:15:51,315 DEBUG (testng-AsyncWithTxTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] No Configuration State found in cluster
2013-01-31 13:15:51,315 DEBUG (testng-AsyncWithTxTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] No State found. Using original configuration parameters
2013-01-31 13:15:51,315 DEBUG (testng-AsyncWithTxTest) [org.infinispan.cacheviews.CacheViewsManagerImpl] ___defaultcache: Node AsyncWithTxTest-NodeA-43597 is joining
2013-01-31 13:15:51,235 DEBUG (testng-Command line test) [org.infinispan.cacheviews.CacheViewsManagerImpl] my-cache: Node Command line test-NodeA-7883 is joining
2013-01-31 13:15:51,316 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:51,317 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 11
2013-01-31 13:15:51,318 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@28872a84}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@41f854e5}
	>> org.infinispan.interceptors.TxInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@168da839}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@2e1f41c0, PB=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@2e1f41c0}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@615bbe8, TO=org.infinispan.interceptors.EntryWrappingInterceptor@615bbe8, PB=org.infinispan.interceptors.EntryWrappingInterceptor@615bbe8}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:51,321 DEBUG (CacheViewInstaller-1,KeyAffinityServiceShutdownTest-NodeA-53318) [org.infinispan.cacheviews.CacheViewsManagerImpl] Installing new view CacheView{viewId=1, members=[KeyAffinityServiceShutdownTest-NodeA-53318]} for cache dist
2013-01-31 13:15:51,322 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:51,322 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:51,325 DEBUG (testng-LocalKeyAffinityServiceTest) [org.infinispan.transaction.TransactionTable] Min view id set to 0
2013-01-31 13:15:51,325 DEBUG (testng-LocalKeyAffinityServiceTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 10
2013-01-31 13:15:51,325 DEBUG (testng-LocalKeyAffinityServiceTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.StateTransferLockInterceptor@55088814, TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@231e04a9, PB=org.infinispan.interceptors.StateTransferLockInterceptor@55088814}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@7c40542}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@56353409}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@3eeb6716, PB=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@3eeb6716}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@50bcf59f, TO=org.infinispan.interceptors.EntryWrappingInterceptor@50bcf59f, PB=org.infinispan.interceptors.EntryWrappingInterceptor@50bcf59f}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.DistributionInterceptor@25a1c322, TO=org.infinispan.interceptors.totalorder.TotalOrderDistributionInterceptor@1f12007b, PB=org.infinispan.interceptors.DistributionInterceptor@25a1c322}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:51,329 DEBUG (testng-LocalKeyAffinityServiceTest) [org.infinispan.distribution.ch.DefaultConsistentHash] Using 1 virtualNodes to initialize consistent hash wheel 
2013-01-31 13:15:51,329 DEBUG (testng-LocalKeyAffinityServiceTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Setting configuration tunned parameters
2013-01-31 13:15:51,329 DEBUG (testng-LocalKeyAffinityServiceTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Configuration State responses are {}
2013-01-31 13:15:51,329 DEBUG (testng-LocalKeyAffinityServiceTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] No Configuration State found in cluster
2013-01-31 13:15:51,329 DEBUG (testng-LocalKeyAffinityServiceTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] No State found. Using original configuration parameters
2013-01-31 13:15:51,329 DEBUG (testng-LocalKeyAffinityServiceTest) [org.infinispan.cacheviews.CacheViewsManagerImpl] dist: Node LocalKeyAffinityServiceTest-NodeA-40360 is joining
2013-01-31 13:15:51,330 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.atomic.RepetableReadFineGrainedAtomicMapAPITest] Creating cache managers
2013-01-31 13:15:51,331 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:51,336 DEBUG (CacheViewInstaller-1,LocalKeyAffinityServiceTest-NodeA-40360) [org.infinispan.cacheviews.CacheViewsManagerImpl] Installing new view CacheView{viewId=1, members=[LocalKeyAffinityServiceTest-NodeA-40360]} for cache dist
2013-01-31 13:15:51,337 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:51,360 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.CacheImpl] Started cache ___defaultcache on null
2013-01-31 13:15:51,360 INFO  (testng-RepeatableReadLockTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testLocksOnRemoveData(org.infinispan.api.mvcc.repeatable_read.RepeatableReadLockTest)
2013-01-31 13:15:51,361 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepeatableReadLockTest] local transaction DummyTransaction{xid=DummyXid{id=26}, status=0} is starting. check if switch is in progress...
2013-01-31 13:15:51,361 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepeatableReadLockTest] will wait until no switch is in progress
2013-01-31 13:15:51,361 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepeatableReadLockTest] no switch in progress. Moving on...
2013-01-31 13:15:51,361 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepeatableReadLockTest] local transaction DummyTransaction{xid=DummyXid{id=26}, status=0} will use 2PC while executing
2013-01-31 13:15:51,361 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepeatableReadLockTest] local transaction null:302 [DummyTransaction{xid=DummyXid{id=26}, status=7}] wants to commit
2013-01-31 13:15:51,361 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepeatableReadLockTest] local transaction null:302 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:51,361 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepeatableReadLockTest] local transaction DummyTransaction{xid=DummyXid{id=27}, status=0} is starting. check if switch is in progress...
2013-01-31 13:15:51,361 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepeatableReadLockTest] will wait until no switch is in progress
2013-01-31 13:15:51,361 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepeatableReadLockTest] no switch in progress. Moving on...
2013-01-31 13:15:51,361 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepeatableReadLockTest] local transaction DummyTransaction{xid=DummyXid{id=27}, status=0} will use 2PC while executing
2013-01-31 13:15:51,361 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepeatableReadLockTest] local transaction null:303 [DummyTransaction{xid=DummyXid{id=27}, status=7}] wants to commit
2013-01-31 13:15:51,362 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepeatableReadLockTest] local transaction null:303 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:51,362 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepeatableReadLockTest] local transaction DummyTransaction{xid=DummyXid{id=28}, status=0} is starting. check if switch is in progress...
2013-01-31 13:15:51,362 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepeatableReadLockTest] will wait until no switch is in progress
2013-01-31 13:15:51,362 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepeatableReadLockTest] no switch in progress. Moving on...
2013-01-31 13:15:51,362 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepeatableReadLockTest] local transaction DummyTransaction{xid=DummyXid{id=28}, status=0} will use 2PC while executing
2013-01-31 13:15:51,362 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepeatableReadLockTest] local transaction null:304 [DummyTransaction{xid=DummyXid{id=28}, status=7}] wants to commit
2013-01-31 13:15:51,362 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepeatableReadLockTest] local transaction null:304 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:51,362 DEBUG (transport-thread-1) [org.infinispan.distribution.ch.DefaultConsistentHash] Using 1 virtualNodes to initialize consistent hash wheel 
2013-01-31 13:15:51,363 DEBUG (CacheViewInstaller-1,FlagsEnabledTest-NodeA-50771) [org.infinispan.cacheviews.CacheViewsManagerImpl] Installing new view CacheView{viewId=1, members=[FlagsEnabledTest-NodeA-50771]} for cache replication
2013-01-31 13:15:51,363 WARN  (CacheViewInstaller-1,FlagsEnabledTest-NodeA-50771) [org.infinispan.configuration.cache.LoaderConfigurationBuilder] ISPN000149: Fetch persistent state and purge on startup are both disabled, cache may contain stale entries on startup
2013-01-31 13:15:51,363 WARN  (CacheViewInstaller-1,FlagsEnabledTest-NodeA-50771) [org.infinispan.configuration.cache.LoaderConfigurationBuilder] ISPN000149: Fetch persistent state and purge on startup are both disabled, cache may contain stale entries on startup
2013-01-31 13:15:51,365 INFO  (testng-AtomicMapFunctionalTest) [org.infinispan.transaction.lookup.JBossStandaloneJTAManagerLookup] ISPN000107: Retrieving transaction manager Transaction: unknown
2013-01-31 13:15:51,366 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:51,369 INFO  (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000078: Starting JGroups Channel
2013-01-31 13:15:51,371 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.configuration.cache.TransactionConfigurationBuilder] Switching to Synchronization based enlistment.
2013-01-31 13:15:51,371 INFO  (testng-AtomicMapFunctionalTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:51,374 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:51,374 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:51,375 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:51,376 DEBUG (CacheViewInstaller-1,Command line test-NodeA-7883) [org.infinispan.cacheviews.CacheViewsManagerImpl] Installing new view CacheView{viewId=1, members=[Command line test-NodeA-7883]} for cache my-cache
2013-01-31 13:15:51,378 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 12
2013-01-31 13:15:51,378 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.BatchingInterceptor
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@1cd3eab7}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@1cd6a32a}
	>> org.infinispan.interceptors.TxInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@4f722930}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@4fee370f, PB=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@4fee370f}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@2060e2c8, TO=org.infinispan.interceptors.EntryWrappingInterceptor@2060e2c8, PB=org.infinispan.interceptors.EntryWrappingInterceptor@2060e2c8}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:51,379 DEBUG (CacheViewInstaller-1,AsyncWithTxTest-NodeA-43597) [org.infinispan.cacheviews.CacheViewsManagerImpl] Installing new view CacheView{viewId=1, members=[AsyncWithTxTest-NodeA-43597]} for cache ___defaultcache
2013-01-31 13:15:51,384 DEBUG (testng-PutForExternalReadTest) [org.jgroups.protocols.FRAG2] received CONFIG event: {bind_addr=/127.0.0.1}
2013-01-31 13:15:51,384 ERROR (testng-RepeatableReadLockTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Method testLocksOnRemoveData(org.infinispan.api.mvcc.repeatable_read.RepeatableReadLockTest) threw an exception
java.lang.AssertionError: Stale locks exist! NumLocksHeld is 2 and lock info is org.infinispan.util.concurrent.locks.containers.OwnableReentrantPerEntryLockContainer@49669be
	at org.infinispan.api.mvcc.LockAssert.assertNoLocks(LockAssert.java:48)
	at org.infinispan.api.mvcc.LockTestBase.assertNoLocks(LockTestBase.java:102)
	at org.infinispan.api.mvcc.LockTestBase.testLocksOnRemoveData(LockTestBase.java:224)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:51,438 DEBUG (asyncTransportThread-4) [org.infinispan.distribution.ch.DefaultConsistentHash] Using 51 virtualNodes to initialize consistent hash wheel 
2013-01-31 13:15:51,434 WARN  (transport-thread-5) [org.infinispan.configuration.cache.LoaderConfigurationBuilder] ISPN000149: Fetch persistent state and purge on startup are both disabled, cache may contain stale entries on startup
2013-01-31 13:15:51,442 WARN  (transport-thread-5) [org.infinispan.configuration.cache.LoaderConfigurationBuilder] ISPN000149: Fetch persistent state and purge on startup are both disabled, cache may contain stale entries on startup
2013-01-31 13:15:51,442 DEBUG (transport-thread-9) [org.infinispan.distribution.ch.DefaultConsistentHash] Using 1 virtualNodes to initialize consistent hash wheel 
2013-01-31 13:15:51,434 DEBUG (testng-PutForExternalReadTest) [org.jgroups.protocols.pbcast.GMS] address=PutForExternalReadTest-NodeA-2262, cluster=ISPN, physical address=127.0.0.1:8150
2013-01-31 13:15:51,444 ERROR (testng-RepeatableReadLockTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test failed testLocksOnRemoveData(org.infinispan.api.mvcc.repeatable_read.RepeatableReadLockTest)
java.lang.AssertionError: Stale locks exist! NumLocksHeld is 2 and lock info is org.infinispan.util.concurrent.locks.containers.OwnableReentrantPerEntryLockContainer@49669be
	at org.infinispan.api.mvcc.LockAssert.assertNoLocks(LockAssert.java:48)
	at org.infinispan.api.mvcc.LockTestBase.assertNoLocks(LockTestBase.java:102)
	at org.infinispan.api.mvcc.LockTestBase.testLocksOnRemoveData(LockTestBase.java:224)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:51,395 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.CacheImpl] Started cache ___defaultcache on null
2013-01-31 13:15:51,391 DEBUG (transport-thread-1) [org.infinispan.statetransfer.DistributedStateTransferTask] Commencing rehash 1 on node: KeyAffinityServiceShutdownTest-NodeA-53318. Before start, data container had 0 entries
2013-01-31 13:15:51,449 DEBUG (transport-thread-1) [org.infinispan.statetransfer.StateTransferLockImpl] Blocking new write commands for cache view 1
2013-01-31 13:15:51,388 WARN  (testng-ConcurrentStartupTest) [org.jgroups.stack.Configurator] [JGRP00013] TP.discard_incompatible_packets has been deprecated: incompatible packets are discarded anyway
2013-01-31 13:15:51,449 DEBUG (CacheViewInstaller-1,KeyAffinityServiceShutdownTest-NodeA-53318) [org.infinispan.cacheviews.CacheViewsManagerImpl] dist: Committing cache view CacheView{viewId=1, members=[KeyAffinityServiceShutdownTest-NodeA-53318]}
2013-01-31 13:15:51,447 DEBUG (transport-thread-5) [org.infinispan.distribution.ch.DefaultConsistentHash] Using 1 virtualNodes to initialize consistent hash wheel 
2013-01-31 13:15:51,445 DEBUG (testng-PutForExternalReadTest) [org.jgroups.protocols.pbcast.NAKACK2] 
[PutForExternalReadTest-NodeA-2262 setDigest()]
existing digest:  []
new digest:       PutForExternalReadTest-NodeA-2262: [0 (0)]
resulting digest: PutForExternalReadTest-NodeA-2262: [0 (0)]
2013-01-31 13:15:51,444 DEBUG (transport-thread-9) [org.infinispan.statetransfer.DistributedStateTransferTask] Commencing rehash 1 on node: AsyncWithTxTest-NodeA-43597. Before start, data container had 0 entries
2013-01-31 13:15:51,440 DEBUG (asyncTransportThread-4) [org.infinispan.statetransfer.DistributedStateTransferTask] Commencing rehash 1 on node: Command line test-NodeA-7883. Before start, data container had 0 entries
2013-01-31 13:15:51,440 DEBUG (transport-thread-8) [org.infinispan.distribution.ch.DefaultConsistentHash] Using 1 virtualNodes to initialize consistent hash wheel 
2013-01-31 13:15:51,468 DEBUG (testng-PutForExternalReadTest) [org.jgroups.protocols.pbcast.GMS] PutForExternalReadTest-NodeA-2262: installing view [PutForExternalReadTest-NodeA-2262|0] [PutForExternalReadTest-NodeA-2262]
2013-01-31 13:15:51,466 DEBUG (transport-thread-9) [org.infinispan.statetransfer.StateTransferLockImpl] Blocking new write commands for cache view 1
2013-01-31 13:15:51,469 DEBUG (transport-thread-8) [org.infinispan.statetransfer.DistributedStateTransferTask] Commencing rehash 1 on node: LocalKeyAffinityServiceTest-NodeA-40360. Before start, data container had 0 entries
2013-01-31 13:15:51,470 DEBUG (transport-thread-8) [org.infinispan.statetransfer.StateTransferLockImpl] Blocking new write commands for cache view 1
2013-01-31 13:15:51,466 DEBUG (asyncTransportThread-4) [org.infinispan.statetransfer.StateTransferLockImpl] Blocking new write commands for cache view 1
2013-01-31 13:15:51,470 DEBUG (CacheViewInstaller-1,LocalKeyAffinityServiceTest-NodeA-40360) [org.infinispan.cacheviews.CacheViewsManagerImpl] dist: Committing cache view CacheView{viewId=1, members=[LocalKeyAffinityServiceTest-NodeA-40360]}
2013-01-31 13:15:51,470 DEBUG (CacheViewInstaller-1,Command line test-NodeA-7883) [org.infinispan.cacheviews.CacheViewsManagerImpl] my-cache: Committing cache view CacheView{viewId=1, members=[Command line test-NodeA-7883]}
2013-01-31 13:15:51,470 DEBUG (testng-PutForExternalReadTest) [org.jgroups.protocols.pbcast.STABLE] resuming message garbage collection
2013-01-31 13:15:51,470 DEBUG (testng-PutForExternalReadTest) [org.jgroups.protocols.pbcast.STABLE] [ergonomics] setting max_bytes to 400KB (1 members)
2013-01-31 13:15:51,470 DEBUG (testng-PutForExternalReadTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] New view accepted: [PutForExternalReadTest-NodeA-2262|0] [PutForExternalReadTest-NodeA-2262]
2013-01-31 13:15:51,470 INFO  (testng-PutForExternalReadTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000094: Received new cluster view: [PutForExternalReadTest-NodeA-2262|0] [PutForExternalReadTest-NodeA-2262]
2013-01-31 13:15:51,472 DEBUG (testng-PutForExternalReadTest) [org.jgroups.protocols.pbcast.STABLE] resuming message garbage collection
2013-01-31 13:15:51,476 DEBUG (testng-PutForExternalReadTest) [org.jgroups.protocols.pbcast.GMS] created group (first member). My view is [PutForExternalReadTest-NodeA-2262|0], impl is org.jgroups.protocols.pbcast.CoordGmsImpl
2013-01-31 13:15:51,476 INFO  (testng-PutForExternalReadTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000079: Cache local address is PutForExternalReadTest-NodeA-2262, physical addresses are [127.0.0.1:8150]
2013-01-31 13:15:51,476 DEBUG (testng-PutForExternalReadTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] Waiting on view being accepted
2013-01-31 13:15:51,478 INFO  (testng-PutForExternalReadTest) [org.infinispan.transaction.lookup.JBossStandaloneJTAManagerLookup] ISPN000107: Retrieving transaction manager Transaction: unknown
2013-01-31 13:15:51,480 DEBUG (CacheViewInstaller-1,KeyAffinityServiceShutdownTest-NodeA-53318) [org.infinispan.statetransfer.BaseStateTransferTask] Node KeyAffinityServiceShutdownTest-NodeA-53318 completed state transfer for view 1 in 89 milliseconds!
2013-01-31 13:15:51,480 DEBUG (CacheViewInstaller-1,KeyAffinityServiceShutdownTest-NodeA-53318) [org.infinispan.statetransfer.StateTransferLockImpl] Unblocking write commands for cache view 1
2013-01-31 13:15:51,481 DEBUG (CacheViewInstaller-1,KeyAffinityServiceShutdownTest-NodeA-53318) [org.infinispan.cacheviews.CacheViewsManagerImpl] Successfully installed view CacheView{viewId=1, members=[KeyAffinityServiceShutdownTest-NodeA-53318]} for cache dist
2013-01-31 13:15:51,485 DEBUG (testng-KeyAffinityServiceShutdownTest) [org.infinispan.CacheImpl] Started cache dist on KeyAffinityServiceShutdownTest-NodeA-53318
2013-01-31 13:15:51,486 DEBUG (testng-KeyAffinityServiceShutdownTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:51,488 DEBUG (CacheViewInstaller-1,Command line test-NodeA-7883) [org.infinispan.statetransfer.BaseStateTransferTask] Node Command line test-NodeA-7883 completed state transfer for view 1 in 47 milliseconds!
2013-01-31 13:15:51,488 DEBUG (CacheViewInstaller-1,Command line test-NodeA-7883) [org.infinispan.statetransfer.StateTransferLockImpl] Unblocking write commands for cache view 1
2013-01-31 13:15:51,488 DEBUG (CacheViewInstaller-1,Command line test-NodeA-7883) [org.infinispan.cacheviews.CacheViewsManagerImpl] Successfully installed view CacheView{viewId=1, members=[Command line test-NodeA-7883]} for cache my-cache
2013-01-31 13:15:51,488 DEBUG (CacheViewInstaller-1,LocalKeyAffinityServiceTest-NodeA-40360) [org.infinispan.statetransfer.BaseStateTransferTask] Node LocalKeyAffinityServiceTest-NodeA-40360 completed state transfer for view 1 in 18 milliseconds!
2013-01-31 13:15:51,488 DEBUG (CacheViewInstaller-1,LocalKeyAffinityServiceTest-NodeA-40360) [org.infinispan.statetransfer.StateTransferLockImpl] Unblocking write commands for cache view 1
2013-01-31 13:15:51,488 DEBUG (CacheViewInstaller-1,LocalKeyAffinityServiceTest-NodeA-40360) [org.infinispan.cacheviews.CacheViewsManagerImpl] Successfully installed view CacheView{viewId=1, members=[LocalKeyAffinityServiceTest-NodeA-40360]} for cache dist
2013-01-31 13:15:51,464 INFO  (testng-AtomicMapFunctionalTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testChangesOnAtomicMapNoLocksExistingData(org.infinispan.atomic.AtomicMapFunctionalTest)
2013-01-31 13:15:51,490 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AtomicMapFunctionalTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:462 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:51,490 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-AtomicMapFunctionalTest] will wait until no switch is in progress
2013-01-31 13:15:51,490 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-AtomicMapFunctionalTest] no switch in progress. Moving on...
2013-01-31 13:15:51,490 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AtomicMapFunctionalTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:462 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:51,490 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AtomicMapFunctionalTest] local transaction null:305 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:462 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:51,490 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AtomicMapFunctionalTest] local transaction null:305 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:51,491 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AtomicMapFunctionalTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:466 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:51,491 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-AtomicMapFunctionalTest] will wait until no switch is in progress
2013-01-31 13:15:51,491 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-AtomicMapFunctionalTest] no switch in progress. Moving on...
2013-01-31 13:15:51,491 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AtomicMapFunctionalTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:466 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:51,492 DEBUG (testng-Command line test) [org.infinispan.CacheImpl] Started cache my-cache on Command line test-NodeA-7883
2013-01-31 13:15:51,464 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.api.mvcc.LockTestBase] **** - STARTING TEARDOWN - ****
2013-01-31 13:15:51,496 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on null
2013-01-31 13:15:51,496 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 1 seconds.
2013-01-31 13:15:51,496 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:51,496 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.manager.DefaultCacheManager] Stopping cache manager ISPN on null
2013-01-31 13:15:51,496 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on null
2013-01-31 13:15:51,496 INFO  (testng-Command line test) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testSimpleDistributedClusterModeDefault(org.infinispan.configuration.ConfigurationOverrideTest).
2013-01-31 13:15:51,495 DEBUG (transport-thread-5) [org.infinispan.statetransfer.ReplicatedStateTransferTask] Commencing state transfer 1 on node: FlagsEnabledTest-NodeA-50771. Before start, data container had 0 entries
2013-01-31 13:15:51,498 DEBUG (transport-thread-5) [org.infinispan.statetransfer.StateTransferLockImpl] Blocking new write commands for cache view 1
2013-01-31 13:15:51,498 DEBUG (CacheViewInstaller-1,FlagsEnabledTest-NodeA-50771) [org.infinispan.cacheviews.CacheViewsManagerImpl] replication: Committing cache view CacheView{viewId=1, members=[FlagsEnabledTest-NodeA-50771]}
2013-01-31 13:15:51,498 DEBUG (CacheViewInstaller-1,FlagsEnabledTest-NodeA-50771) [org.infinispan.statetransfer.BaseStateTransferTask] Node FlagsEnabledTest-NodeA-50771 completed state transfer for view 1 in 2 milliseconds!
2013-01-31 13:15:51,498 DEBUG (CacheViewInstaller-1,FlagsEnabledTest-NodeA-50771) [org.infinispan.statetransfer.StateTransferLockImpl] Unblocking write commands for cache view 1
2013-01-31 13:15:51,498 DEBUG (CacheViewInstaller-1,FlagsEnabledTest-NodeA-50771) [org.infinispan.cacheviews.CacheViewsManagerImpl] Successfully installed view CacheView{viewId=1, members=[FlagsEnabledTest-NodeA-50771]} for cache replication
2013-01-31 13:15:51,498 DEBUG (testng-Command line test) [org.infinispan.manager.DefaultCacheManager] Stopping cache manager ISPN on Command line test-NodeA-7883
2013-01-31 13:15:51,498 DEBUG (testng-Command line test) [org.infinispan.CacheImpl] Stopping cache my-cache on Command line test-NodeA-7883
2013-01-31 13:15:51,499 DEBUG (testng-Command line test) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 30 seconds.
2013-01-31 13:15:51,499 DEBUG (testng-Command line test) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:51,500 DEBUG (testng-FlagsEnabledTest) [org.infinispan.CacheImpl] Started cache replication on FlagsEnabledTest-NodeA-50771
2013-01-31 13:15:51,501 DEBUG (testng-FlagsEnabledTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:51,502 DEBUG (testng-KeyAffinityServiceShutdownTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:51,503 DEBUG (testng-KeyAffinityServiceShutdownTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:51,504 INFO  (testng-KeyAffinityServiceShutdownTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000078: Starting JGroups Channel
2013-01-31 13:15:51,505 INFO  (testng-Command line test) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000080: Disconnecting and closing JGroups Channel
2013-01-31 13:15:51,509 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:51,509 DEBUG (testng-FlagsEnabledTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:51,510 DEBUG (testng-FlagsEnabledTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:51,511 WARN  (testng-FlagsEnabledTest) [org.infinispan.configuration.cache.LoaderConfigurationBuilder] ISPN000149: Fetch persistent state and purge on startup are both disabled, cache may contain stale entries on startup
2013-01-31 13:15:51,511 WARN  (testng-FlagsEnabledTest) [org.infinispan.configuration.cache.LoaderConfigurationBuilder] ISPN000149: Fetch persistent state and purge on startup are both disabled, cache may contain stale entries on startup
2013-01-31 13:15:51,511 DEBUG (testng-FlagsEnabledTest) [org.infinispan.configuration.cache.L1ConfigurationBuilder] L1 is enabled and L1OnRehash was not defined, enabling it
2013-01-31 13:15:51,512 INFO  (testng-FlagsEnabledTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000078: Starting JGroups Channel
2013-01-31 13:15:51,514 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:51,514 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:51,494 DEBUG (testng-LocalKeyAffinityServiceTest) [org.infinispan.CacheImpl] Started cache dist on LocalKeyAffinityServiceTest-NodeA-40360
2013-01-31 13:15:51,516 DEBUG (testng-LocalKeyAffinityServiceTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:51,494 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AtomicMapFunctionalTest] local transaction null:306 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:466 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:51,470 DEBUG (CacheViewInstaller-1,AsyncWithTxTest-NodeA-43597) [org.infinispan.cacheviews.CacheViewsManagerImpl] ___defaultcache: Committing cache view CacheView{viewId=1, members=[AsyncWithTxTest-NodeA-43597]}
2013-01-31 13:15:51,525 DEBUG (testng-LocalKeyAffinityServiceTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:51,525 DEBUG (CacheViewInstaller-1,AsyncWithTxTest-NodeA-43597) [org.infinispan.statetransfer.BaseStateTransferTask] Node AsyncWithTxTest-NodeA-43597 completed state transfer for view 1 in 80 milliseconds!
2013-01-31 13:15:51,525 DEBUG (CacheViewInstaller-1,AsyncWithTxTest-NodeA-43597) [org.infinispan.statetransfer.StateTransferLockImpl] Unblocking write commands for cache view 1
2013-01-31 13:15:51,525 DEBUG (CacheViewInstaller-1,AsyncWithTxTest-NodeA-43597) [org.infinispan.cacheviews.CacheViewsManagerImpl] Successfully installed view CacheView{viewId=1, members=[AsyncWithTxTest-NodeA-43597]} for cache ___defaultcache
2013-01-31 13:15:51,525 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AtomicMapFunctionalTest] local transaction null:306 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:51,526 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.atomic.AtomicMapFunctionalTest] Doing a put
2013-01-31 13:15:51,526 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AtomicMapFunctionalTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:46a status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:51,526 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-AtomicMapFunctionalTest] will wait until no switch is in progress
2013-01-31 13:15:51,526 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-AtomicMapFunctionalTest] no switch in progress. Moving on...
2013-01-31 13:15:51,526 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AtomicMapFunctionalTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:46a status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:51,526 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AtomicMapFunctionalTest] local transaction null:307 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:46a status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:51,526 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AtomicMapFunctionalTest] local transaction null:307 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:51,527 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.atomic.AtomicMapFunctionalTest] Put complete
2013-01-31 13:15:51,527 INFO  (testng-AtomicMapFunctionalTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testChangesOnAtomicMapNoLocksExistingData(org.infinispan.atomic.AtomicMapFunctionalTest).
2013-01-31 13:15:51,527 DEBUG (testng-AsyncWithTxTest) [org.infinispan.CacheImpl] Started cache ___defaultcache on AsyncWithTxTest-NodeA-43597
2013-01-31 13:15:51,527 DEBUG (testng-AsyncWithTxTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AsyncWithTxTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:46e status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:51,527 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on null
2013-01-31 13:15:51,527 DEBUG (testng-AsyncWithTxTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-AsyncWithTxTest] will wait until no switch is in progress
2013-01-31 13:15:51,527 DEBUG (testng-AsyncWithTxTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-AsyncWithTxTest] no switch in progress. Moving on...
2013-01-31 13:15:51,527 DEBUG (testng-AsyncWithTxTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AsyncWithTxTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:46e status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:51,527 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 1 seconds.
2013-01-31 13:15:51,527 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:51,529 DEBUG (testng-LocalKeyAffinityServiceTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:51,529 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.manager.DefaultCacheManager] Stopping cache manager ISPN on null
2013-01-31 13:15:51,529 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on null
2013-01-31 13:15:51,530 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:51,532 DEBUG (testng-ConcurrentStartupTest) [org.jgroups.stack.Configurator] set property TCP.diagnostics_addr to default value /224.0.75.75
2013-01-31 13:15:51,535 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:51,535 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:51,542 INFO  (testng-AtomicMapFunctionalTest) [org.infinispan.transaction.lookup.JBossStandaloneJTAManagerLookup] ISPN000107: Retrieving transaction manager Transaction: unknown
2013-01-31 13:15:51,545 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.configuration.cache.TransactionConfigurationBuilder] Switching to Synchronization based enlistment.
2013-01-31 13:15:51,545 INFO  (testng-AtomicMapFunctionalTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:51,548 DEBUG (testng-PutForExternalReadTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:51,548 INFO  (testng-LocalKeyAffinityServiceTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000078: Starting JGroups Channel
2013-01-31 13:15:51,548 DEBUG (testng-PutForExternalReadTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:51,571 DEBUG (ForkThread-AtomicHashMapConcurrencyTest-46393446) [org.infinispan.util.concurrent.locks.LockManagerImpl] Failed to acquire lock key, owner is GlobalTransaction:<null>:275:local
2013-01-31 13:15:51,571 DEBUG (ForkThread-AtomicHashMapConcurrencyTest-46393446) [org.infinispan.util.concurrent.locks.LockManagerImpl] This transaction (GlobalTransaction:<null>:278:local) already owned locks []
2013-01-31 13:15:51,571 ERROR (ForkThread-AtomicHashMapConcurrencyTest-46393446) [org.infinispan.interceptors.InvocationContextInterceptor] ISPN000136: Execution error
java.lang.NullPointerException
	at java.util.concurrent.ConcurrentHashMap.get(ConcurrentHashMap.java:768)
	at org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry.getProtocolById(ReconfigurableProtocolRegistry.java:83)
	at org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager.notifyLocalTransactionFinished(ReconfigurableReplicationManager.java:254)
	at org.infinispan.transaction.TransactionTable.removeLocalTransaction(TransactionTable.java:317)
	at org.infinispan.transaction.xa.XaTransactionTable.removeLocalTransaction(XaTransactionTable.java:70)
	at org.infinispan.interceptors.TxInterceptor.enlistWriteAndInvokeNext(TxInterceptor.java:294)
	at org.infinispan.interceptors.TxInterceptor.visitPutKeyValueCommand(TxInterceptor.java:225)
	at org.infinispan.commands.write.PutKeyValueCommand.acceptVisitor(PutKeyValueCommand.java:77)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitPutKeyValueCommand(AbstractVisitor.java:62)
	at org.infinispan.commands.write.PutKeyValueCommand.acceptVisitor(PutKeyValueCommand.java:77)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitPutKeyValueCommand(AbstractVisitor.java:62)
	at org.infinispan.commands.write.PutKeyValueCommand.acceptVisitor(PutKeyValueCommand.java:77)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitPutKeyValueCommand(AbstractVisitor.java:62)
	at org.infinispan.commands.write.PutKeyValueCommand.acceptVisitor(PutKeyValueCommand.java:77)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.BatchingInterceptor.handleDefault(BatchingInterceptor.java:86)
	at org.infinispan.commands.AbstractVisitor.visitPutKeyValueCommand(AbstractVisitor.java:62)
	at org.infinispan.commands.write.PutKeyValueCommand.acceptVisitor(PutKeyValueCommand.java:77)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.CacheImpl.executeCommandAndCommitIfNeeded(CacheImpl.java:1007)
	at org.infinispan.CacheImpl.putIfAbsent(CacheImpl.java:717)
	at org.infinispan.CacheImpl.putIfAbsent(CacheImpl.java:708)
	at org.infinispan.CacheSupport.putIfAbsent(CacheSupport.java:78)
	at org.infinispan.atomic.AtomicHashMap.newInstance(AtomicHashMap.java:76)
	at org.infinispan.atomic.AtomicMapLookup.getMap(AtomicMapLookup.java:141)
	at org.infinispan.atomic.AtomicMapLookup.getAtomicMap(AtomicMapLookup.java:89)
	at org.infinispan.atomic.AtomicMapLookup.getAtomicMap(AtomicMapLookup.java:58)
	at org.infinispan.atomic.AtomicHashMapConcurrencyTest$1.run(AtomicHashMapConcurrencyTest.java:100)
	at org.infinispan.test.AbstractInfinispanTest$RunnableWrapper.run(AbstractInfinispanTest.java:112)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:51,580 DEBUG (testng-Command line test) [org.infinispan.test.fwk.TEST_PING] Stop discovery for Command line test-NodeA-7883
2013-01-31 13:15:51,581 DEBUG (testng-Command line test) [org.jgroups.protocols.TCP] closing sockets and stopping threads
2013-01-31 13:15:51,581 DEBUG (ForkThread-AtomicHashMapConcurrencyTest-46393446) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [ForkThread-AtomicHashMapConcurrencyTest-46393446] local transaction null:278 [DummyTransaction{xid=DummyXid{id=22}, status=9}] wants to rollback
2013-01-31 13:15:51,571 INFO  (testng-RepeatableReadLockTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:51,581 ERROR (ForkThread-AtomicHashMapConcurrencyTest-46393446) [org.infinispan.atomic.AtomicHashMapConcurrencyTest] Unexpected error performing transaction
java.lang.NullPointerException
	at java.util.concurrent.ConcurrentHashMap.get(ConcurrentHashMap.java:768)
	at org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry.getProtocolById(ReconfigurableProtocolRegistry.java:83)
	at org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager.notifyLocalTransactionFinished(ReconfigurableReplicationManager.java:254)
	at org.infinispan.transaction.TransactionTable.removeLocalTransaction(TransactionTable.java:317)
	at org.infinispan.transaction.xa.XaTransactionTable.removeLocalTransaction(XaTransactionTable.java:70)
	at org.infinispan.interceptors.TxInterceptor.enlistWriteAndInvokeNext(TxInterceptor.java:294)
	at org.infinispan.interceptors.TxInterceptor.visitPutKeyValueCommand(TxInterceptor.java:225)
	at org.infinispan.commands.write.PutKeyValueCommand.acceptVisitor(PutKeyValueCommand.java:77)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitPutKeyValueCommand(AbstractVisitor.java:62)
	at org.infinispan.commands.write.PutKeyValueCommand.acceptVisitor(PutKeyValueCommand.java:77)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitPutKeyValueCommand(AbstractVisitor.java:62)
	at org.infinispan.commands.write.PutKeyValueCommand.acceptVisitor(PutKeyValueCommand.java:77)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitPutKeyValueCommand(AbstractVisitor.java:62)
	at org.infinispan.commands.write.PutKeyValueCommand.acceptVisitor(PutKeyValueCommand.java:77)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.BatchingInterceptor.handleDefault(BatchingInterceptor.java:86)
	at org.infinispan.commands.AbstractVisitor.visitPutKeyValueCommand(AbstractVisitor.java:62)
	at org.infinispan.commands.write.PutKeyValueCommand.acceptVisitor(PutKeyValueCommand.java:77)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.CacheImpl.executeCommandAndCommitIfNeeded(CacheImpl.java:1007)
	at org.infinispan.CacheImpl.putIfAbsent(CacheImpl.java:717)
	at org.infinispan.CacheImpl.putIfAbsent(CacheImpl.java:708)
	at org.infinispan.CacheSupport.putIfAbsent(CacheSupport.java:78)
	at org.infinispan.atomic.AtomicHashMap.newInstance(AtomicHashMap.java:76)
	at org.infinispan.atomic.AtomicMapLookup.getMap(AtomicMapLookup.java:141)
	at org.infinispan.atomic.AtomicMapLookup.getAtomicMap(AtomicMapLookup.java:89)
	at org.infinispan.atomic.AtomicMapLookup.getAtomicMap(AtomicMapLookup.java:58)
	at org.infinispan.atomic.AtomicHashMapConcurrencyTest$1.run(AtomicHashMapConcurrencyTest.java:100)
	at org.infinispan.test.AbstractInfinispanTest$RunnableWrapper.run(AbstractInfinispanTest.java:112)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:51,587 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:51,587 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:51,588 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:51,577 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:51,591 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:51,591 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 11
2013-01-31 13:15:51,591 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@cf31572}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@2b04f602}
	>> org.infinispan.interceptors.TxInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@52b3135e}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@6abcaabc, PB=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@6abcaabc}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@86d5363, TO=org.infinispan.interceptors.EntryWrappingInterceptor@86d5363, PB=org.infinispan.interceptors.EntryWrappingInterceptor@86d5363}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:51,575 DEBUG (testng-ConcurrentStartupTest) [org.jgroups.protocols.FRAG2] received CONFIG event: {bind_addr=/127.0.0.1}
2013-01-31 13:15:51,574 DEBUG (testng-PutForExternalReadTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:51,585 INFO  (testng-Command line test) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000082: Stopping the RpcDispatcher
2013-01-31 13:15:51,584 DEBUG (testng-AsyncWithTxTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AsyncWithTxTest] local transaction AsyncWithTxTest-NodeA-43597:308 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:46e status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:51,609 DEBUG (testng-AsyncWithTxTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AsyncWithTxTest] local transaction AsyncWithTxTest-NodeA-43597:308 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:51,609 INFO  (testng-Command line test) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testSimpleDistributedClusterModeNamedCache(org.infinispan.configuration.ConfigurationOverrideTest)
2013-01-31 13:15:51,609 DEBUG (testng-Command line test) [org.infinispan.configuration.cache.L1ConfigurationBuilder] L1 is enabled and L1OnRehash was not defined, enabling it
2013-01-31 13:15:51,611 DEBUG (testng-AsyncWithTxTest) [org.infinispan.transaction.LocalTransaction] [AsyncWithTxTest-NodeA-43597:308] get read keys null
2013-01-31 13:15:51,614 DEBUG (testng-Command line test) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:51,616 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:51,627 DEBUG (testng-ConcurrentStartupTest) [org.jgroups.protocols.pbcast.GMS] address=ConcurrentStartupTest-NodeA-26973, cluster=ISPN, physical address=127.0.0.1:8000
2013-01-31 13:15:51,629 INFO  (testng-PutForExternalReadTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:51,630 DEBUG (testng-AsyncWithTxTest) [org.infinispan.transaction.LocalTransaction] [AsyncWithTxTest-NodeA-43597:308] get read keys null
2013-01-31 13:15:51,631 DEBUG (testng-PutForExternalReadTest) [org.infinispan.transaction.TransactionTable] Min view id set to 0
2013-01-31 13:15:51,631 DEBUG (testng-PutForExternalReadTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 11
2013-01-31 13:15:51,631 DEBUG (testng-PutForExternalReadTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.StateTransferLockInterceptor@4d711a77, TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@3c80a259, PB=org.infinispan.interceptors.StateTransferLockInterceptor@4d711a77}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@2122a017}
	>> org.infinispan.interceptors.TxInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@683c56ff}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@5173b4cf, PB=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@5173b4cf}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@363abd0, TO=org.infinispan.interceptors.EntryWrappingInterceptor@363abd0, PB=org.infinispan.interceptors.EntryWrappingInterceptor@363abd0}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.ReplicationInterceptor@4a4e66d, TO=org.infinispan.interceptors.totalorder.TotalOrderReplicationInterceptor@6614007c, PB=org.infinispan.interceptors.ReplicationInterceptor@4a4e66d}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:51,632 DEBUG (testng-AsyncWithTxTest) [org.infinispan.transaction.LocalTransaction] [AsyncWithTxTest-NodeA-43597:308] get read keys null
2013-01-31 13:15:51,632 DEBUG (testng-AsyncWithTxTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AsyncWithTxTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:472 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:51,632 DEBUG (testng-AsyncWithTxTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-AsyncWithTxTest] will wait until no switch is in progress
2013-01-31 13:15:51,632 DEBUG (testng-AsyncWithTxTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-AsyncWithTxTest] no switch in progress. Moving on...
2013-01-31 13:15:51,632 DEBUG (testng-AsyncWithTxTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AsyncWithTxTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:472 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:51,633 DEBUG (testng-AsyncWithTxTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AsyncWithTxTest] local transaction AsyncWithTxTest-NodeA-43597:309 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:472 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:51,633 DEBUG (testng-AsyncWithTxTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AsyncWithTxTest] local transaction AsyncWithTxTest-NodeA-43597:309 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:51,633 DEBUG (testng-AsyncWithTxTest) [org.infinispan.transaction.LocalTransaction] [AsyncWithTxTest-NodeA-43597:309] get read keys null
2013-01-31 13:15:51,633 DEBUG (testng-AsyncWithTxTest) [org.infinispan.transaction.LocalTransaction] [AsyncWithTxTest-NodeA-43597:309] get read keys null
2013-01-31 13:15:51,633 DEBUG (testng-AsyncWithTxTest) [org.infinispan.transaction.LocalTransaction] [AsyncWithTxTest-NodeA-43597:309] get read keys null
2013-01-31 13:15:51,633 INFO  (testng-AsyncWithTxTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testWithTx(org.infinispan.api.AsyncWithTxTest).
2013-01-31 13:15:51,634 DEBUG (testng-AsyncWithTxTest) [org.infinispan.api.AsyncWithTxTest] *** Test method complete; clearing contents on all caches.
2013-01-31 13:15:51,634 DEBUG (testng-AsyncWithTxTest) [org.infinispan.test.TestingUtil] Cleaning data for cache '___defaultcache' on a cache manager at address AsyncWithTxTest-NodeA-43597
2013-01-31 13:15:51,634 WARN  (testng-MixedModeTest) [org.jgroups.stack.Configurator] [JGRP00013] TP.discard_incompatible_packets has been deprecated: incompatible packets are discarded anyway
2013-01-31 13:15:51,634 DEBUG (testng-AsyncWithTxTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [k=v2]
2013-01-31 13:15:51,634 DEBUG (testng-AsyncWithTxTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:51,634 DEBUG (testng-AsyncWithTxTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:51,634 DEBUG (testng-AsyncWithTxTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:51,634 DEBUG (testng-AsyncWithTxTest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on AsyncWithTxTest-NodeA-43597
2013-01-31 13:15:51,635 DEBUG (testng-AsyncWithTxTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 0 milliseconds.
2013-01-31 13:15:51,635 DEBUG (testng-AsyncWithTxTest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:51,635 DEBUG (testng-AsyncWithTxTest) [org.infinispan.manager.DefaultCacheManager] Stopping cache manager ISPN on AsyncWithTxTest-NodeA-43597
2013-01-31 13:15:51,635 DEBUG (testng-AsyncWithTxTest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on AsyncWithTxTest-NodeA-43597
2013-01-31 13:15:51,636 DEBUG (testng-PutForExternalReadTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Setting configuration tunned parameters
2013-01-31 13:15:51,636 DEBUG (testng-PutForExternalReadTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Configuration State responses are {}
2013-01-31 13:15:51,636 DEBUG (testng-PutForExternalReadTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] No Configuration State found in cluster
2013-01-31 13:15:51,636 DEBUG (testng-PutForExternalReadTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] No State found. Using original configuration parameters
2013-01-31 13:15:51,636 DEBUG (testng-PutForExternalReadTest) [org.infinispan.cacheviews.CacheViewsManagerImpl] replSync: Node PutForExternalReadTest-NodeA-2262 is joining
2013-01-31 13:15:51,646 DEBUG (CacheViewInstaller-1,PutForExternalReadTest-NodeA-2262) [org.infinispan.cacheviews.CacheViewsManagerImpl] Installing new view CacheView{viewId=1, members=[PutForExternalReadTest-NodeA-2262]} for cache replSync
2013-01-31 13:15:51,647 DEBUG (testng-Command line test) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:51,648 DEBUG (testng-Command line test) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:51,627 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.CacheImpl] Started cache ___defaultcache on null
2013-01-31 13:15:51,649 INFO  (testng-RepeatableReadLockTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testLocksOnRemoveNonexistent(org.infinispan.api.mvcc.repeatable_read.RepeatableReadLockTest)
2013-01-31 13:15:51,652 DEBUG (CacheViewInstaller-1,AsyncWithTxTest-NodeA-43597) [org.infinispan.cacheviews.CacheViewsManagerImpl] Installing new view CacheView{viewId=2, members=[]} for cache ___defaultcache
2013-01-31 13:15:51,654 INFO  (testng-AsyncWithTxTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000080: Disconnecting and closing JGroups Channel
2013-01-31 13:15:51,655 INFO  (testng-Command line test) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000078: Starting JGroups Channel
2013-01-31 13:15:51,656 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepeatableReadLockTest] local transaction DummyTransaction{xid=DummyXid{id=29}, status=0} is starting. check if switch is in progress...
2013-01-31 13:15:51,656 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepeatableReadLockTest] will wait until no switch is in progress
2013-01-31 13:15:51,656 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepeatableReadLockTest] no switch in progress. Moving on...
2013-01-31 13:15:51,656 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepeatableReadLockTest] local transaction DummyTransaction{xid=DummyXid{id=29}, status=0} will use 2PC while executing
2013-01-31 13:15:51,656 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepeatableReadLockTest] local transaction null:310 [DummyTransaction{xid=DummyXid{id=29}, status=7}] wants to commit
2013-01-31 13:15:51,666 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepeatableReadLockTest] local transaction null:310 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:51,666 DEBUG (transport-thread-13) [org.infinispan.distribution.ch.DefaultConsistentHash] Using 1 virtualNodes to initialize consistent hash wheel 
2013-01-31 13:15:51,666 ERROR (testng-RepeatableReadLockTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Method testLocksOnRemoveNonexistent(org.infinispan.api.mvcc.repeatable_read.RepeatableReadLockTest) threw an exception
java.lang.AssertionError: Stale locks exist! NumLocksHeld is 1 and lock info is org.infinispan.util.concurrent.locks.containers.OwnableReentrantPerEntryLockContainer@2f552dde
	at org.infinispan.api.mvcc.LockAssert.assertNoLocks(LockAssert.java:48)
	at org.infinispan.api.mvcc.LockTestBase.assertNoLocks(LockTestBase.java:102)
	at org.infinispan.api.mvcc.LockTestBase.testLocksOnRemoveNonexistent(LockTestBase.java:186)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:51,704 ERROR (testng-RepeatableReadLockTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test failed testLocksOnRemoveNonexistent(org.infinispan.api.mvcc.repeatable_read.RepeatableReadLockTest)
java.lang.AssertionError: Stale locks exist! NumLocksHeld is 1 and lock info is org.infinispan.util.concurrent.locks.containers.OwnableReentrantPerEntryLockContainer@2f552dde
	at org.infinispan.api.mvcc.LockAssert.assertNoLocks(LockAssert.java:48)
	at org.infinispan.api.mvcc.LockTestBase.assertNoLocks(LockTestBase.java:102)
	at org.infinispan.api.mvcc.LockTestBase.testLocksOnRemoveNonexistent(LockTestBase.java:186)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:51,710 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.api.mvcc.LockTestBase] **** - STARTING TEARDOWN - ****
2013-01-31 13:15:51,710 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on null
2013-01-31 13:15:51,710 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 1 seconds.
2013-01-31 13:15:51,710 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:51,710 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.manager.DefaultCacheManager] Stopping cache manager ISPN on null
2013-01-31 13:15:51,710 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on null
2013-01-31 13:15:51,713 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:51,720 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:51,720 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:51,727 INFO  (testng-RepeatableReadLockTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:51,731 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:51,732 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:51,733 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:51,667 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 12
2013-01-31 13:15:51,744 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.BatchingInterceptor
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@7bcf9adf}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@7ac0e5f9}
	>> org.infinispan.interceptors.TxInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@e3a7d65}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@21fe792f, PB=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@21fe792f}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@49c60e18, TO=org.infinispan.interceptors.EntryWrappingInterceptor@49c60e18, PB=org.infinispan.interceptors.EntryWrappingInterceptor@49c60e18}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:51,674 DEBUG (testng-AsyncWithTxTest) [org.infinispan.test.fwk.TEST_PING] Stop discovery for AsyncWithTxTest-NodeA-43597
2013-01-31 13:15:51,669 DEBUG (transport-thread-13) [org.infinispan.statetransfer.ReplicatedStateTransferTask] Commencing state transfer 1 on node: PutForExternalReadTest-NodeA-2262. Before start, data container had 0 entries
2013-01-31 13:15:51,744 DEBUG (transport-thread-13) [org.infinispan.statetransfer.StateTransferLockImpl] Blocking new write commands for cache view 1
2013-01-31 13:15:51,744 DEBUG (testng-AsyncWithTxTest) [org.jgroups.protocols.TCP] closing sockets and stopping threads
2013-01-31 13:15:51,666 DEBUG (testng-ConcurrentStartupTest) [org.jgroups.protocols.pbcast.NAKACK2] 
[ConcurrentStartupTest-NodeA-26973 setDigest()]
existing digest:  []
new digest:       ConcurrentStartupTest-NodeA-26973: [0 (0)]
resulting digest: ConcurrentStartupTest-NodeA-26973: [0 (0)]
2013-01-31 13:15:51,744 DEBUG (testng-ConcurrentStartupTest) [org.jgroups.protocols.pbcast.GMS] ConcurrentStartupTest-NodeA-26973: installing view [ConcurrentStartupTest-NodeA-26973|0] [ConcurrentStartupTest-NodeA-26973]
2013-01-31 13:15:51,714 DEBUG (testng-MixedModeTest) [org.jgroups.stack.Configurator] set property TCP.diagnostics_addr to default value /224.0.75.75
2013-01-31 13:15:51,747 DEBUG (testng-ConcurrentStartupTest) [org.jgroups.protocols.pbcast.STABLE] resuming message garbage collection
2013-01-31 13:15:51,748 DEBUG (testng-ConcurrentStartupTest) [org.jgroups.protocols.pbcast.STABLE] [ergonomics] setting max_bytes to 400KB (1 members)
2013-01-31 13:15:51,748 DEBUG (testng-ConcurrentStartupTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] New view accepted: [ConcurrentStartupTest-NodeA-26973|0] [ConcurrentStartupTest-NodeA-26973]
2013-01-31 13:15:51,748 INFO  (testng-ConcurrentStartupTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000094: Received new cluster view: [ConcurrentStartupTest-NodeA-26973|0] [ConcurrentStartupTest-NodeA-26973]
2013-01-31 13:15:51,756 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.CacheImpl] Started cache ___defaultcache on null
2013-01-31 13:15:51,756 INFO  (testng-AtomicMapFunctionalTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testRemovalOfAtomicMap(org.infinispan.atomic.AtomicMapFunctionalTest)
2013-01-31 13:15:51,756 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AtomicMapFunctionalTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:476 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:51,756 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-AtomicMapFunctionalTest] will wait until no switch is in progress
2013-01-31 13:15:51,756 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-AtomicMapFunctionalTest] no switch in progress. Moving on...
2013-01-31 13:15:51,756 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AtomicMapFunctionalTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:476 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:51,757 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AtomicMapFunctionalTest] local transaction null:311 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:476 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:51,757 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AtomicMapFunctionalTest] local transaction null:311 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:51,757 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AtomicMapFunctionalTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:47a status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:51,757 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-AtomicMapFunctionalTest] will wait until no switch is in progress
2013-01-31 13:15:51,757 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-AtomicMapFunctionalTest] no switch in progress. Moving on...
2013-01-31 13:15:51,757 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AtomicMapFunctionalTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:47a status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:51,757 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AtomicMapFunctionalTest] local transaction null:312 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:47a status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:51,757 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AtomicMapFunctionalTest] local transaction null:312 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:51,758 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AtomicMapFunctionalTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:47e status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:51,758 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-AtomicMapFunctionalTest] will wait until no switch is in progress
2013-01-31 13:15:51,758 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-AtomicMapFunctionalTest] no switch in progress. Moving on...
2013-01-31 13:15:51,758 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AtomicMapFunctionalTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:47e status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:51,758 ERROR (testng-AtomicMapFunctionalTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Method testRemovalOfAtomicMap(org.infinispan.atomic.AtomicMapFunctionalTest) threw an exception
java.lang.IllegalStateException: AtomicMap stored under key key has been concurrently removed!
	at org.infinispan.atomic.AtomicHashMapProxy.assertValid(AtomicHashMapProxy.java:158)
	at org.infinispan.atomic.AtomicHashMapProxy.getDeltaMapForRead(AtomicHashMapProxy.java:96)
	at org.infinispan.atomic.AtomicHashMapProxy.size(AtomicHashMapProxy.java:181)
	at org.infinispan.atomic.AtomicMapFunctionalTest.testRemovalOfAtomicMap(AtomicMapFunctionalTest.java:162)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:51,778 INFO  (testng-AtomicMapFunctionalTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testRemovalOfAtomicMap(org.infinispan.atomic.AtomicMapFunctionalTest).
2013-01-31 13:15:51,773 INFO  (testng-AsyncWithTxTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000082: Stopping the RpcDispatcher
2013-01-31 13:15:51,778 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AtomicMapFunctionalTest] local transaction null:313 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:47e status: ActionStatus.ABORTING >] wants to rollback
2013-01-31 13:15:51,778 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on null
2013-01-31 13:15:51,779 DEBUG (testng-AsyncWithTxTest) [org.infinispan.manager.DefaultCacheManager] Stopping cache manager ISPN on null
2013-01-31 13:15:51,779 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 1 seconds.
2013-01-31 13:15:51,779 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:51,779 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.manager.DefaultCacheManager] Stopping cache manager ISPN on null
2013-01-31 13:15:51,779 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on null
2013-01-31 13:15:51,772 DEBUG (testng-ConcurrentStartupTest) [org.jgroups.protocols.pbcast.STABLE] resuming message garbage collection
2013-01-31 13:15:51,780 DEBUG (testng-ConcurrentStartupTest) [org.jgroups.protocols.pbcast.GMS] created group (first member). My view is [ConcurrentStartupTest-NodeA-26973|0], impl is org.jgroups.protocols.pbcast.CoordGmsImpl
2013-01-31 13:15:51,780 INFO  (testng-ConcurrentStartupTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000079: Cache local address is ConcurrentStartupTest-NodeA-26973, physical addresses are [127.0.0.1:8000]
2013-01-31 13:15:51,780 DEBUG (testng-ConcurrentStartupTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] Waiting on view being accepted
2013-01-31 13:15:51,780 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:51,772 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 11
2013-01-31 13:15:51,782 INFO  (testng-CommandIdUniquenessTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testCommandIdUniqueness(org.infinispan.commands.CommandIdUniquenessTest)
2013-01-31 13:15:51,782 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@1e400861}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@7de627ca}
	>> org.infinispan.interceptors.TxInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@113e7f59}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@1e1ab4e7, PB=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@1e1ab4e7}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@6b5ab921, TO=org.infinispan.interceptors.EntryWrappingInterceptor@6b5ab921, PB=org.infinispan.interceptors.EntryWrappingInterceptor@6b5ab921}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:51,768 DEBUG (testng-MixedModeTest) [org.jgroups.protocols.FRAG2] received CONFIG event: {bind_addr=/127.0.0.1}
2013-01-31 13:15:51,784 INFO  (testng-ConcurrentStartupTest) [org.infinispan.transaction.lookup.JBossStandaloneJTAManagerLookup] ISPN000107: Retrieving transaction manager Transaction: unknown
2013-01-31 13:15:51,784 DEBUG (testng-CommandIdUniquenessTest) [org.infinispan.util.ClassFinder] Looking for infinispan classes in [/Users/pruivo/IdeaProjects/infinispan/core/target/test-classes, /Users/pruivo/IdeaProjects/infinispan/core/target/classes]
2013-01-31 13:15:51,785 DEBUG (testng-ConcurrentStartupTest) [org.infinispan.configuration.cache.TransactionConfigurationBuilder] Switching to Synchronization based enlistment.
2013-01-31 13:15:51,788 DEBUG (testng-ConcurrentStartupTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:51,792 DEBUG (testng-ConcurrentStartupTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:51,794 DEBUG (testng-ConcurrentStartupTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:51,794 INFO  (testng-ConcurrentStartupTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:51,799 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:51,799 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:51,799 DEBUG (CacheViewInstaller-1,PutForExternalReadTest-NodeA-2262) [org.infinispan.cacheviews.CacheViewsManagerImpl] replSync: Committing cache view CacheView{viewId=1, members=[PutForExternalReadTest-NodeA-2262]}
2013-01-31 13:15:51,799 DEBUG (CacheViewInstaller-1,PutForExternalReadTest-NodeA-2262) [org.infinispan.statetransfer.BaseStateTransferTask] Node PutForExternalReadTest-NodeA-2262 completed state transfer for view 1 in 130 milliseconds!
2013-01-31 13:15:51,799 DEBUG (CacheViewInstaller-1,PutForExternalReadTest-NodeA-2262) [org.infinispan.statetransfer.StateTransferLockImpl] Unblocking write commands for cache view 1
2013-01-31 13:15:51,799 DEBUG (CacheViewInstaller-1,PutForExternalReadTest-NodeA-2262) [org.infinispan.cacheviews.CacheViewsManagerImpl] Successfully installed view CacheView{viewId=1, members=[PutForExternalReadTest-NodeA-2262]} for cache replSync
2013-01-31 13:15:51,799 DEBUG (testng-PutForExternalReadTest) [org.infinispan.CacheImpl] Started cache replSync on PutForExternalReadTest-NodeA-2262
2013-01-31 13:15:51,800 DEBUG (testng-PutForExternalReadTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:51,801 INFO  (testng-AtomicMapFunctionalTest) [org.infinispan.transaction.lookup.JBossStandaloneJTAManagerLookup] ISPN000107: Retrieving transaction manager Transaction: unknown
2013-01-31 13:15:51,804 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.configuration.cache.TransactionConfigurationBuilder] Switching to Synchronization based enlistment.
2013-01-31 13:15:51,805 INFO  (testng-AtomicMapFunctionalTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:51,809 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:51,809 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:51,810 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:51,819 DEBUG (testng-PutForExternalReadTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:51,820 DEBUG (testng-PutForExternalReadTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:51,821 INFO  (testng-PutForExternalReadTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000078: Starting JGroups Channel
2013-01-31 13:15:51,821 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 12
2013-01-31 13:15:51,821 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.BatchingInterceptor
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@694a1247}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@7df62951}
	>> org.infinispan.interceptors.TxInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@2c12c572}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@460d5f9, PB=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@460d5f9}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@717fd0ad, TO=org.infinispan.interceptors.EntryWrappingInterceptor@717fd0ad, PB=org.infinispan.interceptors.EntryWrappingInterceptor@717fd0ad}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:51,822 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.CacheImpl] Started cache ___defaultcache on null
2013-01-31 13:15:51,822 DEBUG (testng-ConcurrentStartupTest) [org.infinispan.transaction.TransactionTable] Min view id set to 0
2013-01-31 13:15:51,822 INFO  (testng-AtomicMapFunctionalTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testTxChangesOnAtomicMap(org.infinispan.atomic.AtomicMapFunctionalTest)
2013-01-31 13:15:51,822 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AtomicMapFunctionalTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:482 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:51,822 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-AtomicMapFunctionalTest] will wait until no switch is in progress
2013-01-31 13:15:51,822 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-AtomicMapFunctionalTest] no switch in progress. Moving on...
2013-01-31 13:15:51,822 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AtomicMapFunctionalTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:482 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:51,823 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AtomicMapFunctionalTest] local transaction null:314 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:482 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:51,823 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AtomicMapFunctionalTest] local transaction null:314 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:51,822 DEBUG (testng-ConcurrentStartupTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 12
2013-01-31 13:15:51,823 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AtomicMapFunctionalTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:486 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:51,823 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-AtomicMapFunctionalTest] will wait until no switch is in progress
2013-01-31 13:15:51,823 DEBUG (testng-ConcurrentStartupTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.BatchingInterceptor
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.StateTransferLockInterceptor@d1fcc77, TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@22a89f5c, PB=org.infinispan.interceptors.StateTransferLockInterceptor@d1fcc77}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@6c7662ca}
	>> org.infinispan.interceptors.TxInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@504ff367}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@30f51862, PB=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@30f51862}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@2b13e30a, TO=org.infinispan.interceptors.EntryWrappingInterceptor@2b13e30a, PB=org.infinispan.interceptors.EntryWrappingInterceptor@2b13e30a}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.DistributionInterceptor@269ebb9e, TO=org.infinispan.interceptors.totalorder.TotalOrderDistributionInterceptor@7f2f95e0, PB=org.infinispan.interceptors.DistributionInterceptor@269ebb9e}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:51,826 DEBUG (testng-ConcurrentStartupTest) [org.infinispan.distribution.ch.DefaultConsistentHash] Using 1 virtualNodes to initialize consistent hash wheel 
2013-01-31 13:15:51,826 DEBUG (testng-ConcurrentStartupTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Setting configuration tunned parameters
2013-01-31 13:15:51,826 DEBUG (testng-ConcurrentStartupTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Configuration State responses are {}
2013-01-31 13:15:51,826 DEBUG (testng-ConcurrentStartupTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] No Configuration State found in cluster
2013-01-31 13:15:51,826 DEBUG (testng-ConcurrentStartupTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] No State found. Using original configuration parameters
2013-01-31 13:15:51,827 DEBUG (testng-ConcurrentStartupTest) [org.infinispan.cacheviews.CacheViewsManagerImpl] test: Node ConcurrentStartupTest-NodeA-26973 is joining
2013-01-31 13:15:51,823 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-AtomicMapFunctionalTest] no switch in progress. Moving on...
2013-01-31 13:15:51,827 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AtomicMapFunctionalTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:486 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:51,827 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AtomicMapFunctionalTest] local transaction null:315 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:486 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:51,828 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AtomicMapFunctionalTest] local transaction null:315 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:51,828 INFO  (testng-AtomicMapFunctionalTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testTxChangesOnAtomicMap(org.infinispan.atomic.AtomicMapFunctionalTest).
2013-01-31 13:15:51,828 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on null
2013-01-31 13:15:51,829 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 1 seconds.
2013-01-31 13:15:51,829 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:51,829 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.manager.DefaultCacheManager] Stopping cache manager ISPN on null
2013-01-31 13:15:51,829 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on null
2013-01-31 13:15:51,835 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.CacheImpl] Started cache ___defaultcache on null
2013-01-31 13:15:51,835 INFO  (testng-RepeatableReadLockTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testRollbacks(org.infinispan.api.mvcc.repeatable_read.RepeatableReadLockTest)
2013-01-31 13:15:51,836 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepeatableReadLockTest] local transaction DummyTransaction{xid=DummyXid{id=30}, status=0} is starting. check if switch is in progress...
2013-01-31 13:15:51,836 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepeatableReadLockTest] will wait until no switch is in progress
2013-01-31 13:15:51,836 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepeatableReadLockTest] no switch in progress. Moving on...
2013-01-31 13:15:51,836 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepeatableReadLockTest] local transaction DummyTransaction{xid=DummyXid{id=30}, status=0} will use 2PC while executing
2013-01-31 13:15:51,836 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepeatableReadLockTest] local transaction null:316 [DummyTransaction{xid=DummyXid{id=30}, status=7}] wants to commit
2013-01-31 13:15:51,836 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepeatableReadLockTest] local transaction null:316 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:51,836 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepeatableReadLockTest] local transaction DummyTransaction{xid=DummyXid{id=31}, status=0} is starting. check if switch is in progress...
2013-01-31 13:15:51,836 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepeatableReadLockTest] will wait until no switch is in progress
2013-01-31 13:15:51,836 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepeatableReadLockTest] no switch in progress. Moving on...
2013-01-31 13:15:51,836 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepeatableReadLockTest] local transaction DummyTransaction{xid=DummyXid{id=31}, status=0} will use 2PC while executing
2013-01-31 13:15:51,836 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepeatableReadLockTest] local transaction DummyTransaction{xid=DummyXid{id=32}, status=0} is starting. check if switch is in progress...
2013-01-31 13:15:51,836 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepeatableReadLockTest] will wait until no switch is in progress
2013-01-31 13:15:51,836 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepeatableReadLockTest] no switch in progress. Moving on...
2013-01-31 13:15:51,836 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepeatableReadLockTest] local transaction DummyTransaction{xid=DummyXid{id=32}, status=0} will use 2PC while executing
2013-01-31 13:15:51,836 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepeatableReadLockTest] local transaction null:318 [DummyTransaction{xid=DummyXid{id=32}, status=9}] wants to rollback
2013-01-31 13:15:51,837 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepeatableReadLockTest] local transaction null:317 [DummyTransaction{xid=DummyXid{id=31}, status=7}] wants to commit
2013-01-31 13:15:51,837 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepeatableReadLockTest] local transaction null:317 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:51,837 ERROR (testng-RepeatableReadLockTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Method testRollbacks(org.infinispan.api.mvcc.repeatable_read.RepeatableReadLockTest) threw an exception
java.lang.AssertionError: Stale locks exist! NumLocksHeld is 1 and lock info is org.infinispan.util.concurrent.locks.containers.OwnableReentrantPerEntryLockContainer@63e318ab
	at org.infinispan.api.mvcc.LockAssert.assertNoLocks(LockAssert.java:48)
	at org.infinispan.api.mvcc.LockTestBase.assertNoLocks(LockTestBase.java:102)
	at org.infinispan.api.mvcc.LockTestBase.testRollbacks(LockTestBase.java:362)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:51,842 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:51,839 DEBUG (testng-MixedModeTest) [org.jgroups.protocols.pbcast.GMS] address=MixedModeTest-NodeA-25015, cluster=ISPN, physical address=127.0.0.1:7950
2013-01-31 13:15:51,838 DEBUG (CacheViewInstaller-1,ConcurrentStartupTest-NodeA-26973) [org.infinispan.cacheviews.CacheViewsManagerImpl] Installing new view CacheView{viewId=1, members=[ConcurrentStartupTest-NodeA-26973]} for cache test
2013-01-31 13:15:51,843 DEBUG (CacheViewInstaller-1,ConcurrentStartupTest-NodeA-26973) [org.infinispan.configuration.cache.TransactionConfigurationBuilder] Switching to Synchronization based enlistment.
2013-01-31 13:15:51,848 DEBUG (transport-thread-15) [org.infinispan.configuration.cache.TransactionConfigurationBuilder] Switching to Synchronization based enlistment.
2013-01-31 13:15:51,848 DEBUG (transport-thread-15) [org.infinispan.distribution.ch.DefaultConsistentHash] Using 1 virtualNodes to initialize consistent hash wheel 
2013-01-31 13:15:51,848 DEBUG (transport-thread-15) [org.infinispan.statetransfer.DistributedStateTransferTask] Commencing rehash 1 on node: ConcurrentStartupTest-NodeA-26973. Before start, data container had 0 entries
2013-01-31 13:15:51,848 DEBUG (transport-thread-15) [org.infinispan.statetransfer.StateTransferLockImpl] Blocking new write commands for cache view 1
2013-01-31 13:15:51,848 DEBUG (CacheViewInstaller-1,ConcurrentStartupTest-NodeA-26973) [org.infinispan.cacheviews.CacheViewsManagerImpl] test: Committing cache view CacheView{viewId=1, members=[ConcurrentStartupTest-NodeA-26973]}
2013-01-31 13:15:51,848 DEBUG (CacheViewInstaller-1,ConcurrentStartupTest-NodeA-26973) [org.infinispan.statetransfer.BaseStateTransferTask] Node ConcurrentStartupTest-NodeA-26973 completed state transfer for view 1 in 0 milliseconds!
2013-01-31 13:15:51,849 DEBUG (CacheViewInstaller-1,ConcurrentStartupTest-NodeA-26973) [org.infinispan.statetransfer.StateTransferLockImpl] Unblocking write commands for cache view 1
2013-01-31 13:15:51,849 DEBUG (CacheViewInstaller-1,ConcurrentStartupTest-NodeA-26973) [org.infinispan.cacheviews.CacheViewsManagerImpl] Successfully installed view CacheView{viewId=1, members=[ConcurrentStartupTest-NodeA-26973]} for cache test
2013-01-31 13:15:51,849 DEBUG (testng-ConcurrentStartupTest) [org.infinispan.CacheImpl] Started cache test on ConcurrentStartupTest-NodeA-26973
2013-01-31 13:15:51,849 ERROR (testng-RepeatableReadLockTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test failed testRollbacks(org.infinispan.api.mvcc.repeatable_read.RepeatableReadLockTest)
java.lang.AssertionError: Stale locks exist! NumLocksHeld is 1 and lock info is org.infinispan.util.concurrent.locks.containers.OwnableReentrantPerEntryLockContainer@63e318ab
	at org.infinispan.api.mvcc.LockAssert.assertNoLocks(LockAssert.java:48)
	at org.infinispan.api.mvcc.LockTestBase.assertNoLocks(LockTestBase.java:102)
	at org.infinispan.api.mvcc.LockTestBase.testRollbacks(LockTestBase.java:362)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:51,855 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:51,853 WARN  (testng-CacheClusterJoinTest) [org.jgroups.stack.Configurator] [JGRP00013] TP.discard_incompatible_packets has been deprecated: incompatible packets are discarded anyway
2013-01-31 13:15:51,856 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:51,858 INFO  (testng-AtomicMapFunctionalTest) [org.infinispan.transaction.lookup.JBossStandaloneJTAManagerLookup] ISPN000107: Retrieving transaction manager Transaction: unknown
2013-01-31 13:15:51,875 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.configuration.cache.TransactionConfigurationBuilder] Switching to Synchronization based enlistment.
2013-01-31 13:15:51,876 INFO  (testng-AtomicMapFunctionalTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:51,881 DEBUG (testng-MixedModeTest) [org.jgroups.protocols.pbcast.NAKACK2] 
[MixedModeTest-NodeA-25015 setDigest()]
existing digest:  []
new digest:       MixedModeTest-NodeA-25015: [0 (0)]
resulting digest: MixedModeTest-NodeA-25015: [0 (0)]
2013-01-31 13:15:51,881 DEBUG (testng-MixedModeTest) [org.jgroups.protocols.pbcast.GMS] MixedModeTest-NodeA-25015: installing view [MixedModeTest-NodeA-25015|0] [MixedModeTest-NodeA-25015]
2013-01-31 13:15:51,881 DEBUG (testng-MixedModeTest) [org.jgroups.protocols.pbcast.STABLE] resuming message garbage collection
2013-01-31 13:15:51,882 DEBUG (testng-MixedModeTest) [org.jgroups.protocols.pbcast.STABLE] [ergonomics] setting max_bytes to 400KB (1 members)
2013-01-31 13:15:51,882 DEBUG (testng-MixedModeTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] New view accepted: [MixedModeTest-NodeA-25015|0] [MixedModeTest-NodeA-25015]
2013-01-31 13:15:51,882 INFO  (testng-MixedModeTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000094: Received new cluster view: [MixedModeTest-NodeA-25015|0] [MixedModeTest-NodeA-25015]
2013-01-31 13:15:51,883 DEBUG (testng-MixedModeTest) [org.jgroups.protocols.pbcast.STABLE] resuming message garbage collection
2013-01-31 13:15:51,883 DEBUG (testng-MixedModeTest) [org.jgroups.protocols.pbcast.GMS] created group (first member). My view is [MixedModeTest-NodeA-25015|0], impl is org.jgroups.protocols.pbcast.CoordGmsImpl
2013-01-31 13:15:51,883 INFO  (testng-MixedModeTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000079: Cache local address is MixedModeTest-NodeA-25015, physical addresses are [127.0.0.1:7950]
2013-01-31 13:15:51,883 DEBUG (testng-MixedModeTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] Waiting on view being accepted
2013-01-31 13:15:51,890 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.api.mvcc.LockTestBase] **** - STARTING TEARDOWN - ****
2013-01-31 13:15:51,890 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on null
2013-01-31 13:15:51,891 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 1 seconds.
2013-01-31 13:15:51,891 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:51,891 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.manager.DefaultCacheManager] Stopping cache manager ISPN on null
2013-01-31 13:15:51,891 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on null
2013-01-31 13:15:51,898 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:51,903 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:51,904 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:51,911 INFO  (testng-RepeatableReadLockTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:51,992 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:51,992 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:51,993 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:51,996 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 12
2013-01-31 13:15:51,996 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.BatchingInterceptor
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@7c7dca94}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@267efa66}
	>> org.infinispan.interceptors.TxInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@5a695248}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@38992357, PB=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@38992357}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@4ddf41c8, TO=org.infinispan.interceptors.EntryWrappingInterceptor@4ddf41c8, PB=org.infinispan.interceptors.EntryWrappingInterceptor@4ddf41c8}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:52,010 DEBUG (testng-MixedModeTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:52,142 WARN  (testng-ReadCommittedLockTest) [org.infinispan.transaction.TransactionTable] ISPN000100: Stopping, but there are 1 local transactions and 0 remote transactions that did not finish in time.
2013-01-31 13:15:52,162 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.transaction.TransactionTable] Local active transactions: {DummyTransaction{xid=DummyXid{id=25}, status=0}=LocalXaTransaction{xid=DummyXid{id=25}} LocalTransaction{remoteLockedNodes=null, isMarkedForRollback=false, transaction=DummyTransaction{xid=DummyXid{id=25}, status=0}, lockedKeys=null, backupKeyLocks=null, viewId=-1} org.infinispan.transaction.xa.LocalXaTransaction@11a}, Remote active transactions null
2013-01-31 13:15:52,359 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.manager.DefaultCacheManager] Stopping cache manager ISPN on null
2013-01-31 13:15:52,359 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on null
2013-01-31 13:15:52,360 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:52,099 ERROR (testng-AtomicHashMapConcurrencyTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Method testConcurrentCreate(org.infinispan.atomic.AtomicHashMapConcurrencyTest) threw an exception
java.lang.AssertionError
	at org.infinispan.atomic.AtomicHashMapConcurrencyTest.testConcurrentCreate(AtomicHashMapConcurrencyTest.java:113)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:52,364 ERROR (testng-AtomicHashMapConcurrencyTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test failed testConcurrentCreate(org.infinispan.atomic.AtomicHashMapConcurrencyTest)
java.lang.AssertionError
	at org.infinispan.atomic.AtomicHashMapConcurrencyTest.testConcurrentCreate(AtomicHashMapConcurrencyTest.java:113)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:52,367 DEBUG (testng-AtomicHashMapConcurrencyTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AtomicHashMapConcurrencyTest] local transaction null:275 [DummyTransaction{xid=DummyXid{id=20}, status=9}] wants to rollback
2013-01-31 13:15:52,367 DEBUG (testng-AtomicHashMapConcurrencyTest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on null
2013-01-31 13:15:52,367 DEBUG (testng-AtomicHashMapConcurrencyTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 1 seconds.
2013-01-31 13:15:52,367 DEBUG (testng-AtomicHashMapConcurrencyTest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:52,367 DEBUG (testng-AtomicHashMapConcurrencyTest) [org.infinispan.manager.DefaultCacheManager] Stopping cache manager ISPN on null
2013-01-31 13:15:52,367 DEBUG (testng-AtomicHashMapConcurrencyTest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on null
2013-01-31 13:15:52,369 DEBUG (testng-AtomicHashMapConcurrencyTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:52,024 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.CacheImpl] Started cache ___defaultcache on null
2013-01-31 13:15:52,370 INFO  (testng-AtomicMapFunctionalTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testTxChangesOnAtomicMapNoLocks(org.infinispan.atomic.AtomicMapFunctionalTest)
2013-01-31 13:15:52,370 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AtomicMapFunctionalTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:48a status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:52,370 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-AtomicMapFunctionalTest] will wait until no switch is in progress
2013-01-31 13:15:52,370 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-AtomicMapFunctionalTest] no switch in progress. Moving on...
2013-01-31 13:15:52,370 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AtomicMapFunctionalTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:48a status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:52,370 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AtomicMapFunctionalTest] local transaction null:319 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:48a status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:52,370 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AtomicMapFunctionalTest] local transaction null:319 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:52,370 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AtomicMapFunctionalTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:48e status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:52,371 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-AtomicMapFunctionalTest] will wait until no switch is in progress
2013-01-31 13:15:52,371 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-AtomicMapFunctionalTest] no switch in progress. Moving on...
2013-01-31 13:15:52,371 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AtomicMapFunctionalTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:48e status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:52,371 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AtomicMapFunctionalTest] local transaction null:320 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:48e status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:52,371 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AtomicMapFunctionalTest] local transaction null:320 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:52,372 INFO  (testng-AtomicMapFunctionalTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testTxChangesOnAtomicMapNoLocks(org.infinispan.atomic.AtomicMapFunctionalTest).
2013-01-31 13:15:52,372 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on null
2013-01-31 13:15:52,373 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 1 seconds.
2013-01-31 13:15:52,373 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:52,373 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.manager.DefaultCacheManager] Stopping cache manager ISPN on null
2013-01-31 13:15:52,365 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:52,373 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:52,373 DEBUG (testng-AtomicHashMapConcurrencyTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:52,373 DEBUG (testng-AtomicHashMapConcurrencyTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:52,376 INFO  (testng-ReadCommittedLockTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:52,363 DEBUG (testng-CacheClusterJoinTest) [org.jgroups.stack.Configurator] set property TCP.diagnostics_addr to default value /224.0.75.75
2013-01-31 13:15:52,295 DEBUG (testng-MixedModeTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:52,376 DEBUG (testng-AtomicMapFunctionalTest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on null
2013-01-31 13:15:52,259 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:52,256 DEBUG (testng-ConcurrentStartupTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:52,380 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:52,376 INFO  (testng-AtomicHashMapConcurrencyTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:52,385 DEBUG (testng-ConcurrentStartupTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:52,386 DEBUG (testng-ConcurrentStartupTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:52,388 INFO  (testng-ConcurrentStartupTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000078: Starting JGroups Channel
2013-01-31 13:15:52,395 DEBUG (testng-CacheClusterJoinTest) [org.jgroups.protocols.FRAG2] received CONFIG event: {bind_addr=/127.0.0.1}
2013-01-31 13:15:52,396 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:52,396 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:52,419 DEBUG (testng-CacheClusterJoinTest) [org.jgroups.protocols.pbcast.GMS] address=CacheClusterJoinTest-NodeA-8863, cluster=ISPN, physical address=127.0.0.1:7900
2013-01-31 13:15:52,421 DEBUG (testng-CacheClusterJoinTest) [org.jgroups.protocols.pbcast.NAKACK2] 
[CacheClusterJoinTest-NodeA-8863 setDigest()]
existing digest:  []
new digest:       CacheClusterJoinTest-NodeA-8863: [0 (0)]
resulting digest: CacheClusterJoinTest-NodeA-8863: [0 (0)]
2013-01-31 13:15:52,421 DEBUG (testng-CacheClusterJoinTest) [org.jgroups.protocols.pbcast.GMS] CacheClusterJoinTest-NodeA-8863: installing view [CacheClusterJoinTest-NodeA-8863|0] [CacheClusterJoinTest-NodeA-8863]
2013-01-31 13:15:52,421 DEBUG (testng-CacheClusterJoinTest) [org.jgroups.protocols.pbcast.STABLE] resuming message garbage collection
2013-01-31 13:15:52,421 DEBUG (testng-CacheClusterJoinTest) [org.jgroups.protocols.pbcast.STABLE] [ergonomics] setting max_bytes to 400KB (1 members)
2013-01-31 13:15:52,421 DEBUG (testng-CacheClusterJoinTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] New view accepted: [CacheClusterJoinTest-NodeA-8863|0] [CacheClusterJoinTest-NodeA-8863]
2013-01-31 13:15:52,421 INFO  (testng-CacheClusterJoinTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000094: Received new cluster view: [CacheClusterJoinTest-NodeA-8863|0] [CacheClusterJoinTest-NodeA-8863]
2013-01-31 13:15:52,422 DEBUG (testng-CacheClusterJoinTest) [org.jgroups.protocols.pbcast.STABLE] resuming message garbage collection
2013-01-31 13:15:52,422 DEBUG (testng-CacheClusterJoinTest) [org.jgroups.protocols.pbcast.GMS] created group (first member). My view is [CacheClusterJoinTest-NodeA-8863|0], impl is org.jgroups.protocols.pbcast.CoordGmsImpl
2013-01-31 13:15:52,422 INFO  (testng-CacheClusterJoinTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000079: Cache local address is CacheClusterJoinTest-NodeA-8863, physical addresses are [127.0.0.1:7900]
2013-01-31 13:15:52,422 DEBUG (testng-CacheClusterJoinTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] Waiting on view being accepted
2013-01-31 13:15:52,484 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:52,484 DEBUG (testng-AtomicHashMapConcurrencyTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:52,485 DEBUG (testng-AtomicHashMapConcurrencyTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:52,487 DEBUG (testng-AtomicHashMapConcurrencyTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:52,488 DEBUG (testng-MixedModeTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:52,489 INFO  (testng-MixedModeTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:52,489 DEBUG (testng-AtomicHashMapConcurrencyTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 12
2013-01-31 13:15:52,489 DEBUG (testng-AtomicHashMapConcurrencyTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.BatchingInterceptor
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@d5e6341}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@2fc64742}
	>> org.infinispan.interceptors.TxInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@270568f}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.PessimisticLockingInterceptor@1d42c789, PB=org.infinispan.interceptors.locking.PessimisticLockingInterceptor@1d42c789}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@b3a0261, TO=org.infinispan.interceptors.EntryWrappingInterceptor@b3a0261, PB=org.infinispan.interceptors.EntryWrappingInterceptor@b3a0261}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:52,490 DEBUG (testng-MixedModeTest) [org.infinispan.transaction.TransactionTable] Min view id set to 0
2013-01-31 13:15:52,490 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:52,490 DEBUG (testng-MixedModeTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 10
2013-01-31 13:15:52,490 DEBUG (testng-MixedModeTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.StateTransferLockInterceptor@69b4b9d2, TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@5813c035, PB=org.infinispan.interceptors.StateTransferLockInterceptor@69b4b9d2}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@78b004bf}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@6c07d57f}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@7651bc41, PB=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@7651bc41}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@701e8c16, TO=org.infinispan.interceptors.EntryWrappingInterceptor@701e8c16, PB=org.infinispan.interceptors.EntryWrappingInterceptor@701e8c16}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.ReplicationInterceptor@657f31db, TO=org.infinispan.interceptors.totalorder.TotalOrderReplicationInterceptor@1a254ec, PB=org.infinispan.interceptors.ReplicationInterceptor@657f31db}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:52,490 DEBUG (testng-AtomicHashMapConcurrencyTest) [org.infinispan.CacheImpl] Started cache ___defaultcache on null
2013-01-31 13:15:52,491 INFO  (testng-AtomicHashMapConcurrencyTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testConcurrentModifications(org.infinispan.atomic.AtomicHashMapConcurrencyTest)
2013-01-31 13:15:52,491 DEBUG (testng-AtomicHashMapConcurrencyTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AtomicHashMapConcurrencyTest] local transaction DummyTransaction{xid=DummyXid{id=33}, status=0} is starting. check if switch is in progress...
2013-01-31 13:15:52,491 DEBUG (testng-AtomicHashMapConcurrencyTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-AtomicHashMapConcurrencyTest] will wait until no switch is in progress
2013-01-31 13:15:52,491 DEBUG (testng-AtomicHashMapConcurrencyTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-AtomicHashMapConcurrencyTest] no switch in progress. Moving on...
2013-01-31 13:15:52,491 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 11
2013-01-31 13:15:52,491 DEBUG (testng-AtomicHashMapConcurrencyTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AtomicHashMapConcurrencyTest] local transaction DummyTransaction{xid=DummyXid{id=33}, status=0} will use 2PC while executing
2013-01-31 13:15:52,491 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@6438dce6}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@512eb371}
	>> org.infinispan.interceptors.TxInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@5106e95a}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@1cc23d45, PB=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@1cc23d45}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@14448bc3, TO=org.infinispan.interceptors.EntryWrappingInterceptor@14448bc3, PB=org.infinispan.interceptors.EntryWrappingInterceptor@14448bc3}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:52,491 DEBUG (testng-AtomicHashMapConcurrencyTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AtomicHashMapConcurrencyTest] local transaction null:321 [DummyTransaction{xid=DummyXid{id=33}, status=7}] wants to commit
2013-01-31 13:15:52,491 DEBUG (testng-AtomicHashMapConcurrencyTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AtomicHashMapConcurrencyTest] local transaction null:321 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:52,492 DEBUG (testng-AtomicHashMapConcurrencyTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AtomicHashMapConcurrencyTest] local transaction DummyTransaction{xid=DummyXid{id=34}, status=0} is starting. check if switch is in progress...
2013-01-31 13:15:52,492 DEBUG (testng-AtomicHashMapConcurrencyTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-AtomicHashMapConcurrencyTest] will wait until no switch is in progress
2013-01-31 13:15:52,492 DEBUG (testng-AtomicHashMapConcurrencyTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-AtomicHashMapConcurrencyTest] no switch in progress. Moving on...
2013-01-31 13:15:52,492 DEBUG (testng-AtomicHashMapConcurrencyTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AtomicHashMapConcurrencyTest] local transaction DummyTransaction{xid=DummyXid{id=34}, status=0} will use 2PC while executing
2013-01-31 13:15:52,492 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.CacheImpl] Started cache ___defaultcache on null
2013-01-31 13:15:52,492 INFO  (testng-RepeatableReadLockTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testRollbacksOnNullEntry(org.infinispan.api.mvcc.repeatable_read.RepeatableReadLockTest)
2013-01-31 13:15:52,492 DEBUG (testng-MixedModeTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Setting configuration tunned parameters
2013-01-31 13:15:52,492 DEBUG (testng-MixedModeTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Configuration State responses are {}
2013-01-31 13:15:52,492 DEBUG (testng-MixedModeTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] No Configuration State found in cluster
2013-01-31 13:15:52,492 DEBUG (testng-MixedModeTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] No State found. Using original configuration parameters
2013-01-31 13:15:52,493 DEBUG (testng-MixedModeTest) [org.infinispan.cacheviews.CacheViewsManagerImpl] replSync: Node MixedModeTest-NodeA-25015 is joining
2013-01-31 13:15:52,492 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepeatableReadLockTest] local transaction DummyTransaction{xid=DummyXid{id=35}, status=0} is starting. check if switch is in progress...
2013-01-31 13:15:52,493 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepeatableReadLockTest] will wait until no switch is in progress
2013-01-31 13:15:52,493 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepeatableReadLockTest] no switch in progress. Moving on...
2013-01-31 13:15:52,493 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepeatableReadLockTest] local transaction DummyTransaction{xid=DummyXid{id=35}, status=0} will use 2PC while executing
2013-01-31 13:15:52,493 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepeatableReadLockTest] local transaction DummyTransaction{xid=DummyXid{id=36}, status=0} is starting. check if switch is in progress...
2013-01-31 13:15:52,493 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepeatableReadLockTest] will wait until no switch is in progress
2013-01-31 13:15:52,493 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepeatableReadLockTest] no switch in progress. Moving on...
2013-01-31 13:15:52,493 DEBUG (ForkThread-AtomicHashMapConcurrencyTest-438163608) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [ForkThread-AtomicHashMapConcurrencyTest-438163608] local transaction DummyTransaction{xid=DummyXid{id=37}, status=0} is starting. check if switch is in progress...
2013-01-31 13:15:52,493 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepeatableReadLockTest] local transaction DummyTransaction{xid=DummyXid{id=36}, status=0} will use 2PC while executing
2013-01-31 13:15:52,494 DEBUG (CacheViewInstaller-1,MixedModeTest-NodeA-25015) [org.infinispan.cacheviews.CacheViewsManagerImpl] Installing new view CacheView{viewId=1, members=[MixedModeTest-NodeA-25015]} for cache replSync
2013-01-31 13:15:52,494 DEBUG (ForkThread-AtomicHashMapConcurrencyTest-438163608) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [ForkThread-AtomicHashMapConcurrencyTest-438163608] will wait until no switch is in progress
2013-01-31 13:15:52,494 DEBUG (ForkThread-AtomicHashMapConcurrencyTest-438163608) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [ForkThread-AtomicHashMapConcurrencyTest-438163608] no switch in progress. Moving on...
2013-01-31 13:15:52,495 DEBUG (ForkThread-AtomicHashMapConcurrencyTest-438163608) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [ForkThread-AtomicHashMapConcurrencyTest-438163608] local transaction DummyTransaction{xid=DummyXid{id=37}, status=0} will use 2PC while executing
2013-01-31 13:15:52,496 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepeatableReadLockTest] local transaction null:325 [DummyTransaction{xid=DummyXid{id=36}, status=9}] wants to rollback
2013-01-31 13:15:52,496 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepeatableReadLockTest] local transaction null:323 [DummyTransaction{xid=DummyXid{id=35}, status=7}] wants to commit
2013-01-31 13:15:52,497 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepeatableReadLockTest] local transaction null:323 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:52,497 INFO  (testng-RepeatableReadLockTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testRollbacksOnNullEntry(org.infinispan.api.mvcc.repeatable_read.RepeatableReadLockTest).
2013-01-31 13:15:52,497 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.api.mvcc.LockTestBase] **** - STARTING TEARDOWN - ****
2013-01-31 13:15:52,497 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on null
2013-01-31 13:15:52,498 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 1 seconds.
2013-01-31 13:15:52,498 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:52,498 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.manager.DefaultCacheManager] Stopping cache manager ISPN on null
2013-01-31 13:15:52,498 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on null
2013-01-31 13:15:52,498 DEBUG (transport-thread-17) [org.infinispan.distribution.ch.DefaultConsistentHash] Using 1 virtualNodes to initialize consistent hash wheel 
2013-01-31 13:15:52,498 DEBUG (transport-thread-17) [org.infinispan.statetransfer.ReplicatedStateTransferTask] Commencing state transfer 1 on node: MixedModeTest-NodeA-25015. Before start, data container had 0 entries
2013-01-31 13:15:52,498 DEBUG (transport-thread-17) [org.infinispan.statetransfer.StateTransferLockImpl] Blocking new write commands for cache view 1
2013-01-31 13:15:52,499 DEBUG (CacheViewInstaller-1,MixedModeTest-NodeA-25015) [org.infinispan.cacheviews.CacheViewsManagerImpl] replSync: Committing cache view CacheView{viewId=1, members=[MixedModeTest-NodeA-25015]}
2013-01-31 13:15:52,499 DEBUG (CacheViewInstaller-1,MixedModeTest-NodeA-25015) [org.infinispan.statetransfer.BaseStateTransferTask] Node MixedModeTest-NodeA-25015 completed state transfer for view 1 in 0 milliseconds!
2013-01-31 13:15:52,499 DEBUG (CacheViewInstaller-1,MixedModeTest-NodeA-25015) [org.infinispan.statetransfer.StateTransferLockImpl] Unblocking write commands for cache view 1
2013-01-31 13:15:52,499 DEBUG (CacheViewInstaller-1,MixedModeTest-NodeA-25015) [org.infinispan.cacheviews.CacheViewsManagerImpl] Successfully installed view CacheView{viewId=1, members=[MixedModeTest-NodeA-25015]} for cache replSync
2013-01-31 13:15:52,499 DEBUG (testng-MixedModeTest) [org.infinispan.CacheImpl] Started cache replSync on MixedModeTest-NodeA-25015
2013-01-31 13:15:52,499 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:52,500 DEBUG (testng-MixedModeTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:52,503 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:52,504 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:52,507 DEBUG (testng-MixedModeTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:52,508 INFO  (testng-RepeatableReadLockTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:52,509 DEBUG (testng-MixedModeTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:52,510 INFO  (testng-MixedModeTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000078: Starting JGroups Channel
2013-01-31 13:15:52,522 DEBUG (testng-CacheClusterJoinTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:52,522 DEBUG (testng-CacheClusterJoinTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:52,524 WARN  (testng-KeyAffinityServiceTest) [org.jgroups.stack.Configurator] [JGRP00013] TP.discard_incompatible_packets has been deprecated: incompatible packets are discarded anyway
2013-01-31 13:15:52,524 DEBUG (testng-CacheClusterJoinTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:52,541 INFO  (testng-CacheClusterJoinTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:52,542 DEBUG (testng-CacheClusterJoinTest) [org.infinispan.transaction.TransactionTable] Min view id set to 0
2013-01-31 13:15:52,543 DEBUG (testng-CacheClusterJoinTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 10
2013-01-31 13:15:52,543 DEBUG (testng-CacheClusterJoinTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.StateTransferLockInterceptor@7978def7, TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@6e76686e, PB=org.infinispan.interceptors.StateTransferLockInterceptor@7978def7}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@1fc2466a}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@b9ce970}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@6aa1be04, PB=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@6aa1be04}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@20c22f4d, TO=org.infinispan.interceptors.EntryWrappingInterceptor@20c22f4d, PB=org.infinispan.interceptors.EntryWrappingInterceptor@20c22f4d}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.ReplicationInterceptor@2caf7908, TO=org.infinispan.interceptors.totalorder.TotalOrderReplicationInterceptor@34331323, PB=org.infinispan.interceptors.ReplicationInterceptor@2caf7908}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:52,543 DEBUG (testng-CacheClusterJoinTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Setting configuration tunned parameters
2013-01-31 13:15:52,543 DEBUG (testng-CacheClusterJoinTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Configuration State responses are {}
2013-01-31 13:15:52,543 DEBUG (testng-CacheClusterJoinTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] No Configuration State found in cluster
2013-01-31 13:15:52,543 DEBUG (testng-CacheClusterJoinTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] No State found. Using original configuration parameters
2013-01-31 13:15:52,544 DEBUG (testng-CacheClusterJoinTest) [org.infinispan.cacheviews.CacheViewsManagerImpl] cache: Node CacheClusterJoinTest-NodeA-8863 is joining
2013-01-31 13:15:52,545 DEBUG (CacheViewInstaller-1,CacheClusterJoinTest-NodeA-8863) [org.infinispan.cacheviews.CacheViewsManagerImpl] Installing new view CacheView{viewId=1, members=[CacheClusterJoinTest-NodeA-8863]} for cache cache
2013-01-31 13:15:52,552 DEBUG (transport-thread-19) [org.infinispan.distribution.ch.DefaultConsistentHash] Using 1 virtualNodes to initialize consistent hash wheel 
2013-01-31 13:15:52,553 DEBUG (transport-thread-19) [org.infinispan.statetransfer.ReplicatedStateTransferTask] Commencing state transfer 1 on node: CacheClusterJoinTest-NodeA-8863. Before start, data container had 0 entries
2013-01-31 13:15:52,553 DEBUG (transport-thread-19) [org.infinispan.statetransfer.StateTransferLockImpl] Blocking new write commands for cache view 1
2013-01-31 13:15:52,553 DEBUG (CacheViewInstaller-1,CacheClusterJoinTest-NodeA-8863) [org.infinispan.cacheviews.CacheViewsManagerImpl] cache: Committing cache view CacheView{viewId=1, members=[CacheClusterJoinTest-NodeA-8863]}
2013-01-31 13:15:52,553 DEBUG (CacheViewInstaller-1,CacheClusterJoinTest-NodeA-8863) [org.infinispan.statetransfer.BaseStateTransferTask] Node CacheClusterJoinTest-NodeA-8863 completed state transfer for view 1 in 0 milliseconds!
2013-01-31 13:15:52,553 DEBUG (CacheViewInstaller-1,CacheClusterJoinTest-NodeA-8863) [org.infinispan.statetransfer.StateTransferLockImpl] Unblocking write commands for cache view 1
2013-01-31 13:15:52,553 DEBUG (CacheViewInstaller-1,CacheClusterJoinTest-NodeA-8863) [org.infinispan.cacheviews.CacheViewsManagerImpl] Successfully installed view CacheView{viewId=1, members=[CacheClusterJoinTest-NodeA-8863]} for cache cache
2013-01-31 13:15:52,553 DEBUG (testng-CacheClusterJoinTest) [org.infinispan.CacheImpl] Started cache cache on CacheClusterJoinTest-NodeA-8863
2013-01-31 13:15:52,554 DEBUG (testng-CacheClusterJoinTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:52,559 DEBUG (testng-CacheClusterJoinTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:52,560 DEBUG (testng-CacheClusterJoinTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:52,561 INFO  (testng-CacheClusterJoinTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000078: Starting JGroups Channel
2013-01-31 13:15:52,582 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:52,583 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:52,583 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:52,584 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:52,586 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 11
2013-01-31 13:15:52,586 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@4f9507a1}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@412803d8}
	>> org.infinispan.interceptors.TxInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@2a147b53}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@26ac9bba, PB=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@26ac9bba}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@e23e42c, TO=org.infinispan.interceptors.EntryWrappingInterceptor@e23e42c, PB=org.infinispan.interceptors.EntryWrappingInterceptor@e23e42c}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:52,587 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.CacheImpl] Started cache ___defaultcache on null
2013-01-31 13:15:52,587 INFO  (testng-RepeatableReadLockTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testUpdateDoesntBlockRead(org.infinispan.api.mvcc.repeatable_read.RepeatableReadLockTest)
2013-01-31 13:15:52,587 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepeatableReadLockTest] local transaction DummyTransaction{xid=DummyXid{id=38}, status=0} is starting. check if switch is in progress...
2013-01-31 13:15:52,587 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepeatableReadLockTest] will wait until no switch is in progress
2013-01-31 13:15:52,587 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepeatableReadLockTest] no switch in progress. Moving on...
2013-01-31 13:15:52,587 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepeatableReadLockTest] local transaction DummyTransaction{xid=DummyXid{id=38}, status=0} will use 2PC while executing
2013-01-31 13:15:52,587 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepeatableReadLockTest] local transaction null:326 [DummyTransaction{xid=DummyXid{id=38}, status=7}] wants to commit
2013-01-31 13:15:52,587 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepeatableReadLockTest] local transaction null:326 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:52,587 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepeatableReadLockTest] local transaction DummyTransaction{xid=DummyXid{id=39}, status=0} is starting. check if switch is in progress...
2013-01-31 13:15:52,587 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepeatableReadLockTest] will wait until no switch is in progress
2013-01-31 13:15:52,587 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepeatableReadLockTest] no switch in progress. Moving on...
2013-01-31 13:15:52,587 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepeatableReadLockTest] local transaction DummyTransaction{xid=DummyXid{id=39}, status=0} will use 2PC while executing
2013-01-31 13:15:52,588 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepeatableReadLockTest] local transaction DummyTransaction{xid=DummyXid{id=40}, status=0} is starting. check if switch is in progress...
2013-01-31 13:15:52,588 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepeatableReadLockTest] will wait until no switch is in progress
2013-01-31 13:15:52,588 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepeatableReadLockTest] no switch in progress. Moving on...
2013-01-31 13:15:52,588 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepeatableReadLockTest] local transaction DummyTransaction{xid=DummyXid{id=40}, status=0} will use 2PC while executing
2013-01-31 13:15:52,588 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepeatableReadLockTest] local transaction null:327 [DummyTransaction{xid=DummyXid{id=39}, status=7}] wants to commit
2013-01-31 13:15:52,588 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepeatableReadLockTest] local transaction null:327 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:52,588 ERROR (testng-RepeatableReadLockTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Method testUpdateDoesntBlockRead(org.infinispan.api.mvcc.repeatable_read.RepeatableReadLockTest) threw an exception
java.lang.AssertionError: Stale locks exist! NumLocksHeld is 1 and lock info is org.infinispan.util.concurrent.locks.containers.OwnableReentrantPerEntryLockContainer@522dc2b4
	at org.infinispan.api.mvcc.LockAssert.assertNoLocks(LockAssert.java:48)
	at org.infinispan.api.mvcc.LockTestBase.assertNoLocks(LockTestBase.java:102)
	at org.infinispan.api.mvcc.LockTestBase.testUpdateDoesntBlockRead(LockTestBase.java:279)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:52,588 ERROR (testng-RepeatableReadLockTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test failed testUpdateDoesntBlockRead(org.infinispan.api.mvcc.repeatable_read.RepeatableReadLockTest)
java.lang.AssertionError: Stale locks exist! NumLocksHeld is 1 and lock info is org.infinispan.util.concurrent.locks.containers.OwnableReentrantPerEntryLockContainer@522dc2b4
	at org.infinispan.api.mvcc.LockAssert.assertNoLocks(LockAssert.java:48)
	at org.infinispan.api.mvcc.LockTestBase.assertNoLocks(LockTestBase.java:102)
	at org.infinispan.api.mvcc.LockTestBase.testUpdateDoesntBlockRead(LockTestBase.java:279)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:52,590 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.api.mvcc.LockTestBase] **** - STARTING TEARDOWN - ****
2013-01-31 13:15:52,590 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on null
2013-01-31 13:15:52,590 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 1 seconds.
2013-01-31 13:15:52,591 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:52,593 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:52,605 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:52,605 INFO  (testng-ConfigurationCloneTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:52,606 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 10
2013-01-31 13:15:52,606 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@3d4b95d1}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@2d58ebc7}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@28df6d13}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@64720f5b, PB=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@64720f5b}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@7c4e52e1, TO=org.infinispan.interceptors.EntryWrappingInterceptor@7c4e52e1, PB=org.infinispan.interceptors.EntryWrappingInterceptor@7c4e52e1}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:52,608 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.CacheImpl] Started cache ___defaultcache on null
2013-01-31 13:15:52,609 INFO  (testng-ConfigurationCloneTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testCloningAfterStart(org.infinispan.config.ConfigurationCloneTest)
2013-01-31 13:15:52,616 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:52,616 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:52,617 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 11
2013-01-31 13:15:52,617 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@244831c2}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@7fbaca29}
	>> org.infinispan.interceptors.TxInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@402e8b42}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@2fb8baf9, PB=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@2fb8baf9}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@8fb49e9, TO=org.infinispan.interceptors.EntryWrappingInterceptor@8fb49e9, PB=org.infinispan.interceptors.EntryWrappingInterceptor@8fb49e9}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:52,618 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.CacheImpl] Started cache ___defaultcache on null
2013-01-31 13:15:52,618 INFO  (testng-ReadCommittedLockTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testWriteDoesntBlockRead(org.infinispan.api.mvcc.read_committed.ReadCommittedLockTest)
2013-01-31 13:15:52,619 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction DummyTransaction{xid=DummyXid{id=41}, status=0} is starting. check if switch is in progress...
2013-01-31 13:15:52,619 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-ReadCommittedLockTest] will wait until no switch is in progress
2013-01-31 13:15:52,619 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-ReadCommittedLockTest] no switch in progress. Moving on...
2013-01-31 13:15:52,619 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction DummyTransaction{xid=DummyXid{id=41}, status=0} will use 2PC while executing
2013-01-31 13:15:52,619 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction null:329 [DummyTransaction{xid=DummyXid{id=41}, status=7}] wants to commit
2013-01-31 13:15:52,619 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction null:329 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:52,619 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction DummyTransaction{xid=DummyXid{id=42}, status=0} is starting. check if switch is in progress...
2013-01-31 13:15:52,619 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-ReadCommittedLockTest] will wait until no switch is in progress
2013-01-31 13:15:52,619 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-ReadCommittedLockTest] no switch in progress. Moving on...
2013-01-31 13:15:52,619 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction DummyTransaction{xid=DummyXid{id=42}, status=0} will use 2PC while executing
2013-01-31 13:15:52,619 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction DummyTransaction{xid=DummyXid{id=43}, status=0} is starting. check if switch is in progress...
2013-01-31 13:15:52,619 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-ReadCommittedLockTest] will wait until no switch is in progress
2013-01-31 13:15:52,619 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-ReadCommittedLockTest] no switch in progress. Moving on...
2013-01-31 13:15:52,619 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction DummyTransaction{xid=DummyXid{id=43}, status=0} will use 2PC while executing
2013-01-31 13:15:52,620 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction null:330 [DummyTransaction{xid=DummyXid{id=42}, status=7}] wants to commit
2013-01-31 13:15:52,620 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction null:330 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:52,620 ERROR (testng-ReadCommittedLockTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Method testWriteDoesntBlockRead(org.infinispan.api.mvcc.read_committed.ReadCommittedLockTest) threw an exception
java.lang.AssertionError: Stale locks exist! NumLocksHeld is 2 and lock info is org.infinispan.util.concurrent.locks.containers.OwnableReentrantPerEntryLockContainer@3fd313a8
	at org.infinispan.api.mvcc.LockAssert.assertNoLocks(LockAssert.java:48)
	at org.infinispan.api.mvcc.LockTestBase.assertNoLocks(LockTestBase.java:102)
	at org.infinispan.api.mvcc.LockTestBase.testWriteDoesntBlockRead(LockTestBase.java:248)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:52,622 ERROR (testng-ReadCommittedLockTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test failed testWriteDoesntBlockRead(org.infinispan.api.mvcc.read_committed.ReadCommittedLockTest)
java.lang.AssertionError: Stale locks exist! NumLocksHeld is 2 and lock info is org.infinispan.util.concurrent.locks.containers.OwnableReentrantPerEntryLockContainer@3fd313a8
	at org.infinispan.api.mvcc.LockAssert.assertNoLocks(LockAssert.java:48)
	at org.infinispan.api.mvcc.LockTestBase.assertNoLocks(LockTestBase.java:102)
	at org.infinispan.api.mvcc.LockTestBase.testWriteDoesntBlockRead(LockTestBase.java:248)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:52,625 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.api.mvcc.LockTestBase] **** - STARTING TEARDOWN - ****
2013-01-31 13:15:52,625 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on null
2013-01-31 13:15:52,626 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 1 seconds.
2013-01-31 13:15:52,630 DEBUG (testng-KeyAffinityServiceTest) [org.jgroups.stack.Configurator] set property TCP.diagnostics_addr to default value /224.0.75.75
2013-01-31 13:15:52,660 DEBUG (testng-KeyAffinityServiceTest) [org.jgroups.protocols.FRAG2] received CONFIG event: {bind_addr=/127.0.0.1}
2013-01-31 13:15:52,674 DEBUG (testng-KeyAffinityServiceTest) [org.jgroups.protocols.pbcast.GMS] address=KeyAffinityServiceTest-NodeA-61608, cluster=ISPN, physical address=127.0.0.1:8200
2013-01-31 13:15:52,675 DEBUG (testng-KeyAffinityServiceTest) [org.jgroups.protocols.pbcast.NAKACK2] 
[KeyAffinityServiceTest-NodeA-61608 setDigest()]
existing digest:  []
new digest:       KeyAffinityServiceTest-NodeA-61608: [0 (0)]
resulting digest: KeyAffinityServiceTest-NodeA-61608: [0 (0)]
2013-01-31 13:15:52,675 DEBUG (testng-KeyAffinityServiceTest) [org.jgroups.protocols.pbcast.GMS] KeyAffinityServiceTest-NodeA-61608: installing view [KeyAffinityServiceTest-NodeA-61608|0] [KeyAffinityServiceTest-NodeA-61608]
2013-01-31 13:15:52,676 DEBUG (testng-KeyAffinityServiceTest) [org.jgroups.protocols.pbcast.STABLE] resuming message garbage collection
2013-01-31 13:15:52,676 DEBUG (testng-KeyAffinityServiceTest) [org.jgroups.protocols.pbcast.STABLE] [ergonomics] setting max_bytes to 400KB (1 members)
2013-01-31 13:15:52,676 DEBUG (testng-KeyAffinityServiceTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] New view accepted: [KeyAffinityServiceTest-NodeA-61608|0] [KeyAffinityServiceTest-NodeA-61608]
2013-01-31 13:15:52,676 INFO  (testng-KeyAffinityServiceTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000094: Received new cluster view: [KeyAffinityServiceTest-NodeA-61608|0] [KeyAffinityServiceTest-NodeA-61608]
2013-01-31 13:15:52,678 DEBUG (testng-KeyAffinityServiceTest) [org.jgroups.protocols.pbcast.STABLE] resuming message garbage collection
2013-01-31 13:15:52,678 DEBUG (testng-KeyAffinityServiceTest) [org.jgroups.protocols.pbcast.GMS] created group (first member). My view is [KeyAffinityServiceTest-NodeA-61608|0], impl is org.jgroups.protocols.pbcast.CoordGmsImpl
2013-01-31 13:15:52,678 INFO  (testng-KeyAffinityServiceTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000079: Cache local address is KeyAffinityServiceTest-NodeA-61608, physical addresses are [127.0.0.1:8200]
2013-01-31 13:15:52,678 DEBUG (testng-KeyAffinityServiceTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] Waiting on view being accepted
2013-01-31 13:15:52,678 WARN  (testng-FilteredKeyAffinityServiceTest) [org.jgroups.stack.Configurator] [JGRP00013] TP.discard_incompatible_packets has been deprecated: incompatible packets are discarded anyway
2013-01-31 13:15:52,706 DEBUG (testng-KeyAffinityServiceTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:52,707 DEBUG (testng-KeyAffinityServiceTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:52,708 DEBUG (testng-KeyAffinityServiceTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:52,708 INFO  (testng-KeyAffinityServiceTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:52,710 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:52,711 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:52,711 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:52,712 INFO  (testng-ConfigurationCloneTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:52,712 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 10
2013-01-31 13:15:52,712 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@494602d}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@29362cb4}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@23b0f28f}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@36049c97, PB=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@36049c97}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@68c49935, TO=org.infinispan.interceptors.EntryWrappingInterceptor@68c49935, PB=org.infinispan.interceptors.EntryWrappingInterceptor@68c49935}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:52,712 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.CacheImpl] Started cache default on null
2013-01-31 13:15:52,713 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.configuration.cache.EvictionConfigurationBuilder] Max entries configured (2147483647) without eviction strategy. Eviction strategy overriden to LIRS
2013-01-31 13:15:52,714 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:52,715 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:52,715 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:52,716 INFO  (testng-ConfigurationCloneTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:52,718 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 10
2013-01-31 13:15:52,718 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@43269c4f}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@1be028fa}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@19a24362}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@6bf5e413, PB=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@6bf5e413}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@5c50d2c4, TO=org.infinispan.interceptors.EntryWrappingInterceptor@5c50d2c4, PB=org.infinispan.interceptors.EntryWrappingInterceptor@5c50d2c4}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:52,719 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.CacheImpl] Started cache testCloningAfterStart-default on null
2013-01-31 13:15:52,719 INFO  (testng-ConfigurationCloneTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testCloningAfterStart(org.infinispan.config.ConfigurationCloneTest).
2013-01-31 13:15:52,719 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'default' on a non-clustered cache manager
2013-01-31 13:15:52,719 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == []
2013-01-31 13:15:52,719 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:52,719 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:52,719 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:52,719 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'testCloningAfterStart-default' on a non-clustered cache manager
2013-01-31 13:15:52,719 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == []
2013-01-31 13:15:52,719 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:52,719 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:52,720 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:52,720 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] Cleaning data for cache '___defaultcache' on a non-clustered cache manager
2013-01-31 13:15:52,720 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == []
2013-01-31 13:15:52,720 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:52,720 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:52,720 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:52,721 INFO  (testng-ConfigurationCloneTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testCloningBeforeStart(org.infinispan.config.ConfigurationCloneTest)
2013-01-31 13:15:52,722 DEBUG (testng-KeyAffinityServiceTest) [org.infinispan.transaction.TransactionTable] Min view id set to 0
2013-01-31 13:15:52,722 DEBUG (testng-KeyAffinityServiceTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 10
2013-01-31 13:15:52,722 DEBUG (testng-KeyAffinityServiceTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.StateTransferLockInterceptor@269ad66e, TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@7f73e38e, PB=org.infinispan.interceptors.StateTransferLockInterceptor@269ad66e}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@1160c101}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@671f3190}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@30ef19d4, PB=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@30ef19d4}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@2188c665, TO=org.infinispan.interceptors.EntryWrappingInterceptor@2188c665, PB=org.infinispan.interceptors.EntryWrappingInterceptor@2188c665}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.DistributionInterceptor@1a992216, TO=org.infinispan.interceptors.totalorder.TotalOrderDistributionInterceptor@3b8cdffe, PB=org.infinispan.interceptors.DistributionInterceptor@1a992216}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:52,722 DEBUG (testng-KeyAffinityServiceTest) [org.infinispan.distribution.ch.DefaultConsistentHash] Using 1 virtualNodes to initialize consistent hash wheel 
2013-01-31 13:15:52,722 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.configuration.cache.EvictionConfigurationBuilder] Max entries configured (2147483647) without eviction strategy. Eviction strategy overriden to LIRS
2013-01-31 13:15:52,722 DEBUG (testng-KeyAffinityServiceTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Setting configuration tunned parameters
2013-01-31 13:15:52,722 DEBUG (testng-KeyAffinityServiceTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Configuration State responses are {}
2013-01-31 13:15:52,722 DEBUG (testng-KeyAffinityServiceTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] No Configuration State found in cluster
2013-01-31 13:15:52,723 DEBUG (testng-KeyAffinityServiceTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] No State found. Using original configuration parameters
2013-01-31 13:15:52,723 DEBUG (testng-KeyAffinityServiceTest) [org.infinispan.cacheviews.CacheViewsManagerImpl] dist: Node KeyAffinityServiceTest-NodeA-61608 is joining
2013-01-31 13:15:52,723 DEBUG (CacheViewInstaller-1,KeyAffinityServiceTest-NodeA-61608) [org.infinispan.cacheviews.CacheViewsManagerImpl] Installing new view CacheView{viewId=1, members=[KeyAffinityServiceTest-NodeA-61608]} for cache dist
2013-01-31 13:15:52,728 DEBUG (transport-thread-21) [org.infinispan.distribution.ch.DefaultConsistentHash] Using 1 virtualNodes to initialize consistent hash wheel 
2013-01-31 13:15:52,728 DEBUG (transport-thread-21) [org.infinispan.statetransfer.DistributedStateTransferTask] Commencing rehash 1 on node: KeyAffinityServiceTest-NodeA-61608. Before start, data container had 0 entries
2013-01-31 13:15:52,729 DEBUG (transport-thread-21) [org.infinispan.statetransfer.StateTransferLockImpl] Blocking new write commands for cache view 1
2013-01-31 13:15:52,729 DEBUG (CacheViewInstaller-1,KeyAffinityServiceTest-NodeA-61608) [org.infinispan.cacheviews.CacheViewsManagerImpl] dist: Committing cache view CacheView{viewId=1, members=[KeyAffinityServiceTest-NodeA-61608]}
2013-01-31 13:15:52,729 DEBUG (CacheViewInstaller-1,KeyAffinityServiceTest-NodeA-61608) [org.infinispan.statetransfer.BaseStateTransferTask] Node KeyAffinityServiceTest-NodeA-61608 completed state transfer for view 1 in 0 milliseconds!
2013-01-31 13:15:52,729 DEBUG (CacheViewInstaller-1,KeyAffinityServiceTest-NodeA-61608) [org.infinispan.statetransfer.StateTransferLockImpl] Unblocking write commands for cache view 1
2013-01-31 13:15:52,729 DEBUG (CacheViewInstaller-1,KeyAffinityServiceTest-NodeA-61608) [org.infinispan.cacheviews.CacheViewsManagerImpl] Successfully installed view CacheView{viewId=1, members=[KeyAffinityServiceTest-NodeA-61608]} for cache dist
2013-01-31 13:15:52,731 DEBUG (testng-KeyAffinityServiceTest) [org.infinispan.CacheImpl] Started cache dist on KeyAffinityServiceTest-NodeA-61608
2013-01-31 13:15:52,744 DEBUG (testng-FilteredKeyAffinityServiceTest) [org.jgroups.stack.Configurator] set property TCP.diagnostics_addr to default value /224.0.75.75
2013-01-31 13:15:52,749 DEBUG (testng-KeyAffinityServiceTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:52,756 DEBUG (testng-KeyAffinityServiceTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:52,757 DEBUG (testng-KeyAffinityServiceTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:52,758 INFO  (testng-KeyAffinityServiceTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000078: Starting JGroups Channel
2013-01-31 13:15:52,762 DEBUG (testng-FilteredKeyAffinityServiceTest) [org.jgroups.protocols.FRAG2] received CONFIG event: {bind_addr=/127.0.0.1}
2013-01-31 13:15:52,787 DEBUG (testng-FilteredKeyAffinityServiceTest) [org.jgroups.protocols.pbcast.GMS] address=FilteredKeyAffinityServiceTest-NodeA-2324, cluster=ISPN, physical address=127.0.0.1:8250
2013-01-31 13:15:52,788 DEBUG (testng-FilteredKeyAffinityServiceTest) [org.jgroups.protocols.pbcast.NAKACK2] 
[FilteredKeyAffinityServiceTest-NodeA-2324 setDigest()]
existing digest:  []
new digest:       FilteredKeyAffinityServiceTest-NodeA-2324: [0 (0)]
resulting digest: FilteredKeyAffinityServiceTest-NodeA-2324: [0 (0)]
2013-01-31 13:15:52,791 DEBUG (testng-FilteredKeyAffinityServiceTest) [org.jgroups.protocols.pbcast.GMS] FilteredKeyAffinityServiceTest-NodeA-2324: installing view [FilteredKeyAffinityServiceTest-NodeA-2324|0] [FilteredKeyAffinityServiceTest-NodeA-2324]
2013-01-31 13:15:52,789 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:52,791 DEBUG (testng-FilteredKeyAffinityServiceTest) [org.jgroups.protocols.pbcast.STABLE] resuming message garbage collection
2013-01-31 13:15:52,792 DEBUG (testng-FilteredKeyAffinityServiceTest) [org.jgroups.protocols.pbcast.STABLE] [ergonomics] setting max_bytes to 400KB (1 members)
2013-01-31 13:15:52,792 DEBUG (testng-FilteredKeyAffinityServiceTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] New view accepted: [FilteredKeyAffinityServiceTest-NodeA-2324|0] [FilteredKeyAffinityServiceTest-NodeA-2324]
2013-01-31 13:15:52,792 INFO  (testng-FilteredKeyAffinityServiceTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000094: Received new cluster view: [FilteredKeyAffinityServiceTest-NodeA-2324|0] [FilteredKeyAffinityServiceTest-NodeA-2324]
2013-01-31 13:15:52,794 DEBUG (testng-FilteredKeyAffinityServiceTest) [org.jgroups.protocols.pbcast.STABLE] resuming message garbage collection
2013-01-31 13:15:52,794 DEBUG (testng-FilteredKeyAffinityServiceTest) [org.jgroups.protocols.pbcast.GMS] created group (first member). My view is [FilteredKeyAffinityServiceTest-NodeA-2324|0], impl is org.jgroups.protocols.pbcast.CoordGmsImpl
2013-01-31 13:15:52,794 INFO  (testng-FilteredKeyAffinityServiceTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000079: Cache local address is FilteredKeyAffinityServiceTest-NodeA-2324, physical addresses are [127.0.0.1:8250]
2013-01-31 13:15:52,794 DEBUG (testng-FilteredKeyAffinityServiceTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] Waiting on view being accepted
2013-01-31 13:15:52,794 WARN  (testng-KeyAffinityServiceTest) [org.jgroups.stack.Configurator] [JGRP00013] TP.discard_incompatible_packets has been deprecated: incompatible packets are discarded anyway
2013-01-31 13:15:52,812 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:52,813 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:52,813 DEBUG (testng-FilteredKeyAffinityServiceTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:52,814 INFO  (testng-ConfigurationCloneTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:52,814 DEBUG (testng-FilteredKeyAffinityServiceTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:52,814 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 10
2013-01-31 13:15:52,814 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@4374a298}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@1e5ecbc1}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@6192fb7a}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@78bc38a1, PB=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@78bc38a1}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@d2a0ff4, TO=org.infinispan.interceptors.EntryWrappingInterceptor@d2a0ff4, PB=org.infinispan.interceptors.EntryWrappingInterceptor@d2a0ff4}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:52,815 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.CacheImpl] Started cache testCloningBeforeStart-default on null
2013-01-31 13:15:52,815 INFO  (testng-ConfigurationCloneTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testCloningBeforeStart(org.infinispan.config.ConfigurationCloneTest).
2013-01-31 13:15:52,816 DEBUG (testng-FilteredKeyAffinityServiceTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:52,816 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'default' on a non-clustered cache manager
2013-01-31 13:15:52,816 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == []
2013-01-31 13:15:52,816 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:52,816 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:52,816 INFO  (testng-FilteredKeyAffinityServiceTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:52,816 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:52,816 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'testCloningAfterStart-default' on a non-clustered cache manager
2013-01-31 13:15:52,816 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == []
2013-01-31 13:15:52,816 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:52,816 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:52,816 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:52,816 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] Cleaning data for cache '___defaultcache' on a non-clustered cache manager
2013-01-31 13:15:52,816 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == []
2013-01-31 13:15:52,816 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:52,816 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:52,816 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:52,816 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'testCloningBeforeStart-default' on a non-clustered cache manager
2013-01-31 13:15:52,816 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == []
2013-01-31 13:15:52,817 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:52,817 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:52,817 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:52,817 INFO  (testng-ConfigurationCloneTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testDoubleCloning(org.infinispan.config.ConfigurationCloneTest)
2013-01-31 13:15:52,818 DEBUG (testng-FilteredKeyAffinityServiceTest) [org.infinispan.transaction.TransactionTable] Min view id set to 0
2013-01-31 13:15:52,818 DEBUG (testng-FilteredKeyAffinityServiceTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 10
2013-01-31 13:15:52,818 DEBUG (testng-FilteredKeyAffinityServiceTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.StateTransferLockInterceptor@507f3917, TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@507d3e4a, PB=org.infinispan.interceptors.StateTransferLockInterceptor@507f3917}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@4e84958e}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@6276c5e7}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@63baf331, PB=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@63baf331}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@6b4491e, TO=org.infinispan.interceptors.EntryWrappingInterceptor@6b4491e, PB=org.infinispan.interceptors.EntryWrappingInterceptor@6b4491e}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.DistributionInterceptor@262c5402, TO=org.infinispan.interceptors.totalorder.TotalOrderDistributionInterceptor@283f62e2, PB=org.infinispan.interceptors.DistributionInterceptor@262c5402}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:52,818 DEBUG (testng-FilteredKeyAffinityServiceTest) [org.infinispan.distribution.ch.DefaultConsistentHash] Using 1 virtualNodes to initialize consistent hash wheel 
2013-01-31 13:15:52,818 DEBUG (testng-FilteredKeyAffinityServiceTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Setting configuration tunned parameters
2013-01-31 13:15:52,818 DEBUG (testng-FilteredKeyAffinityServiceTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Configuration State responses are {}
2013-01-31 13:15:52,818 DEBUG (testng-FilteredKeyAffinityServiceTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] No Configuration State found in cluster
2013-01-31 13:15:52,818 DEBUG (testng-FilteredKeyAffinityServiceTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] No State found. Using original configuration parameters
2013-01-31 13:15:52,818 DEBUG (testng-FilteredKeyAffinityServiceTest) [org.infinispan.cacheviews.CacheViewsManagerImpl] dist: Node FilteredKeyAffinityServiceTest-NodeA-2324 is joining
2013-01-31 13:15:52,835 DEBUG (CacheViewInstaller-1,FilteredKeyAffinityServiceTest-NodeA-2324) [org.infinispan.cacheviews.CacheViewsManagerImpl] Installing new view CacheView{viewId=1, members=[FilteredKeyAffinityServiceTest-NodeA-2324]} for cache dist
2013-01-31 13:15:52,837 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.configuration.cache.EvictionConfigurationBuilder] Max entries configured (2147483647) without eviction strategy. Eviction strategy overriden to LIRS
2013-01-31 13:15:52,839 DEBUG (transport-thread-23) [org.infinispan.distribution.ch.DefaultConsistentHash] Using 1 virtualNodes to initialize consistent hash wheel 
2013-01-31 13:15:52,840 DEBUG (transport-thread-23) [org.infinispan.statetransfer.DistributedStateTransferTask] Commencing rehash 1 on node: FilteredKeyAffinityServiceTest-NodeA-2324. Before start, data container had 0 entries
2013-01-31 13:15:52,840 DEBUG (transport-thread-23) [org.infinispan.statetransfer.StateTransferLockImpl] Blocking new write commands for cache view 1
2013-01-31 13:15:52,841 DEBUG (CacheViewInstaller-1,FilteredKeyAffinityServiceTest-NodeA-2324) [org.infinispan.cacheviews.CacheViewsManagerImpl] dist: Committing cache view CacheView{viewId=1, members=[FilteredKeyAffinityServiceTest-NodeA-2324]}
2013-01-31 13:15:52,842 DEBUG (CacheViewInstaller-1,FilteredKeyAffinityServiceTest-NodeA-2324) [org.infinispan.statetransfer.BaseStateTransferTask] Node FilteredKeyAffinityServiceTest-NodeA-2324 completed state transfer for view 1 in 1 milliseconds!
2013-01-31 13:15:52,842 DEBUG (CacheViewInstaller-1,FilteredKeyAffinityServiceTest-NodeA-2324) [org.infinispan.statetransfer.StateTransferLockImpl] Unblocking write commands for cache view 1
2013-01-31 13:15:52,842 DEBUG (CacheViewInstaller-1,FilteredKeyAffinityServiceTest-NodeA-2324) [org.infinispan.cacheviews.CacheViewsManagerImpl] Successfully installed view CacheView{viewId=1, members=[FilteredKeyAffinityServiceTest-NodeA-2324]} for cache dist
2013-01-31 13:15:52,842 DEBUG (testng-FilteredKeyAffinityServiceTest) [org.infinispan.CacheImpl] Started cache dist on FilteredKeyAffinityServiceTest-NodeA-2324
2013-01-31 13:15:52,843 DEBUG (testng-FilteredKeyAffinityServiceTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:52,853 DEBUG (testng-FilteredKeyAffinityServiceTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:52,853 DEBUG (testng-FilteredKeyAffinityServiceTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:52,854 INFO  (testng-FilteredKeyAffinityServiceTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000078: Starting JGroups Channel
2013-01-31 13:15:52,868 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:52,868 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:52,871 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:52,871 INFO  (testng-ConfigurationCloneTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:52,872 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 10
2013-01-31 13:15:52,872 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@11bc2a04}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@586a75b4}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@3555a9c5}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@afcdfde, PB=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@afcdfde}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@5fcd6d74, TO=org.infinispan.interceptors.EntryWrappingInterceptor@5fcd6d74, PB=org.infinispan.interceptors.EntryWrappingInterceptor@5fcd6d74}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:52,872 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.CacheImpl] Started cache testDoubleCloning-new-default on null
2013-01-31 13:15:52,907 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:52,908 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:52,909 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:52,909 INFO  (testng-ConfigurationCloneTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:52,909 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 10
2013-01-31 13:15:52,909 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@40fb427c}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@2fc9fc38}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@75cdd90a}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@1d645bf2, PB=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@1d645bf2}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@27d07bf1, TO=org.infinispan.interceptors.EntryWrappingInterceptor@27d07bf1, PB=org.infinispan.interceptors.EntryWrappingInterceptor@27d07bf1}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:52,910 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.CacheImpl] Started cache testDoubleCloning-default on null
2013-01-31 13:15:52,910 INFO  (testng-ConfigurationCloneTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testDoubleCloning(org.infinispan.config.ConfigurationCloneTest).
2013-01-31 13:15:52,910 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'testDoubleCloning-new-default' on a non-clustered cache manager
2013-01-31 13:15:52,910 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == []
2013-01-31 13:15:52,910 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:52,910 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:52,910 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:52,911 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'testDoubleCloning-default' on a non-clustered cache manager
2013-01-31 13:15:52,911 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == []
2013-01-31 13:15:52,911 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:52,911 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:52,911 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:52,911 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'default' on a non-clustered cache manager
2013-01-31 13:15:52,911 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == []
2013-01-31 13:15:52,911 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:52,911 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:52,911 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:52,911 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'testCloningAfterStart-default' on a non-clustered cache manager
2013-01-31 13:15:52,911 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == []
2013-01-31 13:15:52,911 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:52,911 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:52,911 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:52,911 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] Cleaning data for cache '___defaultcache' on a non-clustered cache manager
2013-01-31 13:15:52,911 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == []
2013-01-31 13:15:52,911 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:52,911 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:52,911 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:52,911 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'testCloningBeforeStart-default' on a non-clustered cache manager
2013-01-31 13:15:52,911 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == []
2013-01-31 13:15:52,911 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:52,912 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:52,912 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:52,912 INFO  (testng-ConfigurationCloneTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testGlobalConfigurationCloning(org.infinispan.config.ConfigurationCloneTest)
2013-01-31 13:15:52,913 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:52,917 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:52,917 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:52,917 INFO  (testng-ConfigurationCloneTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testGlobalConfigurationCloning(org.infinispan.config.ConfigurationCloneTest).
2013-01-31 13:15:52,918 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'testDoubleCloning-new-default' on a non-clustered cache manager
2013-01-31 13:15:52,918 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == []
2013-01-31 13:15:52,918 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:52,918 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:52,918 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:52,918 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'testDoubleCloning-default' on a non-clustered cache manager
2013-01-31 13:15:52,918 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == []
2013-01-31 13:15:52,918 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:52,918 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:52,918 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:52,918 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'default' on a non-clustered cache manager
2013-01-31 13:15:52,918 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == []
2013-01-31 13:15:52,918 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:52,918 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:52,918 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:52,918 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'testCloningAfterStart-default' on a non-clustered cache manager
2013-01-31 13:15:52,918 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == []
2013-01-31 13:15:52,918 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:52,919 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:52,919 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:52,919 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] Cleaning data for cache '___defaultcache' on a non-clustered cache manager
2013-01-31 13:15:52,919 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == []
2013-01-31 13:15:52,919 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:52,919 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:52,919 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:52,919 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'testCloningBeforeStart-default' on a non-clustered cache manager
2013-01-31 13:15:52,919 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == []
2013-01-31 13:15:52,919 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:52,919 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:52,919 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:52,919 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.CacheImpl] Stopping cache testDoubleCloning-new-default on null
2013-01-31 13:15:52,920 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 30 seconds.
2013-01-31 13:15:52,920 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:52,920 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.CacheImpl] Stopping cache testDoubleCloning-default on null
2013-01-31 13:15:52,920 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 30 seconds.
2013-01-31 13:15:52,920 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:52,920 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.CacheImpl] Stopping cache default on null
2013-01-31 13:15:52,920 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 30 seconds.
2013-01-31 13:15:52,920 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:52,920 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.CacheImpl] Stopping cache testCloningAfterStart-default on null
2013-01-31 13:15:52,921 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 30 seconds.
2013-01-31 13:15:52,921 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:52,921 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on null
2013-01-31 13:15:52,921 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 30 seconds.
2013-01-31 13:15:52,921 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:52,921 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.CacheImpl] Stopping cache testCloningBeforeStart-default on null
2013-01-31 13:15:52,921 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 30 seconds.
2013-01-31 13:15:52,921 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:52,921 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.manager.DefaultCacheManager] Stopping cache manager ISPN on null
2013-01-31 13:15:52,921 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.CacheImpl] Stopping cache testCloningBeforeStart-default on null
2013-01-31 13:15:52,921 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.CacheImpl] Stopping cache testDoubleCloning-new-default on null
2013-01-31 13:15:52,921 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.CacheImpl] Stopping cache testDoubleCloning-default on null
2013-01-31 13:15:52,921 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.CacheImpl] Stopping cache testCloningAfterStart-default on null
2013-01-31 13:15:52,922 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.CacheImpl] Stopping cache default on null
2013-01-31 13:15:52,922 DEBUG (testng-ConfigurationCloneTest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on null
2013-01-31 13:15:52,923 INFO  (testng-ConfigurationOverridesTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testConfigOverrides(org.infinispan.config.ConfigurationOverridesTest)
2013-01-31 13:15:52,924 DEBUG (testng-ConfigurationOverridesTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:52,929 DEBUG (testng-KeyAffinityServiceTest) [org.jgroups.stack.Configurator] set property TCP.diagnostics_addr to default value /224.0.75.75
2013-01-31 13:15:52,930 DEBUG (testng-ConfigurationOverridesTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:52,930 DEBUG (testng-ConfigurationOverridesTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:52,941 DEBUG (testng-KeyAffinityServiceTest) [org.jgroups.protocols.FRAG2] received CONFIG event: {bind_addr=/127.0.0.1}
2013-01-31 13:15:52,943 DEBUG (testng-KeyAffinityServiceTest) [org.jgroups.protocols.pbcast.GMS] address=KeyAffinityServiceTest-NodeB-45659, cluster=ISPN, physical address=127.0.0.1:8201
2013-01-31 13:15:52,969 DEBUG (testng-KeyAffinityServiceTest) [org.jgroups.protocols.pbcast.GMS] election results: {KeyAffinityServiceTest-NodeA-61608=1}
2013-01-31 13:15:52,973 WARN  (testng-CacheClusterJoinTest) [org.jgroups.stack.Configurator] [JGRP00013] TP.discard_incompatible_packets has been deprecated: incompatible packets are discarded anyway
2013-01-31 13:15:52,973 DEBUG (testng-KeyAffinityServiceTest) [org.jgroups.protocols.pbcast.GMS] sending JOIN(KeyAffinityServiceTest-NodeB-45659) to KeyAffinityServiceTest-NodeA-61608
2013-01-31 13:15:52,996 DEBUG (ForkThread-AtomicHashMapConcurrencyTest-438163608) [org.infinispan.util.concurrent.locks.LockManagerImpl] Failed to acquire lock key, owner is GlobalTransaction:<null>:322:local
2013-01-31 13:15:52,996 DEBUG (ForkThread-AtomicHashMapConcurrencyTest-438163608) [org.infinispan.util.concurrent.locks.LockManagerImpl] This transaction (GlobalTransaction:<null>:324:local) already owned locks []
2013-01-31 13:15:52,997 ERROR (ForkThread-AtomicHashMapConcurrencyTest-438163608) [org.infinispan.interceptors.InvocationContextInterceptor] ISPN000136: Execution error
java.lang.NullPointerException
	at java.util.concurrent.ConcurrentHashMap.get(ConcurrentHashMap.java:768)
	at org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry.getProtocolById(ReconfigurableProtocolRegistry.java:83)
	at org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager.notifyLocalTransactionFinished(ReconfigurableReplicationManager.java:254)
	at org.infinispan.transaction.TransactionTable.removeLocalTransaction(TransactionTable.java:317)
	at org.infinispan.transaction.xa.XaTransactionTable.removeLocalTransaction(XaTransactionTable.java:70)
	at org.infinispan.interceptors.TxInterceptor.enlistWriteAndInvokeNext(TxInterceptor.java:294)
	at org.infinispan.interceptors.TxInterceptor.visitPutKeyValueCommand(TxInterceptor.java:225)
	at org.infinispan.commands.write.PutKeyValueCommand.acceptVisitor(PutKeyValueCommand.java:77)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitPutKeyValueCommand(AbstractVisitor.java:62)
	at org.infinispan.commands.write.PutKeyValueCommand.acceptVisitor(PutKeyValueCommand.java:77)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitPutKeyValueCommand(AbstractVisitor.java:62)
	at org.infinispan.commands.write.PutKeyValueCommand.acceptVisitor(PutKeyValueCommand.java:77)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitPutKeyValueCommand(AbstractVisitor.java:62)
	at org.infinispan.commands.write.PutKeyValueCommand.acceptVisitor(PutKeyValueCommand.java:77)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.BatchingInterceptor.handleDefault(BatchingInterceptor.java:86)
	at org.infinispan.commands.AbstractVisitor.visitPutKeyValueCommand(AbstractVisitor.java:62)
	at org.infinispan.commands.write.PutKeyValueCommand.acceptVisitor(PutKeyValueCommand.java:77)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.CacheImpl.executeCommandAndCommitIfNeeded(CacheImpl.java:1007)
	at org.infinispan.CacheImpl.put(CacheImpl.java:703)
	at org.infinispan.CacheImpl.put(CacheImpl.java:695)
	at org.infinispan.CacheSupport.put(CacheSupport.java:53)
	at org.infinispan.atomic.AtomicHashMapProxy.getDeltaMapForWrite(AtomicHashMapProxy.java:150)
	at org.infinispan.atomic.AtomicHashMapProxy.put(AtomicHashMapProxy.java:215)
	at org.infinispan.atomic.AtomicHashMapConcurrencyTest$2.run(AtomicHashMapConcurrencyTest.java:130)
	at org.infinispan.test.AbstractInfinispanTest$RunnableWrapper.run(AbstractInfinispanTest.java:112)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:52,999 DEBUG (ForkThread-AtomicHashMapConcurrencyTest-438163608) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [ForkThread-AtomicHashMapConcurrencyTest-438163608] local transaction null:324 [DummyTransaction{xid=DummyXid{id=37}, status=9}] wants to rollback
2013-01-31 13:15:52,999 ERROR (ForkThread-AtomicHashMapConcurrencyTest-438163608) [org.infinispan.atomic.AtomicHashMapConcurrencyTest] Unexpected error performing transaction
java.lang.NullPointerException
	at java.util.concurrent.ConcurrentHashMap.get(ConcurrentHashMap.java:768)
	at org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry.getProtocolById(ReconfigurableProtocolRegistry.java:83)
	at org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager.notifyLocalTransactionFinished(ReconfigurableReplicationManager.java:254)
	at org.infinispan.transaction.TransactionTable.removeLocalTransaction(TransactionTable.java:317)
	at org.infinispan.transaction.xa.XaTransactionTable.removeLocalTransaction(XaTransactionTable.java:70)
	at org.infinispan.interceptors.TxInterceptor.enlistWriteAndInvokeNext(TxInterceptor.java:294)
	at org.infinispan.interceptors.TxInterceptor.visitPutKeyValueCommand(TxInterceptor.java:225)
	at org.infinispan.commands.write.PutKeyValueCommand.acceptVisitor(PutKeyValueCommand.java:77)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitPutKeyValueCommand(AbstractVisitor.java:62)
	at org.infinispan.commands.write.PutKeyValueCommand.acceptVisitor(PutKeyValueCommand.java:77)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitPutKeyValueCommand(AbstractVisitor.java:62)
	at org.infinispan.commands.write.PutKeyValueCommand.acceptVisitor(PutKeyValueCommand.java:77)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitPutKeyValueCommand(AbstractVisitor.java:62)
	at org.infinispan.commands.write.PutKeyValueCommand.acceptVisitor(PutKeyValueCommand.java:77)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.BatchingInterceptor.handleDefault(BatchingInterceptor.java:86)
	at org.infinispan.commands.AbstractVisitor.visitPutKeyValueCommand(AbstractVisitor.java:62)
	at org.infinispan.commands.write.PutKeyValueCommand.acceptVisitor(PutKeyValueCommand.java:77)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.CacheImpl.executeCommandAndCommitIfNeeded(CacheImpl.java:1007)
	at org.infinispan.CacheImpl.put(CacheImpl.java:703)
	at org.infinispan.CacheImpl.put(CacheImpl.java:695)
	at org.infinispan.CacheSupport.put(CacheSupport.java:53)
	at org.infinispan.atomic.AtomicHashMapProxy.getDeltaMapForWrite(AtomicHashMapProxy.java:150)
	at org.infinispan.atomic.AtomicHashMapProxy.put(AtomicHashMapProxy.java:215)
	at org.infinispan.atomic.AtomicHashMapConcurrencyTest$2.run(AtomicHashMapConcurrencyTest.java:130)
	at org.infinispan.test.AbstractInfinispanTest$RunnableWrapper.run(AbstractInfinispanTest.java:112)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:53,053 DEBUG (testng-ConfigurationOverridesTest) [org.infinispan.manager.DefaultCacheManager] Stopping cache manager ISPN on null
2013-01-31 13:15:53,054 INFO  (testng-ConfigurationOverridesTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testConfigOverrides(org.infinispan.config.ConfigurationOverridesTest).
2013-01-31 13:15:53,066 DEBUG (testng-ConfigurationValidation2Test) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:53,076 DEBUG (testng-ConfigurationValidation2Test) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:53,077 DEBUG (testng-ConfigurationValidation2Test) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:53,078 INFO  (testng-ConfigurationValidation2Test) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000078: Starting JGroups Channel
2013-01-31 13:15:53,172 DEBUG (testng-CacheClusterJoinTest) [org.jgroups.stack.Configurator] set property TCP.diagnostics_addr to default value /224.0.75.75
2013-01-31 13:15:53,182 DEBUG (testng-CacheClusterJoinTest) [org.jgroups.protocols.FRAG2] received CONFIG event: {bind_addr=/127.0.0.1}
2013-01-31 13:15:53,183 DEBUG (testng-CacheClusterJoinTest) [org.jgroups.protocols.pbcast.GMS] address=CacheClusterJoinTest-NodeB-18666, cluster=ISPN, physical address=127.0.0.1:7901
2013-01-31 13:15:53,183 DEBUG (testng-CacheClusterJoinTest) [org.jgroups.protocols.pbcast.GMS] election results: {CacheClusterJoinTest-NodeA-8863=1}
2013-01-31 13:15:53,183 DEBUG (testng-CacheClusterJoinTest) [org.jgroups.protocols.pbcast.GMS] sending JOIN(CacheClusterJoinTest-NodeB-18666) to CacheClusterJoinTest-NodeA-8863
2013-01-31 13:15:53,214 DEBUG (ViewHandler,ISPN,KeyAffinityServiceTest-NodeA-61608) [org.jgroups.protocols.pbcast.STABLE] suspending message garbage collection
2013-01-31 13:15:53,215 DEBUG (ViewHandler,ISPN,KeyAffinityServiceTest-NodeA-61608) [org.jgroups.protocols.pbcast.STABLE] resume task started, max_suspend_time=33000
2013-01-31 13:15:53,220 WARN  (testng-MixedModeTest) [org.jgroups.stack.Configurator] [JGRP00013] TP.discard_incompatible_packets has been deprecated: incompatible packets are discarded anyway
2013-01-31 13:15:53,238 DEBUG (ViewHandler,ISPN,CacheClusterJoinTest-NodeA-8863) [org.jgroups.protocols.pbcast.STABLE] suspending message garbage collection
2013-01-31 13:15:53,238 DEBUG (ViewHandler,ISPN,CacheClusterJoinTest-NodeA-8863) [org.jgroups.protocols.pbcast.STABLE] resume task started, max_suspend_time=33000
2013-01-31 13:15:53,259 DEBUG (Incoming-1,ISPN,KeyAffinityServiceTest-NodeA-61608) [org.jgroups.protocols.pbcast.NAKACK2] 
[KeyAffinityServiceTest-NodeA-61608 setDigest()]
existing digest:  KeyAffinityServiceTest-NodeA-61608: [1 (1)]
new digest:       KeyAffinityServiceTest-NodeA-61608: [0 (0)], KeyAffinityServiceTest-NodeB-45659: [0 (0)]
resulting digest: KeyAffinityServiceTest-NodeB-45659: [0 (0)], KeyAffinityServiceTest-NodeA-61608: [1 (1)]
2013-01-31 13:15:53,259 DEBUG (Incoming-1,ISPN,KeyAffinityServiceTest-NodeA-61608) [org.jgroups.protocols.pbcast.GMS] KeyAffinityServiceTest-NodeA-61608: installing view [KeyAffinityServiceTest-NodeA-61608|1] [KeyAffinityServiceTest-NodeA-61608, KeyAffinityServiceTest-NodeB-45659]
2013-01-31 13:15:53,260 DEBUG (Incoming-1,ISPN,CacheClusterJoinTest-NodeA-8863) [org.jgroups.protocols.pbcast.NAKACK2] 
[CacheClusterJoinTest-NodeA-8863 setDigest()]
existing digest:  CacheClusterJoinTest-NodeA-8863: [1 (1)]
new digest:       CacheClusterJoinTest-NodeA-8863: [0 (0)], CacheClusterJoinTest-NodeB-18666: [0 (0)]
resulting digest: CacheClusterJoinTest-NodeB-18666: [0 (0)], CacheClusterJoinTest-NodeA-8863: [1 (1)]
2013-01-31 13:15:53,260 DEBUG (Incoming-1,ISPN,CacheClusterJoinTest-NodeA-8863) [org.jgroups.protocols.pbcast.GMS] CacheClusterJoinTest-NodeA-8863: installing view [CacheClusterJoinTest-NodeA-8863|1] [CacheClusterJoinTest-NodeA-8863, CacheClusterJoinTest-NodeB-18666]
2013-01-31 13:15:53,260 DEBUG (Incoming-1,ISPN,KeyAffinityServiceTest-NodeA-61608) [org.jgroups.protocols.pbcast.STABLE] [ergonomics] setting max_bytes to 800KB (2 members)
2013-01-31 13:15:53,261 DEBUG (Incoming-1,ISPN,KeyAffinityServiceTest-NodeA-61608) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] New view accepted: [KeyAffinityServiceTest-NodeA-61608|1] [KeyAffinityServiceTest-NodeA-61608, KeyAffinityServiceTest-NodeB-45659]
2013-01-31 13:15:53,261 INFO  (Incoming-1,ISPN,KeyAffinityServiceTest-NodeA-61608) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000094: Received new cluster view: [KeyAffinityServiceTest-NodeA-61608|1] [KeyAffinityServiceTest-NodeA-61608, KeyAffinityServiceTest-NodeB-45659]
2013-01-31 13:15:53,261 DEBUG (Incoming-1,ISPN,CacheClusterJoinTest-NodeA-8863) [org.jgroups.protocols.pbcast.STABLE] [ergonomics] setting max_bytes to 800KB (2 members)
2013-01-31 13:15:53,263 DEBUG (Incoming-1,ISPN,CacheClusterJoinTest-NodeA-8863) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] New view accepted: [CacheClusterJoinTest-NodeA-8863|1] [CacheClusterJoinTest-NodeA-8863, CacheClusterJoinTest-NodeB-18666]
2013-01-31 13:15:53,263 INFO  (Incoming-1,ISPN,CacheClusterJoinTest-NodeA-8863) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000094: Received new cluster view: [CacheClusterJoinTest-NodeA-8863|1] [CacheClusterJoinTest-NodeA-8863, CacheClusterJoinTest-NodeB-18666]
2013-01-31 13:15:53,284 DEBUG (notification-thread-24) [org.infinispan.transaction.TransactionTable] View changed, recalculating minViewId
2013-01-31 13:15:53,286 DEBUG (testng-KeyAffinityServiceTest) [org.jgroups.protocols.pbcast.NAKACK2] 
[KeyAffinityServiceTest-NodeB-45659 setDigest()]
existing digest:  []
new digest:       KeyAffinityServiceTest-NodeA-61608: [0 (0)], KeyAffinityServiceTest-NodeB-45659: [0 (0)]
resulting digest: KeyAffinityServiceTest-NodeB-45659: [0 (0)], KeyAffinityServiceTest-NodeA-61608: [0 (0)]
2013-01-31 13:15:53,286 DEBUG (testng-KeyAffinityServiceTest) [org.jgroups.protocols.pbcast.GMS] KeyAffinityServiceTest-NodeB-45659: installing view [KeyAffinityServiceTest-NodeA-61608|1] [KeyAffinityServiceTest-NodeA-61608, KeyAffinityServiceTest-NodeB-45659]
2013-01-31 13:15:53,287 DEBUG (testng-KeyAffinityServiceTest) [org.jgroups.protocols.pbcast.STABLE] [ergonomics] setting max_bytes to 800KB (2 members)
2013-01-31 13:15:53,287 DEBUG (testng-KeyAffinityServiceTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] New view accepted: [KeyAffinityServiceTest-NodeA-61608|1] [KeyAffinityServiceTest-NodeA-61608, KeyAffinityServiceTest-NodeB-45659]
2013-01-31 13:15:53,287 INFO  (testng-KeyAffinityServiceTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000094: Received new cluster view: [KeyAffinityServiceTest-NodeA-61608|1] [KeyAffinityServiceTest-NodeA-61608, KeyAffinityServiceTest-NodeB-45659]
2013-01-31 13:15:53,288 INFO  (testng-KeyAffinityServiceTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000079: Cache local address is KeyAffinityServiceTest-NodeB-45659, physical addresses are [127.0.0.1:8201]
2013-01-31 13:15:53,288 DEBUG (testng-KeyAffinityServiceTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] Waiting on view being accepted
2013-01-31 13:15:53,288 DEBUG (ViewHandler,ISPN,KeyAffinityServiceTest-NodeA-61608) [org.jgroups.protocols.pbcast.STABLE] resuming message garbage collection
2013-01-31 13:15:53,308 DEBUG (notification-thread-25) [org.infinispan.transaction.TransactionTable] View changed, recalculating minViewId
2013-01-31 13:15:53,309 DEBUG (testng-CacheClusterJoinTest) [org.jgroups.protocols.pbcast.NAKACK2] 
[CacheClusterJoinTest-NodeB-18666 setDigest()]
existing digest:  []
new digest:       CacheClusterJoinTest-NodeA-8863: [0 (0)], CacheClusterJoinTest-NodeB-18666: [0 (0)]
resulting digest: CacheClusterJoinTest-NodeB-18666: [0 (0)], CacheClusterJoinTest-NodeA-8863: [0 (0)]
2013-01-31 13:15:53,309 DEBUG (testng-CacheClusterJoinTest) [org.jgroups.protocols.pbcast.GMS] CacheClusterJoinTest-NodeB-18666: installing view [CacheClusterJoinTest-NodeA-8863|1] [CacheClusterJoinTest-NodeA-8863, CacheClusterJoinTest-NodeB-18666]
2013-01-31 13:15:53,309 DEBUG (testng-CacheClusterJoinTest) [org.jgroups.protocols.pbcast.STABLE] [ergonomics] setting max_bytes to 800KB (2 members)
2013-01-31 13:15:53,309 DEBUG (testng-CacheClusterJoinTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] New view accepted: [CacheClusterJoinTest-NodeA-8863|1] [CacheClusterJoinTest-NodeA-8863, CacheClusterJoinTest-NodeB-18666]
2013-01-31 13:15:53,309 INFO  (testng-CacheClusterJoinTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000094: Received new cluster view: [CacheClusterJoinTest-NodeA-8863|1] [CacheClusterJoinTest-NodeA-8863, CacheClusterJoinTest-NodeB-18666]
2013-01-31 13:15:53,310 INFO  (testng-CacheClusterJoinTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000079: Cache local address is CacheClusterJoinTest-NodeB-18666, physical addresses are [127.0.0.1:7901]
2013-01-31 13:15:53,310 DEBUG (ViewHandler,ISPN,CacheClusterJoinTest-NodeA-8863) [org.jgroups.protocols.pbcast.STABLE] resuming message garbage collection
2013-01-31 13:15:53,310 DEBUG (testng-CacheClusterJoinTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] Waiting on view being accepted
2013-01-31 13:15:53,338 DEBUG (testng-KeyAffinityServiceTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:53,357 DEBUG (testng-KeyAffinityServiceTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:53,357 DEBUG (testng-CacheClusterJoinTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:53,373 DEBUG (testng-MixedModeTest) [org.jgroups.stack.Configurator] set property TCP.diagnostics_addr to default value /224.0.75.75
2013-01-31 13:15:53,382 DEBUG (testng-MixedModeTest) [org.jgroups.protocols.FRAG2] received CONFIG event: {bind_addr=/127.0.0.1}
2013-01-31 13:15:53,383 DEBUG (testng-CacheClusterJoinTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:53,384 DEBUG (testng-MixedModeTest) [org.jgroups.protocols.pbcast.GMS] address=MixedModeTest-NodeB-26468, cluster=ISPN, physical address=127.0.0.1:7951
2013-01-31 13:15:53,385 DEBUG (testng-CacheClusterJoinTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:53,386 INFO  (testng-CacheClusterJoinTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:53,387 WARN  (testng-ConcurrentStartupTest) [org.jgroups.stack.Configurator] [JGRP00013] TP.discard_incompatible_packets has been deprecated: incompatible packets are discarded anyway
2013-01-31 13:15:53,387 DEBUG (testng-CacheClusterJoinTest) [org.infinispan.transaction.TransactionTable] Min view id set to 1
2013-01-31 13:15:53,387 DEBUG (testng-CacheClusterJoinTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 10
2013-01-31 13:15:53,387 DEBUG (testng-CacheClusterJoinTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.StateTransferLockInterceptor@3e72bbe9, TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@5e8ede06, PB=org.infinispan.interceptors.StateTransferLockInterceptor@3e72bbe9}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@75928c69}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@68407dcc}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@6203118c, PB=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@6203118c}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@37753099, TO=org.infinispan.interceptors.EntryWrappingInterceptor@37753099, PB=org.infinispan.interceptors.EntryWrappingInterceptor@37753099}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.ReplicationInterceptor@6ec9a940, TO=org.infinispan.interceptors.totalorder.TotalOrderReplicationInterceptor@7986e192, PB=org.infinispan.interceptors.ReplicationInterceptor@6ec9a940}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:53,390 DEBUG (testng-KeyAffinityServiceTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:53,390 INFO  (testng-KeyAffinityServiceTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:53,397 DEBUG (testng-KeyAffinityServiceTest) [org.infinispan.transaction.TransactionTable] Min view id set to 1
2013-01-31 13:15:53,397 DEBUG (testng-KeyAffinityServiceTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 10
2013-01-31 13:15:53,398 DEBUG (testng-KeyAffinityServiceTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.StateTransferLockInterceptor@77dc0536, TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@dda59b4, PB=org.infinispan.interceptors.StateTransferLockInterceptor@77dc0536}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@7a373f86}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@412bb519}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@1c7e9dbc, PB=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@1c7e9dbc}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@3ca5b041, TO=org.infinispan.interceptors.EntryWrappingInterceptor@3ca5b041, PB=org.infinispan.interceptors.EntryWrappingInterceptor@3ca5b041}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.DistributionInterceptor@21d69a82, TO=org.infinispan.interceptors.totalorder.TotalOrderDistributionInterceptor@1039de29, PB=org.infinispan.interceptors.DistributionInterceptor@21d69a82}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:53,398 DEBUG (testng-KeyAffinityServiceTest) [org.infinispan.distribution.ch.DefaultConsistentHash] Using 1 virtualNodes to initialize consistent hash wheel 
2013-01-31 13:15:53,398 DEBUG (testng-KeyAffinityServiceTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Setting configuration tunned parameters
2013-01-31 13:15:53,398 DEBUG (testng-CacheClusterJoinTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Setting configuration tunned parameters
2013-01-31 13:15:53,399 DEBUG (testng-MixedModeTest) [org.jgroups.protocols.pbcast.GMS] election results: {MixedModeTest-NodeA-25015=1}
2013-01-31 13:15:53,399 DEBUG (testng-MixedModeTest) [org.jgroups.protocols.pbcast.GMS] sending JOIN(MixedModeTest-NodeB-26468) to MixedModeTest-NodeA-25015
2013-01-31 13:15:53,456 DEBUG (ViewHandler,ISPN,MixedModeTest-NodeA-25015) [org.jgroups.protocols.pbcast.STABLE] suspending message garbage collection
2013-01-31 13:15:53,456 DEBUG (ViewHandler,ISPN,MixedModeTest-NodeA-25015) [org.jgroups.protocols.pbcast.STABLE] resume task started, max_suspend_time=33000
2013-01-31 13:15:53,457 DEBUG (Incoming-1,ISPN,MixedModeTest-NodeA-25015) [org.jgroups.protocols.pbcast.NAKACK2] 
[MixedModeTest-NodeA-25015 setDigest()]
existing digest:  MixedModeTest-NodeA-25015: [1 (1)]
new digest:       MixedModeTest-NodeA-25015: [0 (0)], MixedModeTest-NodeB-26468: [0 (0)]
resulting digest: MixedModeTest-NodeA-25015: [1 (1)], MixedModeTest-NodeB-26468: [0 (0)]
2013-01-31 13:15:53,457 DEBUG (Incoming-1,ISPN,MixedModeTest-NodeA-25015) [org.jgroups.protocols.pbcast.GMS] MixedModeTest-NodeA-25015: installing view [MixedModeTest-NodeA-25015|1] [MixedModeTest-NodeA-25015, MixedModeTest-NodeB-26468]
2013-01-31 13:15:53,457 DEBUG (Incoming-1,ISPN,MixedModeTest-NodeA-25015) [org.jgroups.protocols.pbcast.STABLE] [ergonomics] setting max_bytes to 800KB (2 members)
2013-01-31 13:15:53,457 DEBUG (Incoming-1,ISPN,MixedModeTest-NodeA-25015) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] New view accepted: [MixedModeTest-NodeA-25015|1] [MixedModeTest-NodeA-25015, MixedModeTest-NodeB-26468]
2013-01-31 13:15:53,458 INFO  (Incoming-1,ISPN,MixedModeTest-NodeA-25015) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000094: Received new cluster view: [MixedModeTest-NodeA-25015|1] [MixedModeTest-NodeA-25015, MixedModeTest-NodeB-26468]
2013-01-31 13:15:53,460 DEBUG (notification-thread-26) [org.infinispan.transaction.TransactionTable] View changed, recalculating minViewId
2013-01-31 13:15:53,462 DEBUG (testng-MixedModeTest) [org.jgroups.protocols.pbcast.NAKACK2] 
[MixedModeTest-NodeB-26468 setDigest()]
existing digest:  []
new digest:       MixedModeTest-NodeA-25015: [0 (0)], MixedModeTest-NodeB-26468: [0 (0)]
resulting digest: MixedModeTest-NodeA-25015: [0 (0)], MixedModeTest-NodeB-26468: [0 (0)]
2013-01-31 13:15:53,462 DEBUG (testng-MixedModeTest) [org.jgroups.protocols.pbcast.GMS] MixedModeTest-NodeB-26468: installing view [MixedModeTest-NodeA-25015|1] [MixedModeTest-NodeA-25015, MixedModeTest-NodeB-26468]
2013-01-31 13:15:53,462 DEBUG (testng-MixedModeTest) [org.jgroups.protocols.pbcast.STABLE] [ergonomics] setting max_bytes to 800KB (2 members)
2013-01-31 13:15:53,462 DEBUG (testng-MixedModeTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] New view accepted: [MixedModeTest-NodeA-25015|1] [MixedModeTest-NodeA-25015, MixedModeTest-NodeB-26468]
2013-01-31 13:15:53,462 INFO  (testng-MixedModeTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000094: Received new cluster view: [MixedModeTest-NodeA-25015|1] [MixedModeTest-NodeA-25015, MixedModeTest-NodeB-26468]
2013-01-31 13:15:53,463 INFO  (testng-MixedModeTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000079: Cache local address is MixedModeTest-NodeB-26468, physical addresses are [127.0.0.1:7951]
2013-01-31 13:15:53,463 DEBUG (testng-MixedModeTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] Waiting on view being accepted
2013-01-31 13:15:53,464 DEBUG (ViewHandler,ISPN,MixedModeTest-NodeA-25015) [org.jgroups.protocols.pbcast.STABLE] resuming message garbage collection
2013-01-31 13:15:53,491 DEBUG (testng-ConcurrentStartupTest) [org.jgroups.stack.Configurator] set property TCP.diagnostics_addr to default value /224.0.75.75
2013-01-31 13:15:53,495 ERROR (testng-AtomicHashMapConcurrencyTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Method testConcurrentModifications(org.infinispan.atomic.AtomicHashMapConcurrencyTest) threw an exception
java.lang.AssertionError
	at org.infinispan.atomic.AtomicHashMapConcurrencyTest.testConcurrentModifications(AtomicHashMapConcurrencyTest.java:143)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:53,496 ERROR (testng-AtomicHashMapConcurrencyTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test failed testConcurrentModifications(org.infinispan.atomic.AtomicHashMapConcurrencyTest)
java.lang.AssertionError
	at org.infinispan.atomic.AtomicHashMapConcurrencyTest.testConcurrentModifications(AtomicHashMapConcurrencyTest.java:143)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:53,497 DEBUG (testng-AtomicHashMapConcurrencyTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AtomicHashMapConcurrencyTest] local transaction null:322 [DummyTransaction{xid=DummyXid{id=34}, status=9}] wants to rollback
2013-01-31 13:15:53,497 DEBUG (testng-AtomicHashMapConcurrencyTest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on null
2013-01-31 13:15:53,498 DEBUG (testng-AtomicHashMapConcurrencyTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 1 seconds.
2013-01-31 13:15:53,498 DEBUG (testng-AtomicHashMapConcurrencyTest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:53,498 DEBUG (testng-AtomicHashMapConcurrencyTest) [org.infinispan.manager.DefaultCacheManager] Stopping cache manager ISPN on null
2013-01-31 13:15:53,498 DEBUG (testng-AtomicHashMapConcurrencyTest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on null
2013-01-31 13:15:53,501 DEBUG (testng-AtomicHashMapConcurrencyTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:53,505 DEBUG (testng-AtomicHashMapConcurrencyTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:53,506 DEBUG (testng-AtomicHashMapConcurrencyTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:53,508 DEBUG (testng-ConcurrentStartupTest) [org.jgroups.protocols.FRAG2] received CONFIG event: {bind_addr=/127.0.0.1}
2013-01-31 13:15:53,509 DEBUG (testng-ConcurrentStartupTest) [org.jgroups.protocols.pbcast.GMS] address=ConcurrentStartupTest-NodeB-8774, cluster=ISPN, physical address=127.0.0.1:8001
2013-01-31 13:15:53,509 DEBUG (testng-ConcurrentStartupTest) [org.jgroups.protocols.pbcast.GMS] election results: {ConcurrentStartupTest-NodeA-26973=1}
2013-01-31 13:15:53,509 DEBUG (testng-ConcurrentStartupTest) [org.jgroups.protocols.pbcast.GMS] sending JOIN(ConcurrentStartupTest-NodeB-8774) to ConcurrentStartupTest-NodeA-26973
2013-01-31 13:15:53,521 INFO  (testng-AtomicHashMapConcurrencyTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:53,524 WARN  (testng-PutForExternalReadTest) [org.jgroups.stack.Configurator] [JGRP00013] TP.discard_incompatible_packets has been deprecated: incompatible packets are discarded anyway
2013-01-31 13:15:53,547 DEBUG (testng-AtomicHashMapConcurrencyTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:53,547 DEBUG (testng-AtomicHashMapConcurrencyTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:53,548 DEBUG (testng-MixedModeTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:53,548 DEBUG (testng-MixedModeTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:53,550 DEBUG (testng-AtomicHashMapConcurrencyTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:53,551 DEBUG (testng-AtomicHashMapConcurrencyTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 12
2013-01-31 13:15:53,552 DEBUG (testng-AtomicHashMapConcurrencyTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.BatchingInterceptor
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@701957d5}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@fd59a72}
	>> org.infinispan.interceptors.TxInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@108eba7d}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.PessimisticLockingInterceptor@a756d09, PB=org.infinispan.interceptors.locking.PessimisticLockingInterceptor@a756d09}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@23496f3c, TO=org.infinispan.interceptors.EntryWrappingInterceptor@23496f3c, PB=org.infinispan.interceptors.EntryWrappingInterceptor@23496f3c}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:53,552 DEBUG (testng-AtomicHashMapConcurrencyTest) [org.infinispan.CacheImpl] Started cache ___defaultcache on null
2013-01-31 13:15:53,552 INFO  (testng-AtomicHashMapConcurrencyTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testReadAfterTxStarted(org.infinispan.atomic.AtomicHashMapConcurrencyTest)
2013-01-31 13:15:53,553 DEBUG (testng-AtomicHashMapConcurrencyTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AtomicHashMapConcurrencyTest] local transaction DummyTransaction{xid=DummyXid{id=44}, status=0} is starting. check if switch is in progress...
2013-01-31 13:15:53,553 DEBUG (testng-AtomicHashMapConcurrencyTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-AtomicHashMapConcurrencyTest] will wait until no switch is in progress
2013-01-31 13:15:53,553 DEBUG (testng-AtomicHashMapConcurrencyTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-AtomicHashMapConcurrencyTest] no switch in progress. Moving on...
2013-01-31 13:15:53,565 DEBUG (testng-AtomicHashMapConcurrencyTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AtomicHashMapConcurrencyTest] local transaction DummyTransaction{xid=DummyXid{id=44}, status=0} will use 2PC while executing
2013-01-31 13:15:53,565 DEBUG (testng-AtomicHashMapConcurrencyTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AtomicHashMapConcurrencyTest] local transaction null:332 [DummyTransaction{xid=DummyXid{id=44}, status=7}] wants to commit
2013-01-31 13:15:53,565 DEBUG (testng-AtomicHashMapConcurrencyTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AtomicHashMapConcurrencyTest] local transaction null:332 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:53,565 DEBUG (testng-AtomicHashMapConcurrencyTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AtomicHashMapConcurrencyTest] local transaction DummyTransaction{xid=DummyXid{id=45}, status=0} is starting. check if switch is in progress...
2013-01-31 13:15:53,565 DEBUG (testng-AtomicHashMapConcurrencyTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-AtomicHashMapConcurrencyTest] will wait until no switch is in progress
2013-01-31 13:15:53,565 DEBUG (testng-AtomicHashMapConcurrencyTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-AtomicHashMapConcurrencyTest] no switch in progress. Moving on...
2013-01-31 13:15:53,565 DEBUG (testng-AtomicHashMapConcurrencyTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AtomicHashMapConcurrencyTest] local transaction DummyTransaction{xid=DummyXid{id=45}, status=0} will use 2PC while executing
2013-01-31 13:15:53,565 DEBUG (testng-AtomicHashMapConcurrencyTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AtomicHashMapConcurrencyTest] local transaction null:333 [DummyTransaction{xid=DummyXid{id=45}, status=7}] wants to commit
2013-01-31 13:15:53,566 DEBUG (testng-AtomicHashMapConcurrencyTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AtomicHashMapConcurrencyTest] local transaction null:333 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:53,566 DEBUG (testng-AtomicHashMapConcurrencyTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AtomicHashMapConcurrencyTest] local transaction DummyTransaction{xid=DummyXid{id=46}, status=0} is starting. check if switch is in progress...
2013-01-31 13:15:53,566 DEBUG (testng-AtomicHashMapConcurrencyTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-AtomicHashMapConcurrencyTest] will wait until no switch is in progress
2013-01-31 13:15:53,566 DEBUG (testng-AtomicHashMapConcurrencyTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-AtomicHashMapConcurrencyTest] no switch in progress. Moving on...
2013-01-31 13:15:53,566 DEBUG (testng-AtomicHashMapConcurrencyTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AtomicHashMapConcurrencyTest] local transaction DummyTransaction{xid=DummyXid{id=46}, status=0} will use 2PC while executing
2013-01-31 13:15:53,566 DEBUG (testng-MixedModeTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:53,576 INFO  (testng-MixedModeTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:53,579 DEBUG (ViewHandler,ISPN,ConcurrentStartupTest-NodeA-26973) [org.jgroups.protocols.pbcast.STABLE] suspending message garbage collection
2013-01-31 13:15:53,579 DEBUG (ViewHandler,ISPN,ConcurrentStartupTest-NodeA-26973) [org.jgroups.protocols.pbcast.STABLE] resume task started, max_suspend_time=33000
2013-01-31 13:15:53,583 DEBUG (Incoming-1,ISPN,ConcurrentStartupTest-NodeA-26973) [org.jgroups.protocols.pbcast.NAKACK2] 
[ConcurrentStartupTest-NodeA-26973 setDigest()]
existing digest:  ConcurrentStartupTest-NodeA-26973: [1 (1)]
new digest:       ConcurrentStartupTest-NodeA-26973: [0 (0)], ConcurrentStartupTest-NodeB-8774: [0 (0)]
resulting digest: ConcurrentStartupTest-NodeB-8774: [0 (0)], ConcurrentStartupTest-NodeA-26973: [1 (1)]
2013-01-31 13:15:53,583 DEBUG (Incoming-1,ISPN,ConcurrentStartupTest-NodeA-26973) [org.jgroups.protocols.pbcast.GMS] ConcurrentStartupTest-NodeA-26973: installing view [ConcurrentStartupTest-NodeA-26973|1] [ConcurrentStartupTest-NodeA-26973, ConcurrentStartupTest-NodeB-8774]
2013-01-31 13:15:53,585 DEBUG (Incoming-1,ISPN,ConcurrentStartupTest-NodeA-26973) [org.jgroups.protocols.pbcast.STABLE] [ergonomics] setting max_bytes to 800KB (2 members)
2013-01-31 13:15:53,586 DEBUG (Incoming-1,ISPN,ConcurrentStartupTest-NodeA-26973) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] New view accepted: [ConcurrentStartupTest-NodeA-26973|1] [ConcurrentStartupTest-NodeA-26973, ConcurrentStartupTest-NodeB-8774]
2013-01-31 13:15:53,586 INFO  (Incoming-1,ISPN,ConcurrentStartupTest-NodeA-26973) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000094: Received new cluster view: [ConcurrentStartupTest-NodeA-26973|1] [ConcurrentStartupTest-NodeA-26973, ConcurrentStartupTest-NodeB-8774]
2013-01-31 13:15:53,588 DEBUG (notification-thread-27) [org.infinispan.transaction.TransactionTable] View changed, recalculating minViewId
2013-01-31 13:15:53,589 DEBUG (testng-MixedModeTest) [org.infinispan.transaction.TransactionTable] Min view id set to 1
2013-01-31 13:15:53,589 DEBUG (testng-MixedModeTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 10
2013-01-31 13:15:53,589 DEBUG (testng-MixedModeTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.StateTransferLockInterceptor@6948afb4, TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@2307886c, PB=org.infinispan.interceptors.StateTransferLockInterceptor@6948afb4}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@438d7c6b}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@7de37772}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@60b71def, PB=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@60b71def}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@160e6784, TO=org.infinispan.interceptors.EntryWrappingInterceptor@160e6784, PB=org.infinispan.interceptors.EntryWrappingInterceptor@160e6784}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.ReplicationInterceptor@bae166c, TO=org.infinispan.interceptors.totalorder.TotalOrderReplicationInterceptor@52421271, PB=org.infinispan.interceptors.ReplicationInterceptor@bae166c}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:53,589 DEBUG (testng-MixedModeTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Setting configuration tunned parameters
2013-01-31 13:15:53,589 DEBUG (testng-ConcurrentStartupTest) [org.jgroups.protocols.pbcast.NAKACK2] 
[ConcurrentStartupTest-NodeB-8774 setDigest()]
existing digest:  []
new digest:       ConcurrentStartupTest-NodeA-26973: [0 (0)], ConcurrentStartupTest-NodeB-8774: [0 (0)]
resulting digest: ConcurrentStartupTest-NodeB-8774: [0 (0)], ConcurrentStartupTest-NodeA-26973: [0 (0)]
2013-01-31 13:15:53,589 DEBUG (testng-ConcurrentStartupTest) [org.jgroups.protocols.pbcast.GMS] ConcurrentStartupTest-NodeB-8774: installing view [ConcurrentStartupTest-NodeA-26973|1] [ConcurrentStartupTest-NodeA-26973, ConcurrentStartupTest-NodeB-8774]
2013-01-31 13:15:53,590 DEBUG (testng-ConcurrentStartupTest) [org.jgroups.protocols.pbcast.STABLE] [ergonomics] setting max_bytes to 800KB (2 members)
2013-01-31 13:15:53,590 DEBUG (testng-ConcurrentStartupTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] New view accepted: [ConcurrentStartupTest-NodeA-26973|1] [ConcurrentStartupTest-NodeA-26973, ConcurrentStartupTest-NodeB-8774]
2013-01-31 13:15:53,590 INFO  (testng-ConcurrentStartupTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000094: Received new cluster view: [ConcurrentStartupTest-NodeA-26973|1] [ConcurrentStartupTest-NodeA-26973, ConcurrentStartupTest-NodeB-8774]
2013-01-31 13:15:53,590 INFO  (testng-ConcurrentStartupTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000079: Cache local address is ConcurrentStartupTest-NodeB-8774, physical addresses are [127.0.0.1:8001]
2013-01-31 13:15:53,590 DEBUG (testng-ConcurrentStartupTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] Waiting on view being accepted
2013-01-31 13:15:53,591 DEBUG (ViewHandler,ISPN,ConcurrentStartupTest-NodeA-26973) [org.jgroups.protocols.pbcast.STABLE] resuming message garbage collection
2013-01-31 13:15:53,593 INFO  (testng-ConcurrentStartupTest) [org.infinispan.transaction.lookup.JBossStandaloneJTAManagerLookup] ISPN000107: Retrieving transaction manager Transaction: unknown
2013-01-31 13:15:53,593 DEBUG (testng-ConcurrentStartupTest) [org.infinispan.configuration.cache.TransactionConfigurationBuilder] Switching to Synchronization based enlistment.
2013-01-31 13:15:53,596 DEBUG (ForkThread-AtomicHashMapConcurrencyTest-849279075) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [ForkThread-AtomicHashMapConcurrencyTest-849279075] local transaction DummyTransaction{xid=DummyXid{id=47}, status=0} is starting. check if switch is in progress...
2013-01-31 13:15:53,596 DEBUG (ForkThread-AtomicHashMapConcurrencyTest-849279075) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [ForkThread-AtomicHashMapConcurrencyTest-849279075] will wait until no switch is in progress
2013-01-31 13:15:53,597 DEBUG (ForkThread-AtomicHashMapConcurrencyTest-849279075) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [ForkThread-AtomicHashMapConcurrencyTest-849279075] no switch in progress. Moving on...
2013-01-31 13:15:53,597 DEBUG (ForkThread-AtomicHashMapConcurrencyTest-849279075) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [ForkThread-AtomicHashMapConcurrencyTest-849279075] local transaction DummyTransaction{xid=DummyXid{id=47}, status=0} will use 2PC while executing
2013-01-31 13:15:53,597 DEBUG (testng-AtomicHashMapConcurrencyTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AtomicHashMapConcurrencyTest] local transaction null:334 [DummyTransaction{xid=DummyXid{id=46}, status=7}] wants to commit
2013-01-31 13:15:53,597 DEBUG (testng-AtomicHashMapConcurrencyTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-AtomicHashMapConcurrencyTest] local transaction null:334 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:53,598 DEBUG (ForkThread-AtomicHashMapConcurrencyTest-849279075) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [ForkThread-AtomicHashMapConcurrencyTest-849279075] local transaction null:335 [DummyTransaction{xid=DummyXid{id=47}, status=9}] wants to rollback
2013-01-31 13:15:53,598 INFO  (testng-AtomicHashMapConcurrencyTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testReadAfterTxStarted(org.infinispan.atomic.AtomicHashMapConcurrencyTest).
2013-01-31 13:15:53,598 DEBUG (testng-AtomicHashMapConcurrencyTest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on null
2013-01-31 13:15:53,599 DEBUG (testng-AtomicHashMapConcurrencyTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 1 seconds.
2013-01-31 13:15:53,599 DEBUG (testng-AtomicHashMapConcurrencyTest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:53,599 DEBUG (testng-AtomicHashMapConcurrencyTest) [org.infinispan.manager.DefaultCacheManager] Stopping cache manager ISPN on null
2013-01-31 13:15:53,599 DEBUG (testng-AtomicHashMapConcurrencyTest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on null
2013-01-31 13:15:53,600 DEBUG (testng-ConcurrentStartupTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:53,601 DEBUG (testng-ConcurrentStartupTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:53,601 INFO  (testng-ConfigurationValidationTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testCacheModeConfiguration(org.infinispan.config.ConfigurationValidationTest)
2013-01-31 13:15:53,601 DEBUG (testng-ConcurrentStartupTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:53,602 INFO  (testng-ConcurrentStartupTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:53,602 DEBUG (testng-ConfigurationValidationTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:53,606 DEBUG (testng-ConcurrentStartupTest) [org.infinispan.transaction.TransactionTable] Min view id set to 1
2013-01-31 13:15:53,606 DEBUG (testng-ConfigurationValidationTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:53,606 DEBUG (testng-ConcurrentStartupTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 12
2013-01-31 13:15:53,606 DEBUG (testng-ConfigurationValidationTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:53,606 DEBUG (testng-ConcurrentStartupTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.BatchingInterceptor
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.StateTransferLockInterceptor@9632ece, TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@4e95db32, PB=org.infinispan.interceptors.StateTransferLockInterceptor@9632ece}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@5069d7ec}
	>> org.infinispan.interceptors.TxInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@54def032}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@786b8e25, PB=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@786b8e25}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@5d415ce6, TO=org.infinispan.interceptors.EntryWrappingInterceptor@5d415ce6, PB=org.infinispan.interceptors.EntryWrappingInterceptor@5d415ce6}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.DistributionInterceptor@6e3a2fde, TO=org.infinispan.interceptors.totalorder.TotalOrderDistributionInterceptor@2e1cd05b, PB=org.infinispan.interceptors.DistributionInterceptor@6e3a2fde}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:53,606 DEBUG (testng-ConcurrentStartupTest) [org.infinispan.distribution.ch.DefaultConsistentHash] Using 1 virtualNodes to initialize consistent hash wheel 
2013-01-31 13:15:53,609 DEBUG (testng-ConcurrentStartupTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Setting configuration tunned parameters
2013-01-31 13:15:53,612 WARN  (testng-RepeatableReadLockTest) [org.infinispan.transaction.TransactionTable] ISPN000100: Stopping, but there are 1 local transactions and 0 remote transactions that did not finish in time.
2013-01-31 13:15:53,613 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.transaction.TransactionTable] Local active transactions: {DummyTransaction{xid=DummyXid{id=40}, status=0}=LocalXaTransaction{xid=DummyXid{id=40}} LocalTransaction{remoteLockedNodes=null, isMarkedForRollback=false, transaction=DummyTransaction{xid=DummyXid{id=40}, status=0}, lockedKeys=null, backupKeyLocks=null, viewId=-1} org.infinispan.transaction.xa.LocalXaTransaction@148}, Remote active transactions null
2013-01-31 13:15:53,613 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.manager.DefaultCacheManager] Stopping cache manager ISPN on null
2013-01-31 13:15:53,613 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on null
2013-01-31 13:15:53,616 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:53,623 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:53,623 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:53,626 WARN  (testng-ReadCommittedLockTest) [org.infinispan.transaction.TransactionTable] ISPN000100: Stopping, but there are 1 local transactions and 0 remote transactions that did not finish in time.
2013-01-31 13:15:53,626 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.transaction.TransactionTable] Local active transactions: {DummyTransaction{xid=DummyXid{id=43}, status=0}=LocalXaTransaction{xid=DummyXid{id=43}} LocalTransaction{remoteLockedNodes=null, isMarkedForRollback=false, transaction=DummyTransaction{xid=DummyXid{id=43}, status=0}, lockedKeys=null, backupKeyLocks=null, viewId=-1} org.infinispan.transaction.xa.LocalXaTransaction@14b}, Remote active transactions null
2013-01-31 13:15:53,626 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.manager.DefaultCacheManager] Stopping cache manager ISPN on null
2013-01-31 13:15:53,626 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on null
2013-01-31 13:15:53,627 INFO  (testng-RepeatableReadLockTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:53,627 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:53,632 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:53,632 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:53,636 INFO  (testng-ReadCommittedLockTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:53,666 DEBUG (testng-ConfigurationValidationTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:53,676 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:53,676 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:53,677 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:53,678 DEBUG (testng-ConfigurationValidationTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:53,695 DEBUG (testng-ConfigurationValidationTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:53,695 INFO  (testng-ConfigurationValidationTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:53,696 DEBUG (testng-ConfigurationValidationTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 10
2013-01-31 13:15:53,696 DEBUG (testng-ConfigurationValidationTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@31966bd8}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@a824b57}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@70204224}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@55d682fe, PB=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@55d682fe}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@76321db8, TO=org.infinispan.interceptors.EntryWrappingInterceptor@76321db8, PB=org.infinispan.interceptors.EntryWrappingInterceptor@76321db8}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:53,697 DEBUG (testng-ConfigurationValidationTest) [org.infinispan.CacheImpl] Started cache local on null
2013-01-31 13:15:53,697 DEBUG (testng-ConfigurationValidationTest) [org.infinispan.CacheImpl] Stopping cache local on null
2013-01-31 13:15:53,698 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:53,698 DEBUG (testng-ConfigurationValidationTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 30 seconds.
2013-01-31 13:15:53,698 DEBUG (testng-ConfigurationValidationTest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:53,698 DEBUG (testng-ConfigurationValidationTest) [org.infinispan.manager.DefaultCacheManager] Stopping cache manager ISPN on null
2013-01-31 13:15:53,698 DEBUG (testng-ConfigurationValidationTest) [org.infinispan.CacheImpl] Stopping cache local on null
2013-01-31 13:15:53,698 INFO  (testng-ConfigurationValidationTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testCacheModeConfiguration(org.infinispan.config.ConfigurationValidationTest).
2013-01-31 13:15:53,699 INFO  (testng-ConfigurationValidationTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testDistAndReplQueue(org.infinispan.config.ConfigurationValidationTest)
2013-01-31 13:15:53,700 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:53,700 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:53,710 DEBUG (testng-ConfigurationValidationTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:53,714 DEBUG (testng-ConfigurationValidationTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:53,714 DEBUG (testng-ConfigurationValidationTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:53,715 INFO  (testng-ConfigurationValidationTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000078: Starting JGroups Channel
2013-01-31 13:15:53,722 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 11
2013-01-31 13:15:53,722 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@7b176b1a}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@3e78b718}
	>> org.infinispan.interceptors.TxInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@673ca8b2}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@3f677311, PB=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@3f677311}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@20b3819c, TO=org.infinispan.interceptors.EntryWrappingInterceptor@20b3819c, PB=org.infinispan.interceptors.EntryWrappingInterceptor@20b3819c}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:53,722 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.CacheImpl] Started cache ___defaultcache on null
2013-01-31 13:15:53,723 INFO  (testng-ReadCommittedLockTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testWriteDoesntBlockReadNonexistent(org.infinispan.api.mvcc.read_committed.ReadCommittedLockTest)
2013-01-31 13:15:53,723 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction DummyTransaction{xid=DummyXid{id=48}, status=0} is starting. check if switch is in progress...
2013-01-31 13:15:53,723 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-ReadCommittedLockTest] will wait until no switch is in progress
2013-01-31 13:15:53,723 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-ReadCommittedLockTest] no switch in progress. Moving on...
2013-01-31 13:15:53,723 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction DummyTransaction{xid=DummyXid{id=48}, status=0} will use 2PC while executing
2013-01-31 13:15:53,723 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction DummyTransaction{xid=DummyXid{id=49}, status=0} is starting. check if switch is in progress...
2013-01-31 13:15:53,723 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-ReadCommittedLockTest] will wait until no switch is in progress
2013-01-31 13:15:53,723 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-ReadCommittedLockTest] no switch in progress. Moving on...
2013-01-31 13:15:53,723 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction DummyTransaction{xid=DummyXid{id=49}, status=0} will use 2PC while executing
2013-01-31 13:15:53,723 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction null:336 [DummyTransaction{xid=DummyXid{id=48}, status=7}] wants to commit
2013-01-31 13:15:53,723 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction null:336 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:53,723 ERROR (testng-ReadCommittedLockTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Method testWriteDoesntBlockReadNonexistent(org.infinispan.api.mvcc.read_committed.ReadCommittedLockTest) threw an exception
java.lang.AssertionError: Stale locks exist! NumLocksHeld is 1 and lock info is org.infinispan.util.concurrent.locks.containers.OwnableReentrantPerEntryLockContainer@51d22b43
	at org.infinispan.api.mvcc.LockAssert.assertNoLocks(LockAssert.java:48)
	at org.infinispan.api.mvcc.LockTestBase.assertNoLocks(LockTestBase.java:102)
	at org.infinispan.api.mvcc.LockTestBase.testWriteDoesntBlockReadNonexistent(LockTestBase.java:309)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:53,725 ERROR (testng-ReadCommittedLockTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test failed testWriteDoesntBlockReadNonexistent(org.infinispan.api.mvcc.read_committed.ReadCommittedLockTest)
java.lang.AssertionError: Stale locks exist! NumLocksHeld is 1 and lock info is org.infinispan.util.concurrent.locks.containers.OwnableReentrantPerEntryLockContainer@51d22b43
	at org.infinispan.api.mvcc.LockAssert.assertNoLocks(LockAssert.java:48)
	at org.infinispan.api.mvcc.LockTestBase.assertNoLocks(LockTestBase.java:102)
	at org.infinispan.api.mvcc.LockTestBase.testWriteDoesntBlockReadNonexistent(LockTestBase.java:309)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:53,728 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.api.mvcc.LockTestBase] **** - STARTING TEARDOWN - ****
2013-01-31 13:15:53,728 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on null
2013-01-31 13:15:53,727 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 11
2013-01-31 13:15:53,729 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@30683390}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@9114bc4}
	>> org.infinispan.interceptors.TxInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@4e853582}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@b7c1214, PB=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@b7c1214}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@7e86e4ef, TO=org.infinispan.interceptors.EntryWrappingInterceptor@7e86e4ef, PB=org.infinispan.interceptors.EntryWrappingInterceptor@7e86e4ef}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:53,729 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.CacheImpl] Started cache ___defaultcache on null
2013-01-31 13:15:53,729 INFO  (testng-RepeatableReadLockTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testWriteDoesntBlockRead(org.infinispan.api.mvcc.repeatable_read.RepeatableReadLockTest)
2013-01-31 13:15:53,729 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepeatableReadLockTest] local transaction DummyTransaction{xid=DummyXid{id=50}, status=0} is starting. check if switch is in progress...
2013-01-31 13:15:53,729 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepeatableReadLockTest] will wait until no switch is in progress
2013-01-31 13:15:53,729 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepeatableReadLockTest] no switch in progress. Moving on...
2013-01-31 13:15:53,729 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepeatableReadLockTest] local transaction DummyTransaction{xid=DummyXid{id=50}, status=0} will use 2PC while executing
2013-01-31 13:15:53,729 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepeatableReadLockTest] local transaction null:338 [DummyTransaction{xid=DummyXid{id=50}, status=7}] wants to commit
2013-01-31 13:15:53,729 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepeatableReadLockTest] local transaction null:338 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:53,730 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepeatableReadLockTest] local transaction DummyTransaction{xid=DummyXid{id=51}, status=0} is starting. check if switch is in progress...
2013-01-31 13:15:53,730 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepeatableReadLockTest] will wait until no switch is in progress
2013-01-31 13:15:53,730 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepeatableReadLockTest] no switch in progress. Moving on...
2013-01-31 13:15:53,730 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepeatableReadLockTest] local transaction DummyTransaction{xid=DummyXid{id=51}, status=0} will use 2PC while executing
2013-01-31 13:15:53,730 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepeatableReadLockTest] local transaction DummyTransaction{xid=DummyXid{id=52}, status=0} is starting. check if switch is in progress...
2013-01-31 13:15:53,730 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepeatableReadLockTest] will wait until no switch is in progress
2013-01-31 13:15:53,730 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepeatableReadLockTest] no switch in progress. Moving on...
2013-01-31 13:15:53,730 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepeatableReadLockTest] local transaction DummyTransaction{xid=DummyXid{id=52}, status=0} will use 2PC while executing
2013-01-31 13:15:53,730 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 1 seconds.
2013-01-31 13:15:53,730 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepeatableReadLockTest] local transaction null:339 [DummyTransaction{xid=DummyXid{id=51}, status=7}] wants to commit
2013-01-31 13:15:53,730 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepeatableReadLockTest] local transaction null:339 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:53,730 ERROR (testng-RepeatableReadLockTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Method testWriteDoesntBlockRead(org.infinispan.api.mvcc.repeatable_read.RepeatableReadLockTest) threw an exception
java.lang.AssertionError: Stale locks exist! NumLocksHeld is 2 and lock info is org.infinispan.util.concurrent.locks.containers.OwnableReentrantPerEntryLockContainer@3f4ee906
	at org.infinispan.api.mvcc.LockAssert.assertNoLocks(LockAssert.java:48)
	at org.infinispan.api.mvcc.LockTestBase.assertNoLocks(LockTestBase.java:102)
	at org.infinispan.api.mvcc.LockTestBase.testWriteDoesntBlockRead(LockTestBase.java:248)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:53,757 ERROR (testng-RepeatableReadLockTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test failed testWriteDoesntBlockRead(org.infinispan.api.mvcc.repeatable_read.RepeatableReadLockTest)
java.lang.AssertionError: Stale locks exist! NumLocksHeld is 2 and lock info is org.infinispan.util.concurrent.locks.containers.OwnableReentrantPerEntryLockContainer@3f4ee906
	at org.infinispan.api.mvcc.LockAssert.assertNoLocks(LockAssert.java:48)
	at org.infinispan.api.mvcc.LockTestBase.assertNoLocks(LockTestBase.java:102)
	at org.infinispan.api.mvcc.LockTestBase.testWriteDoesntBlockRead(LockTestBase.java:248)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:53,763 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.api.mvcc.LockTestBase] **** - STARTING TEARDOWN - ****
2013-01-31 13:15:53,763 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on null
2013-01-31 13:15:53,763 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 1 seconds.
2013-01-31 13:15:53,765 DEBUG (testng-PutForExternalReadTest) [org.jgroups.stack.Configurator] set property TCP.diagnostics_addr to default value /224.0.75.75
2013-01-31 13:15:53,777 DEBUG (testng-PutForExternalReadTest) [org.jgroups.protocols.FRAG2] received CONFIG event: {bind_addr=/127.0.0.1}
2013-01-31 13:15:53,778 DEBUG (testng-PutForExternalReadTest) [org.jgroups.protocols.pbcast.GMS] address=PutForExternalReadTest-NodeB-28287, cluster=ISPN, physical address=127.0.0.1:8151
2013-01-31 13:15:53,778 DEBUG (testng-PutForExternalReadTest) [org.jgroups.protocols.pbcast.GMS] election results: {PutForExternalReadTest-NodeA-2262=1}
2013-01-31 13:15:53,778 DEBUG (testng-PutForExternalReadTest) [org.jgroups.protocols.pbcast.GMS] sending JOIN(PutForExternalReadTest-NodeB-28287) to PutForExternalReadTest-NodeA-2262
2013-01-31 13:15:53,827 WARN  (testng-Command line test) [org.jgroups.stack.Configurator] [JGRP00013] TP.discard_incompatible_packets has been deprecated: incompatible packets are discarded anyway
2013-01-31 13:15:53,836 DEBUG (testng-MixedModeTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Configuration State responses are {MixedModeTest-NodeA-25015=SuccessfulResponse{responseValue=ConfigurationState{numberOfOwners=0, protocolName='2PC', epoch=0}} }
2013-01-31 13:15:53,837 DEBUG (testng-MixedModeTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Configuration State found: ConfigurationState{numberOfOwners=0, protocolName='2PC', epoch=0}
2013-01-31 13:15:53,837 DEBUG (testng-MixedModeTest) [org.infinispan.cacheviews.CacheViewsManagerImpl] replSync: Node MixedModeTest-NodeB-26468 is joining
2013-01-31 13:15:53,837 DEBUG (testng-ConcurrentStartupTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Configuration State responses are {ConcurrentStartupTest-NodeA-26973=SuccessfulResponse{responseValue=ConfigurationState{numberOfOwners=1, protocolName='2PC', epoch=0}} }
2013-01-31 13:15:53,837 DEBUG (testng-ConcurrentStartupTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Configuration State found: ConfigurationState{numberOfOwners=1, protocolName='2PC', epoch=0}
2013-01-31 13:15:53,837 DEBUG (testng-ConcurrentStartupTest) [org.infinispan.cacheviews.CacheViewsManagerImpl] test: Node ConcurrentStartupTest-NodeB-8774 is joining
2013-01-31 13:15:53,840 DEBUG (testng-KeyAffinityServiceTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Configuration State responses are {KeyAffinityServiceTest-NodeA-61608=SuccessfulResponse{responseValue=ConfigurationState{numberOfOwners=2, protocolName='2PC', epoch=0}} }
2013-01-31 13:15:53,840 DEBUG (testng-KeyAffinityServiceTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Configuration State found: ConfigurationState{numberOfOwners=2, protocolName='2PC', epoch=0}
2013-01-31 13:15:53,840 DEBUG (testng-KeyAffinityServiceTest) [org.infinispan.cacheviews.CacheViewsManagerImpl] dist: Node KeyAffinityServiceTest-NodeB-45659 is joining
2013-01-31 13:15:53,841 DEBUG (testng-CacheClusterJoinTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Configuration State responses are {CacheClusterJoinTest-NodeA-8863=SuccessfulResponse{responseValue=ConfigurationState{numberOfOwners=0, protocolName='2PC', epoch=0}} }
2013-01-31 13:15:53,841 DEBUG (testng-CacheClusterJoinTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Configuration State found: ConfigurationState{numberOfOwners=0, protocolName='2PC', epoch=0}
2013-01-31 13:15:53,841 DEBUG (testng-CacheClusterJoinTest) [org.infinispan.cacheviews.CacheViewsManagerImpl] cache: Node CacheClusterJoinTest-NodeB-18666 is joining
2013-01-31 13:15:53,843 DEBUG (OOB-1,ISPN,ConcurrentStartupTest-NodeA-26973) [org.infinispan.cacheviews.CacheViewsManagerImpl] test: Node ConcurrentStartupTest-NodeB-8774 is joining
2013-01-31 13:15:53,843 DEBUG (OOB-1,ISPN,MixedModeTest-NodeA-25015) [org.infinispan.cacheviews.CacheViewsManagerImpl] replSync: Node MixedModeTest-NodeB-26468 is joining
2013-01-31 13:15:53,844 DEBUG (OOB-1,ISPN,KeyAffinityServiceTest-NodeA-61608) [org.infinispan.cacheviews.CacheViewsManagerImpl] dist: Node KeyAffinityServiceTest-NodeB-45659 is joining
2013-01-31 13:15:53,845 DEBUG (CacheViewInstaller-1,ConcurrentStartupTest-NodeA-26973) [org.infinispan.cacheviews.CacheViewsManagerImpl] Installing new view CacheView{viewId=2, members=[ConcurrentStartupTest-NodeA-26973, ConcurrentStartupTest-NodeB-8774]} for cache test
2013-01-31 13:15:53,845 DEBUG (CacheViewInstaller-1,ConcurrentStartupTest-NodeA-26973) [org.infinispan.configuration.cache.TransactionConfigurationBuilder] Switching to Synchronization based enlistment.
2013-01-31 13:15:53,845 DEBUG (CacheViewInstaller-1,MixedModeTest-NodeA-25015) [org.infinispan.cacheviews.CacheViewsManagerImpl] Installing new view CacheView{viewId=2, members=[MixedModeTest-NodeA-25015, MixedModeTest-NodeB-26468]} for cache replSync
2013-01-31 13:15:53,847 DEBUG (CacheViewInstaller-1,KeyAffinityServiceTest-NodeA-61608) [org.infinispan.cacheviews.CacheViewsManagerImpl] Installing new view CacheView{viewId=2, members=[KeyAffinityServiceTest-NodeA-61608, KeyAffinityServiceTest-NodeB-45659]} for cache dist
2013-01-31 13:15:53,847 DEBUG (OOB-1,ISPN,CacheClusterJoinTest-NodeA-8863) [org.infinispan.cacheviews.CacheViewsManagerImpl] cache: Node CacheClusterJoinTest-NodeB-18666 is joining
2013-01-31 13:15:53,848 DEBUG (CacheViewInstaller-1,CacheClusterJoinTest-NodeA-8863) [org.infinispan.cacheviews.CacheViewsManagerImpl] Installing new view CacheView{viewId=2, members=[CacheClusterJoinTest-NodeA-8863, CacheClusterJoinTest-NodeB-18666]} for cache cache
2013-01-31 13:15:53,850 DEBUG (transport-thread-32) [org.infinispan.distribution.ch.DefaultConsistentHash] Using 1 virtualNodes to initialize consistent hash wheel 
2013-01-31 13:15:53,850 DEBUG (transport-thread-32) [org.infinispan.statetransfer.DistributedStateTransferTask] Commencing rehash 2 on node: KeyAffinityServiceTest-NodeA-61608. Before start, data container had 0 entries
2013-01-31 13:15:53,850 DEBUG (transport-thread-32) [org.infinispan.statetransfer.StateTransferLockImpl] Blocking new write commands for cache view 2
2013-01-31 13:15:53,855 DEBUG (transport-thread-35) [org.infinispan.distribution.ch.DefaultConsistentHash] Using 1 virtualNodes to initialize consistent hash wheel 
2013-01-31 13:15:53,855 DEBUG (transport-thread-35) [org.infinispan.statetransfer.ReplicatedStateTransferTask] Commencing state transfer 2 on node: CacheClusterJoinTest-NodeA-8863. Before start, data container had 0 entries
2013-01-31 13:15:53,855 DEBUG (transport-thread-35) [org.infinispan.statetransfer.StateTransferLockImpl] Blocking new write commands for cache view 2
2013-01-31 13:15:53,856 DEBUG (transport-thread-33) [org.infinispan.distribution.ch.DefaultConsistentHash] Using 1 virtualNodes to initialize consistent hash wheel 
2013-01-31 13:15:53,856 DEBUG (transport-thread-33) [org.infinispan.statetransfer.ReplicatedStateTransferTask] Commencing state transfer 2 on node: MixedModeTest-NodeA-25015. Before start, data container had 0 entries
2013-01-31 13:15:53,856 DEBUG (transport-thread-33) [org.infinispan.statetransfer.StateTransferLockImpl] Blocking new write commands for cache view 2
2013-01-31 13:15:53,857 DEBUG (transport-thread-34) [org.infinispan.configuration.cache.TransactionConfigurationBuilder] Switching to Synchronization based enlistment.
2013-01-31 13:15:53,857 DEBUG (transport-thread-34) [org.infinispan.distribution.ch.DefaultConsistentHash] Using 1 virtualNodes to initialize consistent hash wheel 
2013-01-31 13:15:53,857 DEBUG (transport-thread-34) [org.infinispan.statetransfer.DistributedStateTransferTask] Commencing rehash 2 on node: ConcurrentStartupTest-NodeA-26973. Before start, data container had 0 entries
2013-01-31 13:15:53,857 DEBUG (transport-thread-34) [org.infinispan.statetransfer.StateTransferLockImpl] Blocking new write commands for cache view 2
2013-01-31 13:15:53,858 DEBUG (ViewHandler,ISPN,PutForExternalReadTest-NodeA-2262) [org.jgroups.protocols.pbcast.STABLE] suspending message garbage collection
2013-01-31 13:15:53,858 DEBUG (ViewHandler,ISPN,PutForExternalReadTest-NodeA-2262) [org.jgroups.protocols.pbcast.STABLE] resume task started, max_suspend_time=33000
2013-01-31 13:15:53,860 DEBUG (Incoming-1,ISPN,PutForExternalReadTest-NodeA-2262) [org.jgroups.protocols.pbcast.NAKACK2] 
[PutForExternalReadTest-NodeA-2262 setDigest()]
existing digest:  PutForExternalReadTest-NodeA-2262: [1 (1)]
new digest:       PutForExternalReadTest-NodeA-2262: [0 (0)], PutForExternalReadTest-NodeB-28287: [0 (0)]
resulting digest: PutForExternalReadTest-NodeB-28287: [0 (0)], PutForExternalReadTest-NodeA-2262: [1 (1)]
2013-01-31 13:15:53,860 DEBUG (Incoming-1,ISPN,PutForExternalReadTest-NodeA-2262) [org.jgroups.protocols.pbcast.GMS] PutForExternalReadTest-NodeA-2262: installing view [PutForExternalReadTest-NodeA-2262|1] [PutForExternalReadTest-NodeA-2262, PutForExternalReadTest-NodeB-28287]
2013-01-31 13:15:53,860 DEBUG (Incoming-1,ISPN,PutForExternalReadTest-NodeA-2262) [org.jgroups.protocols.pbcast.STABLE] [ergonomics] setting max_bytes to 800KB (2 members)
2013-01-31 13:15:53,860 DEBUG (Incoming-1,ISPN,PutForExternalReadTest-NodeA-2262) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] New view accepted: [PutForExternalReadTest-NodeA-2262|1] [PutForExternalReadTest-NodeA-2262, PutForExternalReadTest-NodeB-28287]
2013-01-31 13:15:53,861 INFO  (Incoming-1,ISPN,PutForExternalReadTest-NodeA-2262) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000094: Received new cluster view: [PutForExternalReadTest-NodeA-2262|1] [PutForExternalReadTest-NodeA-2262, PutForExternalReadTest-NodeB-28287]
2013-01-31 13:15:53,861 DEBUG (notification-thread-36) [org.infinispan.transaction.TransactionTable] View changed, recalculating minViewId
2013-01-31 13:15:53,894 DEBUG (testng-PutForExternalReadTest) [org.jgroups.protocols.pbcast.NAKACK2] 
[PutForExternalReadTest-NodeB-28287 setDigest()]
existing digest:  []
new digest:       PutForExternalReadTest-NodeA-2262: [0 (0)], PutForExternalReadTest-NodeB-28287: [0 (0)]
resulting digest: PutForExternalReadTest-NodeB-28287: [0 (0)], PutForExternalReadTest-NodeA-2262: [0 (0)]
2013-01-31 13:15:53,894 DEBUG (testng-PutForExternalReadTest) [org.jgroups.protocols.pbcast.GMS] PutForExternalReadTest-NodeB-28287: installing view [PutForExternalReadTest-NodeA-2262|1] [PutForExternalReadTest-NodeA-2262, PutForExternalReadTest-NodeB-28287]
2013-01-31 13:15:53,896 DEBUG (testng-PutForExternalReadTest) [org.jgroups.protocols.pbcast.STABLE] [ergonomics] setting max_bytes to 800KB (2 members)
2013-01-31 13:15:53,897 DEBUG (testng-PutForExternalReadTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] New view accepted: [PutForExternalReadTest-NodeA-2262|1] [PutForExternalReadTest-NodeA-2262, PutForExternalReadTest-NodeB-28287]
2013-01-31 13:15:53,897 DEBUG (ViewHandler,ISPN,PutForExternalReadTest-NodeA-2262) [org.jgroups.protocols.pbcast.STABLE] resuming message garbage collection
2013-01-31 13:15:53,897 INFO  (testng-PutForExternalReadTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000094: Received new cluster view: [PutForExternalReadTest-NodeA-2262|1] [PutForExternalReadTest-NodeA-2262, PutForExternalReadTest-NodeB-28287]
2013-01-31 13:15:53,897 INFO  (testng-PutForExternalReadTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000079: Cache local address is PutForExternalReadTest-NodeB-28287, physical addresses are [127.0.0.1:8151]
2013-01-31 13:15:53,897 DEBUG (testng-PutForExternalReadTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] Waiting on view being accepted
2013-01-31 13:15:53,900 INFO  (testng-PutForExternalReadTest) [org.infinispan.transaction.lookup.JBossStandaloneJTAManagerLookup] ISPN000107: Retrieving transaction manager Transaction: unknown
2013-01-31 13:15:53,904 DEBUG (testng-PutForExternalReadTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:53,907 DEBUG (testng-PutForExternalReadTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:53,912 DEBUG (OOB-2,ISPN,MixedModeTest-NodeB-26468) [org.infinispan.distribution.ch.DefaultConsistentHash] Using 1 virtualNodes to initialize consistent hash wheel 
2013-01-31 13:15:53,915 DEBUG (OOB-2,ISPN,MixedModeTest-NodeB-26468) [org.infinispan.statetransfer.ReplicatedStateTransferTask] Commencing state transfer 2 on node: MixedModeTest-NodeB-26468. Before start, data container had 0 entries
2013-01-31 13:15:53,915 DEBUG (OOB-2,ISPN,MixedModeTest-NodeB-26468) [org.infinispan.statetransfer.StateTransferLockImpl] Blocking new write commands for cache view 2
2013-01-31 13:15:53,915 DEBUG (OOB-2,ISPN,KeyAffinityServiceTest-NodeB-45659) [org.infinispan.distribution.ch.DefaultConsistentHash] Using 1 virtualNodes to initialize consistent hash wheel 
2013-01-31 13:15:53,915 DEBUG (OOB-2,ISPN,ConcurrentStartupTest-NodeB-8774) [org.infinispan.configuration.cache.TransactionConfigurationBuilder] Switching to Synchronization based enlistment.
2013-01-31 13:15:53,915 DEBUG (OOB-2,ISPN,KeyAffinityServiceTest-NodeB-45659) [org.infinispan.statetransfer.DistributedStateTransferTask] Commencing rehash 2 on node: KeyAffinityServiceTest-NodeB-45659. Before start, data container had 0 entries
2013-01-31 13:15:53,915 DEBUG (OOB-2,ISPN,KeyAffinityServiceTest-NodeB-45659) [org.infinispan.statetransfer.StateTransferLockImpl] Blocking new write commands for cache view 2
2013-01-31 13:15:53,915 DEBUG (OOB-2,ISPN,ConcurrentStartupTest-NodeB-8774) [org.infinispan.distribution.ch.DefaultConsistentHash] Using 1 virtualNodes to initialize consistent hash wheel 
2013-01-31 13:15:53,916 DEBUG (OOB-2,ISPN,ConcurrentStartupTest-NodeB-8774) [org.infinispan.statetransfer.DistributedStateTransferTask] Commencing rehash 2 on node: ConcurrentStartupTest-NodeB-8774. Before start, data container had 0 entries
2013-01-31 13:15:53,916 DEBUG (OOB-2,ISPN,ConcurrentStartupTest-NodeB-8774) [org.infinispan.statetransfer.StateTransferLockImpl] Blocking new write commands for cache view 2
2013-01-31 13:15:53,917 DEBUG (OOB-2,ISPN,CacheClusterJoinTest-NodeB-18666) [org.infinispan.distribution.ch.DefaultConsistentHash] Using 1 virtualNodes to initialize consistent hash wheel 
2013-01-31 13:15:53,918 DEBUG (OOB-2,ISPN,CacheClusterJoinTest-NodeB-18666) [org.infinispan.statetransfer.ReplicatedStateTransferTask] Commencing state transfer 2 on node: CacheClusterJoinTest-NodeB-18666. Before start, data container had 0 entries
2013-01-31 13:15:53,918 DEBUG (OOB-2,ISPN,CacheClusterJoinTest-NodeB-18666) [org.infinispan.statetransfer.StateTransferLockImpl] Blocking new write commands for cache view 2
2013-01-31 13:15:53,920 DEBUG (OOB-2,ISPN,MixedModeTest-NodeB-26468) [org.infinispan.cacheviews.CacheViewsManagerImpl] replSync: Committing cache view CacheView{viewId=2, members=[MixedModeTest-NodeA-25015, MixedModeTest-NodeB-26468]}
2013-01-31 13:15:53,921 DEBUG (OOB-2,ISPN,MixedModeTest-NodeB-26468) [org.infinispan.statetransfer.BaseStateTransferTask] Node MixedModeTest-NodeB-26468 completed state transfer for view 2 in 5 milliseconds!
2013-01-31 13:15:53,921 DEBUG (OOB-2,ISPN,MixedModeTest-NodeB-26468) [org.infinispan.statetransfer.StateTransferLockImpl] Unblocking write commands for cache view 2
2013-01-31 13:15:53,922 DEBUG (testng-MixedModeTest) [org.infinispan.CacheImpl] Started cache replSync on MixedModeTest-NodeB-26468
2013-01-31 13:15:53,923 DEBUG (CacheViewInstaller-1,MixedModeTest-NodeA-25015) [org.infinispan.cacheviews.CacheViewsManagerImpl] replSync: Committing cache view CacheView{viewId=2, members=[MixedModeTest-NodeA-25015, MixedModeTest-NodeB-26468]}
2013-01-31 13:15:53,923 DEBUG (CacheViewInstaller-1,MixedModeTest-NodeA-25015) [org.infinispan.statetransfer.BaseStateTransferTask] Node MixedModeTest-NodeA-25015 completed state transfer for view 2 in 66 milliseconds!
2013-01-31 13:15:53,923 DEBUG (CacheViewInstaller-1,MixedModeTest-NodeA-25015) [org.infinispan.statetransfer.StateTransferLockImpl] Unblocking write commands for cache view 2
2013-01-31 13:15:53,923 DEBUG (CacheViewInstaller-1,MixedModeTest-NodeA-25015) [org.infinispan.cacheviews.CacheViewsManagerImpl] Successfully installed view CacheView{viewId=2, members=[MixedModeTest-NodeA-25015, MixedModeTest-NodeB-26468]} for cache replSync
2013-01-31 13:15:53,926 DEBUG (OOB-2,ISPN,ConcurrentStartupTest-NodeB-8774) [org.infinispan.cacheviews.CacheViewsManagerImpl] test: Committing cache view CacheView{viewId=2, members=[ConcurrentStartupTest-NodeA-26973, ConcurrentStartupTest-NodeB-8774]}
2013-01-31 13:15:53,927 DEBUG (OOB-2,ISPN,ConcurrentStartupTest-NodeB-8774) [org.infinispan.statetransfer.BaseStateTransferTask] Node ConcurrentStartupTest-NodeB-8774 completed state transfer for view 2 in 11 milliseconds!
2013-01-31 13:15:53,927 DEBUG (OOB-2,ISPN,ConcurrentStartupTest-NodeB-8774) [org.infinispan.statetransfer.StateTransferLockImpl] Unblocking write commands for cache view 2
2013-01-31 13:15:53,927 DEBUG (testng-ConcurrentStartupTest) [org.infinispan.CacheImpl] Started cache test on ConcurrentStartupTest-NodeB-8774
2013-01-31 13:15:53,928 DEBUG (OOB-2,ISPN,CacheClusterJoinTest-NodeB-18666) [org.infinispan.cacheviews.CacheViewsManagerImpl] cache: Committing cache view CacheView{viewId=2, members=[CacheClusterJoinTest-NodeA-8863, CacheClusterJoinTest-NodeB-18666]}
2013-01-31 13:15:53,928 DEBUG (OOB-2,ISPN,CacheClusterJoinTest-NodeB-18666) [org.infinispan.statetransfer.BaseStateTransferTask] Node CacheClusterJoinTest-NodeB-18666 completed state transfer for view 2 in 10 milliseconds!
2013-01-31 13:15:53,928 DEBUG (OOB-2,ISPN,CacheClusterJoinTest-NodeB-18666) [org.infinispan.statetransfer.StateTransferLockImpl] Unblocking write commands for cache view 2
2013-01-31 13:15:53,928 DEBUG (testng-PutForExternalReadTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:53,928 DEBUG (testng-CacheClusterJoinTest) [org.infinispan.CacheImpl] Started cache cache on CacheClusterJoinTest-NodeB-18666
2013-01-31 13:15:53,929 INFO  (testng-PutForExternalReadTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:53,938 DEBUG (CacheViewInstaller-1,ConcurrentStartupTest-NodeA-26973) [org.infinispan.cacheviews.CacheViewsManagerImpl] test: Committing cache view CacheView{viewId=2, members=[ConcurrentStartupTest-NodeA-26973, ConcurrentStartupTest-NodeB-8774]}
2013-01-31 13:15:53,938 DEBUG (OOB-2,ISPN,KeyAffinityServiceTest-NodeB-45659) [org.infinispan.cacheviews.CacheViewsManagerImpl] dist: Committing cache view CacheView{viewId=2, members=[KeyAffinityServiceTest-NodeA-61608, KeyAffinityServiceTest-NodeB-45659]}
2013-01-31 13:15:53,938 DEBUG (CacheViewInstaller-1,ConcurrentStartupTest-NodeA-26973) [org.infinispan.statetransfer.BaseStateTransferTask] Node ConcurrentStartupTest-NodeA-26973 completed state transfer for view 2 in 81 milliseconds!
2013-01-31 13:15:53,938 DEBUG (OOB-2,ISPN,KeyAffinityServiceTest-NodeB-45659) [org.infinispan.statetransfer.BaseStateTransferTask] Node KeyAffinityServiceTest-NodeB-45659 completed state transfer for view 2 in 23 milliseconds!
2013-01-31 13:15:53,938 DEBUG (CacheViewInstaller-1,ConcurrentStartupTest-NodeA-26973) [org.infinispan.statetransfer.StateTransferLockImpl] Unblocking write commands for cache view 2
2013-01-31 13:15:53,938 DEBUG (OOB-2,ISPN,KeyAffinityServiceTest-NodeB-45659) [org.infinispan.statetransfer.StateTransferLockImpl] Unblocking write commands for cache view 2
2013-01-31 13:15:53,938 DEBUG (CacheViewInstaller-1,ConcurrentStartupTest-NodeA-26973) [org.infinispan.cacheviews.CacheViewsManagerImpl] Successfully installed view CacheView{viewId=2, members=[ConcurrentStartupTest-NodeA-26973, ConcurrentStartupTest-NodeB-8774]} for cache test
2013-01-31 13:15:53,939 DEBUG (CacheViewInstaller-1,CacheClusterJoinTest-NodeA-8863) [org.infinispan.cacheviews.CacheViewsManagerImpl] cache: Committing cache view CacheView{viewId=2, members=[CacheClusterJoinTest-NodeA-8863, CacheClusterJoinTest-NodeB-18666]}
2013-01-31 13:15:53,939 DEBUG (CacheViewInstaller-1,CacheClusterJoinTest-NodeA-8863) [org.infinispan.statetransfer.BaseStateTransferTask] Node CacheClusterJoinTest-NodeA-8863 completed state transfer for view 2 in 83 milliseconds!
2013-01-31 13:15:53,939 DEBUG (CacheViewInstaller-1,CacheClusterJoinTest-NodeA-8863) [org.infinispan.statetransfer.StateTransferLockImpl] Unblocking write commands for cache view 2
2013-01-31 13:15:53,939 DEBUG (CacheViewInstaller-1,CacheClusterJoinTest-NodeA-8863) [org.infinispan.cacheviews.CacheViewsManagerImpl] Successfully installed view CacheView{viewId=2, members=[CacheClusterJoinTest-NodeA-8863, CacheClusterJoinTest-NodeB-18666]} for cache cache
2013-01-31 13:15:53,942 DEBUG (testng-KeyAffinityServiceTest) [org.infinispan.CacheImpl] Started cache dist on KeyAffinityServiceTest-NodeB-45659
2013-01-31 13:15:53,944 DEBUG (CacheViewInstaller-1,KeyAffinityServiceTest-NodeA-61608) [org.infinispan.cacheviews.CacheViewsManagerImpl] dist: Committing cache view CacheView{viewId=2, members=[KeyAffinityServiceTest-NodeA-61608, KeyAffinityServiceTest-NodeB-45659]}
2013-01-31 13:15:53,944 DEBUG (CacheViewInstaller-1,KeyAffinityServiceTest-NodeA-61608) [org.infinispan.statetransfer.BaseStateTransferTask] Node KeyAffinityServiceTest-NodeA-61608 completed state transfer for view 2 in 94 milliseconds!
2013-01-31 13:15:53,944 DEBUG (CacheViewInstaller-1,KeyAffinityServiceTest-NodeA-61608) [org.infinispan.statetransfer.StateTransferLockImpl] Unblocking write commands for cache view 2
2013-01-31 13:15:53,944 DEBUG (CacheViewInstaller-1,KeyAffinityServiceTest-NodeA-61608) [org.infinispan.cacheviews.CacheViewsManagerImpl] Successfully installed view CacheView{viewId=2, members=[KeyAffinityServiceTest-NodeA-61608, KeyAffinityServiceTest-NodeB-45659]} for cache dist
2013-01-31 13:15:53,950 DEBUG (testng-Command line test) [org.jgroups.stack.Configurator] set property TCP.diagnostics_addr to default value /224.0.75.75
2013-01-31 13:15:53,960 DEBUG (testng-PutForExternalReadTest) [org.infinispan.transaction.TransactionTable] Min view id set to 1
2013-01-31 13:15:53,960 DEBUG (testng-PutForExternalReadTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 11
2013-01-31 13:15:53,961 DEBUG (testng-PutForExternalReadTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.StateTransferLockInterceptor@bf66590, TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@5d85d712, PB=org.infinispan.interceptors.StateTransferLockInterceptor@bf66590}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@7deb0eb5}
	>> org.infinispan.interceptors.TxInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@5312cda8}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@777bfb33, PB=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@777bfb33}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@6ca90e8d, TO=org.infinispan.interceptors.EntryWrappingInterceptor@6ca90e8d, PB=org.infinispan.interceptors.EntryWrappingInterceptor@6ca90e8d}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.ReplicationInterceptor@4efa82b6, TO=org.infinispan.interceptors.totalorder.TotalOrderReplicationInterceptor@209ba33c, PB=org.infinispan.interceptors.ReplicationInterceptor@4efa82b6}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:53,962 DEBUG (testng-PutForExternalReadTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Setting configuration tunned parameters
2013-01-31 13:15:53,964 DEBUG (testng-Command line test) [org.jgroups.protocols.FRAG2] received CONFIG event: {bind_addr=/127.0.0.1}
2013-01-31 13:15:53,965 DEBUG (testng-PutForExternalReadTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Configuration State responses are {PutForExternalReadTest-NodeA-2262=SuccessfulResponse{responseValue=ConfigurationState{numberOfOwners=0, protocolName='2PC', epoch=0}} }
2013-01-31 13:15:53,965 DEBUG (testng-PutForExternalReadTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Configuration State found: ConfigurationState{numberOfOwners=0, protocolName='2PC', epoch=0}
2013-01-31 13:15:53,965 DEBUG (testng-PutForExternalReadTest) [org.infinispan.cacheviews.CacheViewsManagerImpl] replSync: Node PutForExternalReadTest-NodeB-28287 is joining
2013-01-31 13:15:53,965 DEBUG (OOB-1,ISPN,PutForExternalReadTest-NodeA-2262) [org.infinispan.cacheviews.CacheViewsManagerImpl] replSync: Node PutForExternalReadTest-NodeB-28287 is joining
2013-01-31 13:15:53,969 DEBUG (CacheViewInstaller-1,PutForExternalReadTest-NodeA-2262) [org.infinispan.cacheviews.CacheViewsManagerImpl] Installing new view CacheView{viewId=2, members=[PutForExternalReadTest-NodeA-2262, PutForExternalReadTest-NodeB-28287]} for cache replSync
2013-01-31 13:15:53,982 DEBUG (transport-thread-38) [org.infinispan.distribution.ch.DefaultConsistentHash] Using 1 virtualNodes to initialize consistent hash wheel 
2013-01-31 13:15:53,982 DEBUG (transport-thread-38) [org.infinispan.statetransfer.ReplicatedStateTransferTask] Commencing state transfer 2 on node: PutForExternalReadTest-NodeA-2262. Before start, data container had 0 entries
2013-01-31 13:15:53,982 DEBUG (transport-thread-38) [org.infinispan.statetransfer.StateTransferLockImpl] Blocking new write commands for cache view 2
2013-01-31 13:15:53,982 DEBUG (testng-Command line test) [org.jgroups.protocols.pbcast.GMS] address=Command line test-NodeA-47104, cluster=ISPN, physical address=127.0.0.1:8400
2013-01-31 13:15:53,987 DEBUG (testng-Command line test) [org.jgroups.protocols.pbcast.NAKACK2] 
[Command line test-NodeA-47104 setDigest()]
existing digest:  []
new digest:       Command line test-NodeA-47104: [0 (0)]
resulting digest: Command line test-NodeA-47104: [0 (0)]
2013-01-31 13:15:53,987 DEBUG (testng-Command line test) [org.jgroups.protocols.pbcast.GMS] Command line test-NodeA-47104: installing view [Command line test-NodeA-47104|0] [Command line test-NodeA-47104]
2013-01-31 13:15:53,987 DEBUG (testng-Command line test) [org.jgroups.protocols.pbcast.STABLE] resuming message garbage collection
2013-01-31 13:15:53,987 DEBUG (testng-Command line test) [org.jgroups.protocols.pbcast.STABLE] [ergonomics] setting max_bytes to 400KB (1 members)
2013-01-31 13:15:53,989 DEBUG (testng-Command line test) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] New view accepted: [Command line test-NodeA-47104|0] [Command line test-NodeA-47104]
2013-01-31 13:15:53,989 INFO  (testng-Command line test) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000094: Received new cluster view: [Command line test-NodeA-47104|0] [Command line test-NodeA-47104]
2013-01-31 13:15:53,993 DEBUG (OOB-3,ISPN,PutForExternalReadTest-NodeB-28287) [org.infinispan.distribution.ch.DefaultConsistentHash] Using 1 virtualNodes to initialize consistent hash wheel 
2013-01-31 13:15:53,995 DEBUG (testng-Command line test) [org.jgroups.protocols.pbcast.STABLE] resuming message garbage collection
2013-01-31 13:15:53,995 DEBUG (testng-Command line test) [org.jgroups.protocols.pbcast.GMS] created group (first member). My view is [Command line test-NodeA-47104|0], impl is org.jgroups.protocols.pbcast.CoordGmsImpl
2013-01-31 13:15:53,995 INFO  (testng-Command line test) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000079: Cache local address is Command line test-NodeA-47104, physical addresses are [127.0.0.1:8400]
2013-01-31 13:15:53,995 DEBUG (testng-Command line test) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] Waiting on view being accepted
2013-01-31 13:15:53,996 DEBUG (OOB-3,ISPN,PutForExternalReadTest-NodeB-28287) [org.infinispan.statetransfer.ReplicatedStateTransferTask] Commencing state transfer 2 on node: PutForExternalReadTest-NodeB-28287. Before start, data container had 0 entries
2013-01-31 13:15:53,996 DEBUG (OOB-3,ISPN,PutForExternalReadTest-NodeB-28287) [org.infinispan.statetransfer.StateTransferLockImpl] Blocking new write commands for cache view 2
2013-01-31 13:15:53,997 WARN  (testng-LocalKeyAffinityServiceTest) [org.jgroups.stack.Configurator] [JGRP00013] TP.discard_incompatible_packets has been deprecated: incompatible packets are discarded anyway
2013-01-31 13:15:53,998 DEBUG (OOB-3,ISPN,PutForExternalReadTest-NodeB-28287) [org.infinispan.cacheviews.CacheViewsManagerImpl] replSync: Committing cache view CacheView{viewId=2, members=[PutForExternalReadTest-NodeA-2262, PutForExternalReadTest-NodeB-28287]}
2013-01-31 13:15:53,998 DEBUG (OOB-3,ISPN,PutForExternalReadTest-NodeB-28287) [org.infinispan.statetransfer.BaseStateTransferTask] Node PutForExternalReadTest-NodeB-28287 completed state transfer for view 2 in 2 milliseconds!
2013-01-31 13:15:53,998 DEBUG (OOB-3,ISPN,PutForExternalReadTest-NodeB-28287) [org.infinispan.statetransfer.StateTransferLockImpl] Unblocking write commands for cache view 2
2013-01-31 13:15:53,998 DEBUG (testng-PutForExternalReadTest) [org.infinispan.CacheImpl] Started cache replSync on PutForExternalReadTest-NodeB-28287
2013-01-31 13:15:53,999 DEBUG (CacheViewInstaller-1,PutForExternalReadTest-NodeA-2262) [org.infinispan.cacheviews.CacheViewsManagerImpl] replSync: Committing cache view CacheView{viewId=2, members=[PutForExternalReadTest-NodeA-2262, PutForExternalReadTest-NodeB-28287]}
2013-01-31 13:15:53,999 DEBUG (CacheViewInstaller-1,PutForExternalReadTest-NodeA-2262) [org.infinispan.statetransfer.BaseStateTransferTask] Node PutForExternalReadTest-NodeA-2262 completed state transfer for view 2 in 17 milliseconds!
2013-01-31 13:15:53,999 DEBUG (CacheViewInstaller-1,PutForExternalReadTest-NodeA-2262) [org.infinispan.statetransfer.StateTransferLockImpl] Unblocking write commands for cache view 2
2013-01-31 13:15:53,999 DEBUG (CacheViewInstaller-1,PutForExternalReadTest-NodeA-2262) [org.infinispan.cacheviews.CacheViewsManagerImpl] Successfully installed view CacheView{viewId=2, members=[PutForExternalReadTest-NodeA-2262, PutForExternalReadTest-NodeB-28287]} for cache replSync
2013-01-31 13:15:54,023 DEBUG (testng-MixedModeTest) [org.infinispan.api.MixedModeTest] Cache managers created, ready to start the test
2013-01-31 13:15:54,024 INFO  (testng-MixedModeTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testMixedMode(org.infinispan.api.MixedModeTest)
2013-01-31 13:15:54,029 DEBUG (testng-MixedModeTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:54,029 DEBUG (testng-CacheClusterJoinTest) [org.infinispan.manager.DefaultCacheManager] Stopping cache manager ISPN on CacheClusterJoinTest-NodeA-8863
2013-01-31 13:15:54,029 DEBUG (testng-MixedModeTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:54,029 DEBUG (testng-CacheClusterJoinTest) [org.infinispan.CacheImpl] Stopping cache cache on CacheClusterJoinTest-NodeA-8863
2013-01-31 13:15:54,030 DEBUG (testng-CacheClusterJoinTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 30 seconds.
2013-01-31 13:15:54,030 DEBUG (testng-CacheClusterJoinTest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:54,041 DEBUG (testng-MixedModeTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:54,048 DEBUG (Incoming-1,ISPN,CacheClusterJoinTest-NodeB-18666) [org.infinispan.statetransfer.StateTransferLockImpl] Blocking new write commands because we'll soon start a state transfer
2013-01-31 13:15:54,050 DEBUG (testng-Command line test) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:54,050 DEBUG (testng-Command line test) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:54,051 DEBUG (testng-Command line test) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:54,051 INFO  (testng-Command line test) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:54,053 DEBUG (testng-Command line test) [org.infinispan.transaction.TransactionTable] Min view id set to 0
2013-01-31 13:15:54,053 DEBUG (testng-Command line test) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 10
2013-01-31 13:15:54,054 INFO  (testng-CacheClusterJoinTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000080: Disconnecting and closing JGroups Channel
2013-01-31 13:15:54,058 INFO  (testng-MixedModeTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:54,058 DEBUG (testng-MixedModeTest) [org.infinispan.transaction.TransactionTable] Min view id set to 1
2013-01-31 13:15:54,058 DEBUG (testng-MixedModeTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 10
2013-01-31 13:15:54,058 DEBUG (testng-MixedModeTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.StateTransferLockInterceptor@4e76dbc6, TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@5d56cc68, PB=org.infinispan.interceptors.StateTransferLockInterceptor@4e76dbc6}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@6d85efb7}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@54c82d99}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@2229c34b, PB=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@2229c34b}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@63d48272, TO=org.infinispan.interceptors.EntryWrappingInterceptor@63d48272, PB=org.infinispan.interceptors.EntryWrappingInterceptor@63d48272}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.ReplicationInterceptor@14c03d92, TO=org.infinispan.interceptors.ReplicationInterceptor@14c03d92, PB=org.infinispan.interceptors.ReplicationInterceptor@14c03d92}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:54,059 DEBUG (testng-Command line test) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.StateTransferLockInterceptor@3589f0, TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@3af2ebab, PB=org.infinispan.interceptors.StateTransferLockInterceptor@3589f0}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@224e45c9}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@40c7a0b7}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@72086f9a, PB=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@72086f9a}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@7d721f3, TO=org.infinispan.interceptors.EntryWrappingInterceptor@7d721f3, PB=org.infinispan.interceptors.EntryWrappingInterceptor@7d721f3}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.DistributionInterceptor@3cf5dc8a, TO=org.infinispan.interceptors.totalorder.TotalOrderDistributionInterceptor@3162074a, PB=org.infinispan.interceptors.DistributionInterceptor@3cf5dc8a}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:54,059 DEBUG (testng-MixedModeTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Setting configuration tunned parameters
2013-01-31 13:15:54,059 DEBUG (testng-Command line test) [org.infinispan.distribution.ch.DefaultConsistentHash] Using 51 virtualNodes to initialize consistent hash wheel 
2013-01-31 13:15:54,059 DEBUG (testng-Command line test) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Setting configuration tunned parameters
2013-01-31 13:15:54,059 DEBUG (testng-Command line test) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Configuration State responses are {}
2013-01-31 13:15:54,059 DEBUG (testng-Command line test) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] No Configuration State found in cluster
2013-01-31 13:15:54,059 DEBUG (testng-Command line test) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] No State found. Using original configuration parameters
2013-01-31 13:15:54,059 DEBUG (testng-Command line test) [org.infinispan.cacheviews.CacheViewsManagerImpl] my-cache: Node Command line test-NodeA-47104 is joining
2013-01-31 13:15:54,060 DEBUG (testng-MixedModeTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Configuration State responses are {MixedModeTest-NodeB-26468=null}
2013-01-31 13:15:54,060 DEBUG (testng-MixedModeTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Exception while trying to get the Configuration State
java.lang.NullPointerException
	at org.infinispan.statetransfer.BaseStateTransferManagerImpl.getClusterConfigurationState(BaseStateTransferManagerImpl.java:207)
	at org.infinispan.statetransfer.BaseStateTransferManagerImpl.setConfigurationChanges(BaseStateTransferManagerImpl.java:179)
	at org.infinispan.statetransfer.BaseStateTransferManagerImpl.start(BaseStateTransferManagerImpl.java:169)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.infinispan.util.ReflectionUtil.invokeAccessibly(ReflectionUtil.java:236)
	at org.infinispan.factories.AbstractComponentRegistry$PrioritizedMethod.invoke(AbstractComponentRegistry.java:885)
	at org.infinispan.factories.AbstractComponentRegistry.invokeStartMethods(AbstractComponentRegistry.java:639)
	at org.infinispan.factories.AbstractComponentRegistry.internalStart(AbstractComponentRegistry.java:628)
	at org.infinispan.factories.AbstractComponentRegistry.start(AbstractComponentRegistry.java:531)
	at org.infinispan.factories.ComponentRegistry.start(ComponentRegistry.java:176)
	at org.infinispan.CacheImpl.start(CacheImpl.java:522)
	at org.infinispan.manager.DefaultCacheManager.createCache(DefaultCacheManager.java:665)
	at org.infinispan.manager.DefaultCacheManager.getCache(DefaultCacheManager.java:550)
	at org.infinispan.test.MultipleCacheManagersTest.cache(MultipleCacheManagersTest.java:387)
	at org.infinispan.api.MixedModeTest.testMixedMode(MixedModeTest.java:59)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:54,060 DEBUG (testng-MixedModeTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] No Configuration State found in cluster
2013-01-31 13:15:54,060 DEBUG (testng-MixedModeTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] No State found. Using original configuration parameters
2013-01-31 13:15:54,060 DEBUG (testng-MixedModeTest) [org.infinispan.cacheviews.CacheViewsManagerImpl] replAsync: Node MixedModeTest-NodeA-25015 is joining
2013-01-31 13:15:54,060 DEBUG (CacheViewInstaller-1,MixedModeTest-NodeA-25015) [org.infinispan.cacheviews.CacheViewsManagerImpl] Installing new view CacheView{viewId=1, members=[MixedModeTest-NodeA-25015]} for cache replAsync
2013-01-31 13:15:54,060 DEBUG (CacheViewInstaller-1,Command line test-NodeA-47104) [org.infinispan.cacheviews.CacheViewsManagerImpl] Installing new view CacheView{viewId=1, members=[Command line test-NodeA-47104]} for cache my-cache
2013-01-31 13:15:54,061 DEBUG (transport-thread-16) [org.infinispan.distribution.ch.DefaultConsistentHash] Using 1 virtualNodes to initialize consistent hash wheel 
2013-01-31 13:15:54,063 DEBUG (transport-thread-16) [org.infinispan.statetransfer.ReplicatedStateTransferTask] Commencing state transfer 1 on node: MixedModeTest-NodeA-25015. Before start, data container had 0 entries
2013-01-31 13:15:54,063 DEBUG (transport-thread-16) [org.infinispan.statetransfer.StateTransferLockImpl] Blocking new write commands for cache view 1
2013-01-31 13:15:54,063 DEBUG (CacheViewInstaller-1,MixedModeTest-NodeA-25015) [org.infinispan.cacheviews.CacheViewsManagerImpl] replAsync: Committing cache view CacheView{viewId=1, members=[MixedModeTest-NodeA-25015]}
2013-01-31 13:15:54,063 DEBUG (CacheViewInstaller-1,MixedModeTest-NodeA-25015) [org.infinispan.statetransfer.BaseStateTransferTask] Node MixedModeTest-NodeA-25015 completed state transfer for view 1 in 0 milliseconds!
2013-01-31 13:15:54,063 DEBUG (CacheViewInstaller-1,MixedModeTest-NodeA-25015) [org.infinispan.statetransfer.StateTransferLockImpl] Unblocking write commands for cache view 1
2013-01-31 13:15:54,063 DEBUG (CacheViewInstaller-1,MixedModeTest-NodeA-25015) [org.infinispan.cacheviews.CacheViewsManagerImpl] Successfully installed view CacheView{viewId=1, members=[MixedModeTest-NodeA-25015]} for cache replAsync
2013-01-31 13:15:54,063 DEBUG (testng-MixedModeTest) [org.infinispan.CacheImpl] Started cache replAsync on MixedModeTest-NodeA-25015
2013-01-31 13:15:54,063 DEBUG (asyncTransportThread-40) [org.infinispan.distribution.ch.DefaultConsistentHash] Using 51 virtualNodes to initialize consistent hash wheel 
2013-01-31 13:15:54,064 DEBUG (asyncTransportThread-40) [org.infinispan.statetransfer.DistributedStateTransferTask] Commencing rehash 1 on node: Command line test-NodeA-47104. Before start, data container had 0 entries
2013-01-31 13:15:54,064 DEBUG (asyncTransportThread-40) [org.infinispan.statetransfer.StateTransferLockImpl] Blocking new write commands for cache view 1
2013-01-31 13:15:54,064 DEBUG (CacheViewInstaller-1,Command line test-NodeA-47104) [org.infinispan.cacheviews.CacheViewsManagerImpl] my-cache: Committing cache view CacheView{viewId=1, members=[Command line test-NodeA-47104]}
2013-01-31 13:15:54,064 DEBUG (CacheViewInstaller-1,Command line test-NodeA-47104) [org.infinispan.statetransfer.BaseStateTransferTask] Node Command line test-NodeA-47104 completed state transfer for view 1 in 0 milliseconds!
2013-01-31 13:15:54,064 DEBUG (CacheViewInstaller-1,Command line test-NodeA-47104) [org.infinispan.statetransfer.StateTransferLockImpl] Unblocking write commands for cache view 1
2013-01-31 13:15:54,064 DEBUG (CacheViewInstaller-1,Command line test-NodeA-47104) [org.infinispan.cacheviews.CacheViewsManagerImpl] Successfully installed view CacheView{viewId=1, members=[Command line test-NodeA-47104]} for cache my-cache
2013-01-31 13:15:54,064 DEBUG (testng-Command line test) [org.infinispan.CacheImpl] Started cache my-cache on Command line test-NodeA-47104
2013-01-31 13:15:54,064 INFO  (testng-Command line test) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testSimpleDistributedClusterModeNamedCache(org.infinispan.configuration.ConfigurationOverrideTest).
2013-01-31 13:15:54,065 DEBUG (testng-Command line test) [org.infinispan.manager.DefaultCacheManager] Stopping cache manager ISPN on Command line test-NodeA-47104
2013-01-31 13:15:54,065 DEBUG (testng-Command line test) [org.infinispan.CacheImpl] Stopping cache my-cache on Command line test-NodeA-47104
2013-01-31 13:15:54,065 DEBUG (testng-Command line test) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 30 seconds.
2013-01-31 13:15:54,065 DEBUG (testng-Command line test) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:54,065 DEBUG (CacheViewInstaller-1,Command line test-NodeA-47104) [org.infinispan.cacheviews.CacheViewsManagerImpl] Installing new view CacheView{viewId=2, members=[]} for cache my-cache
2013-01-31 13:15:54,067 INFO  (testng-Command line test) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000080: Disconnecting and closing JGroups Channel
2013-01-31 13:15:54,069 DEBUG (testng-Command line test) [org.infinispan.test.fwk.TEST_PING] Stop discovery for Command line test-NodeA-47104
2013-01-31 13:15:54,070 DEBUG (testng-Command line test) [org.jgroups.protocols.TCP] closing sockets and stopping threads
2013-01-31 13:15:54,070 INFO  (testng-Command line test) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000082: Stopping the RpcDispatcher
2013-01-31 13:15:54,071 INFO  (testng-Command line test) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testDefaultAndNamedCacheOverride(org.infinispan.configuration.parsing.ParserTest)
2013-01-31 13:15:54,089 DEBUG (testng-MixedModeTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:54,091 DEBUG (testng-LocalKeyAffinityServiceTest) [org.jgroups.stack.Configurator] set property TCP.diagnostics_addr to default value /224.0.75.75
2013-01-31 13:15:54,092 DEBUG (testng-MixedModeTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:54,091 DEBUG (Incoming-1,ISPN,CacheClusterJoinTest-NodeB-18666) [org.jgroups.protocols.pbcast.GMS] CacheClusterJoinTest-NodeB-18666: installing view [CacheClusterJoinTest-NodeB-18666|2] [CacheClusterJoinTest-NodeB-18666]
2013-01-31 13:15:54,093 DEBUG (Incoming-1,ISPN,CacheClusterJoinTest-NodeB-18666) [org.jgroups.protocols.pbcast.STABLE] resuming message garbage collection
2013-01-31 13:15:54,093 DEBUG (Incoming-1,ISPN,CacheClusterJoinTest-NodeB-18666) [org.jgroups.protocols.pbcast.NAKACK2] removed CacheClusterJoinTest-NodeA-8863 from xmit_table (not member anymore)
2013-01-31 13:15:54,097 DEBUG (Incoming-1,ISPN,CacheClusterJoinTest-NodeB-18666) [org.jgroups.protocols.pbcast.STABLE] [ergonomics] setting max_bytes to 400KB (1 members)
2013-01-31 13:15:54,098 DEBUG (Incoming-1,ISPN,CacheClusterJoinTest-NodeB-18666) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] New view accepted: [CacheClusterJoinTest-NodeB-18666|2] [CacheClusterJoinTest-NodeB-18666]
2013-01-31 13:15:54,098 INFO  (Incoming-1,ISPN,CacheClusterJoinTest-NodeB-18666) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000094: Received new cluster view: [CacheClusterJoinTest-NodeB-18666|2] [CacheClusterJoinTest-NodeB-18666]
2013-01-31 13:15:54,099 DEBUG (testng-PutForExternalReadTest) [org.infinispan.api.mvcc.PutForExternalReadTest] Cache managers created, ready to start the test
2013-01-31 13:15:54,099 INFO  (testng-PutForExternalReadTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testBasicPropagation(org.infinispan.api.mvcc.PutForExternalReadTest)
2013-01-31 13:15:54,110 DEBUG (testng-LocalKeyAffinityServiceTest) [org.jgroups.protocols.FRAG2] received CONFIG event: {bind_addr=/127.0.0.1}
2013-01-31 13:15:54,113 DEBUG (testng-CacheClusterJoinTest) [org.jgroups.blocks.TCPConnectionMap] connection table is not running, discarding message to 127.0.0.1:7901
2013-01-31 13:15:54,113 DEBUG (testng-CacheClusterJoinTest) [org.infinispan.test.fwk.TEST_PING] Stop discovery for CacheClusterJoinTest-NodeA-8863
2013-01-31 13:15:54,113 DEBUG (testng-CacheClusterJoinTest) [org.jgroups.protocols.TCP] closing sockets and stopping threads
2013-01-31 13:15:54,115 DEBUG (testng-LocalKeyAffinityServiceTest) [org.jgroups.protocols.pbcast.GMS] address=LocalKeyAffinityServiceTest-NodeB-61244, cluster=ISPN, physical address=127.0.0.1:8051
2013-01-31 13:15:54,115 DEBUG (testng-LocalKeyAffinityServiceTest) [org.jgroups.protocols.pbcast.GMS] election results: {LocalKeyAffinityServiceTest-NodeA-40360=1}
2013-01-31 13:15:54,115 DEBUG (testng-LocalKeyAffinityServiceTest) [org.jgroups.protocols.pbcast.GMS] sending JOIN(LocalKeyAffinityServiceTest-NodeB-61244) to LocalKeyAffinityServiceTest-NodeA-40360
2013-01-31 13:15:54,117 INFO  (testng-CacheClusterJoinTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000082: Stopping the RpcDispatcher
2013-01-31 13:15:54,135 WARN  (testng-FlagsEnabledTest) [org.jgroups.stack.Configurator] [JGRP00013] TP.discard_incompatible_packets has been deprecated: incompatible packets are discarded anyway
2013-01-31 13:15:54,147 DEBUG (notification-thread-43) [org.infinispan.transaction.TransactionTable] View changed, recalculating minViewId
2013-01-31 13:15:54,148 INFO  (testng-PutForExternalReadTest) [org.infinispan.test.ReplListener]  [Cache 'replSync'@PutForExternalReadTest-NodeB-28287] Setting expected commands to [class org.infinispan.commands.write.PutKeyValueCommand]
2013-01-31 13:15:54,148 INFO  (testng-PutForExternalReadTest) [org.infinispan.test.ReplListener]  [Cache 'replSync'@PutForExternalReadTest-NodeB-28287] Record eagerly is false, and eager commands are []
2013-01-31 13:15:54,156 DEBUG (testng-MixedModeTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:54,156 INFO  (testng-MixedModeTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:54,157 DEBUG (testng-MixedModeTest) [org.infinispan.transaction.TransactionTable] Min view id set to 1
2013-01-31 13:15:54,157 DEBUG (testng-MixedModeTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 10
2013-01-31 13:15:54,157 DEBUG (testng-MixedModeTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.StateTransferLockInterceptor@14d33f09, TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@38cf728d, PB=org.infinispan.interceptors.StateTransferLockInterceptor@14d33f09}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@3b69a41e}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@1495cc0b}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@7686f0bb, PB=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@7686f0bb}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@1526c1c8, TO=org.infinispan.interceptors.EntryWrappingInterceptor@1526c1c8, PB=org.infinispan.interceptors.EntryWrappingInterceptor@1526c1c8}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.ReplicationInterceptor@237c3c51, TO=org.infinispan.interceptors.ReplicationInterceptor@237c3c51, PB=org.infinispan.interceptors.ReplicationInterceptor@237c3c51}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:54,157 DEBUG (testng-MixedModeTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Setting configuration tunned parameters
2013-01-31 13:15:54,158 INFO  (testng-PutForExternalReadTest) [org.infinispan.test.ReplListener]  [Cache 'replSync'@PutForExternalReadTest-NodeB-28287] Expect Any is false, saw at least one? false Successful? false Expected commands [class org.infinispan.commands.write.PutKeyValueCommand]
2013-01-31 13:15:54,161 DEBUG (testng-MixedModeTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Configuration State responses are {MixedModeTest-NodeA-25015=SuccessfulResponse{responseValue=ConfigurationState{numberOfOwners=0, protocolName='2PC', epoch=0}} }
2013-01-31 13:15:54,161 DEBUG (testng-MixedModeTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Configuration State found: ConfigurationState{numberOfOwners=0, protocolName='2PC', epoch=0}
2013-01-31 13:15:54,161 DEBUG (testng-MixedModeTest) [org.infinispan.cacheviews.CacheViewsManagerImpl] replAsync: Node MixedModeTest-NodeB-26468 is joining
2013-01-31 13:15:54,162 DEBUG (OOB-2,ISPN,MixedModeTest-NodeA-25015) [org.infinispan.cacheviews.CacheViewsManagerImpl] replAsync: Node MixedModeTest-NodeB-26468 is joining
2013-01-31 13:15:54,163 DEBUG (CacheViewInstaller-1,MixedModeTest-NodeA-25015) [org.infinispan.cacheviews.CacheViewsManagerImpl] Installing new view CacheView{viewId=2, members=[MixedModeTest-NodeA-25015, MixedModeTest-NodeB-26468]} for cache replAsync
2013-01-31 13:15:54,163 DEBUG (transport-thread-29) [org.infinispan.distribution.ch.DefaultConsistentHash] Using 1 virtualNodes to initialize consistent hash wheel 
2013-01-31 13:15:54,163 DEBUG (transport-thread-29) [org.infinispan.statetransfer.ReplicatedStateTransferTask] Commencing state transfer 2 on node: MixedModeTest-NodeA-25015. Before start, data container had 0 entries
2013-01-31 13:15:54,164 DEBUG (transport-thread-29) [org.infinispan.statetransfer.StateTransferLockImpl] Blocking new write commands for cache view 2
2013-01-31 13:15:54,164 DEBUG (OOB-2,ISPN,MixedModeTest-NodeB-26468) [org.infinispan.distribution.ch.DefaultConsistentHash] Using 1 virtualNodes to initialize consistent hash wheel 
2013-01-31 13:15:54,164 DEBUG (OOB-2,ISPN,MixedModeTest-NodeB-26468) [org.infinispan.statetransfer.ReplicatedStateTransferTask] Commencing state transfer 2 on node: MixedModeTest-NodeB-26468. Before start, data container had 0 entries
2013-01-31 13:15:54,164 DEBUG (OOB-2,ISPN,MixedModeTest-NodeB-26468) [org.infinispan.statetransfer.StateTransferLockImpl] Blocking new write commands for cache view 2
2013-01-31 13:15:54,167 DEBUG (OOB-2,ISPN,MixedModeTest-NodeB-26468) [org.infinispan.cacheviews.CacheViewsManagerImpl] replAsync: Committing cache view CacheView{viewId=2, members=[MixedModeTest-NodeA-25015, MixedModeTest-NodeB-26468]}
2013-01-31 13:15:54,169 DEBUG (OOB-2,ISPN,MixedModeTest-NodeB-26468) [org.infinispan.statetransfer.BaseStateTransferTask] Node MixedModeTest-NodeB-26468 completed state transfer for view 2 in 4 milliseconds!
2013-01-31 13:15:54,169 DEBUG (OOB-2,ISPN,MixedModeTest-NodeB-26468) [org.infinispan.statetransfer.StateTransferLockImpl] Unblocking write commands for cache view 2
2013-01-31 13:15:54,170 DEBUG (testng-MixedModeTest) [org.infinispan.CacheImpl] Started cache replAsync on MixedModeTest-NodeB-26468
2013-01-31 13:15:54,188 DEBUG (ViewHandler,ISPN,LocalKeyAffinityServiceTest-NodeA-40360) [org.jgroups.protocols.pbcast.STABLE] suspending message garbage collection
2013-01-31 13:15:54,188 DEBUG (ViewHandler,ISPN,LocalKeyAffinityServiceTest-NodeA-40360) [org.jgroups.protocols.pbcast.STABLE] resume task started, max_suspend_time=33000
2013-01-31 13:15:54,189 DEBUG (CacheViewInstaller-1,MixedModeTest-NodeA-25015) [org.infinispan.cacheviews.CacheViewsManagerImpl] replAsync: Committing cache view CacheView{viewId=2, members=[MixedModeTest-NodeA-25015, MixedModeTest-NodeB-26468]}
2013-01-31 13:15:54,189 DEBUG (CacheViewInstaller-1,MixedModeTest-NodeA-25015) [org.infinispan.statetransfer.BaseStateTransferTask] Node MixedModeTest-NodeA-25015 completed state transfer for view 2 in 25 milliseconds!
2013-01-31 13:15:54,189 DEBUG (CacheViewInstaller-1,MixedModeTest-NodeA-25015) [org.infinispan.statetransfer.StateTransferLockImpl] Unblocking write commands for cache view 2
2013-01-31 13:15:54,189 DEBUG (CacheViewInstaller-1,MixedModeTest-NodeA-25015) [org.infinispan.cacheviews.CacheViewsManagerImpl] Successfully installed view CacheView{viewId=2, members=[MixedModeTest-NodeA-25015, MixedModeTest-NodeB-26468]} for cache replAsync
2013-01-31 13:15:54,191 DEBUG (Incoming-1,ISPN,LocalKeyAffinityServiceTest-NodeA-40360) [org.jgroups.protocols.pbcast.NAKACK2] 
[LocalKeyAffinityServiceTest-NodeA-40360 setDigest()]
existing digest:  LocalKeyAffinityServiceTest-NodeA-40360: [1 (1)]
new digest:       LocalKeyAffinityServiceTest-NodeA-40360: [0 (0)], LocalKeyAffinityServiceTest-NodeB-61244: [0 (0)]
resulting digest: LocalKeyAffinityServiceTest-NodeA-40360: [1 (1)], LocalKeyAffinityServiceTest-NodeB-61244: [0 (0)]
2013-01-31 13:15:54,191 DEBUG (Incoming-1,ISPN,LocalKeyAffinityServiceTest-NodeA-40360) [org.jgroups.protocols.pbcast.GMS] LocalKeyAffinityServiceTest-NodeA-40360: installing view [LocalKeyAffinityServiceTest-NodeA-40360|1] [LocalKeyAffinityServiceTest-NodeA-40360, LocalKeyAffinityServiceTest-NodeB-61244]
2013-01-31 13:15:54,192 DEBUG (Incoming-1,ISPN,LocalKeyAffinityServiceTest-NodeA-40360) [org.jgroups.protocols.pbcast.STABLE] [ergonomics] setting max_bytes to 800KB (2 members)
2013-01-31 13:15:54,192 DEBUG (Incoming-1,ISPN,LocalKeyAffinityServiceTest-NodeA-40360) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] New view accepted: [LocalKeyAffinityServiceTest-NodeA-40360|1] [LocalKeyAffinityServiceTest-NodeA-40360, LocalKeyAffinityServiceTest-NodeB-61244]
2013-01-31 13:15:54,192 INFO  (Incoming-1,ISPN,LocalKeyAffinityServiceTest-NodeA-40360) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000094: Received new cluster view: [LocalKeyAffinityServiceTest-NodeA-40360|1] [LocalKeyAffinityServiceTest-NodeA-40360, LocalKeyAffinityServiceTest-NodeB-61244]
2013-01-31 13:15:54,195 DEBUG (notification-thread-44) [org.infinispan.transaction.TransactionTable] View changed, recalculating minViewId
2013-01-31 13:15:54,199 DEBUG (testng-LocalKeyAffinityServiceTest) [org.jgroups.protocols.pbcast.NAKACK2] 
[LocalKeyAffinityServiceTest-NodeB-61244 setDigest()]
existing digest:  []
new digest:       LocalKeyAffinityServiceTest-NodeA-40360: [0 (0)], LocalKeyAffinityServiceTest-NodeB-61244: [0 (0)]
resulting digest: LocalKeyAffinityServiceTest-NodeA-40360: [0 (0)], LocalKeyAffinityServiceTest-NodeB-61244: [0 (0)]
2013-01-31 13:15:54,199 DEBUG (CacheViewTrigger,CacheClusterJoinTest-NodeB-18666) [org.infinispan.cacheviews.CacheViewsManagerImpl] Node CacheClusterJoinTest-NodeB-18666 is the new coordinator, recovering cache views
2013-01-31 13:15:54,199 DEBUG (testng-LocalKeyAffinityServiceTest) [org.jgroups.protocols.pbcast.GMS] LocalKeyAffinityServiceTest-NodeB-61244: installing view [LocalKeyAffinityServiceTest-NodeA-40360|1] [LocalKeyAffinityServiceTest-NodeA-40360, LocalKeyAffinityServiceTest-NodeB-61244]
2013-01-31 13:15:54,200 DEBUG (testng-LocalKeyAffinityServiceTest) [org.jgroups.protocols.pbcast.STABLE] [ergonomics] setting max_bytes to 800KB (2 members)
2013-01-31 13:15:54,200 DEBUG (testng-LocalKeyAffinityServiceTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] New view accepted: [LocalKeyAffinityServiceTest-NodeA-40360|1] [LocalKeyAffinityServiceTest-NodeA-40360, LocalKeyAffinityServiceTest-NodeB-61244]
2013-01-31 13:15:54,200 INFO  (testng-LocalKeyAffinityServiceTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000094: Received new cluster view: [LocalKeyAffinityServiceTest-NodeA-40360|1] [LocalKeyAffinityServiceTest-NodeA-40360, LocalKeyAffinityServiceTest-NodeB-61244]
2013-01-31 13:15:54,201 INFO  (testng-LocalKeyAffinityServiceTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000079: Cache local address is LocalKeyAffinityServiceTest-NodeB-61244, physical addresses are [127.0.0.1:8051]
2013-01-31 13:15:54,201 DEBUG (testng-LocalKeyAffinityServiceTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] Waiting on view being accepted
2013-01-31 13:15:54,201 DEBUG (ViewHandler,ISPN,LocalKeyAffinityServiceTest-NodeA-40360) [org.jgroups.protocols.pbcast.STABLE] resuming message garbage collection
2013-01-31 13:15:54,217 INFO  (testng-CacheClusterJoinTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testGetMembers(org.infinispan.api.CacheClusterJoinTest).
2013-01-31 13:15:54,218 DEBUG (testng-CacheClusterJoinTest) [org.infinispan.CacheImpl] Stopping cache cache on CacheClusterJoinTest-NodeB-18666
2013-01-31 13:15:54,218 DEBUG (testng-CacheClusterJoinTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 30 seconds.
2013-01-31 13:15:54,218 DEBUG (testng-CacheClusterJoinTest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:54,218 DEBUG (testng-CacheClusterJoinTest) [org.infinispan.manager.DefaultCacheManager] Stopping cache manager ISPN on CacheClusterJoinTest-NodeB-18666
2013-01-31 13:15:54,218 DEBUG (testng-CacheClusterJoinTest) [org.infinispan.CacheImpl] Stopping cache cache on CacheClusterJoinTest-NodeB-18666
2013-01-31 13:15:54,222 INFO  (Incoming-1,ISPN,PutForExternalReadTest-NodeB-28287) [org.infinispan.test.ReplListener]  [Cache 'replSync'@PutForExternalReadTest-NodeB-28287] Checking whether command PutKeyValueCommand should be marked as local with watch local set to false
2013-01-31 13:15:54,222 INFO  (Incoming-1,ISPN,PutForExternalReadTest-NodeB-28287) [org.infinispan.test.ReplListener]  [Cache 'replSync'@PutForExternalReadTest-NodeB-28287] ReplListener saw command PutKeyValueCommand{key=k, value=v, flags=[ZERO_LOCK_ACQUISITION_TIMEOUT, FORCE_ASYNCHRONOUS, PUT_FOR_EXTERNAL_READ], putIfAbsent=false, lifespanMillis=-1, maxIdleTimeMillis=-1}
2013-01-31 13:15:54,222 INFO  (Incoming-1,ISPN,PutForExternalReadTest-NodeB-28287) [org.infinispan.test.ReplListener]  [Cache 'replSync'@PutForExternalReadTest-NodeB-28287] Successfully removed command: class org.infinispan.commands.write.PutKeyValueCommand
2013-01-31 13:15:54,222 INFO  (Incoming-1,ISPN,PutForExternalReadTest-NodeB-28287) [org.infinispan.test.ReplListener]  [Cache 'replSync'@PutForExternalReadTest-NodeB-28287] Nothing to wait for, releasing latch
2013-01-31 13:15:54,223 INFO  (testng-PutForExternalReadTest) [org.infinispan.test.ReplListener]  [Cache 'replSync'@PutForExternalReadTest-NodeB-28287] Exiting wait for rpc with expected commands []
2013-01-31 13:15:54,223 INFO  (testng-PutForExternalReadTest) [org.infinispan.test.ReplListener]  [Cache 'replSync'@PutForExternalReadTest-NodeB-28287] Checking whether command GetKeyValueCommand should be marked as local with watch local set to false
2013-01-31 13:15:54,223 INFO  (testng-PutForExternalReadTest) [org.infinispan.test.ReplListener]  [Cache 'replSync'@PutForExternalReadTest-NodeB-28287] Checking whether command PutKeyValueCommand should be marked as local with watch local set to false
2013-01-31 13:15:54,223 INFO  (testng-PutForExternalReadTest) [org.infinispan.test.ReplListener]  [Cache 'replSync'@PutForExternalReadTest-NodeB-28287] Checking whether command GetKeyValueCommand should be marked as local with watch local set to false
2013-01-31 13:15:54,223 INFO  (testng-PutForExternalReadTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testBasicPropagation(org.infinispan.api.mvcc.PutForExternalReadTest).
2013-01-31 13:15:54,224 DEBUG (testng-PutForExternalReadTest) [org.infinispan.CacheImpl] Stopping cache replSync on PutForExternalReadTest-NodeA-2262
2013-01-31 13:15:54,224 DEBUG (testng-PutForExternalReadTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 0 milliseconds.
2013-01-31 13:15:54,224 DEBUG (testng-PutForExternalReadTest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:54,225 INFO  (testng-PutForExternalReadTest) [org.infinispan.test.ReplListener]  [Cache 'replSync'@PutForExternalReadTest-NodeB-28287] Checking whether command EntrySetCommand should be marked as local with watch local set to false
2013-01-31 13:15:54,225 DEBUG (testng-PutForExternalReadTest) [org.infinispan.CacheImpl] Stopping cache replSync on PutForExternalReadTest-NodeB-28287
2013-01-31 13:15:54,225 DEBUG (testng-PutForExternalReadTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 0 milliseconds.
2013-01-31 13:15:54,225 DEBUG (testng-PutForExternalReadTest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:54,226 DEBUG (testng-PutForExternalReadTest) [org.infinispan.manager.DefaultCacheManager] Stopping cache manager ISPN on PutForExternalReadTest-NodeA-2262
2013-01-31 13:15:54,226 DEBUG (testng-PutForExternalReadTest) [org.infinispan.CacheImpl] Stopping cache replSync on PutForExternalReadTest-NodeA-2262
2013-01-31 13:15:54,227 DEBUG (CacheViewTrigger,CacheClusterJoinTest-NodeB-18666) [org.infinispan.cacheviews.CacheViewsManagerImpl] Recovered partitions after merge for cache cache: [CacheView{viewId=2, members=[CacheClusterJoinTest-NodeB-18666]}]
2013-01-31 13:15:54,227 DEBUG (CacheViewInstaller-1,PutForExternalReadTest-NodeA-2262) [org.infinispan.cacheviews.CacheViewsManagerImpl] Installing new view CacheView{viewId=3, members=[PutForExternalReadTest-NodeB-28287]} for cache replSync
2013-01-31 13:15:54,227 INFO  (testng-CacheClusterJoinTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000080: Disconnecting and closing JGroups Channel
2013-01-31 13:15:54,232 WARN  (OOB-3,ISPN,PutForExternalReadTest-NodeB-28287) [org.infinispan.commands.control.CacheViewControlCommand] ISPN000071: Caught exception when handling command CacheViewControlCommand{cache=replSync, type=PREPARE_VIEW, sender=PutForExternalReadTest-NodeA-2262, newViewId=3, newMembers=[PutForExternalReadTest-NodeB-28287], oldViewId=2, oldMembers=[PutForExternalReadTest-NodeA-2262, PutForExternalReadTest-NodeB-28287]}
java.lang.IllegalStateException: replSync: Received cache view prepare request after the local node has already shut down
	at org.infinispan.cacheviews.CacheViewsManagerImpl.handlePrepareView(CacheViewsManagerImpl.java:527)
	at org.infinispan.commands.control.CacheViewControlCommand.perform(CacheViewControlCommand.java:139)
	at org.infinispan.remoting.InboundInvocationHandlerImpl.handle(InboundInvocationHandlerImpl.java:96)
	at org.infinispan.remoting.transport.jgroups.CommandAwareRpcDispatcher.executeCommand(CommandAwareRpcDispatcher.java:232)
	at org.infinispan.remoting.transport.jgroups.CommandAwareRpcDispatcher.handle(CommandAwareRpcDispatcher.java:210)
	at org.jgroups.blocks.RequestCorrelator.handleRequest(RequestCorrelator.java:480)
	at org.jgroups.blocks.RequestCorrelator.receiveMessage(RequestCorrelator.java:390)
	at org.jgroups.blocks.RequestCorrelator.receive(RequestCorrelator.java:248)
	at org.jgroups.blocks.MessageDispatcher$ProtocolAdapter.up(MessageDispatcher.java:600)
	at org.jgroups.JChannel.up(JChannel.java:700)
	at org.jgroups.stack.ProtocolStack.up(ProtocolStack.java:1020)
	at org.jgroups.protocols.FRAG2.up(FRAG2.java:181)
	at org.jgroups.protocols.FC.up(FC.java:479)
	at org.jgroups.protocols.tom.TOA.up(TOA.java:119)
	at org.jgroups.protocols.SEQUENCER.up(SEQUENCER.java:252)
	at org.jgroups.protocols.pbcast.GMS.up(GMS.java:896)
	at org.jgroups.protocols.pbcast.STABLE.up(STABLE.java:244)
	at org.jgroups.protocols.RSVP.up(RSVP.java:164)
	at org.jgroups.protocols.UNICAST2.handleDataReceived(UNICAST2.java:737)
	at org.jgroups.protocols.UNICAST2.up(UNICAST2.java:414)
	at org.jgroups.protocols.pbcast.NAKACK2.up(NAKACK2.java:610)
	at org.jgroups.protocols.Discovery.up(Discovery.java:371)
	at org.jgroups.protocols.TP.passMessageUp(TP.java:1262)
	at org.jgroups.protocols.TP$IncomingPacket.handleMyMessage(TP.java:1824)
	at org.jgroups.protocols.TP$IncomingPacket.run(TP.java:1797)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:54,241 DEBUG (testng-CacheClusterJoinTest) [org.infinispan.test.fwk.TEST_PING] Stop discovery for CacheClusterJoinTest-NodeB-18666
2013-01-31 13:15:54,241 DEBUG (testng-CacheClusterJoinTest) [org.jgroups.protocols.TCP] closing sockets and stopping threads
2013-01-31 13:15:54,242 INFO  (testng-CacheClusterJoinTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000082: Stopping the RpcDispatcher
2013-01-31 13:15:54,243 DEBUG (testng-CacheClusterJoinTest) [org.infinispan.api.CacheClusterJoinTest] Creating cache managers
2013-01-31 13:15:54,244 DEBUG (testng-CacheClusterJoinTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:54,251 DEBUG (testng-CacheClusterJoinTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:54,260 DEBUG (testng-CacheClusterJoinTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:54,261 DEBUG (testng-CacheClusterJoinTest) [org.infinispan.api.CacheClusterJoinTest] Cache managers created, ready to start the test
2013-01-31 13:15:54,261 INFO  (testng-CacheClusterJoinTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testIsCoordinator(org.infinispan.api.CacheClusterJoinTest)
2013-01-31 13:15:54,261 INFO  (testng-CacheClusterJoinTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000078: Starting JGroups Channel
2013-01-31 13:15:54,271 DEBUG (testng-MixedModeTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:54,272 DEBUG (testng-MixedModeTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:54,273 DEBUG (testng-LocalKeyAffinityServiceTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:54,273 DEBUG (testng-LocalKeyAffinityServiceTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:54,293 DEBUG (testng-MixedModeTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:54,294 DEBUG (testng-LocalKeyAffinityServiceTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:54,294 INFO  (testng-LocalKeyAffinityServiceTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:54,295 DEBUG (testng-LocalKeyAffinityServiceTest) [org.infinispan.transaction.TransactionTable] Min view id set to 1
2013-01-31 13:15:54,296 DEBUG (testng-LocalKeyAffinityServiceTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 10
2013-01-31 13:15:54,296 DEBUG (testng-LocalKeyAffinityServiceTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.StateTransferLockInterceptor@7558fa79, TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@24a45a1f, PB=org.infinispan.interceptors.StateTransferLockInterceptor@7558fa79}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@2218bc04}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@5dfbc19}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@23b61052, PB=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@23b61052}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@5e989cf, TO=org.infinispan.interceptors.EntryWrappingInterceptor@5e989cf, PB=org.infinispan.interceptors.EntryWrappingInterceptor@5e989cf}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.DistributionInterceptor@27567811, TO=org.infinispan.interceptors.totalorder.TotalOrderDistributionInterceptor@1de4b844, PB=org.infinispan.interceptors.DistributionInterceptor@27567811}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:54,296 DEBUG (testng-LocalKeyAffinityServiceTest) [org.infinispan.distribution.ch.DefaultConsistentHash] Using 1 virtualNodes to initialize consistent hash wheel 
2013-01-31 13:15:54,296 DEBUG (testng-LocalKeyAffinityServiceTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Setting configuration tunned parameters
2013-01-31 13:15:54,298 DEBUG (testng-LocalKeyAffinityServiceTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Configuration State responses are {LocalKeyAffinityServiceTest-NodeA-40360=SuccessfulResponse{responseValue=ConfigurationState{numberOfOwners=2, protocolName='2PC', epoch=0}} }
2013-01-31 13:15:54,299 DEBUG (testng-LocalKeyAffinityServiceTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Configuration State found: ConfigurationState{numberOfOwners=2, protocolName='2PC', epoch=0}
2013-01-31 13:15:54,299 DEBUG (testng-LocalKeyAffinityServiceTest) [org.infinispan.cacheviews.CacheViewsManagerImpl] dist: Node LocalKeyAffinityServiceTest-NodeB-61244 is joining
2013-01-31 13:15:54,300 DEBUG (OOB-1,ISPN,LocalKeyAffinityServiceTest-NodeA-40360) [org.infinispan.cacheviews.CacheViewsManagerImpl] dist: Node LocalKeyAffinityServiceTest-NodeB-61244 is joining
2013-01-31 13:15:54,301 DEBUG (CacheViewInstaller-1,LocalKeyAffinityServiceTest-NodeA-40360) [org.infinispan.cacheviews.CacheViewsManagerImpl] Installing new view CacheView{viewId=2, members=[LocalKeyAffinityServiceTest-NodeA-40360, LocalKeyAffinityServiceTest-NodeB-61244]} for cache dist
2013-01-31 13:15:54,302 DEBUG (OOB-1,ISPN,LocalKeyAffinityServiceTest-NodeB-61244) [org.infinispan.distribution.ch.DefaultConsistentHash] Using 1 virtualNodes to initialize consistent hash wheel 
2013-01-31 13:15:54,304 DEBUG (transport-thread-48) [org.infinispan.distribution.ch.DefaultConsistentHash] Using 1 virtualNodes to initialize consistent hash wheel 
2013-01-31 13:15:54,304 DEBUG (transport-thread-48) [org.infinispan.statetransfer.DistributedStateTransferTask] Commencing rehash 2 on node: LocalKeyAffinityServiceTest-NodeA-40360. Before start, data container had 0 entries
2013-01-31 13:15:54,304 DEBUG (transport-thread-48) [org.infinispan.statetransfer.StateTransferLockImpl] Blocking new write commands for cache view 2
2013-01-31 13:15:54,304 DEBUG (OOB-1,ISPN,LocalKeyAffinityServiceTest-NodeB-61244) [org.infinispan.statetransfer.DistributedStateTransferTask] Commencing rehash 2 on node: LocalKeyAffinityServiceTest-NodeB-61244. Before start, data container had 0 entries
2013-01-31 13:15:54,304 DEBUG (OOB-1,ISPN,LocalKeyAffinityServiceTest-NodeB-61244) [org.infinispan.statetransfer.StateTransferLockImpl] Blocking new write commands for cache view 2
2013-01-31 13:15:54,307 DEBUG (OOB-1,ISPN,LocalKeyAffinityServiceTest-NodeB-61244) [org.infinispan.cacheviews.CacheViewsManagerImpl] dist: Committing cache view CacheView{viewId=2, members=[LocalKeyAffinityServiceTest-NodeA-40360, LocalKeyAffinityServiceTest-NodeB-61244]}
2013-01-31 13:15:54,308 DEBUG (OOB-1,ISPN,LocalKeyAffinityServiceTest-NodeB-61244) [org.infinispan.statetransfer.BaseStateTransferTask] Node LocalKeyAffinityServiceTest-NodeB-61244 completed state transfer for view 2 in 3 milliseconds!
2013-01-31 13:15:54,308 DEBUG (OOB-1,ISPN,LocalKeyAffinityServiceTest-NodeB-61244) [org.infinispan.statetransfer.StateTransferLockImpl] Unblocking write commands for cache view 2
2013-01-31 13:15:54,308 DEBUG (testng-LocalKeyAffinityServiceTest) [org.infinispan.CacheImpl] Started cache dist on LocalKeyAffinityServiceTest-NodeB-61244
2013-01-31 13:15:54,309 DEBUG (CacheViewInstaller-1,LocalKeyAffinityServiceTest-NodeA-40360) [org.infinispan.cacheviews.CacheViewsManagerImpl] dist: Committing cache view CacheView{viewId=2, members=[LocalKeyAffinityServiceTest-NodeA-40360, LocalKeyAffinityServiceTest-NodeB-61244]}
2013-01-31 13:15:54,309 DEBUG (CacheViewInstaller-1,LocalKeyAffinityServiceTest-NodeA-40360) [org.infinispan.statetransfer.BaseStateTransferTask] Node LocalKeyAffinityServiceTest-NodeA-40360 completed state transfer for view 2 in 5 milliseconds!
2013-01-31 13:15:54,309 DEBUG (CacheViewInstaller-1,LocalKeyAffinityServiceTest-NodeA-40360) [org.infinispan.statetransfer.StateTransferLockImpl] Unblocking write commands for cache view 2
2013-01-31 13:15:54,309 DEBUG (CacheViewInstaller-1,LocalKeyAffinityServiceTest-NodeA-40360) [org.infinispan.cacheviews.CacheViewsManagerImpl] Successfully installed view CacheView{viewId=2, members=[LocalKeyAffinityServiceTest-NodeA-40360, LocalKeyAffinityServiceTest-NodeB-61244]} for cache dist
2013-01-31 13:15:54,356 INFO  (testng-MixedModeTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:54,357 DEBUG (testng-MixedModeTest) [org.infinispan.transaction.TransactionTable] Min view id set to 1
2013-01-31 13:15:54,357 DEBUG (testng-MixedModeTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 10
2013-01-31 13:15:54,357 DEBUG (testng-MixedModeTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@3785c67c}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@2faa135e}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@46dd98c4}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@7e589034, PB=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@7e589034}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@686386b9, TO=org.infinispan.interceptors.EntryWrappingInterceptor@686386b9, PB=org.infinispan.interceptors.EntryWrappingInterceptor@686386b9}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.InvalidationInterceptor@5e221139, TO=org.infinispan.interceptors.InvalidationInterceptor@5e221139, PB=org.infinispan.interceptors.InvalidationInterceptor@5e221139}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:54,357 DEBUG (testng-MixedModeTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Setting configuration tunned parameters
2013-01-31 13:15:54,358 DEBUG (testng-MixedModeTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Configuration State responses are {MixedModeTest-NodeB-26468=null}
2013-01-31 13:15:54,358 DEBUG (testng-MixedModeTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Exception while trying to get the Configuration State
java.lang.NullPointerException
	at org.infinispan.statetransfer.BaseStateTransferManagerImpl.getClusterConfigurationState(BaseStateTransferManagerImpl.java:207)
	at org.infinispan.statetransfer.BaseStateTransferManagerImpl.setConfigurationChanges(BaseStateTransferManagerImpl.java:179)
	at org.infinispan.statetransfer.BaseStateTransferManagerImpl.start(BaseStateTransferManagerImpl.java:169)
	at sun.reflect.GeneratedMethodAccessor174.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.infinispan.util.ReflectionUtil.invokeAccessibly(ReflectionUtil.java:236)
	at org.infinispan.factories.AbstractComponentRegistry$PrioritizedMethod.invoke(AbstractComponentRegistry.java:885)
	at org.infinispan.factories.AbstractComponentRegistry.invokeStartMethods(AbstractComponentRegistry.java:639)
	at org.infinispan.factories.AbstractComponentRegistry.internalStart(AbstractComponentRegistry.java:628)
	at org.infinispan.factories.AbstractComponentRegistry.start(AbstractComponentRegistry.java:531)
	at org.infinispan.factories.ComponentRegistry.start(ComponentRegistry.java:176)
	at org.infinispan.CacheImpl.start(CacheImpl.java:522)
	at org.infinispan.manager.DefaultCacheManager.createCache(DefaultCacheManager.java:665)
	at org.infinispan.manager.DefaultCacheManager.getCache(DefaultCacheManager.java:550)
	at org.infinispan.test.MultipleCacheManagersTest.cache(MultipleCacheManagersTest.java:387)
	at org.infinispan.api.MixedModeTest.testMixedMode(MixedModeTest.java:61)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:54,359 DEBUG (testng-MixedModeTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] No Configuration State found in cluster
2013-01-31 13:15:54,359 DEBUG (testng-MixedModeTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] No State found. Using original configuration parameters
2013-01-31 13:15:54,359 DEBUG (testng-MixedModeTest) [org.infinispan.cacheviews.CacheViewsManagerImpl] invalSync: Node MixedModeTest-NodeA-25015 is joining
2013-01-31 13:15:54,359 DEBUG (CacheViewInstaller-1,MixedModeTest-NodeA-25015) [org.infinispan.cacheviews.CacheViewsManagerImpl] Installing new view CacheView{viewId=1, members=[MixedModeTest-NodeA-25015]} for cache invalSync
2013-01-31 13:15:54,360 DEBUG (transport-thread-16) [org.infinispan.statetransfer.StateTransferLockImpl] Blocking new write commands for cache view 1
2013-01-31 13:15:54,360 DEBUG (CacheViewInstaller-1,MixedModeTest-NodeA-25015) [org.infinispan.cacheviews.CacheViewsManagerImpl] invalSync: Committing cache view CacheView{viewId=1, members=[MixedModeTest-NodeA-25015]}
2013-01-31 13:15:54,360 DEBUG (CacheViewInstaller-1,MixedModeTest-NodeA-25015) [org.infinispan.statetransfer.StateTransferLockImpl] Unblocking write commands for cache view 1
2013-01-31 13:15:54,360 DEBUG (CacheViewInstaller-1,MixedModeTest-NodeA-25015) [org.infinispan.cacheviews.CacheViewsManagerImpl] Successfully installed view CacheView{viewId=1, members=[MixedModeTest-NodeA-25015]} for cache invalSync
2013-01-31 13:15:54,360 DEBUG (testng-MixedModeTest) [org.infinispan.CacheImpl] Started cache invalSync on MixedModeTest-NodeA-25015
2013-01-31 13:15:54,376 DEBUG (testng-MixedModeTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:54,377 DEBUG (testng-MixedModeTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:54,391 DEBUG (testng-MixedModeTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:54,391 INFO  (testng-MixedModeTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:54,391 DEBUG (testng-MixedModeTest) [org.infinispan.transaction.TransactionTable] Min view id set to 1
2013-01-31 13:15:54,392 DEBUG (testng-MixedModeTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 10
2013-01-31 13:15:54,392 DEBUG (testng-MixedModeTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@234f18c7}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@1de3c2ed}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@541264ef}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@3a0b208, PB=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@3a0b208}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@2b082d14, TO=org.infinispan.interceptors.EntryWrappingInterceptor@2b082d14, PB=org.infinispan.interceptors.EntryWrappingInterceptor@2b082d14}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.InvalidationInterceptor@25c7921e, TO=org.infinispan.interceptors.InvalidationInterceptor@25c7921e, PB=org.infinispan.interceptors.InvalidationInterceptor@25c7921e}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:54,392 DEBUG (testng-MixedModeTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Setting configuration tunned parameters
2013-01-31 13:15:54,394 DEBUG (testng-MixedModeTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Configuration State responses are {MixedModeTest-NodeA-25015=SuccessfulResponse{responseValue=ConfigurationState{numberOfOwners=0, protocolName='2PC', epoch=0}} }
2013-01-31 13:15:54,394 DEBUG (testng-MixedModeTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Configuration State found: ConfigurationState{numberOfOwners=0, protocolName='2PC', epoch=0}
2013-01-31 13:15:54,394 DEBUG (testng-MixedModeTest) [org.infinispan.cacheviews.CacheViewsManagerImpl] invalSync: Node MixedModeTest-NodeB-26468 is joining
2013-01-31 13:15:54,394 DEBUG (OOB-1,ISPN,MixedModeTest-NodeA-25015) [org.infinispan.cacheviews.CacheViewsManagerImpl] invalSync: Node MixedModeTest-NodeB-26468 is joining
2013-01-31 13:15:54,395 DEBUG (CacheViewInstaller-1,MixedModeTest-NodeA-25015) [org.infinispan.cacheviews.CacheViewsManagerImpl] Installing new view CacheView{viewId=2, members=[MixedModeTest-NodeA-25015, MixedModeTest-NodeB-26468]} for cache invalSync
2013-01-31 13:15:54,396 DEBUG (transport-thread-33) [org.infinispan.statetransfer.StateTransferLockImpl] Blocking new write commands for cache view 2
2013-01-31 13:15:54,396 DEBUG (OOB-1,ISPN,MixedModeTest-NodeB-26468) [org.infinispan.statetransfer.StateTransferLockImpl] Blocking new write commands for cache view 2
2013-01-31 13:15:54,398 DEBUG (OOB-1,ISPN,MixedModeTest-NodeB-26468) [org.infinispan.cacheviews.CacheViewsManagerImpl] invalSync: Committing cache view CacheView{viewId=2, members=[MixedModeTest-NodeA-25015, MixedModeTest-NodeB-26468]}
2013-01-31 13:15:54,398 DEBUG (OOB-1,ISPN,MixedModeTest-NodeB-26468) [org.infinispan.statetransfer.StateTransferLockImpl] Unblocking write commands for cache view 2
2013-01-31 13:15:54,400 DEBUG (CacheViewInstaller-1,MixedModeTest-NodeA-25015) [org.infinispan.cacheviews.CacheViewsManagerImpl] invalSync: Committing cache view CacheView{viewId=2, members=[MixedModeTest-NodeA-25015, MixedModeTest-NodeB-26468]}
2013-01-31 13:15:54,400 DEBUG (CacheViewInstaller-1,MixedModeTest-NodeA-25015) [org.infinispan.statetransfer.StateTransferLockImpl] Unblocking write commands for cache view 2
2013-01-31 13:15:54,400 DEBUG (CacheViewInstaller-1,MixedModeTest-NodeA-25015) [org.infinispan.cacheviews.CacheViewsManagerImpl] Successfully installed view CacheView{viewId=2, members=[MixedModeTest-NodeA-25015, MixedModeTest-NodeB-26468]} for cache invalSync
2013-01-31 13:15:54,400 DEBUG (testng-MixedModeTest) [org.infinispan.CacheImpl] Started cache invalSync on MixedModeTest-NodeB-26468
2013-01-31 13:15:54,405 DEBUG (testng-FlagsEnabledTest) [org.jgroups.stack.Configurator] set property TCP.diagnostics_addr to default value /224.0.75.75
2013-01-31 13:15:54,414 DEBUG (testng-FlagsEnabledTest) [org.jgroups.protocols.FRAG2] received CONFIG event: {bind_addr=/127.0.0.1}
2013-01-31 13:15:54,415 DEBUG (testng-FlagsEnabledTest) [org.jgroups.protocols.pbcast.GMS] address=FlagsEnabledTest-NodeB-47084, cluster=ISPN, physical address=127.0.0.1:8351
2013-01-31 13:15:54,417 DEBUG (testng-FlagsEnabledTest) [org.jgroups.protocols.pbcast.GMS] election results: {FlagsEnabledTest-NodeA-50771=1}
2013-01-31 13:15:54,417 DEBUG (testng-FlagsEnabledTest) [org.jgroups.protocols.pbcast.GMS] sending JOIN(FlagsEnabledTest-NodeB-47084) to FlagsEnabledTest-NodeA-50771
2013-01-31 13:15:54,461 WARN  (testng-KeyAffinityServiceShutdownTest) [org.jgroups.stack.Configurator] [JGRP00013] TP.discard_incompatible_packets has been deprecated: incompatible packets are discarded anyway
2013-01-31 13:15:54,481 DEBUG (ViewHandler,ISPN,FlagsEnabledTest-NodeA-50771) [org.jgroups.protocols.pbcast.STABLE] suspending message garbage collection
2013-01-31 13:15:54,481 DEBUG (ViewHandler,ISPN,FlagsEnabledTest-NodeA-50771) [org.jgroups.protocols.pbcast.STABLE] resume task started, max_suspend_time=33000
2013-01-31 13:15:54,482 DEBUG (Incoming-1,ISPN,FlagsEnabledTest-NodeA-50771) [org.jgroups.protocols.pbcast.NAKACK2] 
[FlagsEnabledTest-NodeA-50771 setDigest()]
existing digest:  FlagsEnabledTest-NodeA-50771: [1 (1)]
new digest:       FlagsEnabledTest-NodeA-50771: [0 (0)], FlagsEnabledTest-NodeB-47084: [0 (0)]
resulting digest: FlagsEnabledTest-NodeB-47084: [0 (0)], FlagsEnabledTest-NodeA-50771: [1 (1)]
2013-01-31 13:15:54,482 DEBUG (Incoming-1,ISPN,FlagsEnabledTest-NodeA-50771) [org.jgroups.protocols.pbcast.GMS] FlagsEnabledTest-NodeA-50771: installing view [FlagsEnabledTest-NodeA-50771|1] [FlagsEnabledTest-NodeA-50771, FlagsEnabledTest-NodeB-47084]
2013-01-31 13:15:54,484 DEBUG (Incoming-1,ISPN,FlagsEnabledTest-NodeA-50771) [org.jgroups.protocols.pbcast.STABLE] [ergonomics] setting max_bytes to 800KB (2 members)
2013-01-31 13:15:54,484 DEBUG (Incoming-1,ISPN,FlagsEnabledTest-NodeA-50771) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] New view accepted: [FlagsEnabledTest-NodeA-50771|1] [FlagsEnabledTest-NodeA-50771, FlagsEnabledTest-NodeB-47084]
2013-01-31 13:15:54,484 INFO  (Incoming-1,ISPN,FlagsEnabledTest-NodeA-50771) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000094: Received new cluster view: [FlagsEnabledTest-NodeA-50771|1] [FlagsEnabledTest-NodeA-50771, FlagsEnabledTest-NodeB-47084]
2013-01-31 13:15:54,487 DEBUG (notification-thread-49) [org.infinispan.transaction.TransactionTable] View changed, recalculating minViewId
2013-01-31 13:15:54,488 DEBUG (testng-FlagsEnabledTest) [org.jgroups.protocols.pbcast.NAKACK2] 
[FlagsEnabledTest-NodeB-47084 setDigest()]
existing digest:  []
new digest:       FlagsEnabledTest-NodeA-50771: [0 (0)], FlagsEnabledTest-NodeB-47084: [0 (0)]
resulting digest: FlagsEnabledTest-NodeB-47084: [0 (0)], FlagsEnabledTest-NodeA-50771: [0 (0)]
2013-01-31 13:15:54,488 DEBUG (testng-FlagsEnabledTest) [org.jgroups.protocols.pbcast.GMS] FlagsEnabledTest-NodeB-47084: installing view [FlagsEnabledTest-NodeA-50771|1] [FlagsEnabledTest-NodeA-50771, FlagsEnabledTest-NodeB-47084]
2013-01-31 13:15:54,489 DEBUG (testng-FlagsEnabledTest) [org.jgroups.protocols.pbcast.STABLE] [ergonomics] setting max_bytes to 800KB (2 members)
2013-01-31 13:15:54,489 DEBUG (testng-FlagsEnabledTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] New view accepted: [FlagsEnabledTest-NodeA-50771|1] [FlagsEnabledTest-NodeA-50771, FlagsEnabledTest-NodeB-47084]
2013-01-31 13:15:54,489 INFO  (testng-FlagsEnabledTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000094: Received new cluster view: [FlagsEnabledTest-NodeA-50771|1] [FlagsEnabledTest-NodeA-50771, FlagsEnabledTest-NodeB-47084]
2013-01-31 13:15:54,491 INFO  (testng-FlagsEnabledTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000079: Cache local address is FlagsEnabledTest-NodeB-47084, physical addresses are [127.0.0.1:8351]
2013-01-31 13:15:54,491 DEBUG (testng-FlagsEnabledTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] Waiting on view being accepted
2013-01-31 13:15:54,491 DEBUG (ViewHandler,ISPN,FlagsEnabledTest-NodeA-50771) [org.jgroups.protocols.pbcast.STABLE] resuming message garbage collection
2013-01-31 13:15:54,491 WARN  (testng-FlagsEnabledTest) [org.infinispan.config.ConfigurationValidatingVisitor] ISPN000149: Fetch persistent state and purge on startup are both disabled, cache may contain stale entries on startup
2013-01-31 13:15:54,491 WARN  (testng-FlagsEnabledTest) [org.infinispan.config.ConfigurationValidatingVisitor] ISPN000149: Fetch persistent state and purge on startup are both disabled, cache may contain stale entries on startup
2013-01-31 13:15:54,519 DEBUG (testng-MixedModeTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:54,519 DEBUG (testng-MixedModeTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:54,520 DEBUG (testng-MixedModeTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:54,520 INFO  (testng-MixedModeTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:54,521 DEBUG (testng-MixedModeTest) [org.infinispan.transaction.TransactionTable] Min view id set to 1
2013-01-31 13:15:54,521 DEBUG (testng-MixedModeTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 10
2013-01-31 13:15:54,521 DEBUG (testng-MixedModeTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@6bb4ab2b}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@2251cb4b}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@27f9ba87}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@7c450991, PB=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@7c450991}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@18774e54, TO=org.infinispan.interceptors.EntryWrappingInterceptor@18774e54, PB=org.infinispan.interceptors.EntryWrappingInterceptor@18774e54}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.InvalidationInterceptor@40b77958, TO=org.infinispan.interceptors.InvalidationInterceptor@40b77958, PB=org.infinispan.interceptors.InvalidationInterceptor@40b77958}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:54,521 DEBUG (testng-MixedModeTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Setting configuration tunned parameters
2013-01-31 13:15:54,522 DEBUG (testng-MixedModeTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Configuration State responses are {MixedModeTest-NodeB-26468=null}
2013-01-31 13:15:54,522 DEBUG (testng-MixedModeTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Exception while trying to get the Configuration State
java.lang.NullPointerException
	at org.infinispan.statetransfer.BaseStateTransferManagerImpl.getClusterConfigurationState(BaseStateTransferManagerImpl.java:207)
	at org.infinispan.statetransfer.BaseStateTransferManagerImpl.setConfigurationChanges(BaseStateTransferManagerImpl.java:179)
	at org.infinispan.statetransfer.BaseStateTransferManagerImpl.start(BaseStateTransferManagerImpl.java:169)
	at sun.reflect.GeneratedMethodAccessor174.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.infinispan.util.ReflectionUtil.invokeAccessibly(ReflectionUtil.java:236)
	at org.infinispan.factories.AbstractComponentRegistry$PrioritizedMethod.invoke(AbstractComponentRegistry.java:885)
	at org.infinispan.factories.AbstractComponentRegistry.invokeStartMethods(AbstractComponentRegistry.java:639)
	at org.infinispan.factories.AbstractComponentRegistry.internalStart(AbstractComponentRegistry.java:628)
	at org.infinispan.factories.AbstractComponentRegistry.start(AbstractComponentRegistry.java:531)
	at org.infinispan.factories.ComponentRegistry.start(ComponentRegistry.java:176)
	at org.infinispan.CacheImpl.start(CacheImpl.java:522)
	at org.infinispan.manager.DefaultCacheManager.createCache(DefaultCacheManager.java:665)
	at org.infinispan.manager.DefaultCacheManager.getCache(DefaultCacheManager.java:550)
	at org.infinispan.test.MultipleCacheManagersTest.cache(MultipleCacheManagersTest.java:387)
	at org.infinispan.api.MixedModeTest.testMixedMode(MixedModeTest.java:63)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:54,523 DEBUG (testng-MixedModeTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] No Configuration State found in cluster
2013-01-31 13:15:54,523 DEBUG (testng-MixedModeTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] No State found. Using original configuration parameters
2013-01-31 13:15:54,523 DEBUG (testng-MixedModeTest) [org.infinispan.cacheviews.CacheViewsManagerImpl] invalAsync: Node MixedModeTest-NodeA-25015 is joining
2013-01-31 13:15:54,523 DEBUG (CacheViewInstaller-1,MixedModeTest-NodeA-25015) [org.infinispan.cacheviews.CacheViewsManagerImpl] Installing new view CacheView{viewId=1, members=[MixedModeTest-NodeA-25015]} for cache invalAsync
2013-01-31 13:15:54,524 DEBUG (transport-thread-17) [org.infinispan.statetransfer.StateTransferLockImpl] Blocking new write commands for cache view 1
2013-01-31 13:15:54,524 DEBUG (CacheViewInstaller-1,MixedModeTest-NodeA-25015) [org.infinispan.cacheviews.CacheViewsManagerImpl] invalAsync: Committing cache view CacheView{viewId=1, members=[MixedModeTest-NodeA-25015]}
2013-01-31 13:15:54,524 DEBUG (CacheViewInstaller-1,MixedModeTest-NodeA-25015) [org.infinispan.statetransfer.StateTransferLockImpl] Unblocking write commands for cache view 1
2013-01-31 13:15:54,524 DEBUG (CacheViewInstaller-1,MixedModeTest-NodeA-25015) [org.infinispan.cacheviews.CacheViewsManagerImpl] Successfully installed view CacheView{viewId=1, members=[MixedModeTest-NodeA-25015]} for cache invalAsync
2013-01-31 13:15:54,524 DEBUG (testng-MixedModeTest) [org.infinispan.CacheImpl] Started cache invalAsync on MixedModeTest-NodeA-25015
2013-01-31 13:15:54,553 DEBUG (testng-FlagsEnabledTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:54,553 DEBUG (testng-FlagsEnabledTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:54,555 DEBUG (testng-FlagsEnabledTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:54,556 ERROR (CacheViewInstaller-1,PutForExternalReadTest-NodeA-2262) [org.infinispan.cacheviews.CacheViewsManagerImpl] ISPN000172: Failed to prepare view CacheView{viewId=3, members=[PutForExternalReadTest-NodeB-28287]} for cache  replSync, rolling back to view CacheView{viewId=2, members=[PutForExternalReadTest-NodeA-2262, PutForExternalReadTest-NodeB-28287]}
java.util.concurrent.ExecutionException: org.infinispan.CacheException: java.lang.IllegalStateException: replSync: Received cache view prepare request after the local node has already shut down
	at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:232)
	at java.util.concurrent.FutureTask.get(FutureTask.java:91)
	at org.infinispan.cacheviews.CacheViewsManagerImpl.clusterPrepareView(CacheViewsManagerImpl.java:332)
	at org.infinispan.cacheviews.CacheViewsManagerImpl.clusterInstallView(CacheViewsManagerImpl.java:247)
	at org.infinispan.cacheviews.CacheViewsManagerImpl$ViewInstallationTask.call(CacheViewsManagerImpl.java:948)
	at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
	at java.util.concurrent.FutureTask.run(FutureTask.java:138)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
Caused by: org.infinispan.CacheException: java.lang.IllegalStateException: replSync: Received cache view prepare request after the local node has already shut down
	at org.infinispan.util.Util.rewrapAsCacheException(Util.java:539)
	at org.infinispan.remoting.transport.jgroups.CommandAwareRpcDispatcher.invokeRemoteCommand(CommandAwareRpcDispatcher.java:179)
	at org.infinispan.remoting.transport.jgroups.JGroupsTransport.invokeRemotely(JGroupsTransport.java:498)
	at org.infinispan.cacheviews.CacheViewsManagerImpl$2.call(CacheViewsManagerImpl.java:316)
	at org.infinispan.cacheviews.CacheViewsManagerImpl$2.call(CacheViewsManagerImpl.java:313)
	... 5 more
Caused by: java.lang.IllegalStateException: replSync: Received cache view prepare request after the local node has already shut down
	at org.infinispan.cacheviews.CacheViewsManagerImpl.handlePrepareView(CacheViewsManagerImpl.java:527)
	at org.infinispan.commands.control.CacheViewControlCommand.perform(CacheViewControlCommand.java:139)
	at org.infinispan.remoting.InboundInvocationHandlerImpl.handle(InboundInvocationHandlerImpl.java:96)
	at org.infinispan.remoting.transport.jgroups.CommandAwareRpcDispatcher.executeCommand(CommandAwareRpcDispatcher.java:232)
	at org.infinispan.remoting.transport.jgroups.CommandAwareRpcDispatcher.handle(CommandAwareRpcDispatcher.java:210)
	at org.jgroups.blocks.RequestCorrelator.handleRequest(RequestCorrelator.java:480)
	at org.jgroups.blocks.RequestCorrelator.receiveMessage(RequestCorrelator.java:390)
	at org.jgroups.blocks.RequestCorrelator.receive(RequestCorrelator.java:248)
	at org.jgroups.blocks.MessageDispatcher$ProtocolAdapter.up(MessageDispatcher.java:600)
	at org.jgroups.JChannel.up(JChannel.java:700)
	at org.jgroups.stack.ProtocolStack.up(ProtocolStack.java:1020)
	at org.jgroups.protocols.FRAG2.up(FRAG2.java:181)
	at org.jgroups.protocols.FC.up(FC.java:479)
	at org.jgroups.protocols.tom.TOA.up(TOA.java:119)
	at org.jgroups.protocols.SEQUENCER.up(SEQUENCER.java:252)
	at org.jgroups.protocols.pbcast.GMS.up(GMS.java:896)
	at org.jgroups.protocols.pbcast.STABLE.up(STABLE.java:244)
	at org.jgroups.protocols.RSVP.up(RSVP.java:164)
	at org.jgroups.protocols.UNICAST2.handleDataReceived(UNICAST2.java:737)
	at org.jgroups.protocols.UNICAST2.up(UNICAST2.java:414)
	at org.jgroups.protocols.pbcast.NAKACK2.up(NAKACK2.java:610)
	at org.jgroups.protocols.Discovery.up(Discovery.java:371)
	at org.jgroups.protocols.TP.passMessageUp(TP.java:1262)
	at org.jgroups.protocols.TP$IncomingPacket.handleMyMessage(TP.java:1824)
	at org.jgroups.protocols.TP$IncomingPacket.run(TP.java:1797)
	... 3 more
2013-01-31 13:15:54,559 INFO  (testng-FlagsEnabledTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:54,561 INFO  (testng-PutForExternalReadTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000080: Disconnecting and closing JGroups Channel
2013-01-31 13:15:54,559 DEBUG (testng-Command line test) [org.infinispan.configuration.cache.L1ConfigurationBuilder] L1 is enabled and L1OnRehash was not defined, enabling it
2013-01-31 13:15:54,562 DEBUG (testng-FlagsEnabledTest) [org.infinispan.transaction.TransactionTable] Min view id set to 1
2013-01-31 13:15:54,562 DEBUG (testng-Command line test) [org.infinispan.configuration.cache.L1ConfigurationBuilder] L1 is enabled and L1OnRehash was not defined, enabling it
2013-01-31 13:15:54,563 DEBUG (testng-FlagsEnabledTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 13
2013-01-31 13:15:54,563 DEBUG (testng-FlagsEnabledTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.StateTransferLockInterceptor@35f25f88, TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@3b5df563, PB=org.infinispan.interceptors.StateTransferLockInterceptor@35f25f88}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@15995508}
	>> org.infinispan.interceptors.TxInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@59d8b4c}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@2a242d75, PB=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@2a242d75}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.VersionedEntryWrappingInterceptor@2d2471f0, TO=org.infinispan.interceptors.totalorder.TotalOrderVersionedEntryWrappingInterceptor@33b45ab7, PB=org.infinispan.interceptors.VersionedEntryWrappingInterceptor@2d2471f0}
	>> org.infinispan.interceptors.ClusteredCacheLoaderInterceptor
	>> org.infinispan.interceptors.CacheStoreInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.VersionedReplicationInterceptor@5afbee6, TO=org.infinispan.interceptors.totalorder.TotalOrderVersionedReplicationInterceptor@551df0f4, PB=org.infinispan.interceptors.VersionedReplicationInterceptor@5afbee6}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:54,563 DEBUG (testng-Command line test) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:54,570 DEBUG (testng-FlagsEnabledTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Setting configuration tunned parameters
2013-01-31 13:15:54,571 DEBUG (testng-Command line test) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:54,571 DEBUG (testng-Command line test) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:54,572 DEBUG (testng-FlagsEnabledTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Configuration State responses are {FlagsEnabledTest-NodeA-50771=SuccessfulResponse{responseValue=ConfigurationState{numberOfOwners=0, protocolName='2PC', epoch=0}} }
2013-01-31 13:15:54,572 DEBUG (testng-FlagsEnabledTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Configuration State found: ConfigurationState{numberOfOwners=0, protocolName='2PC', epoch=0}
2013-01-31 13:15:54,572 DEBUG (testng-FlagsEnabledTest) [org.infinispan.cacheviews.CacheViewsManagerImpl] replication: Node FlagsEnabledTest-NodeB-47084 is joining
2013-01-31 13:15:54,573 DEBUG (OOB-1,ISPN,FlagsEnabledTest-NodeA-50771) [org.infinispan.cacheviews.CacheViewsManagerImpl] replication: Node FlagsEnabledTest-NodeB-47084 is joining
2013-01-31 13:15:54,573 DEBUG (CacheViewInstaller-1,FlagsEnabledTest-NodeA-50771) [org.infinispan.cacheviews.CacheViewsManagerImpl] Installing new view CacheView{viewId=2, members=[FlagsEnabledTest-NodeA-50771, FlagsEnabledTest-NodeB-47084]} for cache replication
2013-01-31 13:15:54,574 WARN  (CacheViewInstaller-1,FlagsEnabledTest-NodeA-50771) [org.infinispan.configuration.cache.LoaderConfigurationBuilder] ISPN000149: Fetch persistent state and purge on startup are both disabled, cache may contain stale entries on startup
2013-01-31 13:15:54,574 WARN  (CacheViewInstaller-1,FlagsEnabledTest-NodeA-50771) [org.infinispan.configuration.cache.LoaderConfigurationBuilder] ISPN000149: Fetch persistent state and purge on startup are both disabled, cache may contain stale entries on startup
2013-01-31 13:15:54,578 WARN  (transport-thread-51) [org.infinispan.configuration.cache.LoaderConfigurationBuilder] ISPN000149: Fetch persistent state and purge on startup are both disabled, cache may contain stale entries on startup
2013-01-31 13:15:54,578 WARN  (transport-thread-51) [org.infinispan.configuration.cache.LoaderConfigurationBuilder] ISPN000149: Fetch persistent state and purge on startup are both disabled, cache may contain stale entries on startup
2013-01-31 13:15:54,579 DEBUG (transport-thread-51) [org.infinispan.distribution.ch.DefaultConsistentHash] Using 1 virtualNodes to initialize consistent hash wheel 
2013-01-31 13:15:54,579 DEBUG (transport-thread-51) [org.infinispan.statetransfer.ReplicatedStateTransferTask] Commencing state transfer 2 on node: FlagsEnabledTest-NodeA-50771. Before start, data container had 0 entries
2013-01-31 13:15:54,579 DEBUG (transport-thread-51) [org.infinispan.statetransfer.StateTransferLockImpl] Blocking new write commands for cache view 2
2013-01-31 13:15:54,580 WARN  (OOB-1,ISPN,FlagsEnabledTest-NodeB-47084) [org.infinispan.configuration.cache.LoaderConfigurationBuilder] ISPN000149: Fetch persistent state and purge on startup are both disabled, cache may contain stale entries on startup
2013-01-31 13:15:54,580 WARN  (OOB-1,ISPN,FlagsEnabledTest-NodeB-47084) [org.infinispan.configuration.cache.LoaderConfigurationBuilder] ISPN000149: Fetch persistent state and purge on startup are both disabled, cache may contain stale entries on startup
2013-01-31 13:15:54,582 DEBUG (OOB-1,ISPN,FlagsEnabledTest-NodeB-47084) [org.infinispan.distribution.ch.DefaultConsistentHash] Using 1 virtualNodes to initialize consistent hash wheel 
2013-01-31 13:15:54,582 DEBUG (OOB-1,ISPN,FlagsEnabledTest-NodeB-47084) [org.infinispan.statetransfer.ReplicatedStateTransferTask] Commencing state transfer 2 on node: FlagsEnabledTest-NodeB-47084. Before start, data container had 0 entries
2013-01-31 13:15:54,582 DEBUG (OOB-1,ISPN,FlagsEnabledTest-NodeB-47084) [org.infinispan.statetransfer.StateTransferLockImpl] Blocking new write commands for cache view 2
2013-01-31 13:15:54,585 DEBUG (testng-MixedModeTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:54,586 DEBUG (testng-MixedModeTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:54,587 DEBUG (testng-MixedModeTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:54,588 INFO  (testng-MixedModeTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:54,595 DEBUG (testng-MixedModeTest) [org.infinispan.transaction.TransactionTable] Min view id set to 1
2013-01-31 13:15:54,595 DEBUG (testng-MixedModeTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 10
2013-01-31 13:15:54,595 DEBUG (testng-MixedModeTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@52921b85}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@764ce31c}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@31d27ff1}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@72cdc0c4, PB=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@72cdc0c4}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@222abebe, TO=org.infinispan.interceptors.EntryWrappingInterceptor@222abebe, PB=org.infinispan.interceptors.EntryWrappingInterceptor@222abebe}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.InvalidationInterceptor@2450bd78, TO=org.infinispan.interceptors.InvalidationInterceptor@2450bd78, PB=org.infinispan.interceptors.InvalidationInterceptor@2450bd78}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:54,595 DEBUG (testng-MixedModeTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Setting configuration tunned parameters
2013-01-31 13:15:54,599 DEBUG (testng-MixedModeTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Configuration State responses are {MixedModeTest-NodeA-25015=SuccessfulResponse{responseValue=ConfigurationState{numberOfOwners=0, protocolName='2PC', epoch=0}} }
2013-01-31 13:15:54,599 DEBUG (testng-MixedModeTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Configuration State found: ConfigurationState{numberOfOwners=0, protocolName='2PC', epoch=0}
2013-01-31 13:15:54,599 DEBUG (testng-MixedModeTest) [org.infinispan.cacheviews.CacheViewsManagerImpl] invalAsync: Node MixedModeTest-NodeB-26468 is joining
2013-01-31 13:15:54,600 DEBUG (OOB-1,ISPN,MixedModeTest-NodeA-25015) [org.infinispan.cacheviews.CacheViewsManagerImpl] invalAsync: Node MixedModeTest-NodeB-26468 is joining
2013-01-31 13:15:54,607 DEBUG (CacheViewInstaller-1,MixedModeTest-NodeA-25015) [org.infinispan.cacheviews.CacheViewsManagerImpl] Installing new view CacheView{viewId=2, members=[MixedModeTest-NodeA-25015, MixedModeTest-NodeB-26468]} for cache invalAsync
2013-01-31 13:15:54,609 DEBUG (transport-thread-29) [org.infinispan.statetransfer.StateTransferLockImpl] Blocking new write commands for cache view 2
2013-01-31 13:15:54,610 DEBUG (OOB-2,ISPN,MixedModeTest-NodeB-26468) [org.infinispan.statetransfer.StateTransferLockImpl] Blocking new write commands for cache view 2
2013-01-31 13:15:54,613 DEBUG (Incoming-1,ISPN,PutForExternalReadTest-NodeB-28287) [org.jgroups.protocols.pbcast.GMS] PutForExternalReadTest-NodeB-28287: installing view [PutForExternalReadTest-NodeB-28287|2] [PutForExternalReadTest-NodeB-28287]
2013-01-31 13:15:54,613 DEBUG (Incoming-1,ISPN,PutForExternalReadTest-NodeB-28287) [org.jgroups.protocols.pbcast.STABLE] resuming message garbage collection
2013-01-31 13:15:54,614 DEBUG (Incoming-1,ISPN,PutForExternalReadTest-NodeB-28287) [org.jgroups.protocols.pbcast.NAKACK2] removed PutForExternalReadTest-NodeA-2262 from xmit_table (not member anymore)
2013-01-31 13:15:54,623 DEBUG (Incoming-1,ISPN,PutForExternalReadTest-NodeB-28287) [org.jgroups.protocols.pbcast.STABLE] [ergonomics] setting max_bytes to 400KB (1 members)
2013-01-31 13:15:54,624 DEBUG (Incoming-1,ISPN,PutForExternalReadTest-NodeB-28287) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] New view accepted: [PutForExternalReadTest-NodeB-28287|2] [PutForExternalReadTest-NodeB-28287]
2013-01-31 13:15:54,624 INFO  (Incoming-1,ISPN,PutForExternalReadTest-NodeB-28287) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000094: Received new cluster view: [PutForExternalReadTest-NodeB-28287|2] [PutForExternalReadTest-NodeB-28287]
2013-01-31 13:15:54,628 DEBUG (testng-PutForExternalReadTest) [org.jgroups.blocks.TCPConnectionMap] connection table is not running, discarding message to 127.0.0.1:8151
2013-01-31 13:15:54,629 DEBUG (testng-PutForExternalReadTest) [org.infinispan.test.fwk.TEST_PING] Stop discovery for PutForExternalReadTest-NodeA-2262
2013-01-31 13:15:54,629 DEBUG (testng-PutForExternalReadTest) [org.jgroups.protocols.TCP] closing sockets and stopping threads
2013-01-31 13:15:54,638 DEBUG (OOB-2,ISPN,MixedModeTest-NodeB-26468) [org.infinispan.cacheviews.CacheViewsManagerImpl] invalAsync: Committing cache view CacheView{viewId=2, members=[MixedModeTest-NodeA-25015, MixedModeTest-NodeB-26468]}
2013-01-31 13:15:54,638 DEBUG (OOB-2,ISPN,MixedModeTest-NodeB-26468) [org.infinispan.statetransfer.StateTransferLockImpl] Unblocking write commands for cache view 2
2013-01-31 13:15:54,639 DEBUG (testng-MixedModeTest) [org.infinispan.CacheImpl] Started cache invalAsync on MixedModeTest-NodeB-26468
2013-01-31 13:15:54,639 DEBUG (CacheViewInstaller-1,MixedModeTest-NodeA-25015) [org.infinispan.cacheviews.CacheViewsManagerImpl] invalAsync: Committing cache view CacheView{viewId=2, members=[MixedModeTest-NodeA-25015, MixedModeTest-NodeB-26468]}
2013-01-31 13:15:54,639 DEBUG (CacheViewInstaller-1,MixedModeTest-NodeA-25015) [org.infinispan.statetransfer.StateTransferLockImpl] Unblocking write commands for cache view 2
2013-01-31 13:15:54,639 DEBUG (CacheViewInstaller-1,MixedModeTest-NodeA-25015) [org.infinispan.cacheviews.CacheViewsManagerImpl] Successfully installed view CacheView{viewId=2, members=[MixedModeTest-NodeA-25015, MixedModeTest-NodeB-26468]} for cache invalAsync
2013-01-31 13:15:54,644 DEBUG (testng-Command line test) [org.infinispan.manager.DefaultCacheManager] Stopping cache manager ISPN on null
2013-01-31 13:15:54,644 INFO  (testng-Command line test) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testDefaultAndNamedCacheOverride(org.infinispan.configuration.parsing.ParserTest).
2013-01-31 13:15:54,644 INFO  (testng-Command line test) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testDefaultCacheOverride(org.infinispan.configuration.parsing.ParserTest)
2013-01-31 13:15:54,660 DEBUG (testng-MixedModeTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:54,660 DEBUG (testng-MixedModeTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:54,661 DEBUG (testng-MixedModeTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:54,661 INFO  (testng-MixedModeTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:54,661 DEBUG (testng-MixedModeTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 10
2013-01-31 13:15:54,661 DEBUG (testng-MixedModeTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@3e6cd229}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@5a59a1c3}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@328b378c}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@51ebe240, PB=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@51ebe240}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@555301c4, TO=org.infinispan.interceptors.EntryWrappingInterceptor@555301c4, PB=org.infinispan.interceptors.EntryWrappingInterceptor@555301c4}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:54,662 DEBUG (testng-MixedModeTest) [org.infinispan.CacheImpl] Started cache local on MixedModeTest-NodeA-25015
2013-01-31 13:15:54,663 DEBUG (testng-MixedModeTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:54,664 DEBUG (testng-MixedModeTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:54,664 DEBUG (testng-MixedModeTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:54,664 INFO  (testng-MixedModeTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:54,665 DEBUG (testng-MixedModeTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 10
2013-01-31 13:15:54,665 DEBUG (testng-MixedModeTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@3c99169f}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@669c3fcd}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@1c20e05c}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@3269c671, PB=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@3269c671}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@3e633e92, TO=org.infinispan.interceptors.EntryWrappingInterceptor@3e633e92, PB=org.infinispan.interceptors.EntryWrappingInterceptor@3e633e92}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:54,665 DEBUG (testng-MixedModeTest) [org.infinispan.CacheImpl] Started cache local on MixedModeTest-NodeB-26468
2013-01-31 13:15:54,666 INFO  (testng-MixedModeTest) [org.infinispan.test.ReplListener]  [Cache 'replAsync'@MixedModeTest-NodeB-26468] Setting expected commands to []
2013-01-31 13:15:54,666 INFO  (testng-MixedModeTest) [org.infinispan.test.ReplListener]  [Cache 'replAsync'@MixedModeTest-NodeB-26468] Record eagerly is false, and eager commands are []
2013-01-31 13:15:54,666 INFO  (testng-MixedModeTest) [org.infinispan.test.ReplListener]  [Cache 'invalAsync'@MixedModeTest-NodeB-26468] Setting expected commands to []
2013-01-31 13:15:54,666 INFO  (testng-MixedModeTest) [org.infinispan.test.ReplListener]  [Cache 'invalAsync'@MixedModeTest-NodeB-26468] Record eagerly is false, and eager commands are []
2013-01-31 13:15:54,669 DEBUG (OOB-1,ISPN,FlagsEnabledTest-NodeB-47084) [org.infinispan.cacheviews.CacheViewsManagerImpl] replication: Committing cache view CacheView{viewId=2, members=[FlagsEnabledTest-NodeA-50771, FlagsEnabledTest-NodeB-47084]}
2013-01-31 13:15:54,669 DEBUG (OOB-1,ISPN,FlagsEnabledTest-NodeB-47084) [org.infinispan.statetransfer.BaseStateTransferTask] Node FlagsEnabledTest-NodeB-47084 completed state transfer for view 2 in 87 milliseconds!
2013-01-31 13:15:54,670 DEBUG (OOB-1,ISPN,FlagsEnabledTest-NodeB-47084) [org.infinispan.statetransfer.StateTransferLockImpl] Unblocking write commands for cache view 2
2013-01-31 13:15:54,670 DEBUG (testng-FlagsEnabledTest) [org.infinispan.CacheImpl] Started cache replication on FlagsEnabledTest-NodeB-47084
2013-01-31 13:15:54,670 DEBUG (CacheViewInstaller-1,FlagsEnabledTest-NodeA-50771) [org.infinispan.cacheviews.CacheViewsManagerImpl] replication: Committing cache view CacheView{viewId=2, members=[FlagsEnabledTest-NodeA-50771, FlagsEnabledTest-NodeB-47084]}
2013-01-31 13:15:54,670 DEBUG (CacheViewInstaller-1,FlagsEnabledTest-NodeA-50771) [org.infinispan.statetransfer.BaseStateTransferTask] Node FlagsEnabledTest-NodeA-50771 completed state transfer for view 2 in 91 milliseconds!
2013-01-31 13:15:54,670 DEBUG (CacheViewInstaller-1,FlagsEnabledTest-NodeA-50771) [org.infinispan.statetransfer.StateTransferLockImpl] Unblocking write commands for cache view 2
2013-01-31 13:15:54,670 DEBUG (CacheViewInstaller-1,FlagsEnabledTest-NodeA-50771) [org.infinispan.cacheviews.CacheViewsManagerImpl] Successfully installed view CacheView{viewId=2, members=[FlagsEnabledTest-NodeA-50771, FlagsEnabledTest-NodeB-47084]} for cache replication
2013-01-31 13:15:54,671 DEBUG (testng-KeyAffinityServiceShutdownTest) [org.jgroups.stack.Configurator] set property TCP.diagnostics_addr to default value /224.0.75.75
2013-01-31 13:15:54,673 INFO  (testng-PutForExternalReadTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000082: Stopping the RpcDispatcher
2013-01-31 13:15:54,673 DEBUG (testng-PutForExternalReadTest) [org.infinispan.manager.DefaultCacheManager] Stopping cache manager ISPN on PutForExternalReadTest-NodeB-28287
2013-01-31 13:15:54,673 DEBUG (testng-PutForExternalReadTest) [org.infinispan.CacheImpl] Stopping cache replSync on PutForExternalReadTest-NodeB-28287
2013-01-31 13:15:54,675 INFO  (Incoming-1,ISPN,MixedModeTest-NodeB-26468) [org.infinispan.test.ReplListener]  [Cache 'replAsync'@MixedModeTest-NodeB-26468] Checking whether command PutKeyValueCommand should be marked as local with watch local set to false
2013-01-31 13:15:54,675 INFO  (Incoming-1,ISPN,MixedModeTest-NodeB-26468) [org.infinispan.test.ReplListener]  [Cache 'replAsync'@MixedModeTest-NodeB-26468] ReplListener saw command PutKeyValueCommand{key=k, value=replAsync, flags=null, putIfAbsent=false, lifespanMillis=-1, maxIdleTimeMillis=-1}
2013-01-31 13:15:54,675 INFO  (Incoming-1,ISPN,MixedModeTest-NodeB-26468) [org.infinispan.test.ReplListener]  [Cache 'replAsync'@MixedModeTest-NodeB-26468] Nothing to wait for, releasing latch
2013-01-31 13:15:54,675 DEBUG (testng-Command line test) [org.infinispan.configuration.cache.L1ConfigurationBuilder] L1 is enabled and L1OnRehash was not defined, enabling it
2013-01-31 13:15:54,675 DEBUG (testng-Command line test) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:54,681 DEBUG (testng-Command line test) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:54,681 DEBUG (testng-Command line test) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:54,684 DEBUG (testng-KeyAffinityServiceShutdownTest) [org.jgroups.protocols.FRAG2] received CONFIG event: {bind_addr=/127.0.0.1}
2013-01-31 13:15:54,694 DEBUG (testng-KeyAffinityServiceShutdownTest) [org.jgroups.protocols.pbcast.GMS] address=KeyAffinityServiceShutdownTest-NodeB-14426, cluster=ISPN, physical address=127.0.0.1:8301
2013-01-31 13:15:54,698 DEBUG (testng-KeyAffinityServiceShutdownTest) [org.jgroups.protocols.pbcast.GMS] election results: {KeyAffinityServiceShutdownTest-NodeA-53318=1}
2013-01-31 13:15:54,698 DEBUG (testng-KeyAffinityServiceShutdownTest) [org.jgroups.protocols.pbcast.GMS] sending JOIN(KeyAffinityServiceShutdownTest-NodeB-14426) to KeyAffinityServiceShutdownTest-NodeA-53318
2013-01-31 13:15:54,723 WARN  (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.jgroups.stack.Configurator] [JGRP00013] TP.discard_incompatible_packets has been deprecated: incompatible packets are discarded anyway
2013-01-31 13:15:54,728 DEBUG (testng-Command line test) [org.infinispan.manager.DefaultCacheManager] Stopping cache manager ISPN on null
2013-01-31 13:15:54,728 INFO  (testng-Command line test) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testDefaultCacheOverride(org.infinispan.configuration.parsing.ParserTest).
2013-01-31 13:15:54,728 INFO  (testng-Command line test) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testNamedCacheOverride(org.infinispan.configuration.parsing.ParserTest)
2013-01-31 13:15:54,736 DEBUG (testng-MixedModeTest) [org.infinispan.interceptors.InvalidationInterceptor] Cache [MixedModeTest-NodeA-25015] replicating InvalidateCommand{keys=[k]}
2013-01-31 13:15:54,745 DEBUG (CacheViewTrigger,PutForExternalReadTest-NodeB-28287) [org.infinispan.cacheviews.CacheViewsManagerImpl] Node PutForExternalReadTest-NodeB-28287 is the new coordinator, recovering cache views
2013-01-31 13:15:54,747 DEBUG (testng-Command line test) [org.infinispan.configuration.cache.L1ConfigurationBuilder] L1 is enabled and L1OnRehash was not defined, enabling it
2013-01-31 13:15:54,747 DEBUG (testng-Command line test) [org.infinispan.configuration.cache.L1ConfigurationBuilder] L1 is enabled and L1OnRehash was not defined, enabling it
2013-01-31 13:15:54,748 DEBUG (testng-Command line test) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:54,750 DEBUG (CacheViewTrigger,PutForExternalReadTest-NodeB-28287) [org.infinispan.cacheviews.CacheViewsManagerImpl] replSync: Rolling back to cache view 2, new view id is 4
2013-01-31 13:15:54,753 DEBUG (CacheViewTrigger,PutForExternalReadTest-NodeB-28287) [org.infinispan.cacheviews.CacheViewsManagerImpl] Recovered partitions after merge for cache replSync: [CacheView{viewId=2, members=[PutForExternalReadTest-NodeB-28287]}]
2013-01-31 13:15:54,753 INFO  (testng-PutForExternalReadTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000080: Disconnecting and closing JGroups Channel
2013-01-31 13:15:54,749 DEBUG (testng-MixedModeTest) [org.infinispan.interceptors.InvalidationInterceptor] Cache [MixedModeTest-NodeA-25015] replicating InvalidateCommand{keys=[k]}
2013-01-31 13:15:54,787 WARN  (testng-RepeatableReadLockTest) [org.infinispan.transaction.TransactionTable] ISPN000100: Stopping, but there are 1 local transactions and 0 remote transactions that did not finish in time.
2013-01-31 13:15:54,798 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.transaction.TransactionTable] Local active transactions: {DummyTransaction{xid=DummyXid{id=52}, status=0}=LocalXaTransaction{xid=DummyXid{id=52}} LocalTransaction{remoteLockedNodes=null, isMarkedForRollback=false, transaction=DummyTransaction{xid=DummyXid{id=52}, status=0}, lockedKeys=null, backupKeyLocks=null, viewId=-1} org.infinispan.transaction.xa.LocalXaTransaction@154}, Remote active transactions null
2013-01-31 13:15:54,770 DEBUG (testng-FlagsEnabledTest) [org.infinispan.api.flags.FlagsEnabledTest] Cache managers created, ready to start the test
2013-01-31 13:15:54,798 INFO  (testng-FlagsEnabledTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testReplicateSkipCacheLoad(org.infinispan.api.flags.FlagsEnabledTest)
2013-01-31 13:15:54,798 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.manager.DefaultCacheManager] Stopping cache manager ISPN on null
2013-01-31 13:15:54,798 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on null
2013-01-31 13:15:54,759 DEBUG (testng-Command line test) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:54,758 WARN  (testng-ReadCommittedLockTest) [org.infinispan.transaction.TransactionTable] ISPN000100: Stopping, but there are 1 local transactions and 0 remote transactions that did not finish in time.
2013-01-31 13:15:54,799 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.transaction.TransactionTable] Local active transactions: {DummyTransaction{xid=DummyXid{id=49}, status=0}=LocalXaTransaction{xid=DummyXid{id=49}} LocalTransaction{remoteLockedNodes=null, isMarkedForRollback=false, transaction=DummyTransaction{xid=DummyXid{id=49}, status=0}, lockedKeys=null, backupKeyLocks=null, viewId=-1} org.infinispan.transaction.xa.LocalXaTransaction@151}, Remote active transactions null
2013-01-31 13:15:54,799 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.manager.DefaultCacheManager] Stopping cache manager ISPN on null
2013-01-31 13:15:54,799 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on null
2013-01-31 13:15:54,799 DEBUG (testng-FlagsEnabledTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FlagsEnabledTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:492 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:54,799 DEBUG (testng-FlagsEnabledTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-FlagsEnabledTest] will wait until no switch is in progress
2013-01-31 13:15:54,799 DEBUG (testng-FlagsEnabledTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-FlagsEnabledTest] no switch in progress. Moving on...
2013-01-31 13:15:54,799 DEBUG (testng-FlagsEnabledTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FlagsEnabledTest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:492 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:54,752 DEBUG (ViewHandler,ISPN,KeyAffinityServiceShutdownTest-NodeA-53318) [org.jgroups.protocols.pbcast.STABLE] suspending message garbage collection
2013-01-31 13:15:54,800 DEBUG (ViewHandler,ISPN,KeyAffinityServiceShutdownTest-NodeA-53318) [org.jgroups.protocols.pbcast.STABLE] resume task started, max_suspend_time=33000
2013-01-31 13:15:54,800 DEBUG (testng-Command line test) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:54,801 DEBUG (testng-Command line test) [org.infinispan.manager.DefaultCacheManager] Stopping cache manager ISPN on null
2013-01-31 13:15:54,801 INFO  (testng-Command line test) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testNamedCacheOverride(org.infinispan.configuration.parsing.ParserTest).
2013-01-31 13:15:54,802 INFO  (testng-Command line test) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test simpleTest(org.infinispan.lock.SimpleLockContainerTest)
2013-01-31 13:15:54,794 INFO  (testng-MixedModeTest) [org.infinispan.test.ReplListener]  [Cache 'replAsync'@MixedModeTest-NodeB-26468] Expect Any is true, saw at least one? true Successful? true Expected commands []
2013-01-31 13:15:54,809 INFO  (testng-MixedModeTest) [org.infinispan.test.ReplListener]  [Cache 'replAsync'@MixedModeTest-NodeB-26468] Exiting wait for rpc with expected commands []
2013-01-31 13:15:54,809 INFO  (testng-MixedModeTest) [org.infinispan.test.ReplListener]  [Cache 'invalAsync'@MixedModeTest-NodeB-26468] Expect Any is true, saw at least one? false Successful? false Expected commands []
2013-01-31 13:15:54,794 DEBUG (testng-PutForExternalReadTest) [org.infinispan.test.fwk.TEST_PING] Stop discovery for PutForExternalReadTest-NodeB-28287
2013-01-31 13:15:54,794 INFO  (Incoming-1,ISPN,MixedModeTest-NodeB-26468) [org.infinispan.test.ReplListener]  [Cache 'invalAsync'@MixedModeTest-NodeB-26468] Checking whether command InvalidateCommand should be marked as local with watch local set to false
2013-01-31 13:15:54,809 INFO  (Incoming-1,ISPN,MixedModeTest-NodeB-26468) [org.infinispan.test.ReplListener]  [Cache 'invalAsync'@MixedModeTest-NodeB-26468] ReplListener saw command InvalidateCommand{keys=[k]}
2013-01-31 13:15:54,809 INFO  (Incoming-1,ISPN,MixedModeTest-NodeB-26468) [org.infinispan.test.ReplListener]  [Cache 'invalAsync'@MixedModeTest-NodeB-26468] Nothing to wait for, releasing latch
2013-01-31 13:15:54,809 DEBUG (testng-PutForExternalReadTest) [org.jgroups.protocols.TCP] closing sockets and stopping threads
2013-01-31 13:15:54,810 INFO  (testng-MixedModeTest) [org.infinispan.test.ReplListener]  [Cache 'invalAsync'@MixedModeTest-NodeB-26468] Exiting wait for rpc with expected commands []
2013-01-31 13:15:54,811 INFO  (testng-PutForExternalReadTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000082: Stopping the RpcDispatcher
2013-01-31 13:15:54,812 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.jgroups.stack.Configurator] set property TCP.diagnostics_addr to default value /224.0.75.75
2013-01-31 13:15:54,826 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.jgroups.protocols.FRAG2] received CONFIG event: {bind_addr=/127.0.0.1}
2013-01-31 13:15:54,827 DEBUG (testng-PutForExternalReadTest) [org.infinispan.api.mvcc.PutForExternalReadTest] Creating cache managers
2013-01-31 13:15:54,828 DEBUG (testng-FlagsEnabledTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FlagsEnabledTest] local transaction FlagsEnabledTest-NodeA-50771:341 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:492 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:54,828 DEBUG (testng-FlagsEnabledTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FlagsEnabledTest] local transaction FlagsEnabledTest-NodeA-50771:341 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:54,829 INFO  (testng-MixedModeTest) [org.infinispan.test.ReplListener]  [Cache 'replAsync'@MixedModeTest-NodeB-26468] Checking whether command GetKeyValueCommand should be marked as local with watch local set to false
2013-01-31 13:15:54,829 INFO  (testng-MixedModeTest) [org.infinispan.test.ReplListener]  [Cache 'invalAsync'@MixedModeTest-NodeB-26468] Checking whether command GetKeyValueCommand should be marked as local with watch local set to false
2013-01-31 13:15:54,831 WARN  (testng-FineGrainedAtomicMapAPITest) [org.jgroups.stack.Configurator] [JGRP00013] TP.discard_incompatible_packets has been deprecated: incompatible packets are discarded anyway
2013-01-31 13:15:54,835 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:54,849 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:54,849 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:54,850 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:54,854 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:54,854 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:54,860 INFO  (testng-ReadCommittedLockTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:54,863 DEBUG (Incoming-1,ISPN,KeyAffinityServiceShutdownTest-NodeA-53318) [org.jgroups.protocols.pbcast.NAKACK2] 
[KeyAffinityServiceShutdownTest-NodeA-53318 setDigest()]
existing digest:  KeyAffinityServiceShutdownTest-NodeA-53318: [1 (1)]
new digest:       KeyAffinityServiceShutdownTest-NodeA-53318: [0 (0)], KeyAffinityServiceShutdownTest-NodeB-14426: [0 (0)]
resulting digest: KeyAffinityServiceShutdownTest-NodeA-53318: [1 (1)], KeyAffinityServiceShutdownTest-NodeB-14426: [0 (0)]
2013-01-31 13:15:54,863 DEBUG (Incoming-1,ISPN,KeyAffinityServiceShutdownTest-NodeA-53318) [org.jgroups.protocols.pbcast.GMS] KeyAffinityServiceShutdownTest-NodeA-53318: installing view [KeyAffinityServiceShutdownTest-NodeA-53318|1] [KeyAffinityServiceShutdownTest-NodeA-53318, KeyAffinityServiceShutdownTest-NodeB-14426]
2013-01-31 13:15:54,864 INFO  (testng-RepeatableReadLockTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:54,866 DEBUG (Incoming-1,ISPN,KeyAffinityServiceShutdownTest-NodeA-53318) [org.jgroups.protocols.pbcast.STABLE] [ergonomics] setting max_bytes to 800KB (2 members)
2013-01-31 13:15:54,866 DEBUG (Incoming-1,ISPN,KeyAffinityServiceShutdownTest-NodeA-53318) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] New view accepted: [KeyAffinityServiceShutdownTest-NodeA-53318|1] [KeyAffinityServiceShutdownTest-NodeA-53318, KeyAffinityServiceShutdownTest-NodeB-14426]
2013-01-31 13:15:54,867 INFO  (Incoming-1,ISPN,KeyAffinityServiceShutdownTest-NodeA-53318) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000094: Received new cluster view: [KeyAffinityServiceShutdownTest-NodeA-53318|1] [KeyAffinityServiceShutdownTest-NodeA-53318, KeyAffinityServiceShutdownTest-NodeB-14426]
2013-01-31 13:15:54,867 INFO  (testng-MixedModeTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testMixedMode(org.infinispan.api.MixedModeTest).
2013-01-31 13:15:54,869 DEBUG (testng-PutForExternalReadTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:54,870 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.jgroups.protocols.pbcast.GMS] address=RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358, cluster=ISPN, physical address=127.0.0.1:8650
2013-01-31 13:15:54,870 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:54,871 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.jgroups.protocols.pbcast.NAKACK2] 
[RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358 setDigest()]
existing digest:  []
new digest:       RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358: [0 (0)]
resulting digest: RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358: [0 (0)]
2013-01-31 13:15:54,871 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.jgroups.protocols.pbcast.GMS] RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358: installing view [RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358|0] [RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358]
2013-01-31 13:15:54,871 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.jgroups.protocols.pbcast.STABLE] resuming message garbage collection
2013-01-31 13:15:54,871 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:54,871 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.jgroups.protocols.pbcast.STABLE] [ergonomics] setting max_bytes to 400KB (1 members)
2013-01-31 13:15:54,871 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] New view accepted: [RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358|0] [RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358]
2013-01-31 13:15:54,871 INFO  (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000094: Received new cluster view: [RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358|0] [RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358]
2013-01-31 13:15:54,872 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:54,874 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 11
2013-01-31 13:15:54,874 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@71f07617}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@61d91a71}
	>> org.infinispan.interceptors.TxInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@745722e6}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@4b465b6, PB=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@4b465b6}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@5f819223, TO=org.infinispan.interceptors.EntryWrappingInterceptor@5f819223, PB=org.infinispan.interceptors.EntryWrappingInterceptor@5f819223}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:54,882 DEBUG (testng-PutForExternalReadTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:54,884 DEBUG (testng-PutForExternalReadTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:54,885 DEBUG (testng-KeyAffinityServiceShutdownTest) [org.jgroups.protocols.pbcast.NAKACK2] 
[KeyAffinityServiceShutdownTest-NodeB-14426 setDigest()]
existing digest:  []
new digest:       KeyAffinityServiceShutdownTest-NodeA-53318: [0 (0)], KeyAffinityServiceShutdownTest-NodeB-14426: [0 (0)]
resulting digest: KeyAffinityServiceShutdownTest-NodeA-53318: [0 (0)], KeyAffinityServiceShutdownTest-NodeB-14426: [0 (0)]
2013-01-31 13:15:54,885 DEBUG (testng-KeyAffinityServiceShutdownTest) [org.jgroups.protocols.pbcast.GMS] KeyAffinityServiceShutdownTest-NodeB-14426: installing view [KeyAffinityServiceShutdownTest-NodeA-53318|1] [KeyAffinityServiceShutdownTest-NodeA-53318, KeyAffinityServiceShutdownTest-NodeB-14426]
2013-01-31 13:15:54,885 DEBUG (testng-KeyAffinityServiceShutdownTest) [org.jgroups.protocols.pbcast.STABLE] [ergonomics] setting max_bytes to 800KB (2 members)
2013-01-31 13:15:54,885 DEBUG (testng-KeyAffinityServiceShutdownTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] New view accepted: [KeyAffinityServiceShutdownTest-NodeA-53318|1] [KeyAffinityServiceShutdownTest-NodeA-53318, KeyAffinityServiceShutdownTest-NodeB-14426]
2013-01-31 13:15:54,885 INFO  (testng-KeyAffinityServiceShutdownTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000094: Received new cluster view: [KeyAffinityServiceShutdownTest-NodeA-53318|1] [KeyAffinityServiceShutdownTest-NodeA-53318, KeyAffinityServiceShutdownTest-NodeB-14426]
2013-01-31 13:15:54,885 INFO  (testng-PutForExternalReadTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000078: Starting JGroups Channel
2013-01-31 13:15:54,886 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.jgroups.protocols.pbcast.STABLE] resuming message garbage collection
2013-01-31 13:15:54,886 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.jgroups.protocols.pbcast.GMS] created group (first member). My view is [RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358|0], impl is org.jgroups.protocols.pbcast.CoordGmsImpl
2013-01-31 13:15:54,887 INFO  (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000079: Cache local address is RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358, physical addresses are [127.0.0.1:8650]
2013-01-31 13:15:54,887 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] Waiting on view being accepted
2013-01-31 13:15:54,888 DEBUG (notification-thread-53) [org.infinispan.transaction.TransactionTable] View changed, recalculating minViewId
2013-01-31 13:15:54,888 DEBUG (testng-MixedModeTest) [org.infinispan.api.MixedModeTest] *** Test method complete; clearing contents on all caches.
2013-01-31 13:15:54,889 DEBUG (testng-MixedModeTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'replSync' on a cache manager at address MixedModeTest-NodeA-25015
2013-01-31 13:15:54,889 DEBUG (testng-MixedModeTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [k=replSync]
2013-01-31 13:15:54,889 DEBUG (testng-MixedModeTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:54,889 DEBUG (testng-MixedModeTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:54,889 DEBUG (testng-MixedModeTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:54,889 DEBUG (testng-MixedModeTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'replAsync' on a cache manager at address MixedModeTest-NodeA-25015
2013-01-31 13:15:54,889 DEBUG (testng-MixedModeTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [k=replAsync]
2013-01-31 13:15:54,889 DEBUG (testng-MixedModeTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:54,889 DEBUG (testng-MixedModeTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:54,893 INFO  (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.transaction.lookup.JBossStandaloneJTAManagerLookup] ISPN000107: Retrieving transaction manager Transaction: unknown
2013-01-31 13:15:54,897 DEBUG (testng-MixedModeTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:54,897 DEBUG (testng-MixedModeTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'invalAsync' on a cache manager at address MixedModeTest-NodeA-25015
2013-01-31 13:15:54,898 DEBUG (testng-MixedModeTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [k=invalAsync]
2013-01-31 13:15:54,898 DEBUG (testng-MixedModeTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:54,898 DEBUG (testng-MixedModeTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:54,898 DEBUG (testng-MixedModeTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:54,898 DEBUG (testng-MixedModeTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'local' on a cache manager at address MixedModeTest-NodeA-25015
2013-01-31 13:15:54,898 DEBUG (testng-MixedModeTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [k=local]
2013-01-31 13:15:54,898 DEBUG (testng-MixedModeTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:54,898 DEBUG (testng-MixedModeTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:54,898 DEBUG (testng-MixedModeTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:54,898 DEBUG (testng-MixedModeTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'invalSync' on a cache manager at address MixedModeTest-NodeA-25015
2013-01-31 13:15:54,898 DEBUG (testng-MixedModeTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [k=invalSync]
2013-01-31 13:15:54,898 DEBUG (testng-MixedModeTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:54,898 DEBUG (testng-MixedModeTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:54,898 DEBUG (OOB-1,ISPN,FlagsEnabledTest-NodeB-47084) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [OOB-1,ISPN,FlagsEnabledTest-NodeB-47084] remote transaction FlagsEnabledTest-NodeA-50771:341 received. Epoch is 0 (current epoch is 0) and protocol ID is 2PC
2013-01-31 13:15:54,898 DEBUG (OOB-1,ISPN,FlagsEnabledTest-NodeB-47084) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,FlagsEnabledTest-NodeB-47084] will block until 0 >= 0
2013-01-31 13:15:54,898 DEBUG (OOB-1,ISPN,FlagsEnabledTest-NodeB-47084) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,FlagsEnabledTest-NodeB-47084] epoch is the desired. Moving on...
2013-01-31 13:15:54,907 DEBUG (testng-MixedModeTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:54,907 DEBUG (testng-MixedModeTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'replSync' on a cache manager at address MixedModeTest-NodeB-26468
2013-01-31 13:15:54,907 DEBUG (testng-MixedModeTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [k=replSync]
2013-01-31 13:15:54,907 DEBUG (testng-MixedModeTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:54,907 DEBUG (testng-MixedModeTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:54,907 DEBUG (testng-MixedModeTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:54,907 DEBUG (testng-MixedModeTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'local' on a cache manager at address MixedModeTest-NodeB-26468
2013-01-31 13:15:54,907 DEBUG (testng-MixedModeTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == []
2013-01-31 13:15:54,907 DEBUG (testng-MixedModeTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:54,907 DEBUG (testng-MixedModeTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:54,908 DEBUG (testng-MixedModeTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:54,908 DEBUG (testng-MixedModeTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'invalAsync' on a cache manager at address MixedModeTest-NodeB-26468
2013-01-31 13:15:54,908 DEBUG (testng-MixedModeTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == []
2013-01-31 13:15:54,908 DEBUG (testng-MixedModeTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:54,908 DEBUG (testng-MixedModeTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:54,908 DEBUG (testng-MixedModeTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:54,908 DEBUG (testng-MixedModeTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'invalSync' on a cache manager at address MixedModeTest-NodeB-26468
2013-01-31 13:15:54,908 DEBUG (testng-MixedModeTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == []
2013-01-31 13:15:54,908 DEBUG (testng-MixedModeTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:54,908 DEBUG (testng-MixedModeTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:54,908 DEBUG (testng-MixedModeTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:54,908 DEBUG (testng-MixedModeTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'replAsync' on a cache manager at address MixedModeTest-NodeB-26468
2013-01-31 13:15:54,908 DEBUG (testng-MixedModeTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [k=replAsync]
2013-01-31 13:15:54,908 DEBUG (testng-MixedModeTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:54,908 DEBUG (testng-MixedModeTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:54,908 DEBUG (testng-MixedModeTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:54,909 DEBUG (testng-MixedModeTest) [org.infinispan.CacheImpl] Stopping cache replSync on MixedModeTest-NodeA-25015
2013-01-31 13:15:54,909 DEBUG (testng-MixedModeTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 0 milliseconds.
2013-01-31 13:15:54,909 DEBUG (testng-MixedModeTest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:54,910 DEBUG (CacheViewInstaller-1,MixedModeTest-NodeA-25015) [org.infinispan.cacheviews.CacheViewsManagerImpl] Installing new view CacheView{viewId=3, members=[MixedModeTest-NodeB-26468]} for cache replSync
2013-01-31 13:15:54,911 DEBUG (testng-MixedModeTest) [org.infinispan.CacheImpl] Stopping cache replAsync on MixedModeTest-NodeA-25015
2013-01-31 13:15:54,911 DEBUG (testng-MixedModeTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 0 milliseconds.
2013-01-31 13:15:54,911 DEBUG (testng-MixedModeTest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:54,911 DEBUG (testng-MixedModeTest) [org.infinispan.CacheImpl] Stopping cache invalAsync on MixedModeTest-NodeA-25015
2013-01-31 13:15:54,911 DEBUG (testng-MixedModeTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 0 milliseconds.
2013-01-31 13:15:54,911 DEBUG (testng-MixedModeTest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:54,912 DEBUG (testng-MixedModeTest) [org.infinispan.CacheImpl] Stopping cache local on MixedModeTest-NodeA-25015
2013-01-31 13:15:54,912 DEBUG (testng-MixedModeTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 0 milliseconds.
2013-01-31 13:15:54,912 DEBUG (testng-MixedModeTest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:54,912 DEBUG (testng-MixedModeTest) [org.infinispan.CacheImpl] Stopping cache invalSync on MixedModeTest-NodeA-25015
2013-01-31 13:15:54,912 DEBUG (testng-MixedModeTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 0 milliseconds.
2013-01-31 13:15:54,912 DEBUG (testng-MixedModeTest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:54,912 DEBUG (testng-MixedModeTest) [org.infinispan.CacheImpl] Stopping cache replSync on MixedModeTest-NodeB-26468
2013-01-31 13:15:54,912 DEBUG (testng-MixedModeTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 0 milliseconds.
2013-01-31 13:15:54,912 DEBUG (testng-MixedModeTest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:54,913 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:54,914 WARN  (OOB-2,ISPN,MixedModeTest-NodeB-26468) [org.infinispan.commands.control.CacheViewControlCommand] ISPN000071: Caught exception when handling command CacheViewControlCommand{cache=replSync, type=PREPARE_VIEW, sender=MixedModeTest-NodeA-25015, newViewId=3, newMembers=[MixedModeTest-NodeB-26468], oldViewId=2, oldMembers=[MixedModeTest-NodeA-25015, MixedModeTest-NodeB-26468]}
java.lang.IllegalStateException: replSync: Received cache view prepare request after the local node has already shut down
	at org.infinispan.cacheviews.CacheViewsManagerImpl.handlePrepareView(CacheViewsManagerImpl.java:527)
	at org.infinispan.commands.control.CacheViewControlCommand.perform(CacheViewControlCommand.java:139)
	at org.infinispan.remoting.InboundInvocationHandlerImpl.handle(InboundInvocationHandlerImpl.java:96)
	at org.infinispan.remoting.transport.jgroups.CommandAwareRpcDispatcher.executeCommand(CommandAwareRpcDispatcher.java:232)
	at org.infinispan.remoting.transport.jgroups.CommandAwareRpcDispatcher.handle(CommandAwareRpcDispatcher.java:210)
	at org.jgroups.blocks.RequestCorrelator.handleRequest(RequestCorrelator.java:480)
	at org.jgroups.blocks.RequestCorrelator.receiveMessage(RequestCorrelator.java:390)
	at org.jgroups.blocks.RequestCorrelator.receive(RequestCorrelator.java:248)
	at org.jgroups.blocks.MessageDispatcher$ProtocolAdapter.up(MessageDispatcher.java:600)
	at org.jgroups.JChannel.up(JChannel.java:700)
	at org.jgroups.stack.ProtocolStack.up(ProtocolStack.java:1020)
	at org.jgroups.protocols.FRAG2.up(FRAG2.java:181)
	at org.jgroups.protocols.FC.up(FC.java:479)
	at org.jgroups.protocols.tom.TOA.up(TOA.java:119)
	at org.jgroups.protocols.SEQUENCER.up(SEQUENCER.java:252)
	at org.jgroups.protocols.pbcast.GMS.up(GMS.java:896)
	at org.jgroups.protocols.pbcast.STABLE.up(STABLE.java:244)
	at org.jgroups.protocols.RSVP.up(RSVP.java:164)
	at org.jgroups.protocols.UNICAST2.handleDataReceived(UNICAST2.java:737)
	at org.jgroups.protocols.UNICAST2.up(UNICAST2.java:414)
	at org.jgroups.protocols.pbcast.NAKACK2.up(NAKACK2.java:610)
	at org.jgroups.protocols.Discovery.up(Discovery.java:371)
	at org.jgroups.protocols.TP.passMessageUp(TP.java:1262)
	at org.jgroups.protocols.TP$IncomingPacket.handleMyMessage(TP.java:1824)
	at org.jgroups.protocols.TP$IncomingPacket.run(TP.java:1797)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:54,919 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:54,922 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:54,923 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 11
2013-01-31 13:15:54,923 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@29a76766}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@2d756ee7}
	>> org.infinispan.interceptors.TxInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@78c41701}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@11c28098, PB=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@11c28098}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@78888443, TO=org.infinispan.interceptors.EntryWrappingInterceptor@78888443, PB=org.infinispan.interceptors.EntryWrappingInterceptor@78888443}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:54,930 DEBUG (CacheViewInstaller-2,MixedModeTest-NodeA-25015) [org.infinispan.cacheviews.CacheViewsManagerImpl] Installing new view CacheView{viewId=3, members=[MixedModeTest-NodeB-26468]} for cache replAsync
2013-01-31 13:15:54,940 ERROR (CacheViewInstaller-1,MixedModeTest-NodeA-25015) [org.infinispan.cacheviews.CacheViewsManagerImpl] ISPN000172: Failed to prepare view CacheView{viewId=3, members=[MixedModeTest-NodeB-26468]} for cache  replSync, rolling back to view CacheView{viewId=2, members=[MixedModeTest-NodeA-25015, MixedModeTest-NodeB-26468]}
java.util.concurrent.ExecutionException: org.infinispan.CacheException: java.lang.IllegalStateException: replSync: Received cache view prepare request after the local node has already shut down
	at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:232)
	at java.util.concurrent.FutureTask.get(FutureTask.java:91)
	at org.infinispan.cacheviews.CacheViewsManagerImpl.clusterPrepareView(CacheViewsManagerImpl.java:332)
	at org.infinispan.cacheviews.CacheViewsManagerImpl.clusterInstallView(CacheViewsManagerImpl.java:247)
	at org.infinispan.cacheviews.CacheViewsManagerImpl$ViewInstallationTask.call(CacheViewsManagerImpl.java:948)
	at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
	at java.util.concurrent.FutureTask.run(FutureTask.java:138)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
Caused by: org.infinispan.CacheException: java.lang.IllegalStateException: replSync: Received cache view prepare request after the local node has already shut down
	at org.infinispan.util.Util.rewrapAsCacheException(Util.java:539)
	at org.infinispan.remoting.transport.jgroups.CommandAwareRpcDispatcher.invokeRemoteCommand(CommandAwareRpcDispatcher.java:179)
	at org.infinispan.remoting.transport.jgroups.JGroupsTransport.invokeRemotely(JGroupsTransport.java:498)
	at org.infinispan.cacheviews.CacheViewsManagerImpl$2.call(CacheViewsManagerImpl.java:316)
	at org.infinispan.cacheviews.CacheViewsManagerImpl$2.call(CacheViewsManagerImpl.java:313)
	... 5 more
Caused by: java.lang.IllegalStateException: replSync: Received cache view prepare request after the local node has already shut down
	at org.infinispan.cacheviews.CacheViewsManagerImpl.handlePrepareView(CacheViewsManagerImpl.java:527)
	at org.infinispan.commands.control.CacheViewControlCommand.perform(CacheViewControlCommand.java:139)
	at org.infinispan.remoting.InboundInvocationHandlerImpl.handle(InboundInvocationHandlerImpl.java:96)
	at org.infinispan.remoting.transport.jgroups.CommandAwareRpcDispatcher.executeCommand(CommandAwareRpcDispatcher.java:232)
	at org.infinispan.remoting.transport.jgroups.CommandAwareRpcDispatcher.handle(CommandAwareRpcDispatcher.java:210)
	at org.jgroups.blocks.RequestCorrelator.handleRequest(RequestCorrelator.java:480)
	at org.jgroups.blocks.RequestCorrelator.receiveMessage(RequestCorrelator.java:390)
	at org.jgroups.blocks.RequestCorrelator.receive(RequestCorrelator.java:248)
	at org.jgroups.blocks.MessageDispatcher$ProtocolAdapter.up(MessageDispatcher.java:600)
	at org.jgroups.JChannel.up(JChannel.java:700)
	at org.jgroups.stack.ProtocolStack.up(ProtocolStack.java:1020)
	at org.jgroups.protocols.FRAG2.up(FRAG2.java:181)
	at org.jgroups.protocols.FC.up(FC.java:479)
	at org.jgroups.protocols.tom.TOA.up(TOA.java:119)
	at org.jgroups.protocols.SEQUENCER.up(SEQUENCER.java:252)
	at org.jgroups.protocols.pbcast.GMS.up(GMS.java:896)
	at org.jgroups.protocols.pbcast.STABLE.up(STABLE.java:244)
	at org.jgroups.protocols.RSVP.up(RSVP.java:164)
	at org.jgroups.protocols.UNICAST2.handleDataReceived(UNICAST2.java:737)
	at org.jgroups.protocols.UNICAST2.up(UNICAST2.java:414)
	at org.jgroups.protocols.pbcast.NAKACK2.up(NAKACK2.java:610)
	at org.jgroups.protocols.Discovery.up(Discovery.java:371)
	at org.jgroups.protocols.TP.passMessageUp(TP.java:1262)
	at org.jgroups.protocols.TP$IncomingPacket.handleMyMessage(TP.java:1824)
	at org.jgroups.protocols.TP$IncomingPacket.run(TP.java:1797)
	... 3 more
2013-01-31 13:15:54,990 DEBUG (OOB-2,ISPN,MixedModeTest-NodeB-26468) [org.infinispan.distribution.ch.DefaultConsistentHash] Using 1 virtualNodes to initialize consistent hash wheel 
2013-01-31 13:15:54,998 DEBUG (CacheViewInstaller-1,MixedModeTest-NodeA-25015) [org.infinispan.cacheviews.CacheViewsManagerImpl] replSync: Rolling back to cache view 2, new view id is 4
2013-01-31 13:15:54,998 DEBUG (OOB-2,ISPN,MixedModeTest-NodeB-26468) [org.infinispan.statetransfer.ReplicatedStateTransferTask] Commencing state transfer 3 on node: MixedModeTest-NodeB-26468. Before start, data container had 0 entries
2013-01-31 13:15:54,998 DEBUG (CacheViewInstaller-1,MixedModeTest-NodeA-25015) [org.infinispan.cacheviews.CacheViewsManagerImpl] Rolled back to view CacheView{viewId=2, members=[MixedModeTest-NodeA-25015, MixedModeTest-NodeB-26468]} for cache replSync
2013-01-31 13:15:54,988 DEBUG (Incoming-2,ISPN,MixedModeTest-NodeB-26468) [org.infinispan.statetransfer.StateTransferLockImpl] Blocking new write commands because we'll soon start a state transfer
2013-01-31 13:15:54,987 INFO  (testng-KeyAffinityServiceShutdownTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000079: Cache local address is KeyAffinityServiceShutdownTest-NodeB-14426, physical addresses are [127.0.0.1:8301]
2013-01-31 13:15:55,006 DEBUG (testng-KeyAffinityServiceShutdownTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] Waiting on view being accepted
2013-01-31 13:15:54,986 DEBUG (ViewHandler,ISPN,KeyAffinityServiceShutdownTest-NodeA-53318) [org.jgroups.protocols.pbcast.STABLE] resuming message garbage collection
2013-01-31 13:15:54,964 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.CacheImpl] Started cache ___defaultcache on null
2013-01-31 13:15:54,952 DEBUG (testng-MixedModeTest) [org.infinispan.CacheImpl] Stopping cache local on MixedModeTest-NodeB-26468
2013-01-31 13:15:54,950 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.CacheImpl] Started cache ___defaultcache on null
2013-01-31 13:15:55,007 INFO  (testng-RepeatableReadLockTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testWriteDoesntBlockReadNonexistent(org.infinispan.api.mvcc.repeatable_read.RepeatableReadLockTest)
2013-01-31 13:15:55,007 DEBUG (testng-MixedModeTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 0 milliseconds.
2013-01-31 13:15:55,007 DEBUG (testng-MixedModeTest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:55,008 INFO  (testng-MixedModeTest) [org.infinispan.test.ReplListener]  [Cache 'invalAsync'@MixedModeTest-NodeB-26468] Checking whether command EntrySetCommand should be marked as local with watch local set to false
2013-01-31 13:15:55,008 DEBUG (testng-MixedModeTest) [org.infinispan.CacheImpl] Stopping cache invalAsync on MixedModeTest-NodeB-26468
2013-01-31 13:15:54,946 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:55,000 DEBUG (CacheViewInstaller-1,MixedModeTest-NodeA-25015) [org.infinispan.cacheviews.CacheViewsManagerImpl] Installing new view CacheView{viewId=5, members=[]} for cache replSync
2013-01-31 13:15:54,998 DEBUG (OOB-2,ISPN,MixedModeTest-NodeB-26468) [org.infinispan.statetransfer.StateTransferLockImpl] Blocking new write commands for cache view 3
2013-01-31 13:15:55,033 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:55,034 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:55,035 INFO  (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:55,036 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.transaction.TransactionTable] Min view id set to 0
2013-01-31 13:15:55,036 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 11
2013-01-31 13:15:55,036 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.StateTransferLockInterceptor@260d739f, TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@3d21df3d, PB=org.infinispan.interceptors.StateTransferLockInterceptor@260d739f}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@7ac73d25}
	>> org.infinispan.interceptors.TxInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@2e7f871c}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.PessimisticLockingInterceptor@367f571d, PB=org.infinispan.interceptors.locking.PessimisticLockingInterceptor@367f571d}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@62304cde, TO=org.infinispan.interceptors.EntryWrappingInterceptor@62304cde, PB=org.infinispan.interceptors.EntryWrappingInterceptor@62304cde}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.ReplicationInterceptor@5106b52e, TO=org.infinispan.interceptors.totalorder.TotalOrderReplicationInterceptor@f610891, PB=org.infinispan.interceptors.ReplicationInterceptor@5106b52e}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:55,045 DEBUG (CacheViewInstaller-1,MixedModeTest-NodeA-25015) [org.infinispan.cacheviews.CacheViewsManagerImpl] replSync: Committing cache view CacheView{viewId=5, members=[]}
2013-01-31 13:15:55,045 DEBUG (CacheViewInstaller-1,MixedModeTest-NodeA-25015) [org.infinispan.cacheviews.CacheViewsManagerImpl] Successfully installed view CacheView{viewId=5, members=[]} for cache replSync
2013-01-31 13:15:55,045 DEBUG (OOB-2,ISPN,MixedModeTest-NodeB-26468) [org.infinispan.cacheviews.CacheViewsManagerImpl] replAsync: Committing cache view CacheView{viewId=3, members=[MixedModeTest-NodeB-26468]}
2013-01-31 13:15:55,045 DEBUG (OOB-2,ISPN,MixedModeTest-NodeB-26468) [org.infinispan.statetransfer.BaseStateTransferTask] Node MixedModeTest-NodeB-26468 completed state transfer for view 3 in 47 milliseconds!
2013-01-31 13:15:55,045 DEBUG (OOB-2,ISPN,MixedModeTest-NodeB-26468) [org.infinispan.statetransfer.StateTransferLockImpl] Unblocking write commands for cache view 3
2013-01-31 13:15:55,047 DEBUG (CacheViewInstaller-2,MixedModeTest-NodeA-25015) [org.infinispan.cacheviews.CacheViewsManagerImpl] replAsync: Committing cache view CacheView{viewId=3, members=[MixedModeTest-NodeB-26468]}
2013-01-31 13:15:55,047 DEBUG (CacheViewInstaller-2,MixedModeTest-NodeA-25015) [org.infinispan.cacheviews.CacheViewsManagerImpl] Successfully installed view CacheView{viewId=3, members=[MixedModeTest-NodeB-26468]} for cache replAsync
2013-01-31 13:15:55,050 DEBUG (testng-KeyAffinityServiceShutdownTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:55,051 DEBUG (testng-KeyAffinityServiceShutdownTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:55,051 DEBUG (testng-KeyAffinityServiceShutdownTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:55,051 INFO  (testng-KeyAffinityServiceShutdownTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:55,053 DEBUG (testng-KeyAffinityServiceShutdownTest) [org.infinispan.transaction.TransactionTable] Min view id set to 1
2013-01-31 13:15:55,053 DEBUG (testng-KeyAffinityServiceShutdownTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 10
2013-01-31 13:15:55,053 DEBUG (testng-KeyAffinityServiceShutdownTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.StateTransferLockInterceptor@5c588660, TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@37de37fd, PB=org.infinispan.interceptors.StateTransferLockInterceptor@5c588660}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@5e2ddfb2}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@15b94f6c}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@390d4698, PB=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@390d4698}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@1695c26b, TO=org.infinispan.interceptors.EntryWrappingInterceptor@1695c26b, PB=org.infinispan.interceptors.EntryWrappingInterceptor@1695c26b}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.DistributionInterceptor@420f0a62, TO=org.infinispan.interceptors.totalorder.TotalOrderDistributionInterceptor@6972c9cf, PB=org.infinispan.interceptors.DistributionInterceptor@420f0a62}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:55,053 DEBUG (testng-KeyAffinityServiceShutdownTest) [org.infinispan.distribution.ch.DefaultConsistentHash] Using 1 virtualNodes to initialize consistent hash wheel 
2013-01-31 13:15:55,053 DEBUG (testng-KeyAffinityServiceShutdownTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Setting configuration tunned parameters
2013-01-31 13:15:55,056 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.jgroups.stack.Configurator] set property TCP.diagnostics_addr to default value /224.0.75.75
2013-01-31 13:15:55,060 DEBUG (testng-MixedModeTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 0 milliseconds.
2013-01-31 13:15:55,060 DEBUG (testng-MixedModeTest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:55,060 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepeatableReadLockTest] local transaction DummyTransaction{xid=DummyXid{id=53}, status=0} is starting. check if switch is in progress...
2013-01-31 13:15:55,060 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepeatableReadLockTest] will wait until no switch is in progress
2013-01-31 13:15:55,060 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepeatableReadLockTest] no switch in progress. Moving on...
2013-01-31 13:15:55,060 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepeatableReadLockTest] local transaction DummyTransaction{xid=DummyXid{id=53}, status=0} will use 2PC while executing
2013-01-31 13:15:55,060 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepeatableReadLockTest] local transaction DummyTransaction{xid=DummyXid{id=54}, status=0} is starting. check if switch is in progress...
2013-01-31 13:15:55,060 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepeatableReadLockTest] will wait until no switch is in progress
2013-01-31 13:15:55,060 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepeatableReadLockTest] no switch in progress. Moving on...
2013-01-31 13:15:55,060 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepeatableReadLockTest] local transaction DummyTransaction{xid=DummyXid{id=54}, status=0} will use 2PC while executing
2013-01-31 13:15:55,060 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepeatableReadLockTest] local transaction null:342 [DummyTransaction{xid=DummyXid{id=53}, status=7}] wants to commit
2013-01-31 13:15:55,061 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepeatableReadLockTest] local transaction null:342 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:55,061 ERROR (testng-RepeatableReadLockTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Method testWriteDoesntBlockReadNonexistent(org.infinispan.api.mvcc.repeatable_read.RepeatableReadLockTest) threw an exception
java.lang.AssertionError: Stale locks exist! NumLocksHeld is 1 and lock info is org.infinispan.util.concurrent.locks.containers.OwnableReentrantPerEntryLockContainer@74cc0e46
	at org.infinispan.api.mvcc.LockAssert.assertNoLocks(LockAssert.java:48)
	at org.infinispan.api.mvcc.LockTestBase.assertNoLocks(LockTestBase.java:102)
	at org.infinispan.api.mvcc.LockTestBase.testWriteDoesntBlockReadNonexistent(LockTestBase.java:309)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:55,075 ERROR (testng-RepeatableReadLockTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test failed testWriteDoesntBlockReadNonexistent(org.infinispan.api.mvcc.repeatable_read.RepeatableReadLockTest)
java.lang.AssertionError: Stale locks exist! NumLocksHeld is 1 and lock info is org.infinispan.util.concurrent.locks.containers.OwnableReentrantPerEntryLockContainer@74cc0e46
	at org.infinispan.api.mvcc.LockAssert.assertNoLocks(LockAssert.java:48)
	at org.infinispan.api.mvcc.LockTestBase.assertNoLocks(LockTestBase.java:102)
	at org.infinispan.api.mvcc.LockTestBase.testWriteDoesntBlockReadNonexistent(LockTestBase.java:309)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:55,069 INFO  (testng-ReadCommittedLockTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testConcurrentWriters(org.infinispan.api.mvcc.read_committed.ReadCommittedLockTest)
2013-01-31 13:15:55,077 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.api.mvcc.LockTestBase] **** - STARTING TEARDOWN - ****
2013-01-31 13:15:55,077 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on null
2013-01-31 13:15:55,077 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 1 seconds.
2013-01-31 13:15:55,077 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction DummyTransaction{xid=DummyXid{id=55}, status=0} is starting. check if switch is in progress...
2013-01-31 13:15:55,077 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-ReadCommittedLockTest] will wait until no switch is in progress
2013-01-31 13:15:55,077 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-ReadCommittedLockTest] no switch in progress. Moving on...
2013-01-31 13:15:55,077 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction DummyTransaction{xid=DummyXid{id=55}, status=0} will use 2PC while executing
2013-01-31 13:15:55,080 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction null:344 [DummyTransaction{xid=DummyXid{id=55}, status=7}] wants to commit
2013-01-31 13:15:55,080 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction null:344 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:55,080 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction DummyTransaction{xid=DummyXid{id=56}, status=0} is starting. check if switch is in progress...
2013-01-31 13:15:55,080 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-ReadCommittedLockTest] will wait until no switch is in progress
2013-01-31 13:15:55,080 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-ReadCommittedLockTest] no switch in progress. Moving on...
2013-01-31 13:15:55,080 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction DummyTransaction{xid=DummyXid{id=56}, status=0} will use 2PC while executing
2013-01-31 13:15:55,080 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction null:345 [DummyTransaction{xid=DummyXid{id=56}, status=7}] wants to commit
2013-01-31 13:15:55,080 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction null:345 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:55,080 DEBUG (testng-KeyAffinityServiceShutdownTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Configuration State responses are {KeyAffinityServiceShutdownTest-NodeA-53318=SuccessfulResponse{responseValue=ConfigurationState{numberOfOwners=2, protocolName='2PC', epoch=0}} }
2013-01-31 13:15:55,080 DEBUG (testng-KeyAffinityServiceShutdownTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Configuration State found: ConfigurationState{numberOfOwners=2, protocolName='2PC', epoch=0}
2013-01-31 13:15:55,080 DEBUG (Incoming-2,ISPN,MixedModeTest-NodeB-26468) [org.infinispan.statetransfer.StateTransferLockImpl] Blocking new write commands because we'll soon start a state transfer
2013-01-31 13:15:55,080 DEBUG (CacheViewInstaller-3,MixedModeTest-NodeA-25015) [org.infinispan.cacheviews.CacheViewsManagerImpl] Installing new view CacheView{viewId=3, members=[MixedModeTest-NodeB-26468]} for cache invalAsync
2013-01-31 13:15:55,082 DEBUG (Incoming-2,ISPN,MixedModeTest-NodeB-26468) [org.infinispan.statetransfer.StateTransferLockImpl] Blocking new write commands because we'll soon start a state transfer
2013-01-31 13:15:55,082 DEBUG (CacheViewInstaller-2,MixedModeTest-NodeA-25015) [org.infinispan.cacheviews.CacheViewsManagerImpl] Installing new view CacheView{viewId=3, members=[MixedModeTest-NodeB-26468]} for cache invalSync
2013-01-31 13:15:55,080 DEBUG (testng-KeyAffinityServiceShutdownTest) [org.infinispan.cacheviews.CacheViewsManagerImpl] dist: Node KeyAffinityServiceShutdownTest-NodeB-14426 is joining
2013-01-31 13:15:55,082 WARN  (OOB-2,ISPN,MixedModeTest-NodeB-26468) [org.infinispan.commands.control.CacheViewControlCommand] ISPN000071: Caught exception when handling command CacheViewControlCommand{cache=invalAsync, type=PREPARE_VIEW, sender=MixedModeTest-NodeA-25015, newViewId=3, newMembers=[MixedModeTest-NodeB-26468], oldViewId=2, oldMembers=[MixedModeTest-NodeA-25015, MixedModeTest-NodeB-26468]}
java.lang.IllegalStateException: invalAsync: Received cache view prepare request after the local node has already shut down
	at org.infinispan.cacheviews.CacheViewsManagerImpl.handlePrepareView(CacheViewsManagerImpl.java:527)
	at org.infinispan.commands.control.CacheViewControlCommand.perform(CacheViewControlCommand.java:139)
	at org.infinispan.remoting.InboundInvocationHandlerImpl.handle(InboundInvocationHandlerImpl.java:96)
	at org.infinispan.remoting.transport.jgroups.CommandAwareRpcDispatcher.executeCommand(CommandAwareRpcDispatcher.java:232)
	at org.infinispan.remoting.transport.jgroups.CommandAwareRpcDispatcher.handle(CommandAwareRpcDispatcher.java:210)
	at org.jgroups.blocks.RequestCorrelator.handleRequest(RequestCorrelator.java:480)
	at org.jgroups.blocks.RequestCorrelator.receiveMessage(RequestCorrelator.java:390)
	at org.jgroups.blocks.RequestCorrelator.receive(RequestCorrelator.java:248)
	at org.jgroups.blocks.MessageDispatcher$ProtocolAdapter.up(MessageDispatcher.java:600)
	at org.jgroups.JChannel.up(JChannel.java:700)
	at org.jgroups.stack.ProtocolStack.up(ProtocolStack.java:1020)
	at org.jgroups.protocols.FRAG2.up(FRAG2.java:181)
	at org.jgroups.protocols.FC.up(FC.java:479)
	at org.jgroups.protocols.tom.TOA.up(TOA.java:119)
	at org.jgroups.protocols.SEQUENCER.up(SEQUENCER.java:252)
	at org.jgroups.protocols.pbcast.GMS.up(GMS.java:896)
	at org.jgroups.protocols.pbcast.STABLE.up(STABLE.java:244)
	at org.jgroups.protocols.RSVP.up(RSVP.java:164)
	at org.jgroups.protocols.UNICAST2.handleDataReceived(UNICAST2.java:737)
	at org.jgroups.protocols.UNICAST2.up(UNICAST2.java:414)
	at org.jgroups.protocols.pbcast.NAKACK2.up(NAKACK2.java:610)
	at org.jgroups.protocols.Discovery.up(Discovery.java:371)
	at org.jgroups.protocols.TP.passMessageUp(TP.java:1262)
	at org.jgroups.protocols.TP$IncomingPacket.handleMyMessage(TP.java:1824)
	at org.jgroups.protocols.TP$IncomingPacket.run(TP.java:1797)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:55,083 DEBUG (OOB-1,ISPN,KeyAffinityServiceShutdownTest-NodeA-53318) [org.infinispan.cacheviews.CacheViewsManagerImpl] dist: Node KeyAffinityServiceShutdownTest-NodeB-14426 is joining
2013-01-31 13:15:55,084 DEBUG (OOB-1,ISPN,MixedModeTest-NodeB-26468) [org.infinispan.statetransfer.StateTransferLockImpl] Blocking new write commands for cache view 3
2013-01-31 13:15:55,084 DEBUG (CacheViewInstaller-1,KeyAffinityServiceShutdownTest-NodeA-53318) [org.infinispan.cacheviews.CacheViewsManagerImpl] Installing new view CacheView{viewId=2, members=[KeyAffinityServiceShutdownTest-NodeA-53318, KeyAffinityServiceShutdownTest-NodeB-14426]} for cache dist
2013-01-31 13:15:55,086 DEBUG (OOB-2,ISPN,MixedModeTest-NodeB-26468) [org.infinispan.cacheviews.CacheViewsManagerImpl] invalSync: Committing cache view CacheView{viewId=3, members=[MixedModeTest-NodeB-26468]}
2013-01-31 13:15:55,088 DEBUG (OOB-2,ISPN,MixedModeTest-NodeB-26468) [org.infinispan.statetransfer.StateTransferLockImpl] Unblocking write commands for cache view 3
2013-01-31 13:15:55,095 DEBUG (CacheViewInstaller-2,MixedModeTest-NodeA-25015) [org.infinispan.cacheviews.CacheViewsManagerImpl] invalSync: Committing cache view CacheView{viewId=3, members=[MixedModeTest-NodeB-26468]}
2013-01-31 13:15:55,095 DEBUG (CacheViewInstaller-2,MixedModeTest-NodeA-25015) [org.infinispan.cacheviews.CacheViewsManagerImpl] Successfully installed view CacheView{viewId=3, members=[MixedModeTest-NodeB-26468]} for cache invalSync
2013-01-31 13:15:55,104 DEBUG (OOB-1,ISPN,FlagsEnabledTest-NodeB-47084) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [OOB-1,ISPN,FlagsEnabledTest-NodeB-47084] remote transaction FlagsEnabledTest-NodeA-50771:341 received. Epoch is 0 (current epoch is 0) and protocol ID is 2PC
2013-01-31 13:15:55,104 DEBUG (OOB-1,ISPN,FlagsEnabledTest-NodeB-47084) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,FlagsEnabledTest-NodeB-47084] will block until 0 >= 0
2013-01-31 13:15:55,104 DEBUG (OOB-1,ISPN,FlagsEnabledTest-NodeB-47084) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,FlagsEnabledTest-NodeB-47084] epoch is the desired. Moving on...
2013-01-31 13:15:55,106 INFO  (testng-FlagsEnabledTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testReplicateSkipCacheLoad(org.infinispan.api.flags.FlagsEnabledTest).
2013-01-31 13:15:55,106 DEBUG (testng-FlagsEnabledTest) [org.infinispan.CacheImpl] Stopping cache replication on FlagsEnabledTest-NodeA-50771
2013-01-31 13:15:55,106 DEBUG (testng-FlagsEnabledTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 0 milliseconds.
2013-01-31 13:15:55,106 DEBUG (testng-FlagsEnabledTest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:55,107 DEBUG (testng-FlagsEnabledTest) [org.infinispan.CacheImpl] Stopping cache replication on FlagsEnabledTest-NodeB-47084
2013-01-31 13:15:55,107 DEBUG (CacheViewInstaller-1,FlagsEnabledTest-NodeA-50771) [org.infinispan.cacheviews.CacheViewsManagerImpl] Installing new view CacheView{viewId=3, members=[FlagsEnabledTest-NodeB-47084]} for cache replication
2013-01-31 13:15:55,107 WARN  (CacheViewInstaller-1,FlagsEnabledTest-NodeA-50771) [org.infinispan.configuration.cache.LoaderConfigurationBuilder] ISPN000149: Fetch persistent state and purge on startup are both disabled, cache may contain stale entries on startup
2013-01-31 13:15:55,107 DEBUG (testng-FlagsEnabledTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 0 milliseconds.
2013-01-31 13:15:55,107 WARN  (testng-FlagsEnabledTest) [org.infinispan.transaction.TransactionTable] ISPN000100: Stopping, but there are 0 local transactions and 1 remote transactions that did not finish in time.
2013-01-31 13:15:55,107 DEBUG (transport-thread-56) [org.infinispan.distribution.ch.DefaultConsistentHash] Using 1 virtualNodes to initialize consistent hash wheel 
2013-01-31 13:15:55,107 DEBUG (testng-FlagsEnabledTest) [org.infinispan.transaction.TransactionTable] Local active transactions: {}, Remote active transactions {GlobalTransaction:<FlagsEnabledTest-NodeA-50771>:341:remote=RemoteTransaction{modifications=[PutKeyValueCommand{key=k1-testReplicateSkipCacheLoad, value=v1-testReplicateSkipCacheLoad, flags=null, putIfAbsent=false, lifespanMillis=-1, maxIdleTimeMillis=-1}], lookedUpEntries={k1-testReplicateSkipCacheLoad=ClusteredRepeatableReadEntry(3ffe345){key=k1-testReplicateSkipCacheLoad, value=v1-testReplicateSkipCacheLoad, oldValue=null, isCreated=false, isChanged=false, isRemoved=false, isValid=true}}, lockedKeys= null, backupKeyLocks [k1-testReplicateSkipCacheLoad], isMissingModifications false, tx=GlobalTransaction:<FlagsEnabledTest-NodeA-50771>:341:remote, state=[PREPARING, PREPARED], dependencyLatch=null}}
2013-01-31 13:15:55,108 DEBUG (transport-thread-56) [org.infinispan.statetransfer.DistributedStateTransferTask] Commencing rehash 2 on node: KeyAffinityServiceShutdownTest-NodeA-53318. Before start, data container had 0 entries
2013-01-31 13:15:55,108 DEBUG (transport-thread-56) [org.infinispan.statetransfer.StateTransferLockImpl] Blocking new write commands for cache view 2
2013-01-31 13:15:55,107 WARN  (CacheViewInstaller-1,FlagsEnabledTest-NodeA-50771) [org.infinispan.configuration.cache.LoaderConfigurationBuilder] ISPN000149: Fetch persistent state and purge on startup are both disabled, cache may contain stale entries on startup
2013-01-31 13:15:55,110 DEBUG (testng-FlagsEnabledTest) [org.infinispan.manager.DefaultCacheManager] Stopping cache manager ISPN on FlagsEnabledTest-NodeA-50771
2013-01-31 13:15:55,110 DEBUG (testng-FlagsEnabledTest) [org.infinispan.CacheImpl] Stopping cache replication on FlagsEnabledTest-NodeA-50771
2013-01-31 13:15:55,115 WARN  (transport-thread-51) [org.infinispan.configuration.cache.LoaderConfigurationBuilder] ISPN000149: Fetch persistent state and purge on startup are both disabled, cache may contain stale entries on startup
2013-01-31 13:15:55,115 WARN  (transport-thread-51) [org.infinispan.configuration.cache.LoaderConfigurationBuilder] ISPN000149: Fetch persistent state and purge on startup are both disabled, cache may contain stale entries on startup
2013-01-31 13:15:55,115 WARN  (OOB-1,ISPN,FlagsEnabledTest-NodeB-47084) [org.infinispan.configuration.cache.LoaderConfigurationBuilder] ISPN000149: Fetch persistent state and purge on startup are both disabled, cache may contain stale entries on startup
2013-01-31 13:15:55,115 WARN  (OOB-1,ISPN,FlagsEnabledTest-NodeB-47084) [org.infinispan.configuration.cache.LoaderConfigurationBuilder] ISPN000149: Fetch persistent state and purge on startup are both disabled, cache may contain stale entries on startup
2013-01-31 13:15:55,116 WARN  (OOB-1,ISPN,FlagsEnabledTest-NodeB-47084) [org.infinispan.commands.control.CacheViewControlCommand] ISPN000071: Caught exception when handling command CacheViewControlCommand{cache=replication, type=PREPARE_VIEW, sender=FlagsEnabledTest-NodeA-50771, newViewId=3, newMembers=[FlagsEnabledTest-NodeB-47084], oldViewId=2, oldMembers=[FlagsEnabledTest-NodeA-50771, FlagsEnabledTest-NodeB-47084]}
java.lang.IllegalStateException: replication: Received cache view prepare request after the local node has already shut down
	at org.infinispan.cacheviews.CacheViewsManagerImpl.handlePrepareView(CacheViewsManagerImpl.java:527)
	at org.infinispan.commands.control.CacheViewControlCommand.perform(CacheViewControlCommand.java:139)
	at org.infinispan.remoting.InboundInvocationHandlerImpl.handle(InboundInvocationHandlerImpl.java:96)
	at org.infinispan.remoting.transport.jgroups.CommandAwareRpcDispatcher.executeCommand(CommandAwareRpcDispatcher.java:232)
	at org.infinispan.remoting.transport.jgroups.CommandAwareRpcDispatcher.handle(CommandAwareRpcDispatcher.java:210)
	at org.jgroups.blocks.RequestCorrelator.handleRequest(RequestCorrelator.java:480)
	at org.jgroups.blocks.RequestCorrelator.receiveMessage(RequestCorrelator.java:390)
	at org.jgroups.blocks.RequestCorrelator.receive(RequestCorrelator.java:248)
	at org.jgroups.blocks.MessageDispatcher$ProtocolAdapter.up(MessageDispatcher.java:600)
	at org.jgroups.JChannel.up(JChannel.java:700)
	at org.jgroups.stack.ProtocolStack.up(ProtocolStack.java:1020)
	at org.jgroups.protocols.FRAG2.up(FRAG2.java:181)
	at org.jgroups.protocols.FC.up(FC.java:479)
	at org.jgroups.protocols.tom.TOA.up(TOA.java:119)
	at org.jgroups.protocols.SEQUENCER.up(SEQUENCER.java:252)
	at org.jgroups.protocols.pbcast.GMS.up(GMS.java:896)
	at org.jgroups.protocols.pbcast.STABLE.up(STABLE.java:244)
	at org.jgroups.protocols.RSVP.up(RSVP.java:164)
	at org.jgroups.protocols.UNICAST2.handleDataReceived(UNICAST2.java:737)
	at org.jgroups.protocols.UNICAST2.up(UNICAST2.java:414)
	at org.jgroups.protocols.pbcast.NAKACK2.up(NAKACK2.java:610)
	at org.jgroups.protocols.Discovery.up(Discovery.java:371)
	at org.jgroups.protocols.TP.passMessageUp(TP.java:1262)
	at org.jgroups.protocols.TP$IncomingPacket.handleMyMessage(TP.java:1824)
	at org.jgroups.protocols.TP$IncomingPacket.run(TP.java:1797)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:55,116 ERROR (CacheViewInstaller-3,MixedModeTest-NodeA-25015) [org.infinispan.cacheviews.CacheViewsManagerImpl] ISPN000172: Failed to prepare view CacheView{viewId=3, members=[MixedModeTest-NodeB-26468]} for cache  invalAsync, rolling back to view CacheView{viewId=2, members=[MixedModeTest-NodeA-25015, MixedModeTest-NodeB-26468]}
java.util.concurrent.ExecutionException: org.infinispan.CacheException: java.lang.IllegalStateException: invalAsync: Received cache view prepare request after the local node has already shut down
	at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:232)
	at java.util.concurrent.FutureTask.get(FutureTask.java:91)
	at org.infinispan.cacheviews.CacheViewsManagerImpl.clusterPrepareView(CacheViewsManagerImpl.java:332)
	at org.infinispan.cacheviews.CacheViewsManagerImpl.clusterInstallView(CacheViewsManagerImpl.java:247)
	at org.infinispan.cacheviews.CacheViewsManagerImpl$ViewInstallationTask.call(CacheViewsManagerImpl.java:948)
	at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
	at java.util.concurrent.FutureTask.run(FutureTask.java:138)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
Caused by: org.infinispan.CacheException: java.lang.IllegalStateException: invalAsync: Received cache view prepare request after the local node has already shut down
	at org.infinispan.util.Util.rewrapAsCacheException(Util.java:539)
	at org.infinispan.remoting.transport.jgroups.CommandAwareRpcDispatcher.invokeRemoteCommand(CommandAwareRpcDispatcher.java:179)
	at org.infinispan.remoting.transport.jgroups.JGroupsTransport.invokeRemotely(JGroupsTransport.java:498)
	at org.infinispan.cacheviews.CacheViewsManagerImpl$2.call(CacheViewsManagerImpl.java:316)
	at org.infinispan.cacheviews.CacheViewsManagerImpl$2.call(CacheViewsManagerImpl.java:313)
	... 5 more
Caused by: java.lang.IllegalStateException: invalAsync: Received cache view prepare request after the local node has already shut down
	at org.infinispan.cacheviews.CacheViewsManagerImpl.handlePrepareView(CacheViewsManagerImpl.java:527)
	at org.infinispan.commands.control.CacheViewControlCommand.perform(CacheViewControlCommand.java:139)
	at org.infinispan.remoting.InboundInvocationHandlerImpl.handle(InboundInvocationHandlerImpl.java:96)
	at org.infinispan.remoting.transport.jgroups.CommandAwareRpcDispatcher.executeCommand(CommandAwareRpcDispatcher.java:232)
	at org.infinispan.remoting.transport.jgroups.CommandAwareRpcDispatcher.handle(CommandAwareRpcDispatcher.java:210)
	at org.jgroups.blocks.RequestCorrelator.handleRequest(RequestCorrelator.java:480)
	at org.jgroups.blocks.RequestCorrelator.receiveMessage(RequestCorrelator.java:390)
	at org.jgroups.blocks.RequestCorrelator.receive(RequestCorrelator.java:248)
	at org.jgroups.blocks.MessageDispatcher$ProtocolAdapter.up(MessageDispatcher.java:600)
	at org.jgroups.JChannel.up(JChannel.java:700)
	at org.jgroups.stack.ProtocolStack.up(ProtocolStack.java:1020)
	at org.jgroups.protocols.FRAG2.up(FRAG2.java:181)
	at org.jgroups.protocols.FC.up(FC.java:479)
	at org.jgroups.protocols.tom.TOA.up(TOA.java:119)
	at org.jgroups.protocols.SEQUENCER.up(SEQUENCER.java:252)
	at org.jgroups.protocols.pbcast.GMS.up(GMS.java:896)
	at org.jgroups.protocols.pbcast.STABLE.up(STABLE.java:244)
	at org.jgroups.protocols.RSVP.up(RSVP.java:164)
	at org.jgroups.protocols.UNICAST2.handleDataReceived(UNICAST2.java:737)
	at org.jgroups.protocols.UNICAST2.up(UNICAST2.java:414)
	at org.jgroups.protocols.pbcast.NAKACK2.up(NAKACK2.java:610)
	at org.jgroups.protocols.Discovery.up(Discovery.java:371)
	at org.jgroups.protocols.TP.passMessageUp(TP.java:1262)
	at org.jgroups.protocols.TP$IncomingPacket.handleMyMessage(TP.java:1824)
	at org.jgroups.protocols.TP$IncomingPacket.run(TP.java:1797)
	... 3 more
2013-01-31 13:15:55,134 DEBUG (CacheViewInstaller-3,MixedModeTest-NodeA-25015) [org.infinispan.cacheviews.CacheViewsManagerImpl] invalAsync: Rolling back to cache view 2, new view id is 4
2013-01-31 13:15:55,134 DEBUG (CacheViewInstaller-3,MixedModeTest-NodeA-25015) [org.infinispan.cacheviews.CacheViewsManagerImpl] Rolled back to view CacheView{viewId=2, members=[MixedModeTest-NodeA-25015, MixedModeTest-NodeB-26468]} for cache invalAsync
2013-01-31 13:15:55,127 DEBUG (testng-MixedModeTest) [org.infinispan.CacheImpl] Stopping cache invalSync on MixedModeTest-NodeB-26468
2013-01-31 13:15:55,134 DEBUG (testng-MixedModeTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 0 milliseconds.
2013-01-31 13:15:55,134 DEBUG (testng-MixedModeTest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:55,123 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Setting configuration tunned parameters
2013-01-31 13:15:55,122 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.jgroups.protocols.FRAG2] received CONFIG event: {bind_addr=/127.0.0.1}
2013-01-31 13:15:55,122 DEBUG (OOB-1,ISPN,KeyAffinityServiceShutdownTest-NodeB-14426) [org.infinispan.distribution.ch.DefaultConsistentHash] Using 1 virtualNodes to initialize consistent hash wheel 
2013-01-31 13:15:55,121 ERROR (CacheViewInstaller-1,FlagsEnabledTest-NodeA-50771) [org.infinispan.cacheviews.CacheViewsManagerImpl] ISPN000172: Failed to prepare view CacheView{viewId=3, members=[FlagsEnabledTest-NodeB-47084]} for cache  replication, rolling back to view CacheView{viewId=2, members=[FlagsEnabledTest-NodeA-50771, FlagsEnabledTest-NodeB-47084]}
java.util.concurrent.ExecutionException: org.infinispan.CacheException: java.lang.IllegalStateException: replication: Received cache view prepare request after the local node has already shut down
	at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:232)
	at java.util.concurrent.FutureTask.get(FutureTask.java:91)
	at org.infinispan.cacheviews.CacheViewsManagerImpl.clusterPrepareView(CacheViewsManagerImpl.java:332)
	at org.infinispan.cacheviews.CacheViewsManagerImpl.clusterInstallView(CacheViewsManagerImpl.java:247)
	at org.infinispan.cacheviews.CacheViewsManagerImpl$ViewInstallationTask.call(CacheViewsManagerImpl.java:948)
	at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
	at java.util.concurrent.FutureTask.run(FutureTask.java:138)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
Caused by: org.infinispan.CacheException: java.lang.IllegalStateException: replication: Received cache view prepare request after the local node has already shut down
	at org.infinispan.util.Util.rewrapAsCacheException(Util.java:539)
	at org.infinispan.remoting.transport.jgroups.CommandAwareRpcDispatcher.invokeRemoteCommand(CommandAwareRpcDispatcher.java:179)
	at org.infinispan.remoting.transport.jgroups.JGroupsTransport.invokeRemotely(JGroupsTransport.java:498)
	at org.infinispan.cacheviews.CacheViewsManagerImpl$2.call(CacheViewsManagerImpl.java:316)
	at org.infinispan.cacheviews.CacheViewsManagerImpl$2.call(CacheViewsManagerImpl.java:313)
	... 5 more
Caused by: java.lang.IllegalStateException: replication: Received cache view prepare request after the local node has already shut down
	at org.infinispan.cacheviews.CacheViewsManagerImpl.handlePrepareView(CacheViewsManagerImpl.java:527)
	at org.infinispan.commands.control.CacheViewControlCommand.perform(CacheViewControlCommand.java:139)
	at org.infinispan.remoting.InboundInvocationHandlerImpl.handle(InboundInvocationHandlerImpl.java:96)
	at org.infinispan.remoting.transport.jgroups.CommandAwareRpcDispatcher.executeCommand(CommandAwareRpcDispatcher.java:232)
	at org.infinispan.remoting.transport.jgroups.CommandAwareRpcDispatcher.handle(CommandAwareRpcDispatcher.java:210)
	at org.jgroups.blocks.RequestCorrelator.handleRequest(RequestCorrelator.java:480)
	at org.jgroups.blocks.RequestCorrelator.receiveMessage(RequestCorrelator.java:390)
	at org.jgroups.blocks.RequestCorrelator.receive(RequestCorrelator.java:248)
	at org.jgroups.blocks.MessageDispatcher$ProtocolAdapter.up(MessageDispatcher.java:600)
	at org.jgroups.JChannel.up(JChannel.java:700)
	at org.jgroups.stack.ProtocolStack.up(ProtocolStack.java:1020)
	at org.jgroups.protocols.FRAG2.up(FRAG2.java:181)
	at org.jgroups.protocols.FC.up(FC.java:479)
	at org.jgroups.protocols.tom.TOA.up(TOA.java:119)
	at org.jgroups.protocols.SEQUENCER.up(SEQUENCER.java:252)
	at org.jgroups.protocols.pbcast.GMS.up(GMS.java:896)
	at org.jgroups.protocols.pbcast.STABLE.up(STABLE.java:244)
	at org.jgroups.protocols.RSVP.up(RSVP.java:164)
	at org.jgroups.protocols.UNICAST2.handleDataReceived(UNICAST2.java:737)
	at org.jgroups.protocols.UNICAST2.up(UNICAST2.java:414)
	at org.jgroups.protocols.pbcast.NAKACK2.up(NAKACK2.java:610)
	at org.jgroups.protocols.Discovery.up(Discovery.java:371)
	at org.jgroups.protocols.TP.passMessageUp(TP.java:1262)
	at org.jgroups.protocols.TP$IncomingPacket.handleMyMessage(TP.java:1824)
	at org.jgroups.protocols.TP$IncomingPacket.run(TP.java:1797)
	... 3 more
2013-01-31 13:15:55,140 DEBUG (OOB-1,ISPN,KeyAffinityServiceShutdownTest-NodeB-14426) [org.infinispan.statetransfer.DistributedStateTransferTask] Commencing rehash 2 on node: KeyAffinityServiceShutdownTest-NodeB-14426. Before start, data container had 0 entries
2013-01-31 13:15:55,149 DEBUG (OOB-1,ISPN,KeyAffinityServiceShutdownTest-NodeB-14426) [org.infinispan.statetransfer.StateTransferLockImpl] Blocking new write commands for cache view 2
2013-01-31 13:15:55,138 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.jgroups.protocols.pbcast.GMS] address=FineGrainedAtomicMapAPITest-NodeA-36196, cluster=ISPN, physical address=127.0.0.1:8600
2013-01-31 13:15:55,137 DEBUG (CacheViewInstaller-2,MixedModeTest-NodeA-25015) [org.infinispan.cacheviews.CacheViewsManagerImpl] Installing new view CacheView{viewId=4, members=[]} for cache invalSync
2013-01-31 13:15:55,137 DEBUG (CacheViewInstaller-3,MixedModeTest-NodeA-25015) [org.infinispan.cacheviews.CacheViewsManagerImpl] Installing new view CacheView{viewId=5, members=[]} for cache invalAsync
2013-01-31 13:15:55,136 INFO  (testng-MixedModeTest) [org.infinispan.test.ReplListener]  [Cache 'replAsync'@MixedModeTest-NodeB-26468] Checking whether command EntrySetCommand should be marked as local with watch local set to false
2013-01-31 13:15:55,151 DEBUG (testng-MixedModeTest) [org.infinispan.CacheImpl] Stopping cache replAsync on MixedModeTest-NodeB-26468
2013-01-31 13:15:55,151 DEBUG (testng-MixedModeTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 0 milliseconds.
2013-01-31 13:15:55,151 DEBUG (testng-MixedModeTest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:55,135 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Configuration State responses are {}
2013-01-31 13:15:55,151 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] No Configuration State found in cluster
2013-01-31 13:15:55,151 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] No State found. Using original configuration parameters
2013-01-31 13:15:55,151 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.cacheviews.CacheViewsManagerImpl] atomic: Node RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358 is joining
2013-01-31 13:15:55,153 INFO  (testng-FlagsEnabledTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000080: Disconnecting and closing JGroups Channel
2013-01-31 13:15:55,155 DEBUG (CacheViewInstaller-2,MixedModeTest-NodeA-25015) [org.infinispan.cacheviews.CacheViewsManagerImpl] invalSync: Committing cache view CacheView{viewId=4, members=[]}
2013-01-31 13:15:55,155 DEBUG (CacheViewInstaller-3,MixedModeTest-NodeA-25015) [org.infinispan.cacheviews.CacheViewsManagerImpl] invalAsync: Committing cache view CacheView{viewId=5, members=[]}
2013-01-31 13:15:55,155 DEBUG (CacheViewInstaller-3,MixedModeTest-NodeA-25015) [org.infinispan.cacheviews.CacheViewsManagerImpl] Successfully installed view CacheView{viewId=5, members=[]} for cache invalAsync
2013-01-31 13:15:55,156 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.jgroups.protocols.pbcast.NAKACK2] 
[FineGrainedAtomicMapAPITest-NodeA-36196 setDigest()]
existing digest:  []
new digest:       FineGrainedAtomicMapAPITest-NodeA-36196: [0 (0)]
resulting digest: FineGrainedAtomicMapAPITest-NodeA-36196: [0 (0)]
2013-01-31 13:15:55,156 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.jgroups.protocols.pbcast.GMS] FineGrainedAtomicMapAPITest-NodeA-36196: installing view [FineGrainedAtomicMapAPITest-NodeA-36196|0] [FineGrainedAtomicMapAPITest-NodeA-36196]
2013-01-31 13:15:55,156 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.jgroups.protocols.pbcast.STABLE] resuming message garbage collection
2013-01-31 13:15:55,157 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.jgroups.protocols.pbcast.STABLE] [ergonomics] setting max_bytes to 400KB (1 members)
2013-01-31 13:15:55,157 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] New view accepted: [FineGrainedAtomicMapAPITest-NodeA-36196|0] [FineGrainedAtomicMapAPITest-NodeA-36196]
2013-01-31 13:15:55,157 INFO  (testng-FineGrainedAtomicMapAPITest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000094: Received new cluster view: [FineGrainedAtomicMapAPITest-NodeA-36196|0] [FineGrainedAtomicMapAPITest-NodeA-36196]
2013-01-31 13:15:55,157 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.jgroups.protocols.pbcast.STABLE] resuming message garbage collection
2013-01-31 13:15:55,157 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.jgroups.protocols.pbcast.GMS] created group (first member). My view is [FineGrainedAtomicMapAPITest-NodeA-36196|0], impl is org.jgroups.protocols.pbcast.CoordGmsImpl
2013-01-31 13:15:55,157 INFO  (testng-FineGrainedAtomicMapAPITest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000079: Cache local address is FineGrainedAtomicMapAPITest-NodeA-36196, physical addresses are [127.0.0.1:8600]
2013-01-31 13:15:55,157 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] Waiting on view being accepted
2013-01-31 13:15:55,158 DEBUG (CacheViewInstaller-2,MixedModeTest-NodeA-25015) [org.infinispan.cacheviews.CacheViewsManagerImpl] Successfully installed view CacheView{viewId=4, members=[]} for cache invalSync
2013-01-31 13:15:55,158 WARN  (testng-ClusteredAPITest) [org.jgroups.stack.Configurator] [JGRP00013] TP.discard_incompatible_packets has been deprecated: incompatible packets are discarded anyway
2013-01-31 13:15:55,169 INFO  (testng-FineGrainedAtomicMapAPITest) [org.infinispan.transaction.lookup.JBossStandaloneJTAManagerLookup] ISPN000107: Retrieving transaction manager Transaction: unknown
2013-01-31 13:15:55,175 DEBUG (CacheViewInstaller-1,RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358) [org.infinispan.cacheviews.CacheViewsManagerImpl] Installing new view CacheView{viewId=1, members=[RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358]} for cache atomic
2013-01-31 13:15:55,178 DEBUG (transport-thread-62) [org.infinispan.distribution.ch.DefaultConsistentHash] Using 1 virtualNodes to initialize consistent hash wheel 
2013-01-31 13:15:55,188 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:55,188 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:55,189 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:55,189 INFO  (testng-FineGrainedAtomicMapAPITest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:55,193 DEBUG (testng-MixedModeTest) [org.infinispan.manager.DefaultCacheManager] Stopping cache manager ISPN on MixedModeTest-NodeA-25015
2013-01-31 13:15:55,193 DEBUG (transport-thread-62) [org.infinispan.statetransfer.ReplicatedStateTransferTask] Commencing state transfer 1 on node: RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358. Before start, data container had 0 entries
2013-01-31 13:15:55,193 DEBUG (transport-thread-62) [org.infinispan.statetransfer.StateTransferLockImpl] Blocking new write commands for cache view 1
2013-01-31 13:15:55,193 DEBUG (OOB-1,ISPN,KeyAffinityServiceShutdownTest-NodeB-14426) [org.infinispan.cacheviews.CacheViewsManagerImpl] dist: Committing cache view CacheView{viewId=2, members=[KeyAffinityServiceShutdownTest-NodeA-53318, KeyAffinityServiceShutdownTest-NodeB-14426]}
2013-01-31 13:15:55,193 DEBUG (OOB-1,ISPN,KeyAffinityServiceShutdownTest-NodeB-14426) [org.infinispan.statetransfer.BaseStateTransferTask] Node KeyAffinityServiceShutdownTest-NodeB-14426 completed state transfer for view 2 in 53 milliseconds!
2013-01-31 13:15:55,193 DEBUG (OOB-1,ISPN,KeyAffinityServiceShutdownTest-NodeB-14426) [org.infinispan.statetransfer.StateTransferLockImpl] Unblocking write commands for cache view 2
2013-01-31 13:15:55,193 DEBUG (CacheViewInstaller-1,RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358) [org.infinispan.cacheviews.CacheViewsManagerImpl] atomic: Committing cache view CacheView{viewId=1, members=[RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358]}
2013-01-31 13:15:55,193 DEBUG (CacheViewInstaller-1,RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358) [org.infinispan.statetransfer.BaseStateTransferTask] Node RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358 completed state transfer for view 1 in 0 milliseconds!
2013-01-31 13:15:55,193 DEBUG (CacheViewInstaller-1,RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358) [org.infinispan.statetransfer.StateTransferLockImpl] Unblocking write commands for cache view 1
2013-01-31 13:15:55,194 DEBUG (CacheViewInstaller-1,RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358) [org.infinispan.cacheviews.CacheViewsManagerImpl] Successfully installed view CacheView{viewId=1, members=[RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358]} for cache atomic
2013-01-31 13:15:55,194 DEBUG (testng-MixedModeTest) [org.infinispan.CacheImpl] Stopping cache replSync on MixedModeTest-NodeA-25015
2013-01-31 13:15:55,194 DEBUG (testng-MixedModeTest) [org.infinispan.CacheImpl] Stopping cache local on MixedModeTest-NodeA-25015
2013-01-31 13:15:55,194 DEBUG (testng-MixedModeTest) [org.infinispan.CacheImpl] Stopping cache invalAsync on MixedModeTest-NodeA-25015
2013-01-31 13:15:55,194 DEBUG (testng-MixedModeTest) [org.infinispan.CacheImpl] Stopping cache invalSync on MixedModeTest-NodeA-25015
2013-01-31 13:15:55,194 DEBUG (testng-MixedModeTest) [org.infinispan.CacheImpl] Stopping cache replAsync on MixedModeTest-NodeA-25015
2013-01-31 13:15:55,194 DEBUG (testng-KeyAffinityServiceShutdownTest) [org.infinispan.CacheImpl] Started cache dist on KeyAffinityServiceShutdownTest-NodeB-14426
2013-01-31 13:15:55,195 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.transaction.TransactionTable] Min view id set to 0
2013-01-31 13:15:55,195 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 11
2013-01-31 13:15:55,195 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.StateTransferLockInterceptor@616fbad7, TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@6e53ab3a, PB=org.infinispan.interceptors.StateTransferLockInterceptor@616fbad7}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@370ea56c}
	>> org.infinispan.interceptors.TxInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@228e71b1}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.PessimisticLockingInterceptor@35ca2d30, PB=org.infinispan.interceptors.locking.PessimisticLockingInterceptor@35ca2d30}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@6c5cc5e6, TO=org.infinispan.interceptors.EntryWrappingInterceptor@6c5cc5e6, PB=org.infinispan.interceptors.EntryWrappingInterceptor@6c5cc5e6}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.ReplicationInterceptor@3ec4b69e, TO=org.infinispan.interceptors.totalorder.TotalOrderReplicationInterceptor@64b15f43, PB=org.infinispan.interceptors.ReplicationInterceptor@3ec4b69e}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:55,195 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Setting configuration tunned parameters
2013-01-31 13:15:55,195 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Configuration State responses are {}
2013-01-31 13:15:55,195 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] No Configuration State found in cluster
2013-01-31 13:15:55,195 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] No State found. Using original configuration parameters
2013-01-31 13:15:55,195 DEBUG (testng-KeyAffinityServiceShutdownTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:55,195 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.cacheviews.CacheViewsManagerImpl] atomic: Node FineGrainedAtomicMapAPITest-NodeA-36196 is joining
2013-01-31 13:15:55,197 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.CacheImpl] Started cache atomic on RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358
2013-01-31 13:15:55,197 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:55,202 DEBUG (testng-KeyAffinityServiceShutdownTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:55,202 DEBUG (testng-KeyAffinityServiceShutdownTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:55,204 INFO  (testng-KeyAffinityServiceShutdownTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000078: Starting JGroups Channel
2013-01-31 13:15:55,207 DEBUG (CacheViewInstaller-1,FineGrainedAtomicMapAPITest-NodeA-36196) [org.infinispan.cacheviews.CacheViewsManagerImpl] Installing new view CacheView{viewId=1, members=[FineGrainedAtomicMapAPITest-NodeA-36196]} for cache atomic
2013-01-31 13:15:55,213 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:55,214 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:55,214 DEBUG (testng-ClusteredAPITest) [org.jgroups.stack.Configurator] set property TCP.diagnostics_addr to default value /224.0.75.75
2013-01-31 13:15:55,215 INFO  (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000078: Starting JGroups Channel
2013-01-31 13:15:55,220 DEBUG (transport-thread-64) [org.infinispan.distribution.ch.DefaultConsistentHash] Using 1 virtualNodes to initialize consistent hash wheel 
2013-01-31 13:15:55,240 DEBUG (transport-thread-64) [org.infinispan.statetransfer.ReplicatedStateTransferTask] Commencing state transfer 1 on node: FineGrainedAtomicMapAPITest-NodeA-36196. Before start, data container had 0 entries
2013-01-31 13:15:55,240 DEBUG (transport-thread-64) [org.infinispan.statetransfer.StateTransferLockImpl] Blocking new write commands for cache view 1
2013-01-31 13:15:55,240 INFO  (testng-MixedModeTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000080: Disconnecting and closing JGroups Channel
2013-01-31 13:15:55,244 DEBUG (CacheViewInstaller-1,FineGrainedAtomicMapAPITest-NodeA-36196) [org.infinispan.cacheviews.CacheViewsManagerImpl] atomic: Committing cache view CacheView{viewId=1, members=[FineGrainedAtomicMapAPITest-NodeA-36196]}
2013-01-31 13:15:55,244 DEBUG (CacheViewInstaller-1,FineGrainedAtomicMapAPITest-NodeA-36196) [org.infinispan.statetransfer.BaseStateTransferTask] Node FineGrainedAtomicMapAPITest-NodeA-36196 completed state transfer for view 1 in 4 milliseconds!
2013-01-31 13:15:55,244 DEBUG (CacheViewInstaller-1,FineGrainedAtomicMapAPITest-NodeA-36196) [org.infinispan.statetransfer.StateTransferLockImpl] Unblocking write commands for cache view 1
2013-01-31 13:15:55,244 DEBUG (CacheViewInstaller-1,FineGrainedAtomicMapAPITest-NodeA-36196) [org.infinispan.cacheviews.CacheViewsManagerImpl] Successfully installed view CacheView{viewId=1, members=[FineGrainedAtomicMapAPITest-NodeA-36196]} for cache atomic
2013-01-31 13:15:55,244 DEBUG (Incoming-1,ISPN,FlagsEnabledTest-NodeB-47084) [org.jgroups.protocols.pbcast.GMS] FlagsEnabledTest-NodeB-47084: installing view [FlagsEnabledTest-NodeB-47084|2] [FlagsEnabledTest-NodeB-47084]
2013-01-31 13:15:55,244 DEBUG (CacheViewInstaller-1,KeyAffinityServiceShutdownTest-NodeA-53318) [org.infinispan.cacheviews.CacheViewsManagerImpl] dist: Committing cache view CacheView{viewId=2, members=[KeyAffinityServiceShutdownTest-NodeA-53318, KeyAffinityServiceShutdownTest-NodeB-14426]}
2013-01-31 13:15:55,244 DEBUG (CacheViewInstaller-1,KeyAffinityServiceShutdownTest-NodeA-53318) [org.infinispan.statetransfer.BaseStateTransferTask] Node KeyAffinityServiceShutdownTest-NodeA-53318 completed state transfer for view 2 in 136 milliseconds!
2013-01-31 13:15:55,244 DEBUG (CacheViewInstaller-1,KeyAffinityServiceShutdownTest-NodeA-53318) [org.infinispan.statetransfer.StateTransferLockImpl] Unblocking write commands for cache view 2
2013-01-31 13:15:55,245 DEBUG (CacheViewInstaller-1,KeyAffinityServiceShutdownTest-NodeA-53318) [org.infinispan.cacheviews.CacheViewsManagerImpl] Successfully installed view CacheView{viewId=2, members=[KeyAffinityServiceShutdownTest-NodeA-53318, KeyAffinityServiceShutdownTest-NodeB-14426]} for cache dist
2013-01-31 13:15:55,258 DEBUG (Incoming-1,ISPN,FlagsEnabledTest-NodeB-47084) [org.jgroups.protocols.pbcast.STABLE] resuming message garbage collection
2013-01-31 13:15:55,258 DEBUG (Incoming-1,ISPN,FlagsEnabledTest-NodeB-47084) [org.jgroups.protocols.pbcast.NAKACK2] removed FlagsEnabledTest-NodeA-50771 from xmit_table (not member anymore)
2013-01-31 13:15:55,258 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.CacheImpl] Started cache atomic on FineGrainedAtomicMapAPITest-NodeA-36196
2013-01-31 13:15:55,261 DEBUG (Incoming-1,ISPN,FlagsEnabledTest-NodeB-47084) [org.jgroups.protocols.pbcast.STABLE] [ergonomics] setting max_bytes to 400KB (1 members)
2013-01-31 13:15:55,261 DEBUG (Incoming-1,ISPN,FlagsEnabledTest-NodeB-47084) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] New view accepted: [FlagsEnabledTest-NodeB-47084|2] [FlagsEnabledTest-NodeB-47084]
2013-01-31 13:15:55,261 INFO  (Incoming-1,ISPN,FlagsEnabledTest-NodeB-47084) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000094: Received new cluster view: [FlagsEnabledTest-NodeB-47084|2] [FlagsEnabledTest-NodeB-47084]
2013-01-31 13:15:55,262 DEBUG (testng-FlagsEnabledTest) [org.jgroups.blocks.TCPConnectionMap] connection table is not running, discarding message to 127.0.0.1:8351
2013-01-31 13:15:55,262 DEBUG (testng-FlagsEnabledTest) [org.infinispan.test.fwk.TEST_PING] Stop discovery for FlagsEnabledTest-NodeA-50771
2013-01-31 13:15:55,262 DEBUG (testng-FlagsEnabledTest) [org.jgroups.protocols.TCP] closing sockets and stopping threads
2013-01-31 13:15:55,265 INFO  (testng-FlagsEnabledTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000082: Stopping the RpcDispatcher
2013-01-31 13:15:55,265 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:55,266 DEBUG (testng-FlagsEnabledTest) [org.infinispan.manager.DefaultCacheManager] Stopping cache manager ISPN on FlagsEnabledTest-NodeB-47084
2013-01-31 13:15:55,266 DEBUG (testng-FlagsEnabledTest) [org.infinispan.CacheImpl] Stopping cache replication on FlagsEnabledTest-NodeB-47084
2013-01-31 13:15:55,271 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:55,271 DEBUG (Incoming-2,ISPN,MixedModeTest-NodeB-26468) [org.jgroups.protocols.pbcast.GMS] MixedModeTest-NodeB-26468: installing view [MixedModeTest-NodeB-26468|2] [MixedModeTest-NodeB-26468]
2013-01-31 13:15:55,272 DEBUG (Incoming-2,ISPN,MixedModeTest-NodeB-26468) [org.jgroups.protocols.pbcast.STABLE] resuming message garbage collection
2013-01-31 13:15:55,272 DEBUG (Incoming-2,ISPN,MixedModeTest-NodeB-26468) [org.jgroups.protocols.pbcast.NAKACK2] removed MixedModeTest-NodeA-25015 from xmit_table (not member anymore)
2013-01-31 13:15:55,274 DEBUG (Incoming-2,ISPN,MixedModeTest-NodeB-26468) [org.jgroups.protocols.pbcast.STABLE] [ergonomics] setting max_bytes to 400KB (1 members)
2013-01-31 13:15:55,274 DEBUG (Incoming-2,ISPN,MixedModeTest-NodeB-26468) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] New view accepted: [MixedModeTest-NodeB-26468|2] [MixedModeTest-NodeB-26468]
2013-01-31 13:15:55,274 INFO  (Incoming-2,ISPN,MixedModeTest-NodeB-26468) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000094: Received new cluster view: [MixedModeTest-NodeB-26468|2] [MixedModeTest-NodeB-26468]
2013-01-31 13:15:55,280 DEBUG (testng-MixedModeTest) [org.jgroups.blocks.TCPConnectionMap] connection table is not running, discarding message to 127.0.0.1:7951
2013-01-31 13:15:55,280 DEBUG (testng-MixedModeTest) [org.infinispan.test.fwk.TEST_PING] Stop discovery for MixedModeTest-NodeA-25015
2013-01-31 13:15:55,280 DEBUG (testng-MixedModeTest) [org.jgroups.protocols.TCP] closing sockets and stopping threads
2013-01-31 13:15:55,280 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:55,281 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.util.concurrent.locks.LockManagerImpl] Failed to acquire lock k, owner is GlobalTransaction:<null>:344:local
2013-01-31 13:15:55,281 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.util.concurrent.locks.LockManagerImpl] This transaction (GlobalTransaction:<null>:345:local) already owned locks []
2013-01-31 13:15:55,281 ERROR (testng-ReadCommittedLockTest) [org.infinispan.interceptors.InvocationContextInterceptor] ISPN000136: Execution error
org.infinispan.util.concurrent.TimeoutException: Unable to acquire lock after [200 milliseconds] on key [k] for requestor [GlobalTransaction:<null>:345:local]! Lock held by [GlobalTransaction:<null>:344:local]
	at org.infinispan.util.concurrent.locks.LockManagerImpl.lock(LockManagerImpl.java:206)
	at org.infinispan.util.concurrent.locks.LockManagerImpl.acquireLock(LockManagerImpl.java:179)
	at org.infinispan.util.concurrent.locks.LockManagerImpl.acquireLock(LockManagerImpl.java:169)
	at org.infinispan.interceptors.locking.AbstractTxLockingInterceptor.lockKeyAndCheckOwnership(AbstractTxLockingInterceptor.java:217)
	at org.infinispan.interceptors.locking.AbstractTxLockingInterceptor.internalLockAndRegisterBackupLock(AbstractTxLockingInterceptor.java:144)
	at org.infinispan.interceptors.locking.AbstractTxLockingInterceptor.lockAndRegisterBackupLock(AbstractTxLockingInterceptor.java:135)
	at org.infinispan.interceptors.locking.OptimisticLockingInterceptor$LockAcquisitionVisitor.visitPutKeyValueCommand(OptimisticLockingInterceptor.java:251)
	at org.infinispan.commands.write.PutKeyValueCommand.acceptVisitor(PutKeyValueCommand.java:77)
	at org.infinispan.interceptors.locking.OptimisticLockingInterceptor.acquireLocksVisitingCommands(OptimisticLockingInterceptor.java:326)
	at org.infinispan.interceptors.locking.OptimisticLockingInterceptor.visitPrepareCommand(OptimisticLockingInterceptor.java:119)
	at org.infinispan.commands.tx.PrepareCommand.acceptVisitor(PrepareCommand.java:132)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleTxBoundaryCommand(ReconfigurableProtocolAwareWrapperInterceptor.java:89)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.visitPrepareCommand(ReconfigurableProtocolAwareWrapperInterceptor.java:31)
	at org.infinispan.commands.tx.PrepareCommand.acceptVisitor(PrepareCommand.java:132)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.NotificationInterceptor.visitPrepareCommand(NotificationInterceptor.java:58)
	at org.infinispan.commands.tx.PrepareCommand.acceptVisitor(PrepareCommand.java:132)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleTxBoundaryCommand(ReconfigurableProtocolAwareWrapperInterceptor.java:89)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.visitPrepareCommand(ReconfigurableProtocolAwareWrapperInterceptor.java:31)
	at org.infinispan.commands.tx.PrepareCommand.acceptVisitor(PrepareCommand.java:132)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.TxInterceptor.visitPrepareCommand(TxInterceptor.java:139)
	at org.infinispan.commands.tx.PrepareCommand.acceptVisitor(PrepareCommand.java:132)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleTxBoundaryCommand(ReconfigurableProtocolAwareWrapperInterceptor.java:89)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.visitPrepareCommand(ReconfigurableProtocolAwareWrapperInterceptor.java:31)
	at org.infinispan.commands.tx.PrepareCommand.acceptVisitor(PrepareCommand.java:132)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleTxBoundaryCommand(ReconfigurableProtocolAwareWrapperInterceptor.java:89)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.visitPrepareCommand(ReconfigurableProtocolAwareWrapperInterceptor.java:31)
	at org.infinispan.commands.tx.PrepareCommand.acceptVisitor(PrepareCommand.java:132)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitPrepareCommand(AbstractVisitor.java:126)
	at org.infinispan.commands.tx.PrepareCommand.acceptVisitor(PrepareCommand.java:132)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.transaction.TransactionCoordinator.prepare(TransactionCoordinator.java:176)
	at org.infinispan.transaction.TransactionCoordinator.prepare(TransactionCoordinator.java:145)
	at org.infinispan.transaction.xa.TransactionXaAdapter.prepare(TransactionXaAdapter.java:106)
	at org.infinispan.transaction.tm.DummyTransaction.runPrepare(DummyTransaction.java:254)
	at org.infinispan.api.mvcc.LockTestBase.testConcurrentWriters(LockTestBase.java:333)
	at org.infinispan.api.mvcc.read_committed.ReadCommittedLockTest.testConcurrentWriters(ReadCommittedLockTest.java:96)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:55,288 ERROR (testng-ReadCommittedLockTest) [org.infinispan.transaction.TransactionCoordinator] Error while processing prepare: Unable to acquire lock after [200 milliseconds] on key [k] for requestor [GlobalTransaction:<null>:345:local]! Lock held by [GlobalTransaction:<null>:344:local]
2013-01-31 13:15:55,289 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.transaction.TransactionCoordinator] Error while processing prepare
org.infinispan.util.concurrent.TimeoutException: Unable to acquire lock after [200 milliseconds] on key [k] for requestor [GlobalTransaction:<null>:345:local]! Lock held by [GlobalTransaction:<null>:344:local]
	at org.infinispan.util.concurrent.locks.LockManagerImpl.lock(LockManagerImpl.java:206)
	at org.infinispan.util.concurrent.locks.LockManagerImpl.acquireLock(LockManagerImpl.java:179)
	at org.infinispan.util.concurrent.locks.LockManagerImpl.acquireLock(LockManagerImpl.java:169)
	at org.infinispan.interceptors.locking.AbstractTxLockingInterceptor.lockKeyAndCheckOwnership(AbstractTxLockingInterceptor.java:217)
	at org.infinispan.interceptors.locking.AbstractTxLockingInterceptor.internalLockAndRegisterBackupLock(AbstractTxLockingInterceptor.java:144)
	at org.infinispan.interceptors.locking.AbstractTxLockingInterceptor.lockAndRegisterBackupLock(AbstractTxLockingInterceptor.java:135)
	at org.infinispan.interceptors.locking.OptimisticLockingInterceptor$LockAcquisitionVisitor.visitPutKeyValueCommand(OptimisticLockingInterceptor.java:251)
	at org.infinispan.commands.write.PutKeyValueCommand.acceptVisitor(PutKeyValueCommand.java:77)
	at org.infinispan.interceptors.locking.OptimisticLockingInterceptor.acquireLocksVisitingCommands(OptimisticLockingInterceptor.java:326)
	at org.infinispan.interceptors.locking.OptimisticLockingInterceptor.visitPrepareCommand(OptimisticLockingInterceptor.java:119)
	at org.infinispan.commands.tx.PrepareCommand.acceptVisitor(PrepareCommand.java:132)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleTxBoundaryCommand(ReconfigurableProtocolAwareWrapperInterceptor.java:89)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.visitPrepareCommand(ReconfigurableProtocolAwareWrapperInterceptor.java:31)
	at org.infinispan.commands.tx.PrepareCommand.acceptVisitor(PrepareCommand.java:132)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.NotificationInterceptor.visitPrepareCommand(NotificationInterceptor.java:58)
	at org.infinispan.commands.tx.PrepareCommand.acceptVisitor(PrepareCommand.java:132)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleTxBoundaryCommand(ReconfigurableProtocolAwareWrapperInterceptor.java:89)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.visitPrepareCommand(ReconfigurableProtocolAwareWrapperInterceptor.java:31)
	at org.infinispan.commands.tx.PrepareCommand.acceptVisitor(PrepareCommand.java:132)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.TxInterceptor.visitPrepareCommand(TxInterceptor.java:139)
	at org.infinispan.commands.tx.PrepareCommand.acceptVisitor(PrepareCommand.java:132)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleTxBoundaryCommand(ReconfigurableProtocolAwareWrapperInterceptor.java:89)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.visitPrepareCommand(ReconfigurableProtocolAwareWrapperInterceptor.java:31)
	at org.infinispan.commands.tx.PrepareCommand.acceptVisitor(PrepareCommand.java:132)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleTxBoundaryCommand(ReconfigurableProtocolAwareWrapperInterceptor.java:89)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.visitPrepareCommand(ReconfigurableProtocolAwareWrapperInterceptor.java:31)
	at org.infinispan.commands.tx.PrepareCommand.acceptVisitor(PrepareCommand.java:132)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitPrepareCommand(AbstractVisitor.java:126)
	at org.infinispan.commands.tx.PrepareCommand.acceptVisitor(PrepareCommand.java:132)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.transaction.TransactionCoordinator.prepare(TransactionCoordinator.java:176)
	at org.infinispan.transaction.TransactionCoordinator.prepare(TransactionCoordinator.java:145)
	at org.infinispan.transaction.xa.TransactionXaAdapter.prepare(TransactionXaAdapter.java:106)
	at org.infinispan.transaction.tm.DummyTransaction.runPrepare(DummyTransaction.java:254)
	at org.infinispan.api.mvcc.LockTestBase.testConcurrentWriters(LockTestBase.java:333)
	at org.infinispan.api.mvcc.read_committed.ReadCommittedLockTest.testConcurrentWriters(ReadCommittedLockTest.java:96)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:55,290 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction null:345 [DummyTransaction{xid=DummyXid{id=56}, status=1}] wants to rollback
2013-01-31 13:15:55,292 ERROR (testng-ReadCommittedLockTest) [org.infinispan.transaction.tm.DummyTransaction] ISPN000098: Exception while rollback
javax.transaction.xa.XAException
	at org.infinispan.transaction.xa.TransactionXaAdapter.getLocalTransactionAndValidateImpl(TransactionXaAdapter.java:248)
	at org.infinispan.transaction.xa.TransactionXaAdapter.rollback(TransactionXaAdapter.java:134)
	at org.infinispan.transaction.tm.DummyTransaction.runRollback(DummyTransaction.java:302)
	at org.infinispan.transaction.tm.DummyTransaction.rollback(DummyTransaction.java:109)
	at org.infinispan.transaction.tm.DummyBaseTransactionManager.rollback(DummyBaseTransactionManager.java:125)
	at org.infinispan.api.mvcc.LockTestBase.testConcurrentWriters(LockTestBase.java:335)
	at org.infinispan.api.mvcc.read_committed.ReadCommittedLockTest.testConcurrentWriters(ReadCommittedLockTest.java:96)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:55,293 ERROR (testng-ReadCommittedLockTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Method testConcurrentWriters(org.infinispan.api.mvcc.read_committed.ReadCommittedLockTest) threw an exception
java.lang.AssertionError: Stale locks exist! NumLocksHeld is 1 and lock info is org.infinispan.util.concurrent.locks.containers.OwnableReentrantPerEntryLockContainer@37b6ada2
	at org.infinispan.api.mvcc.LockAssert.assertNoLocks(LockAssert.java:48)
	at org.infinispan.api.mvcc.LockTestBase.assertNoLocks(LockTestBase.java:102)
	at org.infinispan.api.mvcc.LockTestBase.testConcurrentWriters(LockTestBase.java:339)
	at org.infinispan.api.mvcc.read_committed.ReadCommittedLockTest.testConcurrentWriters(ReadCommittedLockTest.java:96)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:55,294 ERROR (testng-ReadCommittedLockTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test failed testConcurrentWriters(org.infinispan.api.mvcc.read_committed.ReadCommittedLockTest)
java.lang.AssertionError: Stale locks exist! NumLocksHeld is 1 and lock info is org.infinispan.util.concurrent.locks.containers.OwnableReentrantPerEntryLockContainer@37b6ada2
	at org.infinispan.api.mvcc.LockAssert.assertNoLocks(LockAssert.java:48)
	at org.infinispan.api.mvcc.LockTestBase.assertNoLocks(LockTestBase.java:102)
	at org.infinispan.api.mvcc.LockTestBase.testConcurrentWriters(LockTestBase.java:339)
	at org.infinispan.api.mvcc.read_committed.ReadCommittedLockTest.testConcurrentWriters(ReadCommittedLockTest.java:96)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:55,295 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.api.mvcc.LockTestBase] **** - STARTING TEARDOWN - ****
2013-01-31 13:15:55,295 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on null
2013-01-31 13:15:55,295 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 1 seconds.
2013-01-31 13:15:55,295 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:55,295 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.manager.DefaultCacheManager] Stopping cache manager ISPN on null
2013-01-31 13:15:55,295 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on null
2013-01-31 13:15:55,294 INFO  (testng-MixedModeTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000082: Stopping the RpcDispatcher
2013-01-31 13:15:55,296 DEBUG (testng-MixedModeTest) [org.infinispan.manager.DefaultCacheManager] Stopping cache manager ISPN on MixedModeTest-NodeB-26468
2013-01-31 13:15:55,296 DEBUG (testng-MixedModeTest) [org.infinispan.CacheImpl] Stopping cache replSync on MixedModeTest-NodeB-26468
2013-01-31 13:15:55,296 DEBUG (testng-MixedModeTest) [org.infinispan.CacheImpl] Stopping cache local on MixedModeTest-NodeB-26468
2013-01-31 13:15:55,296 DEBUG (testng-MixedModeTest) [org.infinispan.CacheImpl] Stopping cache invalAsync on MixedModeTest-NodeB-26468
2013-01-31 13:15:55,296 DEBUG (testng-MixedModeTest) [org.infinispan.CacheImpl] Stopping cache invalSync on MixedModeTest-NodeB-26468
2013-01-31 13:15:55,296 DEBUG (testng-MixedModeTest) [org.infinispan.CacheImpl] Stopping cache replAsync on MixedModeTest-NodeB-26468
2013-01-31 13:15:55,308 INFO  (testng-FineGrainedAtomicMapAPITest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000078: Starting JGroups Channel
2013-01-31 13:15:55,311 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:55,312 DEBUG (testng-ClusteredAPITest) [org.jgroups.protocols.FRAG2] received CONFIG event: {bind_addr=/127.0.0.1}
2013-01-31 13:15:55,346 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:55,346 DEBUG (testng-ClusteredAPITest) [org.jgroups.protocols.pbcast.GMS] address=ClusteredAPITest-NodeA-6271, cluster=ISPN, physical address=127.0.0.1:8550
2013-01-31 13:15:55,346 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:55,351 DEBUG (testng-ClusteredAPITest) [org.jgroups.protocols.pbcast.NAKACK2] 
[ClusteredAPITest-NodeA-6271 setDigest()]
existing digest:  []
new digest:       ClusteredAPITest-NodeA-6271: [0 (0)]
resulting digest: ClusteredAPITest-NodeA-6271: [0 (0)]
2013-01-31 13:15:55,351 DEBUG (testng-ClusteredAPITest) [org.jgroups.protocols.pbcast.GMS] ClusteredAPITest-NodeA-6271: installing view [ClusteredAPITest-NodeA-6271|0] [ClusteredAPITest-NodeA-6271]
2013-01-31 13:15:55,351 DEBUG (testng-ClusteredAPITest) [org.jgroups.protocols.pbcast.STABLE] resuming message garbage collection
2013-01-31 13:15:55,351 DEBUG (testng-ClusteredAPITest) [org.jgroups.protocols.pbcast.STABLE] [ergonomics] setting max_bytes to 400KB (1 members)
2013-01-31 13:15:55,351 DEBUG (testng-ClusteredAPITest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] New view accepted: [ClusteredAPITest-NodeA-6271|0] [ClusteredAPITest-NodeA-6271]
2013-01-31 13:15:55,351 INFO  (testng-ClusteredAPITest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000094: Received new cluster view: [ClusteredAPITest-NodeA-6271|0] [ClusteredAPITest-NodeA-6271]
2013-01-31 13:15:55,352 DEBUG (testng-ClusteredAPITest) [org.jgroups.protocols.pbcast.STABLE] resuming message garbage collection
2013-01-31 13:15:55,352 DEBUG (testng-ClusteredAPITest) [org.jgroups.protocols.pbcast.GMS] created group (first member). My view is [ClusteredAPITest-NodeA-6271|0], impl is org.jgroups.protocols.pbcast.CoordGmsImpl
2013-01-31 13:15:55,352 INFO  (testng-ClusteredAPITest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000079: Cache local address is ClusteredAPITest-NodeA-6271, physical addresses are [127.0.0.1:8550]
2013-01-31 13:15:55,352 DEBUG (testng-ClusteredAPITest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] Waiting on view being accepted
2013-01-31 13:15:55,352 WARN  (testng-WithClassLoaderTest) [org.jgroups.stack.Configurator] [JGRP00013] TP.discard_incompatible_packets has been deprecated: incompatible packets are discarded anyway
2013-01-31 13:15:55,354 INFO  (testng-ClusteredAPITest) [org.infinispan.transaction.lookup.JBossStandaloneJTAManagerLookup] ISPN000107: Retrieving transaction manager Transaction: unknown
2013-01-31 13:15:55,355 DEBUG (testng-ClusteredAPITest) [org.infinispan.configuration.cache.TransactionConfigurationBuilder] Switching to Synchronization based enlistment.
2013-01-31 13:15:55,356 INFO  (testng-ReadCommittedLockTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:55,362 DEBUG (CacheViewTrigger,FlagsEnabledTest-NodeB-47084) [org.infinispan.cacheviews.CacheViewsManagerImpl] Node FlagsEnabledTest-NodeB-47084 is the new coordinator, recovering cache views
2013-01-31 13:15:55,364 DEBUG (CacheViewTrigger,FlagsEnabledTest-NodeB-47084) [org.infinispan.cacheviews.CacheViewsManagerImpl] replication: Rolling back to cache view 2, new view id is 4
2013-01-31 13:15:55,364 DEBUG (CacheViewTrigger,FlagsEnabledTest-NodeB-47084) [org.infinispan.cacheviews.CacheViewsManagerImpl] Recovered partitions after merge for cache replication: [CacheView{viewId=2, members=[FlagsEnabledTest-NodeB-47084]}]
2013-01-31 13:15:55,364 INFO  (testng-FlagsEnabledTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000080: Disconnecting and closing JGroups Channel
2013-01-31 13:15:55,376 DEBUG (CacheViewTrigger,MixedModeTest-NodeB-26468) [org.infinispan.cacheviews.CacheViewsManagerImpl] Node MixedModeTest-NodeB-26468 is the new coordinator, recovering cache views
2013-01-31 13:15:55,377 DEBUG (CacheViewTrigger,MixedModeTest-NodeB-26468) [org.infinispan.cacheviews.CacheViewsManagerImpl] invalAsync: Rolling back to cache view 2, new view id is 4
2013-01-31 13:15:55,377 DEBUG (CacheViewTrigger,MixedModeTest-NodeB-26468) [org.infinispan.cacheviews.CacheViewsManagerImpl] Recovered partitions after merge for cache invalAsync: [CacheView{viewId=2, members=[MixedModeTest-NodeB-26468]}]
2013-01-31 13:15:55,377 DEBUG (CacheViewTrigger,MixedModeTest-NodeB-26468) [org.infinispan.cacheviews.CacheViewsManagerImpl] invalSync: We don't have a pending view, ignoring rollback
2013-01-31 13:15:55,377 DEBUG (CacheViewTrigger,MixedModeTest-NodeB-26468) [org.infinispan.cacheviews.CacheViewsManagerImpl] Recovered partitions after merge for cache invalSync: [CacheView{viewId=3, members=[MixedModeTest-NodeB-26468]}]
2013-01-31 13:15:55,377 DEBUG (CacheViewTrigger,MixedModeTest-NodeB-26468) [org.infinispan.cacheviews.CacheViewsManagerImpl] replSync: Rolling back to cache view 2, new view id is 4
2013-01-31 13:15:55,377 DEBUG (CacheViewTrigger,MixedModeTest-NodeB-26468) [org.infinispan.cacheviews.CacheViewsManagerImpl] Recovered partitions after merge for cache replSync: [CacheView{viewId=2, members=[MixedModeTest-NodeB-26468]}]
2013-01-31 13:15:55,377 DEBUG (CacheViewTrigger,MixedModeTest-NodeB-26468) [org.infinispan.cacheviews.CacheViewsManagerImpl] replAsync: We don't have a pending view, ignoring rollback
2013-01-31 13:15:55,377 DEBUG (CacheViewTrigger,MixedModeTest-NodeB-26468) [org.infinispan.cacheviews.CacheViewsManagerImpl] Recovered partitions after merge for cache replAsync: [CacheView{viewId=3, members=[MixedModeTest-NodeB-26468]}]
2013-01-31 13:15:55,377 DEBUG (testng-FlagsEnabledTest) [org.infinispan.test.fwk.TEST_PING] Stop discovery for FlagsEnabledTest-NodeB-47084
2013-01-31 13:15:55,377 DEBUG (testng-FlagsEnabledTest) [org.jgroups.protocols.TCP] closing sockets and stopping threads
2013-01-31 13:15:55,378 INFO  (testng-MixedModeTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000080: Disconnecting and closing JGroups Channel
2013-01-31 13:15:55,379 INFO  (testng-FlagsEnabledTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000082: Stopping the RpcDispatcher
2013-01-31 13:15:55,381 DEBUG (testng-MixedModeTest) [org.infinispan.test.fwk.TEST_PING] Stop discovery for MixedModeTest-NodeB-26468
2013-01-31 13:15:55,381 DEBUG (testng-MixedModeTest) [org.jgroups.protocols.TCP] closing sockets and stopping threads
2013-01-31 13:15:55,381 DEBUG (testng-FlagsEnabledTest) [org.infinispan.api.flags.FlagsEnabledTest] Creating cache managers
2013-01-31 13:15:55,383 INFO  (testng-MixedModeTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000082: Stopping the RpcDispatcher
2013-01-31 13:15:55,385 INFO  (testng-CustomInterceptorConfigTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testCustomInterceptors(org.infinispan.config.CustomInterceptorConfigTest)
2013-01-31 13:15:55,387 DEBUG (testng-FlagsEnabledTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:55,401 DEBUG (testng-FlagsEnabledTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:55,402 DEBUG (testng-FlagsEnabledTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:55,402 WARN  (testng-FlagsEnabledTest) [org.infinispan.configuration.cache.LoaderConfigurationBuilder] ISPN000149: Fetch persistent state and purge on startup are both disabled, cache may contain stale entries on startup
2013-01-31 13:15:55,402 WARN  (testng-FlagsEnabledTest) [org.infinispan.configuration.cache.LoaderConfigurationBuilder] ISPN000149: Fetch persistent state and purge on startup are both disabled, cache may contain stale entries on startup
2013-01-31 13:15:55,402 DEBUG (testng-FlagsEnabledTest) [org.infinispan.configuration.cache.L1ConfigurationBuilder] L1 is enabled and L1OnRehash was not defined, enabling it
2013-01-31 13:15:55,410 INFO  (testng-FlagsEnabledTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000078: Starting JGroups Channel
2013-01-31 13:15:55,428 DEBUG (testng-ClusteredAPITest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:55,428 DEBUG (testng-ClusteredAPITest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:55,440 DEBUG (testng-ClusteredAPITest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:55,441 INFO  (testng-ClusteredAPITest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:55,443 DEBUG (testng-ClusteredAPITest) [org.infinispan.transaction.TransactionTable] Min view id set to 0
2013-01-31 13:15:55,443 DEBUG (testng-ClusteredAPITest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 12
2013-01-31 13:15:55,443 DEBUG (testng-ClusteredAPITest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.BatchingInterceptor
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.StateTransferLockInterceptor@54467983, TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@5ed3b2ae, PB=org.infinispan.interceptors.StateTransferLockInterceptor@54467983}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@1c77ee25}
	>> org.infinispan.interceptors.TxInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@5b3cdbd}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@5f883637, PB=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@5f883637}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@679f85e0, TO=org.infinispan.interceptors.EntryWrappingInterceptor@679f85e0, PB=org.infinispan.interceptors.EntryWrappingInterceptor@679f85e0}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.ReplicationInterceptor@1a0e6a46, TO=org.infinispan.interceptors.totalorder.TotalOrderReplicationInterceptor@28632707, PB=org.infinispan.interceptors.ReplicationInterceptor@1a0e6a46}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:55,456 DEBUG (testng-ClusteredAPITest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Setting configuration tunned parameters
2013-01-31 13:15:55,456 DEBUG (testng-ClusteredAPITest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Configuration State responses are {}
2013-01-31 13:15:55,456 DEBUG (testng-ClusteredAPITest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] No Configuration State found in cluster
2013-01-31 13:15:55,456 DEBUG (testng-ClusteredAPITest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] No State found. Using original configuration parameters
2013-01-31 13:15:55,456 DEBUG (testng-ClusteredAPITest) [org.infinispan.cacheviews.CacheViewsManagerImpl] atomic: Node ClusteredAPITest-NodeA-6271 is joining
2013-01-31 13:15:55,461 DEBUG (CacheViewInstaller-1,ClusteredAPITest-NodeA-6271) [org.infinispan.cacheviews.CacheViewsManagerImpl] Installing new view CacheView{viewId=1, members=[ClusteredAPITest-NodeA-6271]} for cache atomic
2013-01-31 13:15:55,461 DEBUG (CacheViewInstaller-1,ClusteredAPITest-NodeA-6271) [org.infinispan.configuration.cache.TransactionConfigurationBuilder] Switching to Synchronization based enlistment.
2013-01-31 13:15:55,480 DEBUG (transport-thread-67) [org.infinispan.configuration.cache.TransactionConfigurationBuilder] Switching to Synchronization based enlistment.
2013-01-31 13:15:55,481 DEBUG (transport-thread-67) [org.infinispan.distribution.ch.DefaultConsistentHash] Using 1 virtualNodes to initialize consistent hash wheel 
2013-01-31 13:15:55,484 DEBUG (transport-thread-67) [org.infinispan.statetransfer.ReplicatedStateTransferTask] Commencing state transfer 1 on node: ClusteredAPITest-NodeA-6271. Before start, data container had 0 entries
2013-01-31 13:15:55,484 DEBUG (transport-thread-67) [org.infinispan.statetransfer.StateTransferLockImpl] Blocking new write commands for cache view 1
2013-01-31 13:15:55,484 DEBUG (CacheViewInstaller-1,ClusteredAPITest-NodeA-6271) [org.infinispan.cacheviews.CacheViewsManagerImpl] atomic: Committing cache view CacheView{viewId=1, members=[ClusteredAPITest-NodeA-6271]}
2013-01-31 13:15:55,484 DEBUG (CacheViewInstaller-1,ClusteredAPITest-NodeA-6271) [org.infinispan.statetransfer.BaseStateTransferTask] Node ClusteredAPITest-NodeA-6271 completed state transfer for view 1 in 0 milliseconds!
2013-01-31 13:15:55,484 DEBUG (CacheViewInstaller-1,ClusteredAPITest-NodeA-6271) [org.infinispan.statetransfer.StateTransferLockImpl] Unblocking write commands for cache view 1
2013-01-31 13:15:55,484 DEBUG (CacheViewInstaller-1,ClusteredAPITest-NodeA-6271) [org.infinispan.cacheviews.CacheViewsManagerImpl] Successfully installed view CacheView{viewId=1, members=[ClusteredAPITest-NodeA-6271]} for cache atomic
2013-01-31 13:15:55,484 DEBUG (testng-ClusteredAPITest) [org.infinispan.CacheImpl] Started cache atomic on ClusteredAPITest-NodeA-6271
2013-01-31 13:15:55,492 DEBUG (testng-ClusteredAPITest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:55,496 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:55,496 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:55,497 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:55,497 DEBUG (testng-ClusteredAPITest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:55,498 DEBUG (testng-ClusteredAPITest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:55,498 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 11
2013-01-31 13:15:55,498 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@6bc79208}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@7b44827f}
	>> org.infinispan.interceptors.TxInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@4ed39f12}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@27707f2c, PB=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@27707f2c}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@4aad35ee, TO=org.infinispan.interceptors.EntryWrappingInterceptor@4aad35ee, PB=org.infinispan.interceptors.EntryWrappingInterceptor@4aad35ee}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:55,499 INFO  (testng-ClusteredAPITest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000078: Starting JGroups Channel
2013-01-31 13:15:55,500 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.CacheImpl] Started cache ___defaultcache on null
2013-01-31 13:15:55,500 INFO  (testng-ReadCommittedLockTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testVisibilityOfCommittedDataPut(org.infinispan.api.mvcc.read_committed.ReadCommittedLockTest)
2013-01-31 13:15:55,500 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction DummyTransaction{xid=DummyXid{id=57}, status=0} is starting. check if switch is in progress...
2013-01-31 13:15:55,500 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-ReadCommittedLockTest] will wait until no switch is in progress
2013-01-31 13:15:55,500 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-ReadCommittedLockTest] no switch in progress. Moving on...
2013-01-31 13:15:55,500 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction DummyTransaction{xid=DummyXid{id=57}, status=0} will use 2PC while executing
2013-01-31 13:15:55,500 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction null:346 [DummyTransaction{xid=DummyXid{id=57}, status=7}] wants to commit
2013-01-31 13:15:55,500 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction null:346 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:55,501 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction DummyTransaction{xid=DummyXid{id=58}, status=0} is starting. check if switch is in progress...
2013-01-31 13:15:55,501 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-ReadCommittedLockTest] will wait until no switch is in progress
2013-01-31 13:15:55,501 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-ReadCommittedLockTest] no switch in progress. Moving on...
2013-01-31 13:15:55,501 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction DummyTransaction{xid=DummyXid{id=58}, status=0} will use 2PC while executing
2013-01-31 13:15:55,501 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction DummyTransaction{xid=DummyXid{id=59}, status=0} is starting. check if switch is in progress...
2013-01-31 13:15:55,501 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-ReadCommittedLockTest] will wait until no switch is in progress
2013-01-31 13:15:55,501 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-ReadCommittedLockTest] no switch in progress. Moving on...
2013-01-31 13:15:55,501 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction DummyTransaction{xid=DummyXid{id=59}, status=0} will use 2PC while executing
2013-01-31 13:15:55,501 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction null:348 [DummyTransaction{xid=DummyXid{id=59}, status=7}] wants to commit
2013-01-31 13:15:55,501 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction null:348 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:55,501 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction null:347 [DummyTransaction{xid=DummyXid{id=58}, status=7}] wants to commit
2013-01-31 13:15:55,501 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction null:347 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:55,502 INFO  (testng-ReadCommittedLockTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testVisibilityOfCommittedDataPut(org.infinispan.api.mvcc.read_committed.ReadCommittedLockTest).
2013-01-31 13:15:55,502 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.api.mvcc.LockTestBase] **** - STARTING TEARDOWN - ****
2013-01-31 13:15:55,502 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on null
2013-01-31 13:15:55,502 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 1 seconds.
2013-01-31 13:15:55,502 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:55,502 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.manager.DefaultCacheManager] Stopping cache manager ISPN on null
2013-01-31 13:15:55,502 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on null
2013-01-31 13:15:55,503 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:55,508 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:55,508 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:55,512 INFO  (testng-ReadCommittedLockTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:55,531 DEBUG (testng-CustomInterceptorConfigTest) [org.infinispan.configuration.cache.L1ConfigurationBuilder] L1 is enabled and L1OnRehash was not defined, enabling it
2013-01-31 13:15:55,532 DEBUG (testng-CustomInterceptorConfigTest) [org.infinispan.configuration.cache.L1ConfigurationBuilder] L1 is enabled and L1OnRehash was not defined, enabling it
2013-01-31 13:15:55,532 DEBUG (testng-CustomInterceptorConfigTest) [org.infinispan.configuration.cache.L1ConfigurationBuilder] L1 is enabled and L1OnRehash was not defined, enabling it
2013-01-31 13:15:55,533 DEBUG (testng-CustomInterceptorConfigTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:55,535 DEBUG (testng-WithClassLoaderTest) [org.jgroups.stack.Configurator] set property TCP.diagnostics_addr to default value /224.0.75.75
2013-01-31 13:15:55,539 DEBUG (testng-CustomInterceptorConfigTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:55,539 DEBUG (testng-CustomInterceptorConfigTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:55,544 DEBUG (testng-CustomInterceptorConfigTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:55,544 DEBUG (testng-CustomInterceptorConfigTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:55,546 DEBUG (testng-CustomInterceptorConfigTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:55,547 INFO  (testng-CustomInterceptorConfigTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:55,548 DEBUG (testng-CustomInterceptorConfigTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 11
2013-01-31 13:15:55,548 DEBUG (testng-CustomInterceptorConfigTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.config.CustomInterceptorConfigTest$DummyInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@164b2375}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@1f04e1c2}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@79819776}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@2aff024c, PB=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@2aff024c}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@4befe1a1, TO=org.infinispan.interceptors.EntryWrappingInterceptor@4befe1a1, PB=org.infinispan.interceptors.EntryWrappingInterceptor@4befe1a1}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:55,549 DEBUG (testng-CustomInterceptorConfigTest) [org.infinispan.CacheImpl] Started cache ___defaultcache on null
2013-01-31 13:15:55,551 DEBUG (testng-CustomInterceptorConfigTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:55,551 DEBUG (testng-CustomInterceptorConfigTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:55,552 DEBUG (testng-CustomInterceptorConfigTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:55,552 INFO  (testng-CustomInterceptorConfigTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:55,553 DEBUG (testng-CustomInterceptorConfigTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 13
2013-01-31 13:15:55,553 DEBUG (testng-CustomInterceptorConfigTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.config.CustomInterceptorConfigTest$CustomInterceptor1
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.config.CustomInterceptorConfigTest$DummyInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@6d664e31}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@5797ab13}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@26609952}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@ff1ea2d, PB=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@ff1ea2d}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@53453888, TO=org.infinispan.interceptors.EntryWrappingInterceptor@53453888, PB=org.infinispan.interceptors.EntryWrappingInterceptor@53453888}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.CallInterceptor
	>> org.infinispan.config.CustomInterceptorConfigTest$CustomInterceptor2
2013-01-31 13:15:55,553 DEBUG (testng-CustomInterceptorConfigTest) [org.infinispan.CacheImpl] Started cache x on null
2013-01-31 13:15:55,553 DEBUG (testng-CustomInterceptorConfigTest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on null
2013-01-31 13:15:55,553 DEBUG (testng-CustomInterceptorConfigTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 30 seconds.
2013-01-31 13:15:55,553 DEBUG (testng-CustomInterceptorConfigTest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:55,553 DEBUG (testng-CustomInterceptorConfigTest) [org.infinispan.CacheImpl] Stopping cache x on null
2013-01-31 13:15:55,553 DEBUG (testng-CustomInterceptorConfigTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 30 seconds.
2013-01-31 13:15:55,553 DEBUG (testng-CustomInterceptorConfigTest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:55,562 DEBUG (testng-CustomInterceptorConfigTest) [org.infinispan.manager.DefaultCacheManager] Stopping cache manager ISPN on null
2013-01-31 13:15:55,562 DEBUG (testng-CustomInterceptorConfigTest) [org.infinispan.CacheImpl] Stopping cache x on null
2013-01-31 13:15:55,562 DEBUG (testng-CustomInterceptorConfigTest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on null
2013-01-31 13:15:55,563 INFO  (testng-CustomInterceptorConfigTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testCustomInterceptors(org.infinispan.config.CustomInterceptorConfigTest).
2013-01-31 13:15:55,563 INFO  (testng-CustomInterceptorConfigTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testCustomInterceptorsProgramatically(org.infinispan.config.CustomInterceptorConfigTest)
2013-01-31 13:15:55,557 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:55,564 DEBUG (testng-CustomInterceptorConfigTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:55,573 DEBUG (testng-CustomInterceptorConfigTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:55,573 DEBUG (testng-CustomInterceptorConfigTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:55,575 DEBUG (testng-WithClassLoaderTest) [org.jgroups.protocols.FRAG2] received CONFIG event: {bind_addr=/127.0.0.1}
2013-01-31 13:15:55,580 DEBUG (testng-WithClassLoaderTest) [org.jgroups.protocols.pbcast.GMS] address=WithClassLoaderTest-NodeA-49015, cluster=ISPN, physical address=127.0.0.1:8500
2013-01-31 13:15:55,581 DEBUG (testng-WithClassLoaderTest) [org.jgroups.protocols.pbcast.NAKACK2] 
[WithClassLoaderTest-NodeA-49015 setDigest()]
existing digest:  []
new digest:       WithClassLoaderTest-NodeA-49015: [0 (0)]
resulting digest: WithClassLoaderTest-NodeA-49015: [0 (0)]
2013-01-31 13:15:55,581 DEBUG (testng-WithClassLoaderTest) [org.jgroups.protocols.pbcast.GMS] WithClassLoaderTest-NodeA-49015: installing view [WithClassLoaderTest-NodeA-49015|0] [WithClassLoaderTest-NodeA-49015]
2013-01-31 13:15:55,581 DEBUG (testng-WithClassLoaderTest) [org.jgroups.protocols.pbcast.STABLE] resuming message garbage collection
2013-01-31 13:15:55,581 DEBUG (testng-WithClassLoaderTest) [org.jgroups.protocols.pbcast.STABLE] [ergonomics] setting max_bytes to 400KB (1 members)
2013-01-31 13:15:55,582 DEBUG (testng-WithClassLoaderTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] New view accepted: [WithClassLoaderTest-NodeA-49015|0] [WithClassLoaderTest-NodeA-49015]
2013-01-31 13:15:55,582 INFO  (testng-WithClassLoaderTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000094: Received new cluster view: [WithClassLoaderTest-NodeA-49015|0] [WithClassLoaderTest-NodeA-49015]
2013-01-31 13:15:55,582 DEBUG (testng-WithClassLoaderTest) [org.jgroups.protocols.pbcast.STABLE] resuming message garbage collection
2013-01-31 13:15:55,583 DEBUG (testng-WithClassLoaderTest) [org.jgroups.protocols.pbcast.GMS] created group (first member). My view is [WithClassLoaderTest-NodeA-49015|0], impl is org.jgroups.protocols.pbcast.CoordGmsImpl
2013-01-31 13:15:55,583 INFO  (testng-WithClassLoaderTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000079: Cache local address is WithClassLoaderTest-NodeA-49015, physical addresses are [127.0.0.1:8500]
2013-01-31 13:15:55,583 DEBUG (testng-WithClassLoaderTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] Waiting on view being accepted
2013-01-31 13:15:55,593 DEBUG (testng-WithClassLoaderTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:55,594 DEBUG (testng-WithClassLoaderTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:55,597 DEBUG (testng-WithClassLoaderTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:55,598 INFO  (testng-WithClassLoaderTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:55,599 DEBUG (testng-WithClassLoaderTest) [org.infinispan.transaction.TransactionTable] Min view id set to 0
2013-01-31 13:15:55,599 DEBUG (testng-WithClassLoaderTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 12
2013-01-31 13:15:55,599 DEBUG (testng-WithClassLoaderTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.IsMarshallableInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.StateTransferLockInterceptor@51ea6fe1, TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@765746ca, PB=org.infinispan.interceptors.StateTransferLockInterceptor@51ea6fe1}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@5be8b478}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@aa0616c}
	>> org.infinispan.interceptors.MarshalledValueInterceptor
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@275bfee7, PB=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@275bfee7}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@8bc03e1, TO=org.infinispan.interceptors.EntryWrappingInterceptor@8bc03e1, PB=org.infinispan.interceptors.EntryWrappingInterceptor@8bc03e1}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.ReplicationInterceptor@6fa2ad41, TO=org.infinispan.interceptors.totalorder.TotalOrderReplicationInterceptor@211cbfa9, PB=org.infinispan.interceptors.ReplicationInterceptor@6fa2ad41}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:55,600 WARN  (CacheStartThread,ISPN,cache1) [org.jgroups.stack.Configurator] [JGRP00013] TP.discard_incompatible_packets has been deprecated: incompatible packets are discarded anyway
2013-01-31 13:15:55,603 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:55,604 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:55,605 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 11
2013-01-31 13:15:55,605 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@5cf815d0}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@23603a5f}
	>> org.infinispan.interceptors.TxInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@298451e}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@5ae1b5e6, PB=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@5ae1b5e6}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@186d3da7, TO=org.infinispan.interceptors.EntryWrappingInterceptor@186d3da7, PB=org.infinispan.interceptors.EntryWrappingInterceptor@186d3da7}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:55,605 DEBUG (testng-WithClassLoaderTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Setting configuration tunned parameters
2013-01-31 13:15:55,605 DEBUG (testng-WithClassLoaderTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Configuration State responses are {}
2013-01-31 13:15:55,605 DEBUG (testng-WithClassLoaderTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] No Configuration State found in cluster
2013-01-31 13:15:55,605 DEBUG (testng-WithClassLoaderTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] No State found. Using original configuration parameters
2013-01-31 13:15:55,605 DEBUG (testng-WithClassLoaderTest) [org.infinispan.cacheviews.CacheViewsManagerImpl] ___defaultcache: Node WithClassLoaderTest-NodeA-49015 is joining
2013-01-31 13:15:55,609 DEBUG (testng-CustomInterceptorConfigTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:55,613 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.CacheImpl] Started cache ___defaultcache on null
2013-01-31 13:15:55,614 INFO  (testng-ReadCommittedLockTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testVisibilityOfCommittedDataReplace(org.infinispan.api.mvcc.read_committed.ReadCommittedLockTest)
2013-01-31 13:15:55,614 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction DummyTransaction{xid=DummyXid{id=60}, status=0} is starting. check if switch is in progress...
2013-01-31 13:15:55,614 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-ReadCommittedLockTest] will wait until no switch is in progress
2013-01-31 13:15:55,614 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-ReadCommittedLockTest] no switch in progress. Moving on...
2013-01-31 13:15:55,614 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction DummyTransaction{xid=DummyXid{id=60}, status=0} will use 2PC while executing
2013-01-31 13:15:55,614 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction null:349 [DummyTransaction{xid=DummyXid{id=60}, status=7}] wants to commit
2013-01-31 13:15:55,614 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction null:349 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:55,614 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction DummyTransaction{xid=DummyXid{id=61}, status=0} is starting. check if switch is in progress...
2013-01-31 13:15:55,614 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-ReadCommittedLockTest] will wait until no switch is in progress
2013-01-31 13:15:55,614 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-ReadCommittedLockTest] no switch in progress. Moving on...
2013-01-31 13:15:55,614 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction DummyTransaction{xid=DummyXid{id=61}, status=0} will use 2PC while executing
2013-01-31 13:15:55,615 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction DummyTransaction{xid=DummyXid{id=62}, status=0} is starting. check if switch is in progress...
2013-01-31 13:15:55,615 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-ReadCommittedLockTest] will wait until no switch is in progress
2013-01-31 13:15:55,615 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-ReadCommittedLockTest] no switch in progress. Moving on...
2013-01-31 13:15:55,615 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction DummyTransaction{xid=DummyXid{id=62}, status=0} will use 2PC while executing
2013-01-31 13:15:55,615 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction null:351 [DummyTransaction{xid=DummyXid{id=62}, status=7}] wants to commit
2013-01-31 13:15:55,615 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction null:351 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:55,615 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction null:350 [DummyTransaction{xid=DummyXid{id=61}, status=7}] wants to commit
2013-01-31 13:15:55,615 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ReadCommittedLockTest] local transaction null:350 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:55,615 INFO  (testng-ReadCommittedLockTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testVisibilityOfCommittedDataReplace(org.infinispan.api.mvcc.read_committed.ReadCommittedLockTest).
2013-01-31 13:15:55,616 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.api.mvcc.LockTestBase] **** - STARTING TEARDOWN - ****
2013-01-31 13:15:55,617 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on null
2013-01-31 13:15:55,617 DEBUG (CacheViewInstaller-1,WithClassLoaderTest-NodeA-49015) [org.infinispan.cacheviews.CacheViewsManagerImpl] Installing new view CacheView{viewId=1, members=[WithClassLoaderTest-NodeA-49015]} for cache ___defaultcache
2013-01-31 13:15:55,643 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 1 seconds.
2013-01-31 13:15:55,644 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:55,644 DEBUG (asyncTransportThread-69) [org.infinispan.distribution.ch.DefaultConsistentHash] Using 1 virtualNodes to initialize consistent hash wheel 
2013-01-31 13:15:55,644 DEBUG (asyncTransportThread-69) [org.infinispan.statetransfer.ReplicatedStateTransferTask] Commencing state transfer 1 on node: WithClassLoaderTest-NodeA-49015. Before start, data container had 0 entries
2013-01-31 13:15:55,644 DEBUG (asyncTransportThread-69) [org.infinispan.statetransfer.StateTransferLockImpl] Blocking new write commands for cache view 1
2013-01-31 13:15:55,644 DEBUG (CacheViewInstaller-1,WithClassLoaderTest-NodeA-49015) [org.infinispan.cacheviews.CacheViewsManagerImpl] ___defaultcache: Committing cache view CacheView{viewId=1, members=[WithClassLoaderTest-NodeA-49015]}
2013-01-31 13:15:55,644 DEBUG (CacheViewInstaller-1,WithClassLoaderTest-NodeA-49015) [org.infinispan.statetransfer.BaseStateTransferTask] Node WithClassLoaderTest-NodeA-49015 completed state transfer for view 1 in 0 milliseconds!
2013-01-31 13:15:55,644 DEBUG (CacheViewInstaller-1,WithClassLoaderTest-NodeA-49015) [org.infinispan.statetransfer.StateTransferLockImpl] Unblocking write commands for cache view 1
2013-01-31 13:15:55,644 DEBUG (CacheViewInstaller-1,WithClassLoaderTest-NodeA-49015) [org.infinispan.cacheviews.CacheViewsManagerImpl] Successfully installed view CacheView{viewId=1, members=[WithClassLoaderTest-NodeA-49015]} for cache ___defaultcache
2013-01-31 13:15:55,644 DEBUG (testng-WithClassLoaderTest) [org.infinispan.CacheImpl] Started cache ___defaultcache on WithClassLoaderTest-NodeA-49015
2013-01-31 13:15:55,644 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.manager.DefaultCacheManager] Stopping cache manager ISPN on null
2013-01-31 13:15:55,645 DEBUG (testng-ReadCommittedLockTest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on null
2013-01-31 13:15:55,645 INFO  (testng-WithClassLoaderTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000078: Starting JGroups Channel
2013-01-31 13:15:55,709 ERROR (testng-ReadCommittedLockTest) [org.infinispan.test.fwk.TestCacheManagerFactory] 
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!!!!!! (testng-ReadCommittedLockTest) Exiting because api.mvcc.read_committed.ReadCommittedLockTest has NOT shut down all the cache managers it has started !!!!!!!
!!!!!! (testng-ReadCommittedLockTest) The still-running cacheManager was created here: org.infinispan.api.mvcc.LockTestBase.setUp(LockTestBase.java:74) !!!!!!!
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

2013-01-31 13:15:55,725 DEBUG (testng-CustomInterceptorConfigTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:55,725 DEBUG (testng-CustomInterceptorConfigTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:55,727 INFO  (testng-CustomInterceptorConfigTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:55,727 DEBUG (testng-CustomInterceptorConfigTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 11
2013-01-31 13:15:55,728 DEBUG (testng-CustomInterceptorConfigTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.config.CustomInterceptorConfigTest$DummyInterceptor
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@7532ce5a}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@5a89b2d2}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@63b276e}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@1599a9f4, PB=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@1599a9f4}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@1b64dd40, TO=org.infinispan.interceptors.EntryWrappingInterceptor@1b64dd40, PB=org.infinispan.interceptors.EntryWrappingInterceptor@1b64dd40}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:55,731 DEBUG (testng-CustomInterceptorConfigTest) [org.infinispan.CacheImpl] Started cache ___defaultcache on null
2013-01-31 13:15:55,731 DEBUG (testng-CustomInterceptorConfigTest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on null
2013-01-31 13:15:55,731 DEBUG (testng-CustomInterceptorConfigTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 1 seconds.
2013-01-31 13:15:55,731 DEBUG (testng-CustomInterceptorConfigTest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:55,731 DEBUG (testng-CustomInterceptorConfigTest) [org.infinispan.manager.DefaultCacheManager] Stopping cache manager ISPN on null
2013-01-31 13:15:55,731 DEBUG (testng-CustomInterceptorConfigTest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on null
2013-01-31 13:15:55,731 INFO  (testng-CustomInterceptorConfigTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testCustomInterceptorsProgramatically(org.infinispan.config.CustomInterceptorConfigTest).
2013-01-31 13:15:55,732 INFO  (testng-CustomInterceptorConfigTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testCustomInterceptorsProgramaticallyWithOverride(org.infinispan.config.CustomInterceptorConfigTest)
2013-01-31 13:15:55,732 DEBUG (testng-CustomInterceptorConfigTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:55,752 DEBUG (testng-CustomInterceptorConfigTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:55,752 DEBUG (testng-CustomInterceptorConfigTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:55,752 DEBUG (CacheStartThread,ISPN,cache1) [org.jgroups.stack.Configurator] set property TCP.diagnostics_addr to default value /224.0.75.75
2013-01-31 13:15:55,763 DEBUG (CacheStartThread,ISPN,cache1) [org.jgroups.protocols.FRAG2] received CONFIG event: {bind_addr=/127.0.0.1}
2013-01-31 13:15:55,766 DEBUG (CacheStartThread,ISPN,cache1) [org.jgroups.protocols.pbcast.GMS] address=ParallelCacheStartTest-NodeA-27114, cluster=ISPN, physical address=127.0.0.1:8450
2013-01-31 13:15:55,769 DEBUG (CacheStartThread,ISPN,cache1) [org.jgroups.protocols.pbcast.NAKACK2] 
[ParallelCacheStartTest-NodeA-27114 setDigest()]
existing digest:  []
new digest:       ParallelCacheStartTest-NodeA-27114: [0 (0)]
resulting digest: ParallelCacheStartTest-NodeA-27114: [0 (0)]
2013-01-31 13:15:55,769 DEBUG (CacheStartThread,ISPN,cache1) [org.jgroups.protocols.pbcast.GMS] ParallelCacheStartTest-NodeA-27114: installing view [ParallelCacheStartTest-NodeA-27114|0] [ParallelCacheStartTest-NodeA-27114]
2013-01-31 13:15:55,769 DEBUG (CacheStartThread,ISPN,cache1) [org.jgroups.protocols.pbcast.STABLE] resuming message garbage collection
2013-01-31 13:15:55,769 DEBUG (CacheStartThread,ISPN,cache1) [org.jgroups.protocols.pbcast.STABLE] [ergonomics] setting max_bytes to 400KB (1 members)
2013-01-31 13:15:55,769 DEBUG (CacheStartThread,ISPN,cache1) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] New view accepted: [ParallelCacheStartTest-NodeA-27114|0] [ParallelCacheStartTest-NodeA-27114]
2013-01-31 13:15:55,769 INFO  (CacheStartThread,ISPN,cache1) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000094: Received new cluster view: [ParallelCacheStartTest-NodeA-27114|0] [ParallelCacheStartTest-NodeA-27114]
2013-01-31 13:15:55,771 WARN  (testng-WithClassLoaderTest) [org.jgroups.stack.Configurator] [JGRP00013] TP.discard_incompatible_packets has been deprecated: incompatible packets are discarded anyway
2013-01-31 13:15:55,772 DEBUG (CacheStartThread,ISPN,cache1) [org.jgroups.protocols.pbcast.STABLE] resuming message garbage collection
2013-01-31 13:15:55,772 DEBUG (CacheStartThread,ISPN,cache1) [org.jgroups.protocols.pbcast.GMS] created group (first member). My view is [ParallelCacheStartTest-NodeA-27114|0], impl is org.jgroups.protocols.pbcast.CoordGmsImpl
2013-01-31 13:15:55,772 INFO  (CacheStartThread,ISPN,cache1) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000079: Cache local address is ParallelCacheStartTest-NodeA-27114, physical addresses are [127.0.0.1:8450]
2013-01-31 13:15:55,772 DEBUG (CacheStartThread,ISPN,cache1) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] Waiting on view being accepted
2013-01-31 13:15:55,776 DEBUG (CacheStartThread,ISPN,cache1) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:55,776 DEBUG (CacheStartThread,ISPN,cache1) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:55,777 DEBUG (CacheStartThread,ISPN,cache1) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:55,778 INFO  (CacheStartThread,ISPN,cache1) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:55,780 DEBUG (CacheStartThread,ISPN,cache2) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:55,780 DEBUG (CacheStartThread,ISPN,cache1) [org.infinispan.transaction.TransactionTable] Min view id set to 0
2013-01-31 13:15:55,781 DEBUG (CacheStartThread,ISPN,cache1) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 10
2013-01-31 13:15:55,781 DEBUG (CacheStartThread,ISPN,cache1) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.StateTransferLockInterceptor@6e7febde, TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@1056747f, PB=org.infinispan.interceptors.StateTransferLockInterceptor@6e7febde}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@1bfa463a}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@4c18982f}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@62af5cb0, PB=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@62af5cb0}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@66ee596d, TO=org.infinispan.interceptors.EntryWrappingInterceptor@66ee596d, PB=org.infinispan.interceptors.EntryWrappingInterceptor@66ee596d}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.ReplicationInterceptor@2a3137e6, TO=org.infinispan.interceptors.totalorder.TotalOrderReplicationInterceptor@54cf2ae, PB=org.infinispan.interceptors.ReplicationInterceptor@2a3137e6}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:55,782 DEBUG (CacheStartThread,ISPN,cache1) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Setting configuration tunned parameters
2013-01-31 13:15:55,782 DEBUG (CacheStartThread,ISPN,cache1) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Configuration State responses are {}
2013-01-31 13:15:55,782 DEBUG (CacheStartThread,ISPN,cache1) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] No Configuration State found in cluster
2013-01-31 13:15:55,782 DEBUG (CacheStartThread,ISPN,cache1) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] No State found. Using original configuration parameters
2013-01-31 13:15:55,782 DEBUG (CacheStartThread,ISPN,cache1) [org.infinispan.cacheviews.CacheViewsManagerImpl] cache1: Node ParallelCacheStartTest-NodeA-27114 is joining
2013-01-31 13:15:55,782 DEBUG (CacheViewInstaller-1,ParallelCacheStartTest-NodeA-27114) [org.infinispan.cacheviews.CacheViewsManagerImpl] Installing new view CacheView{viewId=1, members=[ParallelCacheStartTest-NodeA-27114]} for cache cache1
2013-01-31 13:15:55,783 DEBUG (transport-thread-71) [org.infinispan.distribution.ch.DefaultConsistentHash] Using 1 virtualNodes to initialize consistent hash wheel 
2013-01-31 13:15:55,784 DEBUG (transport-thread-71) [org.infinispan.statetransfer.ReplicatedStateTransferTask] Commencing state transfer 1 on node: ParallelCacheStartTest-NodeA-27114. Before start, data container had 0 entries
2013-01-31 13:15:55,784 DEBUG (transport-thread-71) [org.infinispan.statetransfer.StateTransferLockImpl] Blocking new write commands for cache view 1
2013-01-31 13:15:55,784 DEBUG (CacheViewInstaller-1,ParallelCacheStartTest-NodeA-27114) [org.infinispan.cacheviews.CacheViewsManagerImpl] cache1: Committing cache view CacheView{viewId=1, members=[ParallelCacheStartTest-NodeA-27114]}
2013-01-31 13:15:55,784 DEBUG (CacheViewInstaller-1,ParallelCacheStartTest-NodeA-27114) [org.infinispan.statetransfer.BaseStateTransferTask] Node ParallelCacheStartTest-NodeA-27114 completed state transfer for view 1 in 0 milliseconds!
2013-01-31 13:15:55,784 DEBUG (CacheViewInstaller-1,ParallelCacheStartTest-NodeA-27114) [org.infinispan.statetransfer.StateTransferLockImpl] Unblocking write commands for cache view 1
2013-01-31 13:15:55,784 DEBUG (CacheViewInstaller-1,ParallelCacheStartTest-NodeA-27114) [org.infinispan.cacheviews.CacheViewsManagerImpl] Successfully installed view CacheView{viewId=1, members=[ParallelCacheStartTest-NodeA-27114]} for cache cache1
2013-01-31 13:15:55,784 DEBUG (CacheStartThread,ISPN,cache1) [org.infinispan.CacheImpl] Started cache cache1 on ParallelCacheStartTest-NodeA-27114
2013-01-31 13:15:55,801 DEBUG (CacheStartThread,ISPN,cache2) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:55,802 DEBUG (CacheStartThread,ISPN,cache2) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:55,802 INFO  (CacheStartThread,ISPN,cache2) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:55,802 DEBUG (CacheStartThread,ISPN,cache2) [org.infinispan.transaction.TransactionTable] Min view id set to 0
2013-01-31 13:15:55,802 DEBUG (CacheStartThread,ISPN,cache2) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 10
2013-01-31 13:15:55,803 DEBUG (CacheStartThread,ISPN,cache2) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.StateTransferLockInterceptor@c3cbc2, TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@36762df2, PB=org.infinispan.interceptors.StateTransferLockInterceptor@c3cbc2}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@8c286cd}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@1b200139}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@52305318, PB=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@52305318}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@629f76cf, TO=org.infinispan.interceptors.EntryWrappingInterceptor@629f76cf, PB=org.infinispan.interceptors.EntryWrappingInterceptor@629f76cf}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.ReplicationInterceptor@5331429e, TO=org.infinispan.interceptors.totalorder.TotalOrderReplicationInterceptor@470cbdbd, PB=org.infinispan.interceptors.ReplicationInterceptor@5331429e}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:55,803 DEBUG (CacheStartThread,ISPN,cache2) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Setting configuration tunned parameters
2013-01-31 13:15:55,803 DEBUG (CacheStartThread,ISPN,cache2) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Configuration State responses are {}
2013-01-31 13:15:55,803 DEBUG (CacheStartThread,ISPN,cache2) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] No Configuration State found in cluster
2013-01-31 13:15:55,803 DEBUG (CacheStartThread,ISPN,cache2) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] No State found. Using original configuration parameters
2013-01-31 13:15:55,803 DEBUG (CacheStartThread,ISPN,cache2) [org.infinispan.cacheviews.CacheViewsManagerImpl] cache2: Node ParallelCacheStartTest-NodeA-27114 is joining
2013-01-31 13:15:55,803 DEBUG (CacheViewInstaller-1,ParallelCacheStartTest-NodeA-27114) [org.infinispan.cacheviews.CacheViewsManagerImpl] Installing new view CacheView{viewId=1, members=[ParallelCacheStartTest-NodeA-27114]} for cache cache2
2013-01-31 13:15:55,808 DEBUG (transport-thread-73) [org.infinispan.distribution.ch.DefaultConsistentHash] Using 1 virtualNodes to initialize consistent hash wheel 
2013-01-31 13:15:55,809 DEBUG (transport-thread-73) [org.infinispan.statetransfer.ReplicatedStateTransferTask] Commencing state transfer 1 on node: ParallelCacheStartTest-NodeA-27114. Before start, data container had 0 entries
2013-01-31 13:15:55,809 DEBUG (transport-thread-73) [org.infinispan.statetransfer.StateTransferLockImpl] Blocking new write commands for cache view 1
2013-01-31 13:15:55,810 DEBUG (CacheViewInstaller-1,ParallelCacheStartTest-NodeA-27114) [org.infinispan.cacheviews.CacheViewsManagerImpl] cache2: Committing cache view CacheView{viewId=1, members=[ParallelCacheStartTest-NodeA-27114]}
2013-01-31 13:15:55,810 DEBUG (CacheViewInstaller-1,ParallelCacheStartTest-NodeA-27114) [org.infinispan.statetransfer.BaseStateTransferTask] Node ParallelCacheStartTest-NodeA-27114 completed state transfer for view 1 in 0 milliseconds!
2013-01-31 13:15:55,810 DEBUG (CacheViewInstaller-1,ParallelCacheStartTest-NodeA-27114) [org.infinispan.statetransfer.StateTransferLockImpl] Unblocking write commands for cache view 1
2013-01-31 13:15:55,810 DEBUG (CacheViewInstaller-1,ParallelCacheStartTest-NodeA-27114) [org.infinispan.cacheviews.CacheViewsManagerImpl] Successfully installed view CacheView{viewId=1, members=[ParallelCacheStartTest-NodeA-27114]} for cache cache2
2013-01-31 13:15:55,810 DEBUG (CacheStartThread,ISPN,cache2) [org.infinispan.CacheImpl] Started cache cache2 on ParallelCacheStartTest-NodeA-27114
2013-01-31 13:15:55,812 DEBUG (testng-ParallelCacheStartTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:55,817 DEBUG (testng-ParallelCacheStartTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:55,817 DEBUG (testng-ParallelCacheStartTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:55,824 DEBUG (testng-WithClassLoaderTest) [org.jgroups.stack.Configurator] set property TCP.diagnostics_addr to default value /224.0.75.75
2013-01-31 13:15:55,848 DEBUG (testng-WithClassLoaderTest) [org.jgroups.protocols.FRAG2] received CONFIG event: {bind_addr=/127.0.0.1}
2013-01-31 13:15:55,849 DEBUG (testng-WithClassLoaderTest) [org.jgroups.protocols.pbcast.GMS] address=WithClassLoaderTest-NodeB-54564, cluster=ISPN, physical address=127.0.0.1:8501
2013-01-31 13:15:55,849 DEBUG (testng-WithClassLoaderTest) [org.jgroups.protocols.pbcast.GMS] election results: {WithClassLoaderTest-NodeA-49015=1}
2013-01-31 13:15:55,849 DEBUG (testng-WithClassLoaderTest) [org.jgroups.protocols.pbcast.GMS] sending JOIN(WithClassLoaderTest-NodeB-54564) to WithClassLoaderTest-NodeA-49015
2013-01-31 13:15:55,910 DEBUG (ViewHandler,ISPN,WithClassLoaderTest-NodeA-49015) [org.jgroups.protocols.pbcast.STABLE] suspending message garbage collection
2013-01-31 13:15:55,910 DEBUG (ViewHandler,ISPN,WithClassLoaderTest-NodeA-49015) [org.jgroups.protocols.pbcast.STABLE] resume task started, max_suspend_time=33000
2013-01-31 13:15:55,921 DEBUG (Incoming-1,ISPN,WithClassLoaderTest-NodeA-49015) [org.jgroups.protocols.pbcast.NAKACK2] 
[WithClassLoaderTest-NodeA-49015 setDigest()]
existing digest:  WithClassLoaderTest-NodeA-49015: [1 (1)]
new digest:       WithClassLoaderTest-NodeA-49015: [0 (0)], WithClassLoaderTest-NodeB-54564: [0 (0)]
resulting digest: WithClassLoaderTest-NodeB-54564: [0 (0)], WithClassLoaderTest-NodeA-49015: [1 (1)]
2013-01-31 13:15:55,921 DEBUG (Incoming-1,ISPN,WithClassLoaderTest-NodeA-49015) [org.jgroups.protocols.pbcast.GMS] WithClassLoaderTest-NodeA-49015: installing view [WithClassLoaderTest-NodeA-49015|1] [WithClassLoaderTest-NodeA-49015, WithClassLoaderTest-NodeB-54564]
2013-01-31 13:15:55,921 DEBUG (Incoming-1,ISPN,WithClassLoaderTest-NodeA-49015) [org.jgroups.protocols.pbcast.STABLE] [ergonomics] setting max_bytes to 800KB (2 members)
2013-01-31 13:15:55,922 DEBUG (Incoming-1,ISPN,WithClassLoaderTest-NodeA-49015) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] New view accepted: [WithClassLoaderTest-NodeA-49015|1] [WithClassLoaderTest-NodeA-49015, WithClassLoaderTest-NodeB-54564]
2013-01-31 13:15:55,922 INFO  (Incoming-1,ISPN,WithClassLoaderTest-NodeA-49015) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000094: Received new cluster view: [WithClassLoaderTest-NodeA-49015|1] [WithClassLoaderTest-NodeA-49015, WithClassLoaderTest-NodeB-54564]
2013-01-31 13:15:55,954 DEBUG (notification-thread-74) [org.infinispan.transaction.TransactionTable] View changed, recalculating minViewId
2013-01-31 13:15:55,954 DEBUG (testng-WithClassLoaderTest) [org.jgroups.protocols.pbcast.NAKACK2] 
[WithClassLoaderTest-NodeB-54564 setDigest()]
existing digest:  []
new digest:       WithClassLoaderTest-NodeA-49015: [0 (0)], WithClassLoaderTest-NodeB-54564: [0 (0)]
resulting digest: WithClassLoaderTest-NodeB-54564: [0 (0)], WithClassLoaderTest-NodeA-49015: [0 (0)]
2013-01-31 13:15:55,954 DEBUG (testng-WithClassLoaderTest) [org.jgroups.protocols.pbcast.GMS] WithClassLoaderTest-NodeB-54564: installing view [WithClassLoaderTest-NodeA-49015|1] [WithClassLoaderTest-NodeA-49015, WithClassLoaderTest-NodeB-54564]
2013-01-31 13:15:55,956 DEBUG (testng-WithClassLoaderTest) [org.jgroups.protocols.pbcast.STABLE] [ergonomics] setting max_bytes to 800KB (2 members)
2013-01-31 13:15:55,957 DEBUG (testng-WithClassLoaderTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] New view accepted: [WithClassLoaderTest-NodeA-49015|1] [WithClassLoaderTest-NodeA-49015, WithClassLoaderTest-NodeB-54564]
2013-01-31 13:15:55,957 INFO  (testng-WithClassLoaderTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000094: Received new cluster view: [WithClassLoaderTest-NodeA-49015|1] [WithClassLoaderTest-NodeA-49015, WithClassLoaderTest-NodeB-54564]
2013-01-31 13:15:55,960 DEBUG (ViewHandler,ISPN,WithClassLoaderTest-NodeA-49015) [org.jgroups.protocols.pbcast.STABLE] resuming message garbage collection
2013-01-31 13:15:55,960 INFO  (testng-WithClassLoaderTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000079: Cache local address is WithClassLoaderTest-NodeB-54564, physical addresses are [127.0.0.1:8501]
2013-01-31 13:15:55,961 DEBUG (testng-WithClassLoaderTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] Waiting on view being accepted
2013-01-31 13:15:55,975 DEBUG (testng-WithClassLoaderTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:55,975 DEBUG (testng-WithClassLoaderTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:55,999 DEBUG (testng-WithClassLoaderTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:56,000 INFO  (testng-WithClassLoaderTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:56,001 DEBUG (testng-WithClassLoaderTest) [org.infinispan.transaction.TransactionTable] Min view id set to 1
2013-01-31 13:15:56,002 DEBUG (testng-WithClassLoaderTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 12
2013-01-31 13:15:56,002 DEBUG (testng-WithClassLoaderTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.IsMarshallableInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.StateTransferLockInterceptor@5a10836b, TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@722413fe, PB=org.infinispan.interceptors.StateTransferLockInterceptor@5a10836b}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@1e9cc33d}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@45d5e97e}
	>> org.infinispan.interceptors.MarshalledValueInterceptor
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@5ed47303, PB=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@5ed47303}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@4dcafa98, TO=org.infinispan.interceptors.EntryWrappingInterceptor@4dcafa98, PB=org.infinispan.interceptors.EntryWrappingInterceptor@4dcafa98}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.ReplicationInterceptor@490a390e, TO=org.infinispan.interceptors.totalorder.TotalOrderReplicationInterceptor@3e27eb98, PB=org.infinispan.interceptors.ReplicationInterceptor@490a390e}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:56,001 WARN  (testng-ClusteredAPITest) [org.jgroups.stack.Configurator] [JGRP00013] TP.discard_incompatible_packets has been deprecated: incompatible packets are discarded anyway
2013-01-31 13:15:56,003 DEBUG (testng-WithClassLoaderTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Setting configuration tunned parameters
2013-01-31 13:15:56,016 DEBUG (testng-WithClassLoaderTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Configuration State responses are {WithClassLoaderTest-NodeA-49015=SuccessfulResponse{responseValue=ConfigurationState{numberOfOwners=0, protocolName='2PC', epoch=0}} }
2013-01-31 13:15:56,016 DEBUG (testng-WithClassLoaderTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Configuration State found: ConfigurationState{numberOfOwners=0, protocolName='2PC', epoch=0}
2013-01-31 13:15:56,016 DEBUG (testng-WithClassLoaderTest) [org.infinispan.cacheviews.CacheViewsManagerImpl] ___defaultcache: Node WithClassLoaderTest-NodeB-54564 is joining
2013-01-31 13:15:56,021 DEBUG (OOB-1,ISPN,WithClassLoaderTest-NodeA-49015) [org.infinispan.cacheviews.CacheViewsManagerImpl] ___defaultcache: Node WithClassLoaderTest-NodeB-54564 is joining
2013-01-31 13:15:56,021 DEBUG (CacheViewInstaller-1,WithClassLoaderTest-NodeA-49015) [org.infinispan.cacheviews.CacheViewsManagerImpl] Installing new view CacheView{viewId=2, members=[WithClassLoaderTest-NodeA-49015, WithClassLoaderTest-NodeB-54564]} for cache ___defaultcache
2013-01-31 13:15:56,029 DEBUG (asyncTransportThread-76) [org.infinispan.distribution.ch.DefaultConsistentHash] Using 1 virtualNodes to initialize consistent hash wheel 
2013-01-31 13:15:56,029 DEBUG (asyncTransportThread-76) [org.infinispan.statetransfer.ReplicatedStateTransferTask] Commencing state transfer 2 on node: WithClassLoaderTest-NodeA-49015. Before start, data container had 0 entries
2013-01-31 13:15:56,029 DEBUG (asyncTransportThread-76) [org.infinispan.statetransfer.StateTransferLockImpl] Blocking new write commands for cache view 2
2013-01-31 13:15:56,063 DEBUG (OOB-1,ISPN,WithClassLoaderTest-NodeB-54564) [org.infinispan.distribution.ch.DefaultConsistentHash] Using 1 virtualNodes to initialize consistent hash wheel 
2013-01-31 13:15:56,063 DEBUG (asyncTransportThread-76) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Pushing to nodes [WithClassLoaderTest-NodeB-54564] 0 keys
2013-01-31 13:15:56,068 DEBUG (OOB-1,ISPN,WithClassLoaderTest-NodeB-54564) [org.infinispan.statetransfer.ReplicatedStateTransferTask] Commencing state transfer 2 on node: WithClassLoaderTest-NodeB-54564. Before start, data container had 0 entries
2013-01-31 13:15:56,068 DEBUG (OOB-1,ISPN,WithClassLoaderTest-NodeB-54564) [org.infinispan.statetransfer.StateTransferLockImpl] Blocking new write commands for cache view 2
2013-01-31 13:15:56,081 DEBUG (OOB-1,ISPN,WithClassLoaderTest-NodeB-54564) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Applying new state from WithClassLoaderTest-NodeA-49015: received 0 keys
2013-01-31 13:15:56,089 WARN  (testng-RepeatableReadLockTest) [org.infinispan.transaction.TransactionTable] ISPN000100: Stopping, but there are 1 local transactions and 0 remote transactions that did not finish in time.
2013-01-31 13:15:56,089 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.transaction.TransactionTable] Local active transactions: {DummyTransaction{xid=DummyXid{id=54}, status=0}=LocalXaTransaction{xid=DummyXid{id=54}} LocalTransaction{remoteLockedNodes=null, isMarkedForRollback=false, transaction=DummyTransaction{xid=DummyXid{id=54}, status=0}, lockedKeys=null, backupKeyLocks=null, viewId=-1} org.infinispan.transaction.xa.LocalXaTransaction@157}, Remote active transactions null
2013-01-31 13:15:56,089 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.manager.DefaultCacheManager] Stopping cache manager ISPN on null
2013-01-31 13:15:56,089 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on null
2013-01-31 13:15:56,091 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:56,102 DEBUG (asyncTransportThread-76) [org.infinispan.statetransfer.BaseStateTransferTask] Node finished pushing data for cache views 2.
2013-01-31 13:15:56,107 DEBUG (OOB-1,ISPN,WithClassLoaderTest-NodeB-54564) [org.infinispan.cacheviews.CacheViewsManagerImpl] ___defaultcache: Committing cache view CacheView{viewId=2, members=[WithClassLoaderTest-NodeA-49015, WithClassLoaderTest-NodeB-54564]}
2013-01-31 13:15:56,107 DEBUG (OOB-1,ISPN,WithClassLoaderTest-NodeB-54564) [org.infinispan.statetransfer.BaseStateTransferTask] Node WithClassLoaderTest-NodeB-54564 completed state transfer for view 2 in 38 milliseconds!
2013-01-31 13:15:56,107 DEBUG (OOB-1,ISPN,WithClassLoaderTest-NodeB-54564) [org.infinispan.statetransfer.StateTransferLockImpl] Unblocking write commands for cache view 2
2013-01-31 13:15:56,108 DEBUG (CacheViewInstaller-1,WithClassLoaderTest-NodeA-49015) [org.infinispan.cacheviews.CacheViewsManagerImpl] ___defaultcache: Committing cache view CacheView{viewId=2, members=[WithClassLoaderTest-NodeA-49015, WithClassLoaderTest-NodeB-54564]}
2013-01-31 13:15:56,108 DEBUG (CacheViewInstaller-1,WithClassLoaderTest-NodeA-49015) [org.infinispan.statetransfer.BaseStateTransferTask] Node WithClassLoaderTest-NodeA-49015 completed state transfer for view 2 in 79 milliseconds!
2013-01-31 13:15:56,108 DEBUG (CacheViewInstaller-1,WithClassLoaderTest-NodeA-49015) [org.infinispan.statetransfer.StateTransferLockImpl] Unblocking write commands for cache view 2
2013-01-31 13:15:56,108 DEBUG (CacheViewInstaller-1,WithClassLoaderTest-NodeA-49015) [org.infinispan.cacheviews.CacheViewsManagerImpl] Successfully installed view CacheView{viewId=2, members=[WithClassLoaderTest-NodeA-49015, WithClassLoaderTest-NodeB-54564]} for cache ___defaultcache
2013-01-31 13:15:56,108 DEBUG (testng-WithClassLoaderTest) [org.infinispan.CacheImpl] Started cache ___defaultcache on WithClassLoaderTest-NodeB-54564
2013-01-31 13:15:56,112 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:56,112 DEBUG (testng-RepeatableReadLockTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:56,113 ERROR (testng-WithClassLoaderTest) [org.infinispan.interceptors.InvocationContextInterceptor] ISPN000136: Execution error
org.infinispan.CacheException: Unable to unmarshall value
	at org.infinispan.marshall.MarshalledValue.deserialize0(MarshalledValue.java:158)
	at org.infinispan.marshall.MarshalledValue.deserialize(MarshalledValue.java:142)
	at org.infinispan.marshall.MarshalledValue.get(MarshalledValue.java:223)
	at org.infinispan.interceptors.MarshalledValueInterceptor.processRetVal(MarshalledValueInterceptor.java:326)
	at org.infinispan.interceptors.MarshalledValueInterceptor.visitGetKeyValueCommand(MarshalledValueInterceptor.java:205)
	at org.infinispan.commands.read.GetKeyValueCommand.acceptVisitor(GetKeyValueCommand.java:61)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitGetKeyValueCommand(AbstractVisitor.java:104)
	at org.infinispan.commands.read.GetKeyValueCommand.acceptVisitor(GetKeyValueCommand.java:61)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitGetKeyValueCommand(AbstractVisitor.java:104)
	at org.infinispan.commands.read.GetKeyValueCommand.acceptVisitor(GetKeyValueCommand.java:61)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.base.CommandInterceptor.handleDefault(CommandInterceptor.java:130)
	at org.infinispan.commands.AbstractVisitor.visitGetKeyValueCommand(AbstractVisitor.java:104)
	at org.infinispan.commands.read.GetKeyValueCommand.acceptVisitor(GetKeyValueCommand.java:61)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitGetKeyValueCommand(AbstractVisitor.java:104)
	at org.infinispan.commands.read.GetKeyValueCommand.acceptVisitor(GetKeyValueCommand.java:61)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.base.CommandInterceptor.handleDefault(CommandInterceptor.java:130)
	at org.infinispan.commands.AbstractVisitor.visitGetKeyValueCommand(AbstractVisitor.java:104)
	at org.infinispan.interceptors.IsMarshallableInterceptor.visitGetKeyValueCommand(IsMarshallableInterceptor.java:94)
	at org.infinispan.commands.read.GetKeyValueCommand.acceptVisitor(GetKeyValueCommand.java:61)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitGetKeyValueCommand(AbstractVisitor.java:104)
	at org.infinispan.commands.read.GetKeyValueCommand.acceptVisitor(GetKeyValueCommand.java:61)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.CacheImpl.get(CacheImpl.java:279)
	at org.infinispan.CacheImpl.get(CacheImpl.java:271)
	at org.infinispan.api.WithClassLoaderTest.testReadingWithCorrectClassLoaderAfterReplication(WithClassLoaderTest.java:64)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
Caused by: java.lang.ClassNotFoundException: org.infinispan.api.WithClassLoaderTest$Car is discarded
	at org.infinispan.test.CherryPickClassLoader.loadClass(CherryPickClassLoader.java:77)
	at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
	at java.lang.Class.forName0(Native Method)
	at java.lang.Class.forName(Class.java:247)
	at org.jboss.marshalling.AbstractClassResolver.loadClass(AbstractClassResolver.java:135)
	at org.jboss.marshalling.AbstractClassResolver.resolveClass(AbstractClassResolver.java:116)
	at org.jboss.marshalling.river.RiverUnmarshaller.doReadClassDescriptor(RiverUnmarshaller.java:888)
	at org.jboss.marshalling.river.RiverUnmarshaller.doReadNewObject(RiverUnmarshaller.java:1200)
	at org.jboss.marshalling.river.RiverUnmarshaller.doReadObject(RiverUnmarshaller.java:272)
	at org.jboss.marshalling.river.RiverUnmarshaller.doReadObject(RiverUnmarshaller.java:209)
	at org.jboss.marshalling.AbstractObjectInput.readObject(AbstractObjectInput.java:37)
	at org.infinispan.marshall.jboss.AbstractJBossMarshaller.objectFromObjectStream(AbstractJBossMarshaller.java:154)
	at org.infinispan.marshall.VersionAwareMarshaller.objectFromByteBuffer(VersionAwareMarshaller.java:114)
	at org.infinispan.marshall.AbstractMarshaller.objectFromByteBuffer(AbstractMarshaller.java:90)
	at org.infinispan.marshall.AbstractDelegatingMarshaller.objectFromByteBuffer(AbstractDelegatingMarshaller.java:80)
	at org.infinispan.marshall.MarshalledValue.deserialize0(MarshalledValue.java:153)
	... 52 more
2013-01-31 13:15:56,119 INFO  (testng-WithClassLoaderTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testReadingWithCorrectClassLoaderAfterReplication(org.infinispan.api.WithClassLoaderTest).
2013-01-31 13:15:56,121 DEBUG (testng-WithClassLoaderTest) [org.infinispan.api.WithClassLoaderTest] *** Test method complete; clearing contents on all caches.
2013-01-31 13:15:56,121 DEBUG (testng-WithClassLoaderTest) [org.infinispan.test.TestingUtil] Cleaning data for cache '___defaultcache' on a cache manager at address WithClassLoaderTest-NodeA-49015
2013-01-31 13:15:56,121 DEBUG (testng-WithClassLoaderTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [1=MarshalledValue{instance=org.infinispan.api.WithClassLoaderTest$Car@170842, serialized=false, cachedHashCode=1509442}@724a6995]
2013-01-31 13:15:56,121 DEBUG (testng-WithClassLoaderTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:56,121 DEBUG (testng-WithClassLoaderTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:56,121 DEBUG (testng-WithClassLoaderTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:56,121 DEBUG (testng-WithClassLoaderTest) [org.infinispan.test.TestingUtil] Cleaning data for cache '___defaultcache' on a cache manager at address WithClassLoaderTest-NodeB-54564
2013-01-31 13:15:56,121 DEBUG (testng-WithClassLoaderTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [1=MarshalledValue{instance=org.infinispan.api.WithClassLoaderTest$Car@170842, serialized=ByteArray{size=87, array=0x0301fe0409000000..}, cachedHashCode=1509442}@7359efd1]
2013-01-31 13:15:56,121 DEBUG (testng-WithClassLoaderTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:56,121 DEBUG (testng-WithClassLoaderTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:56,121 DEBUG (testng-WithClassLoaderTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:56,122 DEBUG (testng-WithClassLoaderTest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on WithClassLoaderTest-NodeA-49015
2013-01-31 13:15:56,122 DEBUG (testng-WithClassLoaderTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 30 seconds.
2013-01-31 13:15:56,122 DEBUG (testng-WithClassLoaderTest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:56,122 DEBUG (CacheViewInstaller-1,WithClassLoaderTest-NodeA-49015) [org.infinispan.cacheviews.CacheViewsManagerImpl] Installing new view CacheView{viewId=3, members=[WithClassLoaderTest-NodeB-54564]} for cache ___defaultcache
2013-01-31 13:15:56,124 DEBUG (OOB-1,ISPN,WithClassLoaderTest-NodeB-54564) [org.infinispan.distribution.ch.DefaultConsistentHash] Using 1 virtualNodes to initialize consistent hash wheel 
2013-01-31 13:15:56,124 DEBUG (OOB-1,ISPN,WithClassLoaderTest-NodeB-54564) [org.infinispan.statetransfer.ReplicatedStateTransferTask] Commencing state transfer 3 on node: WithClassLoaderTest-NodeB-54564. Before start, data container had 0 entries
2013-01-31 13:15:56,124 DEBUG (OOB-1,ISPN,WithClassLoaderTest-NodeB-54564) [org.infinispan.statetransfer.StateTransferLockImpl] Blocking new write commands for cache view 3
2013-01-31 13:15:56,148 DEBUG (OOB-1,ISPN,WithClassLoaderTest-NodeB-54564) [org.infinispan.cacheviews.CacheViewsManagerImpl] ___defaultcache: Committing cache view CacheView{viewId=3, members=[WithClassLoaderTest-NodeB-54564]}
2013-01-31 13:15:56,148 DEBUG (OOB-1,ISPN,WithClassLoaderTest-NodeB-54564) [org.infinispan.statetransfer.BaseStateTransferTask] Node WithClassLoaderTest-NodeB-54564 completed state transfer for view 3 in 24 milliseconds!
2013-01-31 13:15:56,148 DEBUG (OOB-1,ISPN,WithClassLoaderTest-NodeB-54564) [org.infinispan.statetransfer.StateTransferLockImpl] Unblocking write commands for cache view 3
2013-01-31 13:15:56,151 DEBUG (testng-ClusteredAPITest) [org.jgroups.stack.Configurator] set property TCP.diagnostics_addr to default value /224.0.75.75
2013-01-31 13:15:56,160 DEBUG (CacheViewInstaller-1,WithClassLoaderTest-NodeA-49015) [org.infinispan.cacheviews.CacheViewsManagerImpl] ___defaultcache: Committing cache view CacheView{viewId=3, members=[WithClassLoaderTest-NodeB-54564]}
2013-01-31 13:15:56,160 DEBUG (CacheViewInstaller-1,WithClassLoaderTest-NodeA-49015) [org.infinispan.cacheviews.CacheViewsManagerImpl] Successfully installed view CacheView{viewId=3, members=[WithClassLoaderTest-NodeB-54564]} for cache ___defaultcache
2013-01-31 13:15:56,187 DEBUG (testng-WithClassLoaderTest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on WithClassLoaderTest-NodeB-54564
2013-01-31 13:15:56,187 DEBUG (testng-WithClassLoaderTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 30 seconds.
2013-01-31 13:15:56,187 DEBUG (testng-WithClassLoaderTest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:56,190 DEBUG (testng-ClusteredAPITest) [org.jgroups.protocols.FRAG2] received CONFIG event: {bind_addr=/127.0.0.1}
2013-01-31 13:15:56,193 DEBUG (testng-ClusteredAPITest) [org.jgroups.protocols.pbcast.GMS] address=ClusteredAPITest-NodeB-60625, cluster=ISPN, physical address=127.0.0.1:8551
2013-01-31 13:15:56,194 DEBUG (testng-ClusteredAPITest) [org.jgroups.protocols.pbcast.GMS] election results: {ClusteredAPITest-NodeA-6271=1}
2013-01-31 13:15:56,194 DEBUG (testng-ClusteredAPITest) [org.jgroups.protocols.pbcast.GMS] sending JOIN(ClusteredAPITest-NodeB-60625) to ClusteredAPITest-NodeA-6271
2013-01-31 13:15:56,201 DEBUG (testng-KeyAffinityServiceTest) [org.infinispan.affinity.KeyAffinityServiceTest] Cache managers created, ready to start the test
2013-01-31 13:15:56,202 INFO  (testng-KeyAffinityServiceTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testKeysAreCorrectlyCreated(org.infinispan.affinity.KeyAffinityServiceTest)
2013-01-31 13:15:56,205 WARN  (testng-FlagsEnabledTest) [org.jgroups.stack.Configurator] [JGRP00013] TP.discard_incompatible_packets has been deprecated: incompatible packets are discarded anyway
2013-01-31 13:15:56,274 DEBUG (CacheViewInstaller-1,WithClassLoaderTest-NodeA-49015) [org.infinispan.cacheviews.CacheViewsManagerImpl] Installing new view CacheView{viewId=4, members=[]} for cache ___defaultcache
2013-01-31 13:15:56,276 DEBUG (testng-WithClassLoaderTest) [org.infinispan.manager.DefaultCacheManager] Stopping cache manager ISPN on WithClassLoaderTest-NodeA-49015
2013-01-31 13:15:56,276 DEBUG (testng-WithClassLoaderTest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on WithClassLoaderTest-NodeA-49015
2013-01-31 13:15:56,278 INFO  (testng-WithClassLoaderTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000080: Disconnecting and closing JGroups Channel
2013-01-31 13:15:56,310 INFO  (testng-KeyAffinityServiceTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testKeysAreCorrectlyCreated(org.infinispan.affinity.KeyAffinityServiceTest).
2013-01-31 13:15:56,310 DEBUG (testng-KeyAffinityServiceTest) [org.infinispan.affinity.KeyAffinityServiceTest] *** Test method complete; clearing contents on all caches.
2013-01-31 13:15:56,311 DEBUG (testng-KeyAffinityServiceTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'dist' on a cache manager at address KeyAffinityServiceTest-NodeA-61608
2013-01-31 13:15:56,311 DEBUG (testng-KeyAffinityServiceTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [k=v]
2013-01-31 13:15:56,311 DEBUG (testng-KeyAffinityServiceTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:56,311 DEBUG (testng-KeyAffinityServiceTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:56,311 DEBUG (testng-KeyAffinityServiceTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:56,311 DEBUG (testng-KeyAffinityServiceTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'dist' on a cache manager at address KeyAffinityServiceTest-NodeB-45659
2013-01-31 13:15:56,311 DEBUG (testng-KeyAffinityServiceTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [k=v]
2013-01-31 13:15:56,313 DEBUG (testng-KeyAffinityServiceTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:56,314 DEBUG (testng-KeyAffinityServiceTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:56,314 DEBUG (testng-KeyAffinityServiceTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:56,314 INFO  (testng-KeyAffinityServiceTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testConcurrentConsumptionOfKeys(org.infinispan.affinity.KeyAffinityServiceTest)
2013-01-31 13:15:56,321 DEBUG (Incoming-1,ISPN,WithClassLoaderTest-NodeB-54564) [org.jgroups.protocols.pbcast.GMS] WithClassLoaderTest-NodeB-54564: installing view [WithClassLoaderTest-NodeB-54564|2] [WithClassLoaderTest-NodeB-54564]
2013-01-31 13:15:56,323 DEBUG (Incoming-1,ISPN,WithClassLoaderTest-NodeB-54564) [org.jgroups.protocols.pbcast.STABLE] resuming message garbage collection
2013-01-31 13:15:56,323 DEBUG (Incoming-1,ISPN,WithClassLoaderTest-NodeB-54564) [org.jgroups.protocols.pbcast.NAKACK2] removed WithClassLoaderTest-NodeA-49015 from xmit_table (not member anymore)
2013-01-31 13:15:56,353 DEBUG (testng-FlagsEnabledTest) [org.jgroups.stack.Configurator] set property TCP.diagnostics_addr to default value /224.0.75.75
2013-01-31 13:15:56,437 DEBUG (testng-FlagsEnabledTest) [org.jgroups.protocols.FRAG2] received CONFIG event: {bind_addr=/127.0.0.1}
2013-01-31 13:15:56,438 DEBUG (testng-FlagsEnabledTest) [org.jgroups.protocols.pbcast.GMS] address=FlagsEnabledTest-NodeC-46553, cluster=ISPN, physical address=127.0.0.1:8350
2013-01-31 13:15:56,439 DEBUG (testng-FlagsEnabledTest) [org.jgroups.protocols.pbcast.NAKACK2] 
[FlagsEnabledTest-NodeC-46553 setDigest()]
existing digest:  []
new digest:       FlagsEnabledTest-NodeC-46553: [0 (0)]
resulting digest: FlagsEnabledTest-NodeC-46553: [0 (0)]
2013-01-31 13:15:56,439 DEBUG (testng-FlagsEnabledTest) [org.jgroups.protocols.pbcast.GMS] FlagsEnabledTest-NodeC-46553: installing view [FlagsEnabledTest-NodeC-46553|0] [FlagsEnabledTest-NodeC-46553]
2013-01-31 13:15:56,439 DEBUG (testng-FlagsEnabledTest) [org.jgroups.protocols.pbcast.STABLE] resuming message garbage collection
2013-01-31 13:15:56,439 DEBUG (testng-FlagsEnabledTest) [org.jgroups.protocols.pbcast.STABLE] [ergonomics] setting max_bytes to 400KB (1 members)
2013-01-31 13:15:56,439 DEBUG (testng-FlagsEnabledTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] New view accepted: [FlagsEnabledTest-NodeC-46553|0] [FlagsEnabledTest-NodeC-46553]
2013-01-31 13:15:56,439 INFO  (testng-FlagsEnabledTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000094: Received new cluster view: [FlagsEnabledTest-NodeC-46553|0] [FlagsEnabledTest-NodeC-46553]
2013-01-31 13:15:56,451 DEBUG (testng-FlagsEnabledTest) [org.jgroups.protocols.pbcast.STABLE] resuming message garbage collection
2013-01-31 13:15:56,451 DEBUG (testng-FlagsEnabledTest) [org.jgroups.protocols.pbcast.GMS] created group (first member). My view is [FlagsEnabledTest-NodeC-46553|0], impl is org.jgroups.protocols.pbcast.CoordGmsImpl
2013-01-31 13:15:56,497 DEBUG (Incoming-1,ISPN,WithClassLoaderTest-NodeB-54564) [org.jgroups.protocols.pbcast.STABLE] [ergonomics] setting max_bytes to 400KB (1 members)
2013-01-31 13:15:56,518 DEBUG (Incoming-1,ISPN,WithClassLoaderTest-NodeB-54564) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] New view accepted: [WithClassLoaderTest-NodeB-54564|2] [WithClassLoaderTest-NodeB-54564]
2013-01-31 13:15:56,518 INFO  (Incoming-1,ISPN,WithClassLoaderTest-NodeB-54564) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000094: Received new cluster view: [WithClassLoaderTest-NodeB-54564|2] [WithClassLoaderTest-NodeB-54564]
2013-01-31 13:15:56,471 DEBUG (ViewHandler,ISPN,ClusteredAPITest-NodeA-6271) [org.jgroups.protocols.pbcast.STABLE] suspending message garbage collection
2013-01-31 13:15:56,518 DEBUG (ViewHandler,ISPN,ClusteredAPITest-NodeA-6271) [org.jgroups.protocols.pbcast.STABLE] resume task started, max_suspend_time=33000
2013-01-31 13:15:56,518 INFO  (testng-FlagsEnabledTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000079: Cache local address is FlagsEnabledTest-NodeC-46553, physical addresses are [127.0.0.1:8350]
2013-01-31 13:15:56,518 DEBUG (testng-FlagsEnabledTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] Waiting on view being accepted
2013-01-31 13:15:56,529 DEBUG (testng-LocalKeyAffinityServiceTest) [org.infinispan.affinity.LocalKeyAffinityServiceTest] Cache managers created, ready to start the test
2013-01-31 13:15:56,530 INFO  (testng-LocalKeyAffinityServiceTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testFilteredSingleKey(org.infinispan.affinity.LocalKeyAffinityServiceTest)
2013-01-31 13:15:56,578 DEBUG (testng-WithClassLoaderTest) [org.jgroups.blocks.TCPConnectionMap] connection table is not running, discarding message to 127.0.0.1:8501
2013-01-31 13:15:56,582 DEBUG (testng-WithClassLoaderTest) [org.infinispan.test.fwk.TEST_PING] Stop discovery for WithClassLoaderTest-NodeA-49015
2013-01-31 13:15:56,582 DEBUG (testng-WithClassLoaderTest) [org.jgroups.protocols.TCP] closing sockets and stopping threads
2013-01-31 13:15:56,581 WARN  (testng-FlagsEnabledTest) [org.infinispan.config.ConfigurationValidatingVisitor] ISPN000149: Fetch persistent state and purge on startup are both disabled, cache may contain stale entries on startup
2013-01-31 13:15:56,586 WARN  (testng-FlagsEnabledTest) [org.infinispan.config.ConfigurationValidatingVisitor] ISPN000149: Fetch persistent state and purge on startup are both disabled, cache may contain stale entries on startup
2013-01-31 13:15:56,588 DEBUG (testng-FlagsEnabledTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Trying to lookup TransactionManager for JBoss AS 7
2013-01-31 13:15:56,588 DEBUG (testng-FlagsEnabledTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Failed to perform a lookup for [java:jboss/TransactionManager (JBoss AS 7)]
2013-01-31 13:15:56,588 DEBUG (testng-FlagsEnabledTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Trying to lookup TransactionManager for JBoss AS 4 ~ 6, JRun4
2013-01-31 13:15:56,588 DEBUG (testng-FlagsEnabledTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Failed to perform a lookup for [java:/TransactionManager (JBoss AS 4 ~ 6, JRun4)]
2013-01-31 13:15:56,588 DEBUG (testng-FlagsEnabledTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Trying to lookup TransactionManager for Resin 3.x
2013-01-31 13:15:56,588 DEBUG (testng-FlagsEnabledTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Failed to perform a lookup for [java:comp/TransactionManager (Resin 3.x)]
2013-01-31 13:15:56,588 DEBUG (testng-FlagsEnabledTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Trying to lookup TransactionManager for Sun Glassfish
2013-01-31 13:15:56,588 DEBUG (testng-FlagsEnabledTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Failed to perform a lookup for [java:appserver/TransactionManager (Sun Glassfish)]
2013-01-31 13:15:56,588 DEBUG (testng-FlagsEnabledTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Trying to lookup TransactionManager for Borland, Sun
2013-01-31 13:15:56,588 DEBUG (testng-FlagsEnabledTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Failed to perform a lookup for [java:pm/TransactionManager (Borland, Sun)]
2013-01-31 13:15:56,588 DEBUG (testng-FlagsEnabledTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Trying to lookup TransactionManager for BEA WebLogic
2013-01-31 13:15:56,588 DEBUG (testng-FlagsEnabledTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Failed to perform a lookup for [javax.transaction.TransactionManager (BEA WebLogic)]
2013-01-31 13:15:56,588 DEBUG (testng-FlagsEnabledTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Trying to lookup TransactionManager for Resin, Orion, JOnAS (JOTM)
2013-01-31 13:15:56,588 DEBUG (testng-FlagsEnabledTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Failed to perform a lookup for [java:comp/UserTransaction (Resin, Orion, JOnAS (JOTM))]
2013-01-31 13:15:56,589 DEBUG (testng-FlagsEnabledTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Trying WebSphere 5.1: com.ibm.ws.Transaction.TransactionManagerFactory
2013-01-31 13:15:56,596 DEBUG (Incoming-1,ISPN,ClusteredAPITest-NodeA-6271) [org.jgroups.protocols.pbcast.NAKACK2] 
[ClusteredAPITest-NodeA-6271 setDigest()]
existing digest:  ClusteredAPITest-NodeA-6271: [1 (1)]
new digest:       ClusteredAPITest-NodeA-6271: [0 (0)], ClusteredAPITest-NodeB-60625: [0 (0)]
resulting digest: ClusteredAPITest-NodeB-60625: [0 (0)], ClusteredAPITest-NodeA-6271: [1 (1)]
2013-01-31 13:15:56,597 DEBUG (Incoming-1,ISPN,ClusteredAPITest-NodeA-6271) [org.jgroups.protocols.pbcast.GMS] ClusteredAPITest-NodeA-6271: installing view [ClusteredAPITest-NodeA-6271|1] [ClusteredAPITest-NodeA-6271, ClusteredAPITest-NodeB-60625]
2013-01-31 13:15:56,603 INFO  (testng-WithClassLoaderTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000082: Stopping the RpcDispatcher
2013-01-31 13:15:56,604 DEBUG (testng-WithClassLoaderTest) [org.infinispan.manager.DefaultCacheManager] Stopping cache manager ISPN on WithClassLoaderTest-NodeB-54564
2013-01-31 13:15:56,604 WARN  (testng-FineGrainedAtomicMapAPITest) [org.jgroups.stack.Configurator] [JGRP00013] TP.discard_incompatible_packets has been deprecated: incompatible packets are discarded anyway
2013-01-31 13:15:56,609 DEBUG (testng-FlagsEnabledTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Trying WebSphere 5.0: com.ibm.ejs.jts.jta.TransactionManagerFactory
2013-01-31 13:15:56,610 DEBUG (testng-FlagsEnabledTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Trying WebSphere 4: com.ibm.ejs.jts.jta.JTSXA
2013-01-31 13:15:56,611 DEBUG (testng-FlagsEnabledTest) [org.infinispan.transaction.lookup.GenericTransactionManagerLookup] Couldn't find any WebSphere TransactionManager factory class, neither for WebSphere version 5.1 nor 5.0 nor 4
2013-01-31 13:15:56,611 INFO  (testng-FlagsEnabledTest) [org.infinispan.transaction.lookup.JBossStandaloneJTAManagerLookup] ISPN000107: Retrieving transaction manager Transaction: unknown
2013-01-31 13:15:56,604 DEBUG (testng-WithClassLoaderTest) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on WithClassLoaderTest-NodeB-54564
2013-01-31 13:15:56,616 DEBUG (Incoming-1,ISPN,ClusteredAPITest-NodeA-6271) [org.jgroups.protocols.pbcast.STABLE] [ergonomics] setting max_bytes to 800KB (2 members)
2013-01-31 13:15:56,616 DEBUG (Incoming-1,ISPN,ClusteredAPITest-NodeA-6271) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] New view accepted: [ClusteredAPITest-NodeA-6271|1] [ClusteredAPITest-NodeA-6271, ClusteredAPITest-NodeB-60625]
2013-01-31 13:15:56,616 INFO  (Incoming-1,ISPN,ClusteredAPITest-NodeA-6271) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000094: Received new cluster view: [ClusteredAPITest-NodeA-6271|1] [ClusteredAPITest-NodeA-6271, ClusteredAPITest-NodeB-60625]
2013-01-31 13:15:56,620 DEBUG (CacheViewTrigger,WithClassLoaderTest-NodeB-54564) [org.infinispan.cacheviews.CacheViewsManagerImpl] Node WithClassLoaderTest-NodeB-54564 is the new coordinator, recovering cache views
2013-01-31 13:15:56,620 DEBUG (testng-ClusteredAPITest) [org.jgroups.protocols.pbcast.NAKACK2] 
[ClusteredAPITest-NodeB-60625 setDigest()]
existing digest:  []
new digest:       ClusteredAPITest-NodeA-6271: [0 (0)], ClusteredAPITest-NodeB-60625: [0 (0)]
resulting digest: ClusteredAPITest-NodeB-60625: [0 (0)], ClusteredAPITest-NodeA-6271: [0 (0)]
2013-01-31 13:15:56,621 DEBUG (testng-ClusteredAPITest) [org.jgroups.protocols.pbcast.GMS] ClusteredAPITest-NodeB-60625: installing view [ClusteredAPITest-NodeA-6271|1] [ClusteredAPITest-NodeA-6271, ClusteredAPITest-NodeB-60625]
2013-01-31 13:15:56,621 DEBUG (testng-ClusteredAPITest) [org.jgroups.protocols.pbcast.STABLE] [ergonomics] setting max_bytes to 800KB (2 members)
2013-01-31 13:15:56,621 DEBUG (testng-ClusteredAPITest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] New view accepted: [ClusteredAPITest-NodeA-6271|1] [ClusteredAPITest-NodeA-6271, ClusteredAPITest-NodeB-60625]
2013-01-31 13:15:56,621 INFO  (testng-ClusteredAPITest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000094: Received new cluster view: [ClusteredAPITest-NodeA-6271|1] [ClusteredAPITest-NodeA-6271, ClusteredAPITest-NodeB-60625]
2013-01-31 13:15:56,641 INFO  (testng-LocalKeyAffinityServiceTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testFilteredSingleKey(org.infinispan.affinity.LocalKeyAffinityServiceTest).
2013-01-31 13:15:56,641 DEBUG (testng-LocalKeyAffinityServiceTest) [org.infinispan.affinity.LocalKeyAffinityServiceTest] *** Test method complete; clearing contents on all caches.
2013-01-31 13:15:56,641 DEBUG (testng-LocalKeyAffinityServiceTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'dist' on a cache manager at address LocalKeyAffinityServiceTest-NodeA-40360
2013-01-31 13:15:56,641 DEBUG (testng-LocalKeyAffinityServiceTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == []
2013-01-31 13:15:56,641 DEBUG (testng-LocalKeyAffinityServiceTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:56,641 DEBUG (testng-LocalKeyAffinityServiceTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:56,641 DEBUG (testng-LocalKeyAffinityServiceTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:56,641 DEBUG (testng-LocalKeyAffinityServiceTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'dist' on a cache manager at address LocalKeyAffinityServiceTest-NodeB-61244
2013-01-31 13:15:56,642 DEBUG (testng-LocalKeyAffinityServiceTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == []
2013-01-31 13:15:56,642 DEBUG (testng-LocalKeyAffinityServiceTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:56,642 DEBUG (testng-LocalKeyAffinityServiceTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:56,642 DEBUG (testng-LocalKeyAffinityServiceTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:56,642 INFO  (testng-LocalKeyAffinityServiceTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testFilteredAddNewServer(org.infinispan.affinity.LocalKeyAffinityServiceTest)
2013-01-31 13:15:56,644 DEBUG (CacheViewTrigger,WithClassLoaderTest-NodeB-54564) [org.infinispan.cacheviews.CacheViewsManagerImpl] ___defaultcache: We don't have a pending view, ignoring rollback
2013-01-31 13:15:56,644 DEBUG (testng-LocalKeyAffinityServiceTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:56,644 DEBUG (CacheViewTrigger,WithClassLoaderTest-NodeB-54564) [org.infinispan.cacheviews.CacheViewsManagerImpl] Recovered partitions after merge for cache ___defaultcache: [CacheView{viewId=3, members=[WithClassLoaderTest-NodeB-54564]}]
2013-01-31 13:15:56,644 INFO  (testng-WithClassLoaderTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000080: Disconnecting and closing JGroups Channel
2013-01-31 13:15:56,658 DEBUG (notification-thread-78) [org.infinispan.transaction.TransactionTable] View changed, recalculating minViewId
2013-01-31 13:15:56,705 DEBUG (testng-LocalKeyAffinityServiceTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:56,706 DEBUG (testng-LocalKeyAffinityServiceTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:56,750 INFO  (testng-ClusteredAPITest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000079: Cache local address is ClusteredAPITest-NodeB-60625, physical addresses are [127.0.0.1:8551]
2013-01-31 13:15:56,751 DEBUG (testng-ClusteredAPITest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] Waiting on view being accepted
2013-01-31 13:15:56,753 INFO  (testng-ClusteredAPITest) [org.infinispan.transaction.lookup.JBossStandaloneJTAManagerLookup] ISPN000107: Retrieving transaction manager Transaction: unknown
2013-01-31 13:15:56,754 DEBUG (testng-ClusteredAPITest) [org.infinispan.configuration.cache.TransactionConfigurationBuilder] Switching to Synchronization based enlistment.
2013-01-31 13:15:56,755 DEBUG (ViewHandler,ISPN,ClusteredAPITest-NodeA-6271) [org.jgroups.protocols.pbcast.STABLE] resuming message garbage collection
2013-01-31 13:15:56,797 DEBUG (testng-FlagsEnabledTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:56,797 DEBUG (testng-FlagsEnabledTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:56,799 DEBUG (testng-FlagsEnabledTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:56,799 INFO  (testng-FlagsEnabledTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:56,801 DEBUG (testng-FlagsEnabledTest) [org.infinispan.transaction.TransactionTable] Min view id set to 0
2013-01-31 13:15:56,801 DEBUG (testng-FlagsEnabledTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 13
2013-01-31 13:15:56,801 DEBUG (testng-FlagsEnabledTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.StateTransferLockInterceptor@51aabaac, TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@1fc59c17, PB=org.infinispan.interceptors.StateTransferLockInterceptor@51aabaac}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@668aba4c}
	>> org.infinispan.interceptors.TxInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@1dcd082c}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@7fd38ffc, PB=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@7fd38ffc}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.VersionedEntryWrappingInterceptor@1a922af4, TO=org.infinispan.interceptors.totalorder.TotalOrderVersionedEntryWrappingInterceptor@724206cc, PB=org.infinispan.interceptors.VersionedEntryWrappingInterceptor@1a922af4}
	>> org.infinispan.interceptors.ClusteredCacheLoaderInterceptor
	>> org.infinispan.interceptors.CacheStoreInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.VersionedReplicationInterceptor@4ccc75ae, TO=org.infinispan.interceptors.totalorder.TotalOrderVersionedReplicationInterceptor@34219e6, PB=org.infinispan.interceptors.VersionedReplicationInterceptor@4ccc75ae}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:56,803 DEBUG (testng-WithClassLoaderTest) [org.infinispan.test.fwk.TEST_PING] Stop discovery for WithClassLoaderTest-NodeB-54564
2013-01-31 13:15:56,803 DEBUG (testng-WithClassLoaderTest) [org.jgroups.protocols.TCP] closing sockets and stopping threads
2013-01-31 13:15:56,804 INFO  (testng-WithClassLoaderTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000082: Stopping the RpcDispatcher
2013-01-31 13:15:56,809 DEBUG (testng-CustomInterceptorInjectionTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:56,820 DEBUG (testng-CustomInterceptorInjectionTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:56,820 DEBUG (testng-CustomInterceptorInjectionTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:56,822 DEBUG (testng-FlagsEnabledTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Setting configuration tunned parameters
2013-01-31 13:15:56,822 DEBUG (testng-FlagsEnabledTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Configuration State responses are {}
2013-01-31 13:15:56,822 DEBUG (testng-FlagsEnabledTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] No Configuration State found in cluster
2013-01-31 13:15:56,822 DEBUG (testng-FlagsEnabledTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] No State found. Using original configuration parameters
2013-01-31 13:15:56,822 DEBUG (testng-FlagsEnabledTest) [org.infinispan.cacheviews.CacheViewsManagerImpl] replication: Node FlagsEnabledTest-NodeC-46553 is joining
2013-01-31 13:15:56,824 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.jgroups.stack.Configurator] set property TCP.diagnostics_addr to default value /224.0.75.75
2013-01-31 13:15:56,832 DEBUG (CacheViewInstaller-1,FlagsEnabledTest-NodeC-46553) [org.infinispan.cacheviews.CacheViewsManagerImpl] Installing new view CacheView{viewId=1, members=[FlagsEnabledTest-NodeC-46553]} for cache replication
2013-01-31 13:15:56,833 WARN  (CacheViewInstaller-1,FlagsEnabledTest-NodeC-46553) [org.infinispan.configuration.cache.LoaderConfigurationBuilder] ISPN000149: Fetch persistent state and purge on startup are both disabled, cache may contain stale entries on startup
2013-01-31 13:15:56,833 WARN  (CacheViewInstaller-1,FlagsEnabledTest-NodeC-46553) [org.infinispan.configuration.cache.LoaderConfigurationBuilder] ISPN000149: Fetch persistent state and purge on startup are both disabled, cache may contain stale entries on startup
2013-01-31 13:15:56,843 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.jgroups.protocols.FRAG2] received CONFIG event: {bind_addr=/127.0.0.1}
2013-01-31 13:15:56,844 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.jgroups.protocols.pbcast.GMS] address=FineGrainedAtomicMapAPITest-NodeB-28700, cluster=ISPN, physical address=127.0.0.1:8601
2013-01-31 13:15:56,844 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.jgroups.protocols.pbcast.GMS] election results: {FineGrainedAtomicMapAPITest-NodeA-36196=1}
2013-01-31 13:15:56,844 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.jgroups.protocols.pbcast.GMS] sending JOIN(FineGrainedAtomicMapAPITest-NodeB-28700) to FineGrainedAtomicMapAPITest-NodeA-36196
2013-01-31 13:15:56,846 WARN  (transport-thread-81) [org.infinispan.configuration.cache.LoaderConfigurationBuilder] ISPN000149: Fetch persistent state and purge on startup are both disabled, cache may contain stale entries on startup
2013-01-31 13:15:56,846 WARN  (transport-thread-81) [org.infinispan.configuration.cache.LoaderConfigurationBuilder] ISPN000149: Fetch persistent state and purge on startup are both disabled, cache may contain stale entries on startup
2013-01-31 13:15:56,859 DEBUG (transport-thread-81) [org.infinispan.distribution.ch.DefaultConsistentHash] Using 1 virtualNodes to initialize consistent hash wheel 
2013-01-31 13:15:56,859 DEBUG (transport-thread-81) [org.infinispan.statetransfer.ReplicatedStateTransferTask] Commencing state transfer 1 on node: FlagsEnabledTest-NodeC-46553. Before start, data container had 0 entries
2013-01-31 13:15:56,859 DEBUG (transport-thread-81) [org.infinispan.statetransfer.StateTransferLockImpl] Blocking new write commands for cache view 1
2013-01-31 13:15:56,859 DEBUG (CacheViewInstaller-1,FlagsEnabledTest-NodeC-46553) [org.infinispan.cacheviews.CacheViewsManagerImpl] replication: Committing cache view CacheView{viewId=1, members=[FlagsEnabledTest-NodeC-46553]}
2013-01-31 13:15:56,859 DEBUG (CacheViewInstaller-1,FlagsEnabledTest-NodeC-46553) [org.infinispan.statetransfer.BaseStateTransferTask] Node FlagsEnabledTest-NodeC-46553 completed state transfer for view 1 in 0 milliseconds!
2013-01-31 13:15:56,859 DEBUG (CacheViewInstaller-1,FlagsEnabledTest-NodeC-46553) [org.infinispan.statetransfer.StateTransferLockImpl] Unblocking write commands for cache view 1
2013-01-31 13:15:56,859 DEBUG (CacheViewInstaller-1,FlagsEnabledTest-NodeC-46553) [org.infinispan.cacheviews.CacheViewsManagerImpl] Successfully installed view CacheView{viewId=1, members=[FlagsEnabledTest-NodeC-46553]} for cache replication
2013-01-31 13:15:56,865 DEBUG (testng-FlagsEnabledTest) [org.infinispan.CacheImpl] Started cache replication on FlagsEnabledTest-NodeC-46553
2013-01-31 13:15:56,867 DEBUG (testng-FlagsEnabledTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:56,873 DEBUG (testng-FlagsEnabledTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:56,874 DEBUG (testng-FlagsEnabledTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:56,893 WARN  (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.jgroups.stack.Configurator] [JGRP00013] TP.discard_incompatible_packets has been deprecated: incompatible packets are discarded anyway
2013-01-31 13:15:57,005 DEBUG (testng-ClusteredAPITest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:57,006 DEBUG (testng-ClusteredAPITest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:57,063 DEBUG (ViewHandler,ISPN,FineGrainedAtomicMapAPITest-NodeA-36196) [org.jgroups.protocols.pbcast.STABLE] suspending message garbage collection
2013-01-31 13:15:57,063 DEBUG (ViewHandler,ISPN,FineGrainedAtomicMapAPITest-NodeA-36196) [org.jgroups.protocols.pbcast.STABLE] resume task started, max_suspend_time=33000
2013-01-31 13:15:57,079 DEBUG (testng-ClusteredAPITest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:57,080 INFO  (testng-ClusteredAPITest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:57,081 DEBUG (testng-ClusteredAPITest) [org.infinispan.transaction.TransactionTable] Min view id set to 1
2013-01-31 13:15:57,081 DEBUG (testng-ClusteredAPITest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 12
2013-01-31 13:15:57,081 DEBUG (testng-ClusteredAPITest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.BatchingInterceptor
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.StateTransferLockInterceptor@3b06e6f2, TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@42243824, PB=org.infinispan.interceptors.StateTransferLockInterceptor@3b06e6f2}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@57e1e568}
	>> org.infinispan.interceptors.TxInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@2f9c3beb}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@3a21d9b8, PB=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@3a21d9b8}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@45cdcd9, TO=org.infinispan.interceptors.EntryWrappingInterceptor@45cdcd9, PB=org.infinispan.interceptors.EntryWrappingInterceptor@45cdcd9}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.ReplicationInterceptor@6ca72ccb, TO=org.infinispan.interceptors.totalorder.TotalOrderReplicationInterceptor@536dfb27, PB=org.infinispan.interceptors.ReplicationInterceptor@6ca72ccb}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:57,086 DEBUG (Incoming-1,ISPN,FineGrainedAtomicMapAPITest-NodeA-36196) [org.jgroups.protocols.pbcast.NAKACK2] 
[FineGrainedAtomicMapAPITest-NodeA-36196 setDigest()]
existing digest:  FineGrainedAtomicMapAPITest-NodeA-36196: [1 (1)]
new digest:       FineGrainedAtomicMapAPITest-NodeA-36196: [0 (0)], FineGrainedAtomicMapAPITest-NodeB-28700: [0 (0)]
resulting digest: FineGrainedAtomicMapAPITest-NodeB-28700: [0 (0)], FineGrainedAtomicMapAPITest-NodeA-36196: [1 (1)]
2013-01-31 13:15:57,086 DEBUG (Incoming-1,ISPN,FineGrainedAtomicMapAPITest-NodeA-36196) [org.jgroups.protocols.pbcast.GMS] FineGrainedAtomicMapAPITest-NodeA-36196: installing view [FineGrainedAtomicMapAPITest-NodeA-36196|1] [FineGrainedAtomicMapAPITest-NodeA-36196, FineGrainedAtomicMapAPITest-NodeB-28700]
2013-01-31 13:15:57,090 DEBUG (Incoming-1,ISPN,FineGrainedAtomicMapAPITest-NodeA-36196) [org.jgroups.protocols.pbcast.STABLE] [ergonomics] setting max_bytes to 800KB (2 members)
2013-01-31 13:15:57,094 DEBUG (Incoming-1,ISPN,FineGrainedAtomicMapAPITest-NodeA-36196) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] New view accepted: [FineGrainedAtomicMapAPITest-NodeA-36196|1] [FineGrainedAtomicMapAPITest-NodeA-36196, FineGrainedAtomicMapAPITest-NodeB-28700]
2013-01-31 13:15:57,094 INFO  (Incoming-1,ISPN,FineGrainedAtomicMapAPITest-NodeA-36196) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000094: Received new cluster view: [FineGrainedAtomicMapAPITest-NodeA-36196|1] [FineGrainedAtomicMapAPITest-NodeA-36196, FineGrainedAtomicMapAPITest-NodeB-28700]
2013-01-31 13:15:57,095 DEBUG (testng-ClusteredAPITest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Setting configuration tunned parameters
2013-01-31 13:15:57,098 DEBUG (notification-thread-82) [org.infinispan.transaction.TransactionTable] View changed, recalculating minViewId
2013-01-31 13:15:57,125 DEBUG (testng-ClusteredAPITest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Configuration State responses are {ClusteredAPITest-NodeA-6271=SuccessfulResponse{responseValue=ConfigurationState{numberOfOwners=0, protocolName='2PC', epoch=0}} }
2013-01-31 13:15:57,125 DEBUG (testng-ClusteredAPITest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Configuration State found: ConfigurationState{numberOfOwners=0, protocolName='2PC', epoch=0}
2013-01-31 13:15:57,125 DEBUG (testng-ClusteredAPITest) [org.infinispan.cacheviews.CacheViewsManagerImpl] atomic: Node ClusteredAPITest-NodeB-60625 is joining
2013-01-31 13:15:57,127 DEBUG (OOB-1,ISPN,ClusteredAPITest-NodeA-6271) [org.infinispan.cacheviews.CacheViewsManagerImpl] atomic: Node ClusteredAPITest-NodeB-60625 is joining
2013-01-31 13:15:57,128 DEBUG (CacheViewInstaller-1,ClusteredAPITest-NodeA-6271) [org.infinispan.cacheviews.CacheViewsManagerImpl] Installing new view CacheView{viewId=2, members=[ClusteredAPITest-NodeA-6271, ClusteredAPITest-NodeB-60625]} for cache atomic
2013-01-31 13:15:57,128 DEBUG (CacheViewInstaller-1,ClusteredAPITest-NodeA-6271) [org.infinispan.configuration.cache.TransactionConfigurationBuilder] Switching to Synchronization based enlistment.
2013-01-31 13:15:57,129 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.jgroups.protocols.pbcast.NAKACK2] 
[FineGrainedAtomicMapAPITest-NodeB-28700 setDigest()]
existing digest:  []
new digest:       FineGrainedAtomicMapAPITest-NodeA-36196: [0 (0)], FineGrainedAtomicMapAPITest-NodeB-28700: [0 (0)]
resulting digest: FineGrainedAtomicMapAPITest-NodeB-28700: [0 (0)], FineGrainedAtomicMapAPITest-NodeA-36196: [0 (0)]
2013-01-31 13:15:57,129 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.jgroups.protocols.pbcast.GMS] FineGrainedAtomicMapAPITest-NodeB-28700: installing view [FineGrainedAtomicMapAPITest-NodeA-36196|1] [FineGrainedAtomicMapAPITest-NodeA-36196, FineGrainedAtomicMapAPITest-NodeB-28700]
2013-01-31 13:15:57,130 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.jgroups.protocols.pbcast.STABLE] [ergonomics] setting max_bytes to 800KB (2 members)
2013-01-31 13:15:57,130 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] New view accepted: [FineGrainedAtomicMapAPITest-NodeA-36196|1] [FineGrainedAtomicMapAPITest-NodeA-36196, FineGrainedAtomicMapAPITest-NodeB-28700]
2013-01-31 13:15:57,130 INFO  (testng-FineGrainedAtomicMapAPITest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000094: Received new cluster view: [FineGrainedAtomicMapAPITest-NodeA-36196|1] [FineGrainedAtomicMapAPITest-NodeA-36196, FineGrainedAtomicMapAPITest-NodeB-28700]
2013-01-31 13:15:57,145 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.jgroups.stack.Configurator] set property TCP.diagnostics_addr to default value /224.0.75.75
2013-01-31 13:15:57,194 DEBUG (transport-thread-84) [org.infinispan.configuration.cache.TransactionConfigurationBuilder] Switching to Synchronization based enlistment.
2013-01-31 13:15:57,221 DEBUG (transport-thread-84) [org.infinispan.distribution.ch.DefaultConsistentHash] Using 1 virtualNodes to initialize consistent hash wheel 
2013-01-31 13:15:57,222 DEBUG (transport-thread-84) [org.infinispan.statetransfer.ReplicatedStateTransferTask] Commencing state transfer 2 on node: ClusteredAPITest-NodeA-6271. Before start, data container had 0 entries
2013-01-31 13:15:57,222 DEBUG (transport-thread-84) [org.infinispan.statetransfer.StateTransferLockImpl] Blocking new write commands for cache view 2
2013-01-31 13:15:57,222 DEBUG (OOB-2,ISPN,ClusteredAPITest-NodeB-60625) [org.infinispan.configuration.cache.TransactionConfigurationBuilder] Switching to Synchronization based enlistment.
2013-01-31 13:15:57,223 DEBUG (OOB-2,ISPN,ClusteredAPITest-NodeB-60625) [org.infinispan.distribution.ch.DefaultConsistentHash] Using 1 virtualNodes to initialize consistent hash wheel 
2013-01-31 13:15:57,223 DEBUG (OOB-2,ISPN,ClusteredAPITest-NodeB-60625) [org.infinispan.statetransfer.ReplicatedStateTransferTask] Commencing state transfer 2 on node: ClusteredAPITest-NodeB-60625. Before start, data container had 0 entries
2013-01-31 13:15:57,223 DEBUG (OOB-2,ISPN,ClusteredAPITest-NodeB-60625) [org.infinispan.statetransfer.StateTransferLockImpl] Blocking new write commands for cache view 2
2013-01-31 13:15:57,236 DEBUG (OOB-2,ISPN,ClusteredAPITest-NodeB-60625) [org.infinispan.cacheviews.CacheViewsManagerImpl] atomic: Committing cache view CacheView{viewId=2, members=[ClusteredAPITest-NodeA-6271, ClusteredAPITest-NodeB-60625]}
2013-01-31 13:15:57,236 DEBUG (OOB-2,ISPN,ClusteredAPITest-NodeB-60625) [org.infinispan.statetransfer.BaseStateTransferTask] Node ClusteredAPITest-NodeB-60625 completed state transfer for view 2 in 13 milliseconds!
2013-01-31 13:15:57,236 DEBUG (OOB-2,ISPN,ClusteredAPITest-NodeB-60625) [org.infinispan.statetransfer.StateTransferLockImpl] Unblocking write commands for cache view 2
2013-01-31 13:15:57,237 DEBUG (testng-ClusteredAPITest) [org.infinispan.CacheImpl] Started cache atomic on ClusteredAPITest-NodeB-60625
2013-01-31 13:15:57,238 DEBUG (CacheViewInstaller-1,ClusteredAPITest-NodeA-6271) [org.infinispan.cacheviews.CacheViewsManagerImpl] atomic: Committing cache view CacheView{viewId=2, members=[ClusteredAPITest-NodeA-6271, ClusteredAPITest-NodeB-60625]}
2013-01-31 13:15:57,240 DEBUG (CacheViewInstaller-1,ClusteredAPITest-NodeA-6271) [org.infinispan.statetransfer.BaseStateTransferTask] Node ClusteredAPITest-NodeA-6271 completed state transfer for view 2 in 16 milliseconds!
2013-01-31 13:15:57,240 DEBUG (CacheViewInstaller-1,ClusteredAPITest-NodeA-6271) [org.infinispan.statetransfer.StateTransferLockImpl] Unblocking write commands for cache view 2
2013-01-31 13:15:57,240 DEBUG (CacheViewInstaller-1,ClusteredAPITest-NodeA-6271) [org.infinispan.cacheviews.CacheViewsManagerImpl] Successfully installed view CacheView{viewId=2, members=[ClusteredAPITest-NodeA-6271, ClusteredAPITest-NodeB-60625]} for cache atomic
2013-01-31 13:15:57,242 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.jgroups.protocols.FRAG2] received CONFIG event: {bind_addr=/127.0.0.1}
2013-01-31 13:15:57,263 WARN  (testng-KeyAffinityServiceShutdownTest) [org.jgroups.stack.Configurator] [JGRP00013] TP.discard_incompatible_packets has been deprecated: incompatible packets are discarded anyway
2013-01-31 13:15:57,283 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.jgroups.protocols.pbcast.GMS] address=RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745, cluster=ISPN, physical address=127.0.0.1:8651
2013-01-31 13:15:57,289 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.jgroups.protocols.pbcast.GMS] election results: {RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358=1}
2013-01-31 13:15:57,289 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.jgroups.protocols.pbcast.GMS] sending JOIN(RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) to RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358
2013-01-31 13:15:57,328 DEBUG (ViewHandler,ISPN,FineGrainedAtomicMapAPITest-NodeA-36196) [org.jgroups.protocols.pbcast.STABLE] resuming message garbage collection
2013-01-31 13:15:57,341 DEBUG (testng-ClusteredAPITest) [org.infinispan.atomic.ClusteredAPITest] Cache managers created, ready to start the test
2013-01-31 13:15:57,341 INFO  (testng-ClusteredAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testMultipleReplicationCommit(org.infinispan.atomic.ClusteredAPITest)
2013-01-31 13:15:57,342 DEBUG (testng-ClusteredAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ClusteredAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:496 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:57,342 DEBUG (testng-ClusteredAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-ClusteredAPITest] will wait until no switch is in progress
2013-01-31 13:15:57,342 DEBUG (testng-ClusteredAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-ClusteredAPITest] no switch in progress. Moving on...
2013-01-31 13:15:57,342 DEBUG (testng-ClusteredAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ClusteredAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:496 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:57,342 DEBUG (testng-ClusteredAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ClusteredAPITest] local transaction ClusteredAPITest-NodeA-6271:352 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:496 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:57,342 DEBUG (testng-ClusteredAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ClusteredAPITest] local transaction ClusteredAPITest-NodeA-6271:352 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:57,347 DEBUG (OOB-2,ISPN,ClusteredAPITest-NodeB-60625) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [OOB-2,ISPN,ClusteredAPITest-NodeB-60625] remote transaction ClusteredAPITest-NodeA-6271:352 received. Epoch is 0 (current epoch is 0) and protocol ID is 2PC
2013-01-31 13:15:57,347 DEBUG (OOB-2,ISPN,ClusteredAPITest-NodeB-60625) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-2,ISPN,ClusteredAPITest-NodeB-60625] will block until 0 >= 0
2013-01-31 13:15:57,347 DEBUG (OOB-2,ISPN,ClusteredAPITest-NodeB-60625) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-2,ISPN,ClusteredAPITest-NodeB-60625] epoch is the desired. Moving on...
2013-01-31 13:15:57,348 INFO  (testng-FineGrainedAtomicMapAPITest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000079: Cache local address is FineGrainedAtomicMapAPITest-NodeB-28700, physical addresses are [127.0.0.1:8601]
2013-01-31 13:15:57,348 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] Waiting on view being accepted
2013-01-31 13:15:57,348 DEBUG (OOB-2,ISPN,ClusteredAPITest-NodeB-60625) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [OOB-2,ISPN,ClusteredAPITest-NodeB-60625] remote transaction ClusteredAPITest-NodeA-6271:352 received. Epoch is 0 (current epoch is 0) and protocol ID is 2PC
2013-01-31 13:15:57,348 DEBUG (OOB-2,ISPN,ClusteredAPITest-NodeB-60625) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-2,ISPN,ClusteredAPITest-NodeB-60625] will block until 0 >= 0
2013-01-31 13:15:57,348 DEBUG (OOB-2,ISPN,ClusteredAPITest-NodeB-60625) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-2,ISPN,ClusteredAPITest-NodeB-60625] epoch is the desired. Moving on...
2013-01-31 13:15:57,349 DEBUG (testng-ClusteredAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ClusteredAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:49a status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:57,349 DEBUG (testng-ClusteredAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-ClusteredAPITest] will wait until no switch is in progress
2013-01-31 13:15:57,349 DEBUG (testng-ClusteredAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-ClusteredAPITest] no switch in progress. Moving on...
2013-01-31 13:15:57,349 DEBUG (testng-ClusteredAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ClusteredAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:49a status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:57,349 DEBUG (testng-ClusteredAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ClusteredAPITest] local transaction ClusteredAPITest-NodeA-6271:353 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:49a status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:57,349 DEBUG (testng-ClusteredAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ClusteredAPITest] local transaction ClusteredAPITest-NodeA-6271:353 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:57,351 DEBUG (OOB-1,ISPN,ClusteredAPITest-NodeB-60625) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [OOB-1,ISPN,ClusteredAPITest-NodeB-60625] remote transaction ClusteredAPITest-NodeA-6271:353 received. Epoch is 0 (current epoch is 0) and protocol ID is 2PC
2013-01-31 13:15:57,351 DEBUG (OOB-1,ISPN,ClusteredAPITest-NodeB-60625) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,ClusteredAPITest-NodeB-60625] will block until 0 >= 0
2013-01-31 13:15:57,351 DEBUG (OOB-1,ISPN,ClusteredAPITest-NodeB-60625) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,ClusteredAPITest-NodeB-60625] epoch is the desired. Moving on...
2013-01-31 13:15:57,354 DEBUG (OOB-1,ISPN,ClusteredAPITest-NodeB-60625) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [OOB-1,ISPN,ClusteredAPITest-NodeB-60625] remote transaction ClusteredAPITest-NodeA-6271:353 received. Epoch is 0 (current epoch is 0) and protocol ID is 2PC
2013-01-31 13:15:57,354 DEBUG (OOB-1,ISPN,ClusteredAPITest-NodeB-60625) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,ClusteredAPITest-NodeB-60625] will block until 0 >= 0
2013-01-31 13:15:57,354 DEBUG (OOB-1,ISPN,ClusteredAPITest-NodeB-60625) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,ClusteredAPITest-NodeB-60625] epoch is the desired. Moving on...
2013-01-31 13:15:57,357 INFO  (testng-FineGrainedAtomicMapAPITest) [org.infinispan.transaction.lookup.JBossStandaloneJTAManagerLookup] ISPN000107: Retrieving transaction manager Transaction: unknown
2013-01-31 13:15:57,360 DEBUG (testng-ClusteredAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ClusteredAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:49e status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:57,360 DEBUG (testng-ClusteredAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-ClusteredAPITest] will wait until no switch is in progress
2013-01-31 13:15:57,361 DEBUG (testng-ClusteredAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-ClusteredAPITest] no switch in progress. Moving on...
2013-01-31 13:15:57,361 DEBUG (testng-ClusteredAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ClusteredAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:49e status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:57,361 DEBUG (testng-ClusteredAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ClusteredAPITest] local transaction ClusteredAPITest-NodeA-6271:354 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:49e status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:57,361 DEBUG (testng-ClusteredAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ClusteredAPITest] local transaction ClusteredAPITest-NodeA-6271:354 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:57,362 DEBUG (OOB-2,ISPN,ClusteredAPITest-NodeB-60625) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [OOB-2,ISPN,ClusteredAPITest-NodeB-60625] remote transaction ClusteredAPITest-NodeA-6271:354 received. Epoch is 0 (current epoch is 0) and protocol ID is 2PC
2013-01-31 13:15:57,362 DEBUG (OOB-2,ISPN,ClusteredAPITest-NodeB-60625) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-2,ISPN,ClusteredAPITest-NodeB-60625] will block until 0 >= 0
2013-01-31 13:15:57,362 DEBUG (OOB-2,ISPN,ClusteredAPITest-NodeB-60625) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-2,ISPN,ClusteredAPITest-NodeB-60625] epoch is the desired. Moving on...
2013-01-31 13:15:57,364 DEBUG (OOB-1,ISPN,ClusteredAPITest-NodeB-60625) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [OOB-1,ISPN,ClusteredAPITest-NodeB-60625] remote transaction ClusteredAPITest-NodeA-6271:354 received. Epoch is 0 (current epoch is 0) and protocol ID is 2PC
2013-01-31 13:15:57,364 DEBUG (OOB-1,ISPN,ClusteredAPITest-NodeB-60625) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,ClusteredAPITest-NodeB-60625] will block until 0 >= 0
2013-01-31 13:15:57,364 DEBUG (OOB-1,ISPN,ClusteredAPITest-NodeB-60625) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,ClusteredAPITest-NodeB-60625] epoch is the desired. Moving on...
2013-01-31 13:15:57,368 INFO  (testng-ClusteredAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testMultipleReplicationCommit(org.infinispan.atomic.ClusteredAPITest).
2013-01-31 13:15:57,370 DEBUG (testng-ClusteredAPITest) [org.infinispan.atomic.ClusteredAPITest] *** Test method complete; clearing contents on all caches.
2013-01-31 13:15:57,370 DEBUG (testng-ClusteredAPITest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'atomic' on a cache manager at address ClusteredAPITest-NodeA-6271
2013-01-31 13:15:57,370 DEBUG (testng-ClusteredAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [map=AtomicHashMap]
2013-01-31 13:15:57,370 DEBUG (testng-ClusteredAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:57,370 DEBUG (testng-ClusteredAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:57,370 DEBUG (testng-ClusteredAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:57,370 DEBUG (testng-ClusteredAPITest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'atomic' on a cache manager at address ClusteredAPITest-NodeB-60625
2013-01-31 13:15:57,370 DEBUG (testng-ClusteredAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [map=AtomicHashMap]
2013-01-31 13:15:57,370 DEBUG (testng-ClusteredAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:57,370 DEBUG (testng-ClusteredAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:57,370 DEBUG (testng-ClusteredAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:57,371 INFO  (testng-ClusteredAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testReplicationCommit(org.infinispan.atomic.ClusteredAPITest)
2013-01-31 13:15:57,372 DEBUG (testng-ClusteredAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ClusteredAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:4a2 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:57,372 DEBUG (testng-ClusteredAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-ClusteredAPITest] will wait until no switch is in progress
2013-01-31 13:15:57,372 DEBUG (testng-ClusteredAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-ClusteredAPITest] no switch in progress. Moving on...
2013-01-31 13:15:57,372 DEBUG (testng-ClusteredAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ClusteredAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:4a2 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:57,372 DEBUG (testng-ClusteredAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ClusteredAPITest] local transaction ClusteredAPITest-NodeA-6271:355 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:4a2 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:57,372 DEBUG (testng-ClusteredAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ClusteredAPITest] local transaction ClusteredAPITest-NodeA-6271:355 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:57,374 DEBUG (OOB-2,ISPN,ClusteredAPITest-NodeB-60625) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [OOB-2,ISPN,ClusteredAPITest-NodeB-60625] remote transaction ClusteredAPITest-NodeA-6271:355 received. Epoch is 0 (current epoch is 0) and protocol ID is 2PC
2013-01-31 13:15:57,375 DEBUG (OOB-2,ISPN,ClusteredAPITest-NodeB-60625) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-2,ISPN,ClusteredAPITest-NodeB-60625] will block until 0 >= 0
2013-01-31 13:15:57,375 DEBUG (OOB-2,ISPN,ClusteredAPITest-NodeB-60625) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-2,ISPN,ClusteredAPITest-NodeB-60625] epoch is the desired. Moving on...
2013-01-31 13:15:57,441 DEBUG (ViewHandler,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358) [org.jgroups.protocols.pbcast.STABLE] suspending message garbage collection
2013-01-31 13:15:57,442 DEBUG (ViewHandler,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358) [org.jgroups.protocols.pbcast.STABLE] resume task started, max_suspend_time=33000
2013-01-31 13:15:57,446 DEBUG (Incoming-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358) [org.jgroups.protocols.pbcast.NAKACK2] 
[RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358 setDigest()]
existing digest:  RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358: [1 (1)]
new digest:       RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358: [0 (0)], RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745: [0 (0)]
resulting digest: RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745: [0 (0)], RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358: [1 (1)]
2013-01-31 13:15:57,446 DEBUG (Incoming-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358) [org.jgroups.protocols.pbcast.GMS] RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358: installing view [RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358|1] [RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358, RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745]
2013-01-31 13:15:57,451 DEBUG (Incoming-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358) [org.jgroups.protocols.pbcast.STABLE] [ergonomics] setting max_bytes to 800KB (2 members)
2013-01-31 13:15:57,451 DEBUG (Incoming-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] New view accepted: [RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358|1] [RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358, RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745]
2013-01-31 13:15:57,451 INFO  (Incoming-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000094: Received new cluster view: [RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358|1] [RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358, RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745]
2013-01-31 13:15:57,454 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.jgroups.protocols.pbcast.NAKACK2] 
[RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745 setDigest()]
existing digest:  []
new digest:       RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358: [0 (0)], RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745: [0 (0)]
resulting digest: RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745: [0 (0)], RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358: [0 (0)]
2013-01-31 13:15:57,454 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.jgroups.protocols.pbcast.GMS] RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745: installing view [RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358|1] [RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358, RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745]
2013-01-31 13:15:57,454 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.jgroups.protocols.pbcast.STABLE] [ergonomics] setting max_bytes to 800KB (2 members)
2013-01-31 13:15:57,454 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] New view accepted: [RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358|1] [RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358, RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745]
2013-01-31 13:15:57,454 INFO  (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000094: Received new cluster view: [RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358|1] [RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358, RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745]
2013-01-31 13:15:57,462 INFO  (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000079: Cache local address is RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745, physical addresses are [127.0.0.1:8651]
2013-01-31 13:15:57,462 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] Waiting on view being accepted
2013-01-31 13:15:57,462 DEBUG (ViewHandler,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358) [org.jgroups.protocols.pbcast.STABLE] resuming message garbage collection
2013-01-31 13:15:57,477 DEBUG (OOB-2,ISPN,ClusteredAPITest-NodeB-60625) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [OOB-2,ISPN,ClusteredAPITest-NodeB-60625] remote transaction ClusteredAPITest-NodeA-6271:355 received. Epoch is 0 (current epoch is 0) and protocol ID is 2PC
2013-01-31 13:15:57,477 DEBUG (OOB-2,ISPN,ClusteredAPITest-NodeB-60625) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-2,ISPN,ClusteredAPITest-NodeB-60625] will block until 0 >= 0
2013-01-31 13:15:57,477 DEBUG (OOB-2,ISPN,ClusteredAPITest-NodeB-60625) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-2,ISPN,ClusteredAPITest-NodeB-60625] epoch is the desired. Moving on...
2013-01-31 13:15:57,482 DEBUG (testng-ClusteredAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ClusteredAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:4a6 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:57,482 DEBUG (testng-ClusteredAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-ClusteredAPITest] will wait until no switch is in progress
2013-01-31 13:15:57,482 DEBUG (testng-ClusteredAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-ClusteredAPITest] no switch in progress. Moving on...
2013-01-31 13:15:57,482 DEBUG (testng-ClusteredAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ClusteredAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:4a6 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:57,482 DEBUG (testng-ClusteredAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ClusteredAPITest] local transaction ClusteredAPITest-NodeA-6271:356 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:4a6 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:57,482 DEBUG (testng-ClusteredAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ClusteredAPITest] local transaction ClusteredAPITest-NodeA-6271:356 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:57,483 DEBUG (OOB-1,ISPN,ClusteredAPITest-NodeB-60625) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [OOB-1,ISPN,ClusteredAPITest-NodeB-60625] remote transaction ClusteredAPITest-NodeA-6271:356 received. Epoch is 0 (current epoch is 0) and protocol ID is 2PC
2013-01-31 13:15:57,483 DEBUG (OOB-1,ISPN,ClusteredAPITest-NodeB-60625) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,ClusteredAPITest-NodeB-60625] will block until 0 >= 0
2013-01-31 13:15:57,483 DEBUG (OOB-1,ISPN,ClusteredAPITest-NodeB-60625) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,ClusteredAPITest-NodeB-60625] epoch is the desired. Moving on...
2013-01-31 13:15:57,484 DEBUG (OOB-1,ISPN,ClusteredAPITest-NodeB-60625) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [OOB-1,ISPN,ClusteredAPITest-NodeB-60625] remote transaction ClusteredAPITest-NodeA-6271:356 received. Epoch is 0 (current epoch is 0) and protocol ID is 2PC
2013-01-31 13:15:57,485 DEBUG (OOB-1,ISPN,ClusteredAPITest-NodeB-60625) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,ClusteredAPITest-NodeB-60625] will block until 0 >= 0
2013-01-31 13:15:57,485 DEBUG (OOB-1,ISPN,ClusteredAPITest-NodeB-60625) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,ClusteredAPITest-NodeB-60625] epoch is the desired. Moving on...
2013-01-31 13:15:57,487 INFO  (testng-ClusteredAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testReplicationCommit(org.infinispan.atomic.ClusteredAPITest).
2013-01-31 13:15:57,488 DEBUG (testng-ClusteredAPITest) [org.infinispan.atomic.ClusteredAPITest] *** Test method complete; clearing contents on all caches.
2013-01-31 13:15:57,488 DEBUG (testng-ClusteredAPITest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'atomic' on a cache manager at address ClusteredAPITest-NodeA-6271
2013-01-31 13:15:57,488 DEBUG (testng-ClusteredAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [map=AtomicHashMap]
2013-01-31 13:15:57,488 DEBUG (testng-ClusteredAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:57,488 DEBUG (testng-ClusteredAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:57,488 DEBUG (testng-ClusteredAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:57,488 DEBUG (testng-ClusteredAPITest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'atomic' on a cache manager at address ClusteredAPITest-NodeB-60625
2013-01-31 13:15:57,488 DEBUG (testng-ClusteredAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [map=AtomicHashMap]
2013-01-31 13:15:57,488 DEBUG (testng-ClusteredAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:57,488 DEBUG (testng-ClusteredAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:57,488 DEBUG (testng-ClusteredAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:57,489 INFO  (testng-ClusteredAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testReplicationCommitCreateMapInTransaction(org.infinispan.atomic.ClusteredAPITest)
2013-01-31 13:15:57,489 DEBUG (testng-ClusteredAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ClusteredAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:4aa status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:57,489 DEBUG (testng-ClusteredAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-ClusteredAPITest] will wait until no switch is in progress
2013-01-31 13:15:57,489 DEBUG (testng-ClusteredAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-ClusteredAPITest] no switch in progress. Moving on...
2013-01-31 13:15:57,489 DEBUG (testng-ClusteredAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ClusteredAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:4aa status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:57,489 DEBUG (testng-ClusteredAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ClusteredAPITest] local transaction ClusteredAPITest-NodeA-6271:357 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:4aa status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:57,489 DEBUG (testng-ClusteredAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ClusteredAPITest] local transaction ClusteredAPITest-NodeA-6271:357 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:57,490 DEBUG (OOB-1,ISPN,ClusteredAPITest-NodeB-60625) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [OOB-1,ISPN,ClusteredAPITest-NodeB-60625] remote transaction ClusteredAPITest-NodeA-6271:357 received. Epoch is 0 (current epoch is 0) and protocol ID is 2PC
2013-01-31 13:15:57,490 DEBUG (OOB-1,ISPN,ClusteredAPITest-NodeB-60625) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,ClusteredAPITest-NodeB-60625] will block until 0 >= 0
2013-01-31 13:15:57,490 DEBUG (OOB-1,ISPN,ClusteredAPITest-NodeB-60625) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,ClusteredAPITest-NodeB-60625] epoch is the desired. Moving on...
2013-01-31 13:15:57,491 DEBUG (OOB-1,ISPN,ClusteredAPITest-NodeB-60625) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [OOB-1,ISPN,ClusteredAPITest-NodeB-60625] remote transaction ClusteredAPITest-NodeA-6271:357 received. Epoch is 0 (current epoch is 0) and protocol ID is 2PC
2013-01-31 13:15:57,491 DEBUG (OOB-1,ISPN,ClusteredAPITest-NodeB-60625) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,ClusteredAPITest-NodeB-60625] will block until 0 >= 0
2013-01-31 13:15:57,491 DEBUG (OOB-1,ISPN,ClusteredAPITest-NodeB-60625) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,ClusteredAPITest-NodeB-60625] epoch is the desired. Moving on...
2013-01-31 13:15:57,495 INFO  (testng-ClusteredAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testReplicationCommitCreateMapInTransaction(org.infinispan.atomic.ClusteredAPITest).
2013-01-31 13:15:57,495 DEBUG (testng-ClusteredAPITest) [org.infinispan.atomic.ClusteredAPITest] *** Test method complete; clearing contents on all caches.
2013-01-31 13:15:57,495 DEBUG (testng-ClusteredAPITest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'atomic' on a cache manager at address ClusteredAPITest-NodeA-6271
2013-01-31 13:15:57,495 DEBUG (testng-ClusteredAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [testReplicationCommitCreateMapInTransaction=AtomicHashMap]
2013-01-31 13:15:57,495 DEBUG (testng-ClusteredAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:57,495 DEBUG (testng-ClusteredAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:57,495 DEBUG (testng-ClusteredAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:57,495 DEBUG (testng-ClusteredAPITest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'atomic' on a cache manager at address ClusteredAPITest-NodeB-60625
2013-01-31 13:15:57,496 DEBUG (testng-ClusteredAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [testReplicationCommitCreateMapInTransaction=AtomicHashMap]
2013-01-31 13:15:57,496 DEBUG (testng-ClusteredAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:57,496 DEBUG (testng-ClusteredAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:57,496 DEBUG (testng-ClusteredAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:57,496 INFO  (testng-ClusteredAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testReplicationRollback(org.infinispan.atomic.ClusteredAPITest)
2013-01-31 13:15:57,496 DEBUG (testng-ClusteredAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ClusteredAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:4ae status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:57,496 DEBUG (testng-ClusteredAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-ClusteredAPITest] will wait until no switch is in progress
2013-01-31 13:15:57,496 DEBUG (testng-ClusteredAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-ClusteredAPITest] no switch in progress. Moving on...
2013-01-31 13:15:57,496 DEBUG (testng-ClusteredAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ClusteredAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:4ae status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:57,496 DEBUG (testng-ClusteredAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ClusteredAPITest] local transaction ClusteredAPITest-NodeB-60625:358 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:4ae status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:57,496 DEBUG (testng-ClusteredAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ClusteredAPITest] local transaction ClusteredAPITest-NodeB-60625:358 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:57,497 DEBUG (OOB-2,ISPN,ClusteredAPITest-NodeA-6271) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [OOB-2,ISPN,ClusteredAPITest-NodeA-6271] remote transaction ClusteredAPITest-NodeB-60625:358 received. Epoch is 0 (current epoch is 0) and protocol ID is 2PC
2013-01-31 13:15:57,497 DEBUG (OOB-2,ISPN,ClusteredAPITest-NodeA-6271) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-2,ISPN,ClusteredAPITest-NodeA-6271] will block until 0 >= 0
2013-01-31 13:15:57,497 DEBUG (OOB-2,ISPN,ClusteredAPITest-NodeA-6271) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-2,ISPN,ClusteredAPITest-NodeA-6271] epoch is the desired. Moving on...
2013-01-31 13:15:57,504 DEBUG (OOB-2,ISPN,ClusteredAPITest-NodeA-6271) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [OOB-2,ISPN,ClusteredAPITest-NodeA-6271] remote transaction ClusteredAPITest-NodeB-60625:358 received. Epoch is 0 (current epoch is 0) and protocol ID is 2PC
2013-01-31 13:15:57,505 DEBUG (OOB-2,ISPN,ClusteredAPITest-NodeA-6271) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-2,ISPN,ClusteredAPITest-NodeA-6271] will block until 0 >= 0
2013-01-31 13:15:57,505 DEBUG (OOB-2,ISPN,ClusteredAPITest-NodeA-6271) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-2,ISPN,ClusteredAPITest-NodeA-6271] epoch is the desired. Moving on...
2013-01-31 13:15:57,510 DEBUG (notification-thread-85) [org.infinispan.transaction.TransactionTable] View changed, recalculating minViewId
2013-01-31 13:15:57,513 DEBUG (testng-ClusteredAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ClusteredAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:4b2 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:57,513 DEBUG (testng-ClusteredAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-ClusteredAPITest] will wait until no switch is in progress
2013-01-31 13:15:57,513 DEBUG (testng-ClusteredAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-ClusteredAPITest] no switch in progress. Moving on...
2013-01-31 13:15:57,513 DEBUG (testng-ClusteredAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ClusteredAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:4b2 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:57,514 DEBUG (testng-ClusteredAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-ClusteredAPITest] local transaction ClusteredAPITest-NodeA-6271:359 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:4b2 status: ActionStatus.ABORTING >] wants to rollback
2013-01-31 13:15:57,514 INFO  (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.transaction.lookup.JBossStandaloneJTAManagerLookup] ISPN000107: Retrieving transaction manager Transaction: unknown
2013-01-31 13:15:57,515 INFO  (testng-ClusteredAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testReplicationRollback(org.infinispan.atomic.ClusteredAPITest).
2013-01-31 13:15:57,515 DEBUG (testng-ClusteredAPITest) [org.infinispan.atomic.ClusteredAPITest] *** Test method complete; clearing contents on all caches.
2013-01-31 13:15:57,515 DEBUG (testng-ClusteredAPITest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'atomic' on a cache manager at address ClusteredAPITest-NodeA-6271
2013-01-31 13:15:57,515 DEBUG (testng-ClusteredAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [map=AtomicHashMap]
2013-01-31 13:15:57,515 DEBUG (testng-ClusteredAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:57,515 DEBUG (testng-ClusteredAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:57,515 DEBUG (testng-ClusteredAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:57,515 DEBUG (testng-ClusteredAPITest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'atomic' on a cache manager at address ClusteredAPITest-NodeB-60625
2013-01-31 13:15:57,516 DEBUG (testng-ClusteredAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [map=AtomicHashMap]
2013-01-31 13:15:57,516 DEBUG (testng-ClusteredAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:57,516 DEBUG (testng-ClusteredAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:57,516 DEBUG (testng-ClusteredAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:57,516 DEBUG (testng-ClusteredAPITest) [org.infinispan.CacheImpl] Stopping cache atomic on ClusteredAPITest-NodeA-6271
2013-01-31 13:15:57,516 DEBUG (testng-ClusteredAPITest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 0 milliseconds.
2013-01-31 13:15:57,516 DEBUG (testng-ClusteredAPITest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:57,517 DEBUG (CacheViewInstaller-1,ClusteredAPITest-NodeA-6271) [org.infinispan.cacheviews.CacheViewsManagerImpl] Installing new view CacheView{viewId=3, members=[ClusteredAPITest-NodeB-60625]} for cache atomic
2013-01-31 13:15:57,517 DEBUG (CacheViewInstaller-1,ClusteredAPITest-NodeA-6271) [org.infinispan.configuration.cache.TransactionConfigurationBuilder] Switching to Synchronization based enlistment.
2013-01-31 13:15:57,517 DEBUG (transport-thread-67) [org.infinispan.configuration.cache.TransactionConfigurationBuilder] Switching to Synchronization based enlistment.
2013-01-31 13:15:57,518 DEBUG (testng-ClusteredAPITest) [org.infinispan.CacheImpl] Stopping cache atomic on ClusteredAPITest-NodeB-60625
2013-01-31 13:15:57,518 DEBUG (Incoming-1,ISPN,ClusteredAPITest-NodeB-60625) [org.infinispan.statetransfer.StateTransferLockImpl] Blocking new write commands because we'll soon start a state transfer
2013-01-31 13:15:57,518 DEBUG (OOB-1,ISPN,ClusteredAPITest-NodeB-60625) [org.infinispan.configuration.cache.TransactionConfigurationBuilder] Switching to Synchronization based enlistment.
2013-01-31 13:15:57,518 DEBUG (OOB-1,ISPN,ClusteredAPITest-NodeB-60625) [org.infinispan.distribution.ch.DefaultConsistentHash] Using 1 virtualNodes to initialize consistent hash wheel 
2013-01-31 13:15:57,518 DEBUG (OOB-1,ISPN,ClusteredAPITest-NodeB-60625) [org.infinispan.statetransfer.ReplicatedStateTransferTask] Commencing state transfer 3 on node: ClusteredAPITest-NodeB-60625. Before start, data container had 0 entries
2013-01-31 13:15:57,518 DEBUG (OOB-1,ISPN,ClusteredAPITest-NodeB-60625) [org.infinispan.statetransfer.StateTransferLockImpl] Blocking new write commands for cache view 3
2013-01-31 13:15:57,518 DEBUG (testng-ClusteredAPITest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 0 milliseconds.
2013-01-31 13:15:57,519 DEBUG (testng-ClusteredAPITest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:57,519 DEBUG (testng-ClusteredAPITest) [org.infinispan.statetransfer.BaseStateTransferTask] Node ClusteredAPITest-NodeB-60625 cancelled state transfer for view 3 after 0 milliseconds!
2013-01-31 13:15:57,520 DEBUG (OOB-1,ISPN,ClusteredAPITest-NodeB-60625) [org.infinispan.cacheviews.CacheViewsManagerImpl] atomic: Committing cache view CacheView{viewId=3, members=[ClusteredAPITest-NodeB-60625]}
2013-01-31 13:15:57,520 DEBUG (CacheViewInstaller-1,ClusteredAPITest-NodeA-6271) [org.infinispan.cacheviews.CacheViewsManagerImpl] atomic: Committing cache view CacheView{viewId=3, members=[ClusteredAPITest-NodeB-60625]}
2013-01-31 13:15:57,520 DEBUG (CacheViewInstaller-1,ClusteredAPITest-NodeA-6271) [org.infinispan.cacheviews.CacheViewsManagerImpl] Successfully installed view CacheView{viewId=3, members=[ClusteredAPITest-NodeB-60625]} for cache atomic
2013-01-31 13:15:57,532 DEBUG (testng-ClusteredAPITest) [org.infinispan.manager.DefaultCacheManager] Stopping cache manager ISPN on ClusteredAPITest-NodeA-6271
2013-01-31 13:15:57,532 DEBUG (testng-ClusteredAPITest) [org.infinispan.CacheImpl] Stopping cache atomic on ClusteredAPITest-NodeA-6271
2013-01-31 13:15:57,547 INFO  (testng-ClusteredAPITest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000080: Disconnecting and closing JGroups Channel
2013-01-31 13:15:57,547 DEBUG (testng-KeyAffinityServiceShutdownTest) [org.jgroups.stack.Configurator] set property TCP.diagnostics_addr to default value /224.0.75.75
2013-01-31 13:15:57,572 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:57,572 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:57,574 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:57,574 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:57,574 INFO  (testng-FineGrainedAtomicMapAPITest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:57,574 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:57,575 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.transaction.TransactionTable] Min view id set to 1
2013-01-31 13:15:57,575 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 11
2013-01-31 13:15:57,575 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.StateTransferLockInterceptor@7101b74e, TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@27a99bd8, PB=org.infinispan.interceptors.StateTransferLockInterceptor@7101b74e}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@7036963f}
	>> org.infinispan.interceptors.TxInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@fc23ba7}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.PessimisticLockingInterceptor@18da5906, PB=org.infinispan.interceptors.locking.PessimisticLockingInterceptor@18da5906}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@270aa5a9, TO=org.infinispan.interceptors.EntryWrappingInterceptor@270aa5a9, PB=org.infinispan.interceptors.EntryWrappingInterceptor@270aa5a9}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.ReplicationInterceptor@2c020e45, TO=org.infinispan.interceptors.totalorder.TotalOrderReplicationInterceptor@3af6ea95, PB=org.infinispan.interceptors.ReplicationInterceptor@2c020e45}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:57,576 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:57,576 INFO  (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:57,577 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.transaction.TransactionTable] Min view id set to 1
2013-01-31 13:15:57,577 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 11
2013-01-31 13:15:57,577 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.StateTransferLockInterceptor@1df9c0e0, TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@77e5c17f, PB=org.infinispan.interceptors.StateTransferLockInterceptor@1df9c0e0}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@d02b658}
	>> org.infinispan.interceptors.TxInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@2d115214}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.PessimisticLockingInterceptor@4c23b629, PB=org.infinispan.interceptors.locking.PessimisticLockingInterceptor@4c23b629}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@3c8c64cc, TO=org.infinispan.interceptors.EntryWrappingInterceptor@3c8c64cc, PB=org.infinispan.interceptors.EntryWrappingInterceptor@3c8c64cc}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.ReplicationInterceptor@252dac22, TO=org.infinispan.interceptors.totalorder.TotalOrderReplicationInterceptor@597fff3f, PB=org.infinispan.interceptors.ReplicationInterceptor@252dac22}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:57,582 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Setting configuration tunned parameters
2013-01-31 13:15:57,584 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Configuration State responses are {FineGrainedAtomicMapAPITest-NodeA-36196=SuccessfulResponse{responseValue=ConfigurationState{numberOfOwners=0, protocolName='2PC', epoch=0}} }
2013-01-31 13:15:57,584 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Configuration State found: ConfigurationState{numberOfOwners=0, protocolName='2PC', epoch=0}
2013-01-31 13:15:57,584 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.cacheviews.CacheViewsManagerImpl] atomic: Node FineGrainedAtomicMapAPITest-NodeB-28700 is joining
2013-01-31 13:15:57,584 DEBUG (OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeA-36196) [org.infinispan.cacheviews.CacheViewsManagerImpl] atomic: Node FineGrainedAtomicMapAPITest-NodeB-28700 is joining
2013-01-31 13:15:57,585 DEBUG (CacheViewInstaller-1,FineGrainedAtomicMapAPITest-NodeA-36196) [org.infinispan.cacheviews.CacheViewsManagerImpl] Installing new view CacheView{viewId=2, members=[FineGrainedAtomicMapAPITest-NodeA-36196, FineGrainedAtomicMapAPITest-NodeB-28700]} for cache atomic
2013-01-31 13:15:57,595 DEBUG (transport-thread-88) [org.infinispan.distribution.ch.DefaultConsistentHash] Using 1 virtualNodes to initialize consistent hash wheel 
2013-01-31 13:15:57,595 DEBUG (transport-thread-88) [org.infinispan.statetransfer.ReplicatedStateTransferTask] Commencing state transfer 2 on node: FineGrainedAtomicMapAPITest-NodeA-36196. Before start, data container had 0 entries
2013-01-31 13:15:57,595 DEBUG (transport-thread-88) [org.infinispan.statetransfer.StateTransferLockImpl] Blocking new write commands for cache view 2
2013-01-31 13:15:57,611 DEBUG (Incoming-1,ISPN,ClusteredAPITest-NodeB-60625) [org.jgroups.protocols.pbcast.GMS] ClusteredAPITest-NodeB-60625: installing view [ClusteredAPITest-NodeB-60625|2] [ClusteredAPITest-NodeB-60625]
2013-01-31 13:15:57,611 DEBUG (OOB-2,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.distribution.ch.DefaultConsistentHash] Using 1 virtualNodes to initialize consistent hash wheel 
2013-01-31 13:15:57,611 DEBUG (OOB-2,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.statetransfer.ReplicatedStateTransferTask] Commencing state transfer 2 on node: FineGrainedAtomicMapAPITest-NodeB-28700. Before start, data container had 0 entries
2013-01-31 13:15:57,611 DEBUG (OOB-2,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.statetransfer.StateTransferLockImpl] Blocking new write commands for cache view 2
2013-01-31 13:15:57,612 DEBUG (Incoming-1,ISPN,ClusteredAPITest-NodeB-60625) [org.jgroups.protocols.pbcast.STABLE] resuming message garbage collection
2013-01-31 13:15:57,612 DEBUG (Incoming-1,ISPN,ClusteredAPITest-NodeB-60625) [org.jgroups.protocols.pbcast.NAKACK2] removed ClusteredAPITest-NodeA-6271 from xmit_table (not member anymore)
2013-01-31 13:15:57,638 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Setting configuration tunned parameters
2013-01-31 13:15:57,652 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Configuration State responses are {RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358=SuccessfulResponse{responseValue=ConfigurationState{numberOfOwners=0, protocolName='2PC', epoch=0}} }
2013-01-31 13:15:57,652 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Configuration State found: ConfigurationState{numberOfOwners=0, protocolName='2PC', epoch=0}
2013-01-31 13:15:57,652 DEBUG (testng-KeyAffinityServiceShutdownTest) [org.jgroups.protocols.FRAG2] received CONFIG event: {bind_addr=/127.0.0.1}
2013-01-31 13:15:57,652 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.cacheviews.CacheViewsManagerImpl] atomic: Node RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745 is joining
2013-01-31 13:15:57,652 DEBUG (OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358) [org.infinispan.cacheviews.CacheViewsManagerImpl] atomic: Node RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745 is joining
2013-01-31 13:15:57,653 DEBUG (CacheViewInstaller-1,RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358) [org.infinispan.cacheviews.CacheViewsManagerImpl] Installing new view CacheView{viewId=2, members=[RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358, RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745]} for cache atomic
2013-01-31 13:15:57,678 DEBUG (OOB-2,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.cacheviews.CacheViewsManagerImpl] atomic: Committing cache view CacheView{viewId=2, members=[FineGrainedAtomicMapAPITest-NodeA-36196, FineGrainedAtomicMapAPITest-NodeB-28700]}
2013-01-31 13:15:57,678 DEBUG (OOB-2,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.statetransfer.BaseStateTransferTask] Node FineGrainedAtomicMapAPITest-NodeB-28700 completed state transfer for view 2 in 66 milliseconds!
2013-01-31 13:15:57,678 DEBUG (OOB-2,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.statetransfer.StateTransferLockImpl] Unblocking write commands for cache view 2
2013-01-31 13:15:57,715 DEBUG (transport-thread-90) [org.infinispan.distribution.ch.DefaultConsistentHash] Using 1 virtualNodes to initialize consistent hash wheel 
2013-01-31 13:15:57,715 DEBUG (transport-thread-90) [org.infinispan.statetransfer.ReplicatedStateTransferTask] Commencing state transfer 2 on node: RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358. Before start, data container had 0 entries
2013-01-31 13:15:57,715 DEBUG (transport-thread-90) [org.infinispan.statetransfer.StateTransferLockImpl] Blocking new write commands for cache view 2
2013-01-31 13:15:57,716 DEBUG (testng-KeyAffinityServiceShutdownTest) [org.jgroups.protocols.pbcast.GMS] address=KeyAffinityServiceShutdownTest-NodeC-63869, cluster=ISPN, physical address=127.0.0.1:8302
2013-01-31 13:15:57,716 DEBUG (OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.distribution.ch.DefaultConsistentHash] Using 1 virtualNodes to initialize consistent hash wheel 
2013-01-31 13:15:57,716 DEBUG (OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.statetransfer.ReplicatedStateTransferTask] Commencing state transfer 2 on node: RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745. Before start, data container had 0 entries
2013-01-31 13:15:57,716 DEBUG (OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.statetransfer.StateTransferLockImpl] Blocking new write commands for cache view 2
2013-01-31 13:15:57,720 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.CacheImpl] Started cache atomic on FineGrainedAtomicMapAPITest-NodeB-28700
2013-01-31 13:15:57,720 DEBUG (testng-ClusteredAPITest) [org.jgroups.blocks.TCPConnectionMap] connection table is not running, discarding message to 127.0.0.1:8551
2013-01-31 13:15:57,720 DEBUG (testng-ClusteredAPITest) [org.infinispan.test.fwk.TEST_PING] Stop discovery for ClusteredAPITest-NodeA-6271
2013-01-31 13:15:57,720 DEBUG (testng-ClusteredAPITest) [org.jgroups.protocols.TCP] closing sockets and stopping threads
2013-01-31 13:15:57,724 WARN  (testng-PutForExternalReadTest) [org.jgroups.stack.Configurator] [JGRP00013] TP.discard_incompatible_packets has been deprecated: incompatible packets are discarded anyway
2013-01-31 13:15:57,725 DEBUG (Incoming-1,ISPN,ClusteredAPITest-NodeB-60625) [org.jgroups.protocols.pbcast.STABLE] [ergonomics] setting max_bytes to 400KB (1 members)
2013-01-31 13:15:57,726 DEBUG (Incoming-1,ISPN,ClusteredAPITest-NodeB-60625) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] New view accepted: [ClusteredAPITest-NodeB-60625|2] [ClusteredAPITest-NodeB-60625]
2013-01-31 13:15:57,726 INFO  (Incoming-1,ISPN,ClusteredAPITest-NodeB-60625) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000094: Received new cluster view: [ClusteredAPITest-NodeB-60625|2] [ClusteredAPITest-NodeB-60625]
2013-01-31 13:15:57,727 DEBUG (CacheViewInstaller-1,FineGrainedAtomicMapAPITest-NodeA-36196) [org.infinispan.cacheviews.CacheViewsManagerImpl] atomic: Committing cache view CacheView{viewId=2, members=[FineGrainedAtomicMapAPITest-NodeA-36196, FineGrainedAtomicMapAPITest-NodeB-28700]}
2013-01-31 13:15:57,727 DEBUG (CacheViewInstaller-1,FineGrainedAtomicMapAPITest-NodeA-36196) [org.infinispan.statetransfer.BaseStateTransferTask] Node FineGrainedAtomicMapAPITest-NodeA-36196 completed state transfer for view 2 in 131 milliseconds!
2013-01-31 13:15:57,727 DEBUG (CacheViewInstaller-1,FineGrainedAtomicMapAPITest-NodeA-36196) [org.infinispan.statetransfer.StateTransferLockImpl] Unblocking write commands for cache view 2
2013-01-31 13:15:57,727 DEBUG (CacheViewInstaller-1,FineGrainedAtomicMapAPITest-NodeA-36196) [org.infinispan.cacheviews.CacheViewsManagerImpl] Successfully installed view CacheView{viewId=2, members=[FineGrainedAtomicMapAPITest-NodeA-36196, FineGrainedAtomicMapAPITest-NodeB-28700]} for cache atomic
2013-01-31 13:15:57,734 DEBUG (OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.cacheviews.CacheViewsManagerImpl] atomic: Committing cache view CacheView{viewId=2, members=[RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358, RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745]}
2013-01-31 13:15:57,734 DEBUG (OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.statetransfer.BaseStateTransferTask] Node RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745 completed state transfer for view 2 in 17 milliseconds!
2013-01-31 13:15:57,734 DEBUG (OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.statetransfer.StateTransferLockImpl] Unblocking write commands for cache view 2
2013-01-31 13:15:57,734 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.CacheImpl] Started cache atomic on RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745
2013-01-31 13:15:57,737 DEBUG (testng-KeyAffinityServiceShutdownTest) [org.jgroups.protocols.pbcast.GMS] election results: {KeyAffinityServiceShutdownTest-NodeA-53318=2}
2013-01-31 13:15:57,737 DEBUG (testng-KeyAffinityServiceShutdownTest) [org.jgroups.protocols.pbcast.GMS] sending JOIN(KeyAffinityServiceShutdownTest-NodeC-63869) to KeyAffinityServiceShutdownTest-NodeA-53318
2013-01-31 13:15:57,740 DEBUG (CacheViewInstaller-1,RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358) [org.infinispan.cacheviews.CacheViewsManagerImpl] atomic: Committing cache view CacheView{viewId=2, members=[RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358, RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745]}
2013-01-31 13:15:57,740 DEBUG (CacheViewInstaller-1,RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358) [org.infinispan.statetransfer.BaseStateTransferTask] Node RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358 completed state transfer for view 2 in 25 milliseconds!
2013-01-31 13:15:57,741 DEBUG (CacheViewInstaller-1,RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358) [org.infinispan.statetransfer.StateTransferLockImpl] Unblocking write commands for cache view 2
2013-01-31 13:15:57,741 DEBUG (CacheViewInstaller-1,RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358) [org.infinispan.cacheviews.CacheViewsManagerImpl] Successfully installed view CacheView{viewId=2, members=[RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358, RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745]} for cache atomic
2013-01-31 13:15:57,741 INFO  (testng-KeyAffinityServiceTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testConcurrentConsumptionOfKeys(org.infinispan.affinity.KeyAffinityServiceTest).
2013-01-31 13:15:57,742 DEBUG (testng-KeyAffinityServiceTest) [org.infinispan.affinity.KeyAffinityServiceTest] *** Test method complete; clearing contents on all caches.
2013-01-31 13:15:57,742 DEBUG (testng-KeyAffinityServiceTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'dist' on a cache manager at address KeyAffinityServiceTest-NodeA-61608
2013-01-31 13:15:57,742 DEBUG (testng-KeyAffinityServiceTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == []
2013-01-31 13:15:57,742 DEBUG (testng-KeyAffinityServiceTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:57,742 DEBUG (testng-KeyAffinityServiceTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:57,742 DEBUG (testng-KeyAffinityServiceTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:57,742 DEBUG (testng-KeyAffinityServiceTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'dist' on a cache manager at address KeyAffinityServiceTest-NodeB-45659
2013-01-31 13:15:57,742 DEBUG (testng-KeyAffinityServiceTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == []
2013-01-31 13:15:57,742 DEBUG (testng-KeyAffinityServiceTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:57,742 DEBUG (testng-KeyAffinityServiceTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:57,742 DEBUG (testng-KeyAffinityServiceTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:57,743 INFO  (testng-KeyAffinityServiceTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testServerAdded(org.infinispan.affinity.KeyAffinityServiceTest)
2013-01-31 13:15:57,744 DEBUG (testng-KeyAffinityServiceTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:57,747 INFO  (testng-ClusteredAPITest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000082: Stopping the RpcDispatcher
2013-01-31 13:15:57,748 DEBUG (testng-ClusteredAPITest) [org.infinispan.manager.DefaultCacheManager] Stopping cache manager ISPN on ClusteredAPITest-NodeB-60625
2013-01-31 13:15:57,748 DEBUG (testng-ClusteredAPITest) [org.infinispan.CacheImpl] Stopping cache atomic on ClusteredAPITest-NodeB-60625
2013-01-31 13:15:57,748 DEBUG (testng-KeyAffinityServiceTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:57,749 DEBUG (testng-KeyAffinityServiceTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:57,795 DEBUG (ViewHandler,ISPN,KeyAffinityServiceShutdownTest-NodeA-53318) [org.jgroups.protocols.pbcast.STABLE] suspending message garbage collection
2013-01-31 13:15:57,796 DEBUG (ViewHandler,ISPN,KeyAffinityServiceShutdownTest-NodeA-53318) [org.jgroups.protocols.pbcast.STABLE] resume task started, max_suspend_time=33000
2013-01-31 13:15:57,796 DEBUG (Incoming-1,ISPN,KeyAffinityServiceShutdownTest-NodeA-53318) [org.jgroups.protocols.pbcast.NAKACK2] 
[KeyAffinityServiceShutdownTest-NodeA-53318 setDigest()]
existing digest:  KeyAffinityServiceShutdownTest-NodeA-53318: [2 (2)], KeyAffinityServiceShutdownTest-NodeB-14426: [0 (0)]
new digest:       KeyAffinityServiceShutdownTest-NodeA-53318: [1 (1)], KeyAffinityServiceShutdownTest-NodeB-14426: [0 (0)], KeyAffinityServiceShutdownTest-NodeC-63869: [0 (0)]
resulting digest: KeyAffinityServiceShutdownTest-NodeA-53318: [2 (2)], KeyAffinityServiceShutdownTest-NodeC-63869: [0 (0)], KeyAffinityServiceShutdownTest-NodeB-14426: [0 (0)]
2013-01-31 13:15:57,796 DEBUG (Incoming-1,ISPN,KeyAffinityServiceShutdownTest-NodeA-53318) [org.jgroups.protocols.pbcast.GMS] KeyAffinityServiceShutdownTest-NodeA-53318: installing view [KeyAffinityServiceShutdownTest-NodeA-53318|2] [KeyAffinityServiceShutdownTest-NodeA-53318, KeyAffinityServiceShutdownTest-NodeB-14426, KeyAffinityServiceShutdownTest-NodeC-63869]
2013-01-31 13:15:57,796 DEBUG (Incoming-1,ISPN,KeyAffinityServiceShutdownTest-NodeA-53318) [org.jgroups.protocols.pbcast.STABLE] [ergonomics] setting max_bytes to 1.2MB (3 members)
2013-01-31 13:15:57,796 DEBUG (Incoming-1,ISPN,KeyAffinityServiceShutdownTest-NodeA-53318) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] New view accepted: [KeyAffinityServiceShutdownTest-NodeA-53318|2] [KeyAffinityServiceShutdownTest-NodeA-53318, KeyAffinityServiceShutdownTest-NodeB-14426, KeyAffinityServiceShutdownTest-NodeC-63869]
2013-01-31 13:15:57,796 INFO  (Incoming-1,ISPN,KeyAffinityServiceShutdownTest-NodeA-53318) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000094: Received new cluster view: [KeyAffinityServiceShutdownTest-NodeA-53318|2] [KeyAffinityServiceShutdownTest-NodeA-53318, KeyAffinityServiceShutdownTest-NodeB-14426, KeyAffinityServiceShutdownTest-NodeC-63869]
2013-01-31 13:15:57,800 DEBUG (notification-thread-53) [org.infinispan.transaction.TransactionTable] View changed, recalculating minViewId
2013-01-31 13:15:57,807 DEBUG (testng-PutForExternalReadTest) [org.jgroups.stack.Configurator] set property TCP.diagnostics_addr to default value /224.0.75.75
2013-01-31 13:15:57,818 DEBUG (testng-PutForExternalReadTest) [org.jgroups.protocols.FRAG2] received CONFIG event: {bind_addr=/127.0.0.1}
2013-01-31 13:15:57,820 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.atomic.FineGrainedAtomicMapAPITest] Cache managers created, ready to start the test
2013-01-31 13:15:57,821 INFO  (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testCommitReadUncommittedValues(org.infinispan.atomic.FineGrainedAtomicMapAPITest)
2013-01-31 13:15:57,822 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:4b6 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:57,822 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-FineGrainedAtomicMapAPITest] will wait until no switch is in progress
2013-01-31 13:15:57,822 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-FineGrainedAtomicMapAPITest] no switch in progress. Moving on...
2013-01-31 13:15:57,822 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:4b6 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:57,822 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction FineGrainedAtomicMapAPITest-NodeA-36196:360 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:4b6 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:57,822 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction FineGrainedAtomicMapAPITest-NodeA-36196:360 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:57,825 DEBUG (OOB-2,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [OOB-2,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] remote transaction FineGrainedAtomicMapAPITest-NodeA-36196:360 received. Epoch is 0 (current epoch is 0) and protocol ID is 2PC
2013-01-31 13:15:57,825 DEBUG (OOB-2,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-2,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] will block until 0 >= 0
2013-01-31 13:15:57,825 DEBUG (OOB-2,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-2,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] epoch is the desired. Moving on...
2013-01-31 13:15:57,826 DEBUG (OOB-2,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [OOB-2,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] remote transaction FineGrainedAtomicMapAPITest-NodeA-36196:360 received. Epoch is 0 (current epoch is 0) and protocol ID is 2PC
2013-01-31 13:15:57,826 DEBUG (OOB-2,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-2,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] will block until 0 >= 0
2013-01-31 13:15:57,826 DEBUG (OOB-2,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-2,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] epoch is the desired. Moving on...
2013-01-31 13:15:57,828 DEBUG (CacheViewTrigger,ClusteredAPITest-NodeB-60625) [org.infinispan.cacheviews.CacheViewsManagerImpl] Node ClusteredAPITest-NodeB-60625 is the new coordinator, recovering cache views
2013-01-31 13:15:57,829 DEBUG (Incoming-1,ISPN,KeyAffinityServiceShutdownTest-NodeB-14426) [org.jgroups.protocols.pbcast.NAKACK2] 
[KeyAffinityServiceShutdownTest-NodeB-14426 setDigest()]
existing digest:  KeyAffinityServiceShutdownTest-NodeA-53318: [2 (2)], KeyAffinityServiceShutdownTest-NodeB-14426: [0 (0)]
new digest:       KeyAffinityServiceShutdownTest-NodeA-53318: [1 (1)], KeyAffinityServiceShutdownTest-NodeB-14426: [0 (0)], KeyAffinityServiceShutdownTest-NodeC-63869: [0 (0)]
resulting digest: KeyAffinityServiceShutdownTest-NodeA-53318: [2 (2)], KeyAffinityServiceShutdownTest-NodeC-63869: [0 (0)], KeyAffinityServiceShutdownTest-NodeB-14426: [0 (0)]
2013-01-31 13:15:57,830 DEBUG (Incoming-1,ISPN,KeyAffinityServiceShutdownTest-NodeB-14426) [org.jgroups.protocols.pbcast.GMS] KeyAffinityServiceShutdownTest-NodeB-14426: installing view [KeyAffinityServiceShutdownTest-NodeA-53318|2] [KeyAffinityServiceShutdownTest-NodeA-53318, KeyAffinityServiceShutdownTest-NodeB-14426, KeyAffinityServiceShutdownTest-NodeC-63869]
2013-01-31 13:15:57,830 WARN  (testng-CacheClusterJoinTest) [org.jgroups.stack.Configurator] [JGRP00013] TP.discard_incompatible_packets has been deprecated: incompatible packets are discarded anyway
2013-01-31 13:15:57,838 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.atomic.RepetableReadFineGrainedAtomicMapAPITest] Cache managers created, ready to start the test
2013-01-31 13:15:57,838 DEBUG (Incoming-1,ISPN,KeyAffinityServiceShutdownTest-NodeB-14426) [org.jgroups.protocols.pbcast.STABLE] [ergonomics] setting max_bytes to 1.2MB (3 members)
2013-01-31 13:15:57,839 DEBUG (Incoming-1,ISPN,KeyAffinityServiceShutdownTest-NodeB-14426) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] New view accepted: [KeyAffinityServiceShutdownTest-NodeA-53318|2] [KeyAffinityServiceShutdownTest-NodeA-53318, KeyAffinityServiceShutdownTest-NodeB-14426, KeyAffinityServiceShutdownTest-NodeC-63869]
2013-01-31 13:15:57,839 INFO  (Incoming-1,ISPN,KeyAffinityServiceShutdownTest-NodeB-14426) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000094: Received new cluster view: [KeyAffinityServiceShutdownTest-NodeA-53318|2] [KeyAffinityServiceShutdownTest-NodeA-53318, KeyAffinityServiceShutdownTest-NodeB-14426, KeyAffinityServiceShutdownTest-NodeC-63869]
2013-01-31 13:15:57,836 DEBUG (CacheViewTrigger,ClusteredAPITest-NodeB-60625) [org.infinispan.cacheviews.CacheViewsManagerImpl] atomic: We don't have a pending view, ignoring rollback
2013-01-31 13:15:57,839 DEBUG (CacheViewTrigger,ClusteredAPITest-NodeB-60625) [org.infinispan.cacheviews.CacheViewsManagerImpl] Recovered partitions after merge for cache atomic: [CacheView{viewId=3, members=[ClusteredAPITest-NodeB-60625]}]
2013-01-31 13:15:57,839 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:4ba status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:57,840 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-FineGrainedAtomicMapAPITest] will wait until no switch is in progress
2013-01-31 13:15:57,840 INFO  (testng-ClusteredAPITest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000080: Disconnecting and closing JGroups Channel
2013-01-31 13:15:57,840 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-FineGrainedAtomicMapAPITest] no switch in progress. Moving on...
2013-01-31 13:15:57,840 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:4ba status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:57,840 INFO  (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testCommitReadUncommittedValues(org.infinispan.atomic.RepetableReadFineGrainedAtomicMapAPITest)
2013-01-31 13:15:57,841 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:4be status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:57,841 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] will wait until no switch is in progress
2013-01-31 13:15:57,841 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] no switch in progress. Moving on...
2013-01-31 13:15:57,841 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:4be status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:57,842 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358:362 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:4be status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:57,842 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358:362 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:57,842 DEBUG (OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] remote transaction RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358:362 received. Epoch is 0 (current epoch is 0) and protocol ID is 2PC
2013-01-31 13:15:57,843 DEBUG (OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] will block until 0 >= 0
2013-01-31 13:15:57,843 DEBUG (OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] epoch is the desired. Moving on...
2013-01-31 13:15:57,845 DEBUG (OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] remote transaction RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358:362 received. Epoch is 0 (current epoch is 0) and protocol ID is 2PC
2013-01-31 13:15:57,845 DEBUG (OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] will block until 0 >= 0
2013-01-31 13:15:57,845 DEBUG (OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] epoch is the desired. Moving on...
2013-01-31 13:15:57,847 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:4c2 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:57,847 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] will wait until no switch is in progress
2013-01-31 13:15:57,847 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] no switch in progress. Moving on...
2013-01-31 13:15:57,847 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:4c2 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:57,849 DEBUG (notification-thread-92) [org.infinispan.transaction.TransactionTable] View changed, recalculating minViewId
2013-01-31 13:15:57,851 ERROR (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.interceptors.InvocationContextInterceptor] ISPN000136: Execution error
java.lang.NullPointerException
	at java.util.concurrent.ConcurrentHashMap.get(ConcurrentHashMap.java:768)
	at org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry.getProtocolById(ReconfigurableProtocolRegistry.java:83)
	at org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager.notifyLocalTransactionFinished(ReconfigurableReplicationManager.java:254)
	at org.infinispan.transaction.TransactionTable.removeLocalTransaction(TransactionTable.java:317)
	at org.infinispan.transaction.xa.XaTransactionTable.removeLocalTransaction(XaTransactionTable.java:70)
	at org.infinispan.interceptors.TxInterceptor.enlistWriteAndInvokeNext(TxInterceptor.java:294)
	at org.infinispan.interceptors.TxInterceptor.visitApplyDeltaCommand(TxInterceptor.java:230)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.base.CommandInterceptor.handleDefault(CommandInterceptor.java:130)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.CacheImpl.applyDelta(CacheImpl.java:515)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.invokeApplyDelta(FineGrainedAtomicHashMapProxy.java:284)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:217)
	at org.infinispan.atomic.FineGrainedAtomicMapAPITest.testCommitReadUncommittedValues(FineGrainedAtomicMapAPITest.java:392)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:57,856 DEBUG (testng-PutForExternalReadTest) [org.jgroups.protocols.pbcast.GMS] address=PutForExternalReadTest-NodeC-39912, cluster=ISPN, physical address=127.0.0.1:8150
2013-01-31 13:15:57,858 ERROR (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Method testCommitReadUncommittedValues(org.infinispan.atomic.RepetableReadFineGrainedAtomicMapAPITest) threw an exception
java.lang.NullPointerException
	at java.util.concurrent.ConcurrentHashMap.get(ConcurrentHashMap.java:768)
	at org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry.getProtocolById(ReconfigurableProtocolRegistry.java:83)
	at org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager.notifyLocalTransactionFinished(ReconfigurableReplicationManager.java:254)
	at org.infinispan.transaction.TransactionTable.removeLocalTransaction(TransactionTable.java:317)
	at org.infinispan.transaction.xa.XaTransactionTable.removeLocalTransaction(XaTransactionTable.java:70)
	at org.infinispan.interceptors.TxInterceptor.enlistWriteAndInvokeNext(TxInterceptor.java:294)
	at org.infinispan.interceptors.TxInterceptor.visitApplyDeltaCommand(TxInterceptor.java:230)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.base.CommandInterceptor.handleDefault(CommandInterceptor.java:130)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.CacheImpl.applyDelta(CacheImpl.java:515)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.invokeApplyDelta(FineGrainedAtomicHashMapProxy.java:284)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:217)
	at org.infinispan.atomic.FineGrainedAtomicMapAPITest.testCommitReadUncommittedValues(FineGrainedAtomicMapAPITest.java:392)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:57,861 ERROR (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test failed testCommitReadUncommittedValues(org.infinispan.atomic.RepetableReadFineGrainedAtomicMapAPITest)
java.lang.NullPointerException
	at java.util.concurrent.ConcurrentHashMap.get(ConcurrentHashMap.java:768)
	at org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry.getProtocolById(ReconfigurableProtocolRegistry.java:83)
	at org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager.notifyLocalTransactionFinished(ReconfigurableReplicationManager.java:254)
	at org.infinispan.transaction.TransactionTable.removeLocalTransaction(TransactionTable.java:317)
	at org.infinispan.transaction.xa.XaTransactionTable.removeLocalTransaction(XaTransactionTable.java:70)
	at org.infinispan.interceptors.TxInterceptor.enlistWriteAndInvokeNext(TxInterceptor.java:294)
	at org.infinispan.interceptors.TxInterceptor.visitApplyDeltaCommand(TxInterceptor.java:230)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.base.CommandInterceptor.handleDefault(CommandInterceptor.java:130)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.CacheImpl.applyDelta(CacheImpl.java:515)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.invokeApplyDelta(FineGrainedAtomicHashMapProxy.java:284)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:217)
	at org.infinispan.atomic.FineGrainedAtomicMapAPITest.testCommitReadUncommittedValues(FineGrainedAtomicMapAPITest.java:392)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:57,863 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.atomic.RepetableReadFineGrainedAtomicMapAPITest] *** Test method complete; clearing contents on all caches.
2013-01-31 13:15:57,863 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358:363 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:4c2 status: ActionStatus.ABORTING >] wants to rollback
2013-01-31 13:15:57,864 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'atomic' on a cache manager at address RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358
2013-01-31 13:15:57,864 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [testCommitReadUncommittedValues=AtomicHashMap]
2013-01-31 13:15:57,864 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:57,864 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:57,864 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:57,864 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'atomic' on a cache manager at address RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745
2013-01-31 13:15:57,864 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [testCommitReadUncommittedValues=AtomicHashMap]
2013-01-31 13:15:57,864 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:57,864 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:57,864 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:57,864 INFO  (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testConcurrentReadsOnExistingMap(org.infinispan.atomic.RepetableReadFineGrainedAtomicMapAPITest)
2013-01-31 13:15:57,865 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:4c6 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:57,865 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] will wait until no switch is in progress
2013-01-31 13:15:57,865 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] no switch in progress. Moving on...
2013-01-31 13:15:57,865 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:4c6 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:57,865 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358:364 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:4c6 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:57,865 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358:364 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:57,866 DEBUG (OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] remote transaction RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358:364 received. Epoch is 0 (current epoch is 0) and protocol ID is 2PC
2013-01-31 13:15:57,866 DEBUG (OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] will block until 0 >= 0
2013-01-31 13:15:57,866 DEBUG (OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] epoch is the desired. Moving on...
2013-01-31 13:15:57,867 DEBUG (OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] remote transaction RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358:364 received. Epoch is 0 (current epoch is 0) and protocol ID is 2PC
2013-01-31 13:15:57,867 DEBUG (OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] will block until 0 >= 0
2013-01-31 13:15:57,867 DEBUG (OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] epoch is the desired. Moving on...
2013-01-31 13:15:57,868 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:4ca status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:57,868 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] will wait until no switch is in progress
2013-01-31 13:15:57,868 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] no switch in progress. Moving on...
2013-01-31 13:15:57,868 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:4ca status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:57,869 ERROR (testng-FineGrainedAtomicMapAPITest) [org.infinispan.interceptors.InvocationContextInterceptor] ISPN000136: Execution error
java.lang.NullPointerException
	at java.util.concurrent.ConcurrentHashMap.get(ConcurrentHashMap.java:768)
	at org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry.getProtocolById(ReconfigurableProtocolRegistry.java:83)
	at org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager.notifyLocalTransactionFinished(ReconfigurableReplicationManager.java:254)
	at org.infinispan.transaction.TransactionTable.removeLocalTransaction(TransactionTable.java:317)
	at org.infinispan.transaction.xa.XaTransactionTable.removeLocalTransaction(XaTransactionTable.java:70)
	at org.infinispan.interceptors.TxInterceptor.enlistWriteAndInvokeNext(TxInterceptor.java:294)
	at org.infinispan.interceptors.TxInterceptor.visitApplyDeltaCommand(TxInterceptor.java:230)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.base.CommandInterceptor.handleDefault(CommandInterceptor.java:130)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.CacheImpl.applyDelta(CacheImpl.java:515)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.invokeApplyDelta(FineGrainedAtomicHashMapProxy.java:284)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:217)
	at org.infinispan.atomic.FineGrainedAtomicMapAPITest.testCommitReadUncommittedValues(FineGrainedAtomicMapAPITest.java:392)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:57,879 ERROR (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Method testCommitReadUncommittedValues(org.infinispan.atomic.FineGrainedAtomicMapAPITest) threw an exception
java.lang.NullPointerException
	at java.util.concurrent.ConcurrentHashMap.get(ConcurrentHashMap.java:768)
	at org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry.getProtocolById(ReconfigurableProtocolRegistry.java:83)
	at org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager.notifyLocalTransactionFinished(ReconfigurableReplicationManager.java:254)
	at org.infinispan.transaction.TransactionTable.removeLocalTransaction(TransactionTable.java:317)
	at org.infinispan.transaction.xa.XaTransactionTable.removeLocalTransaction(XaTransactionTable.java:70)
	at org.infinispan.interceptors.TxInterceptor.enlistWriteAndInvokeNext(TxInterceptor.java:294)
	at org.infinispan.interceptors.TxInterceptor.visitApplyDeltaCommand(TxInterceptor.java:230)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.base.CommandInterceptor.handleDefault(CommandInterceptor.java:130)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.CacheImpl.applyDelta(CacheImpl.java:515)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.invokeApplyDelta(FineGrainedAtomicHashMapProxy.java:284)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:217)
	at org.infinispan.atomic.FineGrainedAtomicMapAPITest.testCommitReadUncommittedValues(FineGrainedAtomicMapAPITest.java:392)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:57,887 ERROR (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test failed testCommitReadUncommittedValues(org.infinispan.atomic.FineGrainedAtomicMapAPITest)
java.lang.NullPointerException
	at java.util.concurrent.ConcurrentHashMap.get(ConcurrentHashMap.java:768)
	at org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry.getProtocolById(ReconfigurableProtocolRegistry.java:83)
	at org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager.notifyLocalTransactionFinished(ReconfigurableReplicationManager.java:254)
	at org.infinispan.transaction.TransactionTable.removeLocalTransaction(TransactionTable.java:317)
	at org.infinispan.transaction.xa.XaTransactionTable.removeLocalTransaction(XaTransactionTable.java:70)
	at org.infinispan.interceptors.TxInterceptor.enlistWriteAndInvokeNext(TxInterceptor.java:294)
	at org.infinispan.interceptors.TxInterceptor.visitApplyDeltaCommand(TxInterceptor.java:230)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.base.CommandInterceptor.handleDefault(CommandInterceptor.java:130)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.CacheImpl.applyDelta(CacheImpl.java:515)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.invokeApplyDelta(FineGrainedAtomicHashMapProxy.java:284)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:217)
	at org.infinispan.atomic.FineGrainedAtomicMapAPITest.testCommitReadUncommittedValues(FineGrainedAtomicMapAPITest.java:392)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:57,896 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.atomic.FineGrainedAtomicMapAPITest] *** Test method complete; clearing contents on all caches.
2013-01-31 13:15:57,896 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction FineGrainedAtomicMapAPITest-NodeA-36196:361 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:4ba status: ActionStatus.ABORTING >] wants to rollback
2013-01-31 13:15:57,897 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'atomic' on a cache manager at address FineGrainedAtomicMapAPITest-NodeA-36196
2013-01-31 13:15:57,897 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [testCommitReadUncommittedValues=AtomicHashMap]
2013-01-31 13:15:57,897 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:57,897 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:57,897 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:57,897 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'atomic' on a cache manager at address FineGrainedAtomicMapAPITest-NodeB-28700
2013-01-31 13:15:57,897 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [testCommitReadUncommittedValues=AtomicHashMap]
2013-01-31 13:15:57,897 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:57,897 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:57,897 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:57,898 INFO  (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testConcurrentReadsOnExistingMap(org.infinispan.atomic.FineGrainedAtomicMapAPITest)
2013-01-31 13:15:57,898 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:4ce status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:57,898 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-FineGrainedAtomicMapAPITest] will wait until no switch is in progress
2013-01-31 13:15:57,898 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-FineGrainedAtomicMapAPITest] no switch in progress. Moving on...
2013-01-31 13:15:57,898 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:4ce status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:57,898 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction FineGrainedAtomicMapAPITest-NodeA-36196:366 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:4ce status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:57,898 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction FineGrainedAtomicMapAPITest-NodeA-36196:366 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:57,899 DEBUG (OOB-2,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [OOB-2,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] remote transaction FineGrainedAtomicMapAPITest-NodeA-36196:366 received. Epoch is 0 (current epoch is 0) and protocol ID is 2PC
2013-01-31 13:15:57,899 DEBUG (OOB-2,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-2,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] will block until 0 >= 0
2013-01-31 13:15:57,899 DEBUG (OOB-2,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-2,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] epoch is the desired. Moving on...
2013-01-31 13:15:57,876 DEBUG (testng-KeyAffinityServiceShutdownTest) [org.jgroups.protocols.pbcast.NAKACK2] 
[KeyAffinityServiceShutdownTest-NodeC-63869 setDigest()]
existing digest:  []
new digest:       KeyAffinityServiceShutdownTest-NodeA-53318: [1 (1)], KeyAffinityServiceShutdownTest-NodeB-14426: [0 (0)], KeyAffinityServiceShutdownTest-NodeC-63869: [0 (0)]
resulting digest: KeyAffinityServiceShutdownTest-NodeA-53318: [1 (1)], KeyAffinityServiceShutdownTest-NodeC-63869: [0 (0)], KeyAffinityServiceShutdownTest-NodeB-14426: [0 (0)]
2013-01-31 13:15:57,903 DEBUG (testng-KeyAffinityServiceShutdownTest) [org.jgroups.protocols.pbcast.GMS] KeyAffinityServiceShutdownTest-NodeC-63869: installing view [KeyAffinityServiceShutdownTest-NodeA-53318|2] [KeyAffinityServiceShutdownTest-NodeA-53318, KeyAffinityServiceShutdownTest-NodeB-14426, KeyAffinityServiceShutdownTest-NodeC-63869]
2013-01-31 13:15:57,903 DEBUG (testng-KeyAffinityServiceShutdownTest) [org.jgroups.protocols.pbcast.STABLE] [ergonomics] setting max_bytes to 1.2MB (3 members)
2013-01-31 13:15:57,903 DEBUG (OOB-2,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [OOB-2,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] remote transaction FineGrainedAtomicMapAPITest-NodeA-36196:366 received. Epoch is 0 (current epoch is 0) and protocol ID is 2PC
2013-01-31 13:15:57,903 DEBUG (OOB-2,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-2,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] will block until 0 >= 0
2013-01-31 13:15:57,904 DEBUG (OOB-2,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-2,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] epoch is the desired. Moving on...
2013-01-31 13:15:57,905 DEBUG (testng-KeyAffinityServiceShutdownTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] New view accepted: [KeyAffinityServiceShutdownTest-NodeA-53318|2] [KeyAffinityServiceShutdownTest-NodeA-53318, KeyAffinityServiceShutdownTest-NodeB-14426, KeyAffinityServiceShutdownTest-NodeC-63869]
2013-01-31 13:15:57,905 INFO  (testng-KeyAffinityServiceShutdownTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000094: Received new cluster view: [KeyAffinityServiceShutdownTest-NodeA-53318|2] [KeyAffinityServiceShutdownTest-NodeA-53318, KeyAffinityServiceShutdownTest-NodeB-14426, KeyAffinityServiceShutdownTest-NodeC-63869]
2013-01-31 13:15:57,905 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:4d2 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:57,906 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-FineGrainedAtomicMapAPITest] will wait until no switch is in progress
2013-01-31 13:15:57,906 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-FineGrainedAtomicMapAPITest] no switch in progress. Moving on...
2013-01-31 13:15:57,906 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:4d2 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:57,870 DEBUG (testng-PutForExternalReadTest) [org.jgroups.protocols.pbcast.NAKACK2] 
[PutForExternalReadTest-NodeC-39912 setDigest()]
existing digest:  []
new digest:       PutForExternalReadTest-NodeC-39912: [0 (0)]
resulting digest: PutForExternalReadTest-NodeC-39912: [0 (0)]
2013-01-31 13:15:57,906 DEBUG (testng-PutForExternalReadTest) [org.jgroups.protocols.pbcast.GMS] PutForExternalReadTest-NodeC-39912: installing view [PutForExternalReadTest-NodeC-39912|0] [PutForExternalReadTest-NodeC-39912]
2013-01-31 13:15:57,869 ERROR (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.interceptors.InvocationContextInterceptor] ISPN000136: Execution error
java.lang.NullPointerException
	at java.util.concurrent.ConcurrentHashMap.get(ConcurrentHashMap.java:768)
	at org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry.getProtocolById(ReconfigurableProtocolRegistry.java:83)
	at org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager.notifyLocalTransactionFinished(ReconfigurableReplicationManager.java:254)
	at org.infinispan.transaction.TransactionTable.removeLocalTransaction(TransactionTable.java:317)
	at org.infinispan.transaction.xa.XaTransactionTable.removeLocalTransaction(XaTransactionTable.java:70)
	at org.infinispan.interceptors.TxInterceptor.enlistWriteAndInvokeNext(TxInterceptor.java:294)
	at org.infinispan.interceptors.TxInterceptor.visitApplyDeltaCommand(TxInterceptor.java:230)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.base.CommandInterceptor.handleDefault(CommandInterceptor.java:130)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.CacheImpl.applyDelta(CacheImpl.java:515)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.invokeApplyDelta(FineGrainedAtomicHashMapProxy.java:284)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:217)
	at org.infinispan.atomic.FineGrainedAtomicMapAPITest.testConcurrentReadsOnExistingMap(FineGrainedAtomicMapAPITest.java:163)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:57,918 INFO  (testng-KeyAffinityServiceShutdownTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000079: Cache local address is KeyAffinityServiceShutdownTest-NodeC-63869, physical addresses are [127.0.0.1:8302]
2013-01-31 13:15:57,942 DEBUG (testng-KeyAffinityServiceShutdownTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] Waiting on view being accepted
2013-01-31 13:15:57,943 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358:365 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:4ca status: ActionStatus.ABORTING >] wants to rollback
2013-01-31 13:15:57,908 DEBUG (testng-PutForExternalReadTest) [org.jgroups.protocols.pbcast.STABLE] resuming message garbage collection
2013-01-31 13:15:57,906 ERROR (testng-FineGrainedAtomicMapAPITest) [org.infinispan.interceptors.InvocationContextInterceptor] ISPN000136: Execution error
java.lang.NullPointerException
	at java.util.concurrent.ConcurrentHashMap.get(ConcurrentHashMap.java:768)
	at org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry.getProtocolById(ReconfigurableProtocolRegistry.java:83)
	at org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager.notifyLocalTransactionFinished(ReconfigurableReplicationManager.java:254)
	at org.infinispan.transaction.TransactionTable.removeLocalTransaction(TransactionTable.java:317)
	at org.infinispan.transaction.xa.XaTransactionTable.removeLocalTransaction(XaTransactionTable.java:70)
	at org.infinispan.interceptors.TxInterceptor.enlistWriteAndInvokeNext(TxInterceptor.java:294)
	at org.infinispan.interceptors.TxInterceptor.visitApplyDeltaCommand(TxInterceptor.java:230)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.base.CommandInterceptor.handleDefault(CommandInterceptor.java:130)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.CacheImpl.applyDelta(CacheImpl.java:515)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.invokeApplyDelta(FineGrainedAtomicHashMapProxy.java:284)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:217)
	at org.infinispan.atomic.FineGrainedAtomicMapAPITest.testConcurrentReadsOnExistingMap(FineGrainedAtomicMapAPITest.java:163)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:57,945 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction FineGrainedAtomicMapAPITest-NodeA-36196:367 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:4d2 status: ActionStatus.ABORTING >] wants to rollback
2013-01-31 13:15:57,890 DEBUG (testng-ClusteredAPITest) [org.infinispan.test.fwk.TEST_PING] Stop discovery for ClusteredAPITest-NodeB-60625
2013-01-31 13:15:57,946 DEBUG (testng-ClusteredAPITest) [org.jgroups.protocols.TCP] closing sockets and stopping threads
2013-01-31 13:15:57,947 INFO  (testng-ClusteredAPITest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000082: Stopping the RpcDispatcher
2013-01-31 13:15:57,950 INFO  (testng-DataContainerTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testCustomDataContainer(org.infinispan.config.DataContainerTest)
2013-01-31 13:15:57,950 DEBUG (testng-DataContainerTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:57,951 DEBUG (testng-KeyAffinityServiceShutdownTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:57,951 DEBUG (testng-KeyAffinityServiceShutdownTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:57,952 DEBUG (testng-KeyAffinityServiceShutdownTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:57,952 INFO  (testng-KeyAffinityServiceShutdownTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:57,953 ERROR (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Method testConcurrentReadsOnExistingMap(org.infinispan.atomic.RepetableReadFineGrainedAtomicMapAPITest) threw an exception
org.infinispan.CacheException: Unable to end batch
	at org.infinispan.batch.BatchContainer.endBatch(BatchContainer.java:107)
	at org.infinispan.batch.AutoBatchSupport.endAtomic(AutoBatchSupport.java:49)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:220)
	at org.infinispan.atomic.FineGrainedAtomicMapAPITest.testConcurrentReadsOnExistingMap(FineGrainedAtomicMapAPITest.java:163)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
Caused by: javax.transaction.RollbackException: ARJUNA016053: Could not commit transaction.
	at com.arjuna.ats.internal.jta.transaction.arjunacore.TransactionImple.commitAndDisassociate(TransactionImple.java:1177)
	at com.arjuna.ats.internal.jta.transaction.arjunacore.BaseTransaction.commit(BaseTransaction.java:117)
	at org.infinispan.batch.BatchContainer.resolveTransaction(BatchContainer.java:123)
	at org.infinispan.batch.BatchContainer.endBatch(BatchContainer.java:105)
	... 23 more
Caused by: java.lang.Throwable: setRollbackOnly called from:
	at com.arjuna.ats.internal.jta.transaction.arjunacore.TransactionImple.setRollbackOnly(TransactionImple.java:313)
	at org.infinispan.interceptors.TxInterceptor.enlistWriteAndInvokeNext(TxInterceptor.java:292)
	at org.infinispan.interceptors.TxInterceptor.visitApplyDeltaCommand(TxInterceptor.java:230)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.base.CommandInterceptor.handleDefault(CommandInterceptor.java:130)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.CacheImpl.applyDelta(CacheImpl.java:515)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.invokeApplyDelta(FineGrainedAtomicHashMapProxy.java:284)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:217)
	... 21 more
2013-01-31 13:15:57,956 ERROR (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test failed testConcurrentReadsOnExistingMap(org.infinispan.atomic.RepetableReadFineGrainedAtomicMapAPITest)
org.infinispan.CacheException: Unable to end batch
	at org.infinispan.batch.BatchContainer.endBatch(BatchContainer.java:107)
	at org.infinispan.batch.AutoBatchSupport.endAtomic(AutoBatchSupport.java:49)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:220)
	at org.infinispan.atomic.FineGrainedAtomicMapAPITest.testConcurrentReadsOnExistingMap(FineGrainedAtomicMapAPITest.java:163)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
Caused by: javax.transaction.RollbackException: ARJUNA016053: Could not commit transaction.
	at com.arjuna.ats.internal.jta.transaction.arjunacore.TransactionImple.commitAndDisassociate(TransactionImple.java:1177)
	at com.arjuna.ats.internal.jta.transaction.arjunacore.BaseTransaction.commit(BaseTransaction.java:117)
	at org.infinispan.batch.BatchContainer.resolveTransaction(BatchContainer.java:123)
	at org.infinispan.batch.BatchContainer.endBatch(BatchContainer.java:105)
	... 23 more
Caused by: java.lang.Throwable: setRollbackOnly called from:
	at com.arjuna.ats.internal.jta.transaction.arjunacore.TransactionImple.setRollbackOnly(TransactionImple.java:313)
	at org.infinispan.interceptors.TxInterceptor.enlistWriteAndInvokeNext(TxInterceptor.java:292)
	at org.infinispan.interceptors.TxInterceptor.visitApplyDeltaCommand(TxInterceptor.java:230)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.base.CommandInterceptor.handleDefault(CommandInterceptor.java:130)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.CacheImpl.applyDelta(CacheImpl.java:515)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.invokeApplyDelta(FineGrainedAtomicHashMapProxy.java:284)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:217)
	... 21 more
2013-01-31 13:15:57,961 DEBUG (testng-DataContainerTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:57,961 DEBUG (testng-DataContainerTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:57,963 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.atomic.RepetableReadFineGrainedAtomicMapAPITest] *** Test method complete; clearing contents on all caches.
2013-01-31 13:15:57,963 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'atomic' on a cache manager at address RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358
2013-01-31 13:15:57,963 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [testConcurrentReadsOnExistingMap=AtomicHashMap]
2013-01-31 13:15:57,963 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:57,963 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:57,963 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:57,963 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'atomic' on a cache manager at address RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745
2013-01-31 13:15:57,963 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [testConcurrentReadsOnExistingMap=AtomicHashMap]
2013-01-31 13:15:57,963 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:57,963 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:57,963 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:57,964 INFO  (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testConcurrentTx(org.infinispan.atomic.RepetableReadFineGrainedAtomicMapAPITest)
2013-01-31 13:15:57,964 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:4d6 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:57,964 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] will wait until no switch is in progress
2013-01-31 13:15:57,964 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] no switch in progress. Moving on...
2013-01-31 13:15:57,964 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:4d6 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:57,964 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358:368 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:4d6 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:57,964 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358:368 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:57,965 DEBUG (OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] remote transaction RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358:368 received. Epoch is 0 (current epoch is 0) and protocol ID is 2PC
2013-01-31 13:15:57,965 DEBUG (OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] will block until 0 >= 0
2013-01-31 13:15:57,965 DEBUG (OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] epoch is the desired. Moving on...
2013-01-31 13:15:57,969 DEBUG (testng-KeyAffinityServiceShutdownTest) [org.infinispan.transaction.TransactionTable] Min view id set to 2
2013-01-31 13:15:57,969 DEBUG (testng-KeyAffinityServiceShutdownTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 10
2013-01-31 13:15:57,969 DEBUG (testng-KeyAffinityServiceShutdownTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.StateTransferLockInterceptor@6ef612fd, TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@5d58d8f4, PB=org.infinispan.interceptors.StateTransferLockInterceptor@6ef612fd}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@740bab0c}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@2a0adc59}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@2f086c9f, PB=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@2f086c9f}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@521352d8, TO=org.infinispan.interceptors.EntryWrappingInterceptor@521352d8, PB=org.infinispan.interceptors.EntryWrappingInterceptor@521352d8}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.DistributionInterceptor@72a40d00, TO=org.infinispan.interceptors.totalorder.TotalOrderDistributionInterceptor@7051b5cc, PB=org.infinispan.interceptors.DistributionInterceptor@72a40d00}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:57,969 DEBUG (testng-KeyAffinityServiceShutdownTest) [org.infinispan.distribution.ch.DefaultConsistentHash] Using 1 virtualNodes to initialize consistent hash wheel 
2013-01-31 13:15:57,969 DEBUG (testng-KeyAffinityServiceShutdownTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Setting configuration tunned parameters
2013-01-31 13:15:57,970 DEBUG (OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] remote transaction RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358:368 received. Epoch is 0 (current epoch is 0) and protocol ID is 2PC
2013-01-31 13:15:57,970 DEBUG (OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] will block until 0 >= 0
2013-01-31 13:15:57,970 DEBUG (OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] epoch is the desired. Moving on...
2013-01-31 13:15:57,971 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:4da status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:57,971 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] will wait until no switch is in progress
2013-01-31 13:15:57,971 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] no switch in progress. Moving on...
2013-01-31 13:15:57,971 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:4da status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:57,974 DEBUG (testng-CacheClusterJoinTest) [org.jgroups.stack.Configurator] set property TCP.diagnostics_addr to default value /224.0.75.75
2013-01-31 13:15:57,943 DEBUG (testng-PutForExternalReadTest) [org.jgroups.protocols.pbcast.STABLE] [ergonomics] setting max_bytes to 400KB (1 members)
2013-01-31 13:15:57,975 DEBUG (testng-PutForExternalReadTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] New view accepted: [PutForExternalReadTest-NodeC-39912|0] [PutForExternalReadTest-NodeC-39912]
2013-01-31 13:15:57,975 INFO  (testng-PutForExternalReadTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000094: Received new cluster view: [PutForExternalReadTest-NodeC-39912|0] [PutForExternalReadTest-NodeC-39912]
2013-01-31 13:15:57,943 DEBUG (ViewHandler,ISPN,KeyAffinityServiceShutdownTest-NodeA-53318) [org.jgroups.protocols.pbcast.STABLE] resuming message garbage collection
2013-01-31 13:15:57,975 ERROR (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.interceptors.InvocationContextInterceptor] ISPN000136: Execution error
java.lang.NullPointerException
	at java.util.concurrent.ConcurrentHashMap.get(ConcurrentHashMap.java:768)
	at org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry.getProtocolById(ReconfigurableProtocolRegistry.java:83)
	at org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager.notifyLocalTransactionFinished(ReconfigurableReplicationManager.java:254)
	at org.infinispan.transaction.TransactionTable.removeLocalTransaction(TransactionTable.java:317)
	at org.infinispan.transaction.xa.XaTransactionTable.removeLocalTransaction(XaTransactionTable.java:70)
	at org.infinispan.interceptors.TxInterceptor.enlistWriteAndInvokeNext(TxInterceptor.java:294)
	at org.infinispan.interceptors.TxInterceptor.visitApplyDeltaCommand(TxInterceptor.java:230)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.base.CommandInterceptor.handleDefault(CommandInterceptor.java:130)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.CacheImpl.applyDelta(CacheImpl.java:515)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.invokeApplyDelta(FineGrainedAtomicHashMapProxy.java:284)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:217)
	at org.infinispan.atomic.FineGrainedAtomicMapAPITest.testConcurrentTx(FineGrainedAtomicMapAPITest.java:440)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:57,999 ERROR (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Method testConcurrentTx(org.infinispan.atomic.RepetableReadFineGrainedAtomicMapAPITest) threw an exception
java.lang.NullPointerException
	at java.util.concurrent.ConcurrentHashMap.get(ConcurrentHashMap.java:768)
	at org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry.getProtocolById(ReconfigurableProtocolRegistry.java:83)
	at org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager.notifyLocalTransactionFinished(ReconfigurableReplicationManager.java:254)
	at org.infinispan.transaction.TransactionTable.removeLocalTransaction(TransactionTable.java:317)
	at org.infinispan.transaction.xa.XaTransactionTable.removeLocalTransaction(XaTransactionTable.java:70)
	at org.infinispan.interceptors.TxInterceptor.enlistWriteAndInvokeNext(TxInterceptor.java:294)
	at org.infinispan.interceptors.TxInterceptor.visitApplyDeltaCommand(TxInterceptor.java:230)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.base.CommandInterceptor.handleDefault(CommandInterceptor.java:130)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.CacheImpl.applyDelta(CacheImpl.java:515)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.invokeApplyDelta(FineGrainedAtomicHashMapProxy.java:284)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:217)
	at org.infinispan.atomic.FineGrainedAtomicMapAPITest.testConcurrentTx(FineGrainedAtomicMapAPITest.java:440)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:58,003 ERROR (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test failed testConcurrentTx(org.infinispan.atomic.RepetableReadFineGrainedAtomicMapAPITest)
java.lang.NullPointerException
	at java.util.concurrent.ConcurrentHashMap.get(ConcurrentHashMap.java:768)
	at org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry.getProtocolById(ReconfigurableProtocolRegistry.java:83)
	at org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager.notifyLocalTransactionFinished(ReconfigurableReplicationManager.java:254)
	at org.infinispan.transaction.TransactionTable.removeLocalTransaction(TransactionTable.java:317)
	at org.infinispan.transaction.xa.XaTransactionTable.removeLocalTransaction(XaTransactionTable.java:70)
	at org.infinispan.interceptors.TxInterceptor.enlistWriteAndInvokeNext(TxInterceptor.java:294)
	at org.infinispan.interceptors.TxInterceptor.visitApplyDeltaCommand(TxInterceptor.java:230)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.base.CommandInterceptor.handleDefault(CommandInterceptor.java:130)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.CacheImpl.applyDelta(CacheImpl.java:515)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.invokeApplyDelta(FineGrainedAtomicHashMapProxy.java:284)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:217)
	at org.infinispan.atomic.FineGrainedAtomicMapAPITest.testConcurrentTx(FineGrainedAtomicMapAPITest.java:440)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:58,011 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.atomic.RepetableReadFineGrainedAtomicMapAPITest] *** Test method complete; clearing contents on all caches.
2013-01-31 13:15:58,011 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358:369 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:4da status: ActionStatus.ABORTING >] wants to rollback
2013-01-31 13:15:58,011 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'atomic' on a cache manager at address RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358
2013-01-31 13:15:58,011 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [testConcurrentTx=AtomicHashMap]
2013-01-31 13:15:58,011 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:58,012 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:58,012 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:58,012 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'atomic' on a cache manager at address RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745
2013-01-31 13:15:58,012 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [testConcurrentTx=AtomicHashMap]
2013-01-31 13:15:58,012 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:58,012 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:58,012 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:58,013 INFO  (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testConcurrentWritesAndIteration(org.infinispan.atomic.RepetableReadFineGrainedAtomicMapAPITest)
2013-01-31 13:15:58,013 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:4de status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:58,013 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] will wait until no switch is in progress
2013-01-31 13:15:58,013 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] no switch in progress. Moving on...
2013-01-31 13:15:58,013 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:4de status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:58,013 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358:370 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:4de status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:58,013 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358:370 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:58,014 DEBUG (testng-CacheClusterJoinTest) [org.jgroups.protocols.FRAG2] received CONFIG event: {bind_addr=/127.0.0.1}
2013-01-31 13:15:58,015 DEBUG (OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] remote transaction RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358:370 received. Epoch is 0 (current epoch is 0) and protocol ID is 2PC
2013-01-31 13:15:58,015 DEBUG (OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] will block until 0 >= 0
2013-01-31 13:15:58,015 DEBUG (OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] epoch is the desired. Moving on...
2013-01-31 13:15:57,954 ERROR (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Method testConcurrentReadsOnExistingMap(org.infinispan.atomic.FineGrainedAtomicMapAPITest) threw an exception
org.infinispan.CacheException: Unable to end batch
	at org.infinispan.batch.BatchContainer.endBatch(BatchContainer.java:107)
	at org.infinispan.batch.AutoBatchSupport.endAtomic(AutoBatchSupport.java:49)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:220)
	at org.infinispan.atomic.FineGrainedAtomicMapAPITest.testConcurrentReadsOnExistingMap(FineGrainedAtomicMapAPITest.java:163)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
Caused by: javax.transaction.RollbackException: ARJUNA016053: Could not commit transaction.
	at com.arjuna.ats.internal.jta.transaction.arjunacore.TransactionImple.commitAndDisassociate(TransactionImple.java:1177)
	at com.arjuna.ats.internal.jta.transaction.arjunacore.BaseTransaction.commit(BaseTransaction.java:117)
	at org.infinispan.batch.BatchContainer.resolveTransaction(BatchContainer.java:123)
	at org.infinispan.batch.BatchContainer.endBatch(BatchContainer.java:105)
	... 23 more
Caused by: java.lang.Throwable: setRollbackOnly called from:
	at com.arjuna.ats.internal.jta.transaction.arjunacore.TransactionImple.setRollbackOnly(TransactionImple.java:313)
	at org.infinispan.interceptors.TxInterceptor.enlistWriteAndInvokeNext(TxInterceptor.java:292)
	at org.infinispan.interceptors.TxInterceptor.visitApplyDeltaCommand(TxInterceptor.java:230)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.base.CommandInterceptor.handleDefault(CommandInterceptor.java:130)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.CacheImpl.applyDelta(CacheImpl.java:515)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.invokeApplyDelta(FineGrainedAtomicHashMapProxy.java:284)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:217)
	... 21 more
2013-01-31 13:15:58,062 ERROR (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test failed testConcurrentReadsOnExistingMap(org.infinispan.atomic.FineGrainedAtomicMapAPITest)
org.infinispan.CacheException: Unable to end batch
	at org.infinispan.batch.BatchContainer.endBatch(BatchContainer.java:107)
	at org.infinispan.batch.AutoBatchSupport.endAtomic(AutoBatchSupport.java:49)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:220)
	at org.infinispan.atomic.FineGrainedAtomicMapAPITest.testConcurrentReadsOnExistingMap(FineGrainedAtomicMapAPITest.java:163)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
Caused by: javax.transaction.RollbackException: ARJUNA016053: Could not commit transaction.
	at com.arjuna.ats.internal.jta.transaction.arjunacore.TransactionImple.commitAndDisassociate(TransactionImple.java:1177)
	at com.arjuna.ats.internal.jta.transaction.arjunacore.BaseTransaction.commit(BaseTransaction.java:117)
	at org.infinispan.batch.BatchContainer.resolveTransaction(BatchContainer.java:123)
	at org.infinispan.batch.BatchContainer.endBatch(BatchContainer.java:105)
	... 23 more
Caused by: java.lang.Throwable: setRollbackOnly called from:
	at com.arjuna.ats.internal.jta.transaction.arjunacore.TransactionImple.setRollbackOnly(TransactionImple.java:313)
	at org.infinispan.interceptors.TxInterceptor.enlistWriteAndInvokeNext(TxInterceptor.java:292)
	at org.infinispan.interceptors.TxInterceptor.visitApplyDeltaCommand(TxInterceptor.java:230)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.base.CommandInterceptor.handleDefault(CommandInterceptor.java:130)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.CacheImpl.applyDelta(CacheImpl.java:515)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.invokeApplyDelta(FineGrainedAtomicHashMapProxy.java:284)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:217)
	... 21 more
2013-01-31 13:15:58,094 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.atomic.FineGrainedAtomicMapAPITest] *** Test method complete; clearing contents on all caches.
2013-01-31 13:15:58,094 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'atomic' on a cache manager at address FineGrainedAtomicMapAPITest-NodeA-36196
2013-01-31 13:15:58,094 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [testConcurrentReadsOnExistingMap=AtomicHashMap]
2013-01-31 13:15:58,094 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:58,094 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:58,094 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:58,094 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'atomic' on a cache manager at address FineGrainedAtomicMapAPITest-NodeB-28700
2013-01-31 13:15:58,094 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [testConcurrentReadsOnExistingMap=AtomicHashMap]
2013-01-31 13:15:58,094 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:58,094 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:58,094 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:58,095 INFO  (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testConcurrentTx(org.infinispan.atomic.FineGrainedAtomicMapAPITest)
2013-01-31 13:15:58,095 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:4e2 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:58,095 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-FineGrainedAtomicMapAPITest] will wait until no switch is in progress
2013-01-31 13:15:58,095 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-FineGrainedAtomicMapAPITest] no switch in progress. Moving on...
2013-01-31 13:15:58,095 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:4e2 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:58,095 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction FineGrainedAtomicMapAPITest-NodeA-36196:371 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:4e2 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:58,095 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction FineGrainedAtomicMapAPITest-NodeA-36196:371 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:58,057 DEBUG (testng-CacheClusterJoinTest) [org.jgroups.protocols.pbcast.GMS] address=CacheClusterJoinTest-NodeC-62173, cluster=ISPN, physical address=127.0.0.1:7900
2013-01-31 13:15:58,046 DEBUG (testng-PutForExternalReadTest) [org.jgroups.protocols.pbcast.STABLE] resuming message garbage collection
2013-01-31 13:15:58,096 DEBUG (testng-PutForExternalReadTest) [org.jgroups.protocols.pbcast.GMS] created group (first member). My view is [PutForExternalReadTest-NodeC-39912|0], impl is org.jgroups.protocols.pbcast.CoordGmsImpl
2013-01-31 13:15:58,096 INFO  (testng-PutForExternalReadTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000079: Cache local address is PutForExternalReadTest-NodeC-39912, physical addresses are [127.0.0.1:8150]
2013-01-31 13:15:58,096 DEBUG (testng-PutForExternalReadTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] Waiting on view being accepted
2013-01-31 13:15:58,097 DEBUG (OOB-2,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [OOB-2,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] remote transaction FineGrainedAtomicMapAPITest-NodeA-36196:371 received. Epoch is 0 (current epoch is 0) and protocol ID is 2PC
2013-01-31 13:15:58,097 DEBUG (OOB-2,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-2,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] will block until 0 >= 0
2013-01-31 13:15:58,097 DEBUG (OOB-2,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-2,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] epoch is the desired. Moving on...
2013-01-31 13:15:58,098 DEBUG (OOB-2,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [OOB-2,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] remote transaction FineGrainedAtomicMapAPITest-NodeA-36196:371 received. Epoch is 0 (current epoch is 0) and protocol ID is 2PC
2013-01-31 13:15:58,098 DEBUG (OOB-2,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-2,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] will block until 0 >= 0
2013-01-31 13:15:58,098 DEBUG (OOB-2,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-2,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] epoch is the desired. Moving on...
2013-01-31 13:15:58,098 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:4e6 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:58,098 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-FineGrainedAtomicMapAPITest] will wait until no switch is in progress
2013-01-31 13:15:58,098 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-FineGrainedAtomicMapAPITest] no switch in progress. Moving on...
2013-01-31 13:15:58,098 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:4e6 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:58,099 ERROR (testng-FineGrainedAtomicMapAPITest) [org.infinispan.interceptors.InvocationContextInterceptor] ISPN000136: Execution error
java.lang.NullPointerException
	at java.util.concurrent.ConcurrentHashMap.get(ConcurrentHashMap.java:768)
	at org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry.getProtocolById(ReconfigurableProtocolRegistry.java:83)
	at org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager.notifyLocalTransactionFinished(ReconfigurableReplicationManager.java:254)
	at org.infinispan.transaction.TransactionTable.removeLocalTransaction(TransactionTable.java:317)
	at org.infinispan.transaction.xa.XaTransactionTable.removeLocalTransaction(XaTransactionTable.java:70)
	at org.infinispan.interceptors.TxInterceptor.enlistWriteAndInvokeNext(TxInterceptor.java:294)
	at org.infinispan.interceptors.TxInterceptor.visitApplyDeltaCommand(TxInterceptor.java:230)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.base.CommandInterceptor.handleDefault(CommandInterceptor.java:130)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.CacheImpl.applyDelta(CacheImpl.java:515)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.invokeApplyDelta(FineGrainedAtomicHashMapProxy.java:284)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:217)
	at org.infinispan.atomic.FineGrainedAtomicMapAPITest.testConcurrentTx(FineGrainedAtomicMapAPITest.java:440)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:58,104 ERROR (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Method testConcurrentTx(org.infinispan.atomic.FineGrainedAtomicMapAPITest) threw an exception
java.lang.NullPointerException
	at java.util.concurrent.ConcurrentHashMap.get(ConcurrentHashMap.java:768)
	at org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry.getProtocolById(ReconfigurableProtocolRegistry.java:83)
	at org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager.notifyLocalTransactionFinished(ReconfigurableReplicationManager.java:254)
	at org.infinispan.transaction.TransactionTable.removeLocalTransaction(TransactionTable.java:317)
	at org.infinispan.transaction.xa.XaTransactionTable.removeLocalTransaction(XaTransactionTable.java:70)
	at org.infinispan.interceptors.TxInterceptor.enlistWriteAndInvokeNext(TxInterceptor.java:294)
	at org.infinispan.interceptors.TxInterceptor.visitApplyDeltaCommand(TxInterceptor.java:230)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.base.CommandInterceptor.handleDefault(CommandInterceptor.java:130)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.CacheImpl.applyDelta(CacheImpl.java:515)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.invokeApplyDelta(FineGrainedAtomicHashMapProxy.java:284)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:217)
	at org.infinispan.atomic.FineGrainedAtomicMapAPITest.testConcurrentTx(FineGrainedAtomicMapAPITest.java:440)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:58,105 ERROR (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test failed testConcurrentTx(org.infinispan.atomic.FineGrainedAtomicMapAPITest)
java.lang.NullPointerException
	at java.util.concurrent.ConcurrentHashMap.get(ConcurrentHashMap.java:768)
	at org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry.getProtocolById(ReconfigurableProtocolRegistry.java:83)
	at org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager.notifyLocalTransactionFinished(ReconfigurableReplicationManager.java:254)
	at org.infinispan.transaction.TransactionTable.removeLocalTransaction(TransactionTable.java:317)
	at org.infinispan.transaction.xa.XaTransactionTable.removeLocalTransaction(XaTransactionTable.java:70)
	at org.infinispan.interceptors.TxInterceptor.enlistWriteAndInvokeNext(TxInterceptor.java:294)
	at org.infinispan.interceptors.TxInterceptor.visitApplyDeltaCommand(TxInterceptor.java:230)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.base.CommandInterceptor.handleDefault(CommandInterceptor.java:130)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.CacheImpl.applyDelta(CacheImpl.java:515)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.invokeApplyDelta(FineGrainedAtomicHashMapProxy.java:284)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:217)
	at org.infinispan.atomic.FineGrainedAtomicMapAPITest.testConcurrentTx(FineGrainedAtomicMapAPITest.java:440)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:58,110 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.atomic.FineGrainedAtomicMapAPITest] *** Test method complete; clearing contents on all caches.
2013-01-31 13:15:58,110 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction FineGrainedAtomicMapAPITest-NodeA-36196:372 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:4e6 status: ActionStatus.ABORTING >] wants to rollback
2013-01-31 13:15:58,103 DEBUG (OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] remote transaction RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358:370 received. Epoch is 0 (current epoch is 0) and protocol ID is 2PC
2013-01-31 13:15:58,111 DEBUG (OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] will block until 0 >= 0
2013-01-31 13:15:58,111 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'atomic' on a cache manager at address FineGrainedAtomicMapAPITest-NodeA-36196
2013-01-31 13:15:58,111 DEBUG (OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] epoch is the desired. Moving on...
2013-01-31 13:15:58,111 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [testConcurrentTx=AtomicHashMap]
2013-01-31 13:15:58,112 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:58,112 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:58,112 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:58,112 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'atomic' on a cache manager at address FineGrainedAtomicMapAPITest-NodeB-28700
2013-01-31 13:15:58,112 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [testConcurrentTx=AtomicHashMap]
2013-01-31 13:15:58,112 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:58,112 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:58,112 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:58,112 INFO  (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testConcurrentWritesAndIteration(org.infinispan.atomic.FineGrainedAtomicMapAPITest)
2013-01-31 13:15:58,112 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:4ea status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:58,112 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-FineGrainedAtomicMapAPITest] will wait until no switch is in progress
2013-01-31 13:15:58,112 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-FineGrainedAtomicMapAPITest] no switch in progress. Moving on...
2013-01-31 13:15:58,113 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:4ea status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:58,113 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction FineGrainedAtomicMapAPITest-NodeA-36196:373 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:4ea status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:58,113 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction FineGrainedAtomicMapAPITest-NodeA-36196:373 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:58,114 DEBUG (OOB-2,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [OOB-2,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] remote transaction FineGrainedAtomicMapAPITest-NodeA-36196:373 received. Epoch is 0 (current epoch is 0) and protocol ID is 2PC
2013-01-31 13:15:58,114 DEBUG (OOB-2,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-2,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] will block until 0 >= 0
2013-01-31 13:15:58,114 DEBUG (OOB-2,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-2,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] epoch is the desired. Moving on...
2013-01-31 13:15:58,116 DEBUG (OOB-2,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [OOB-2,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] remote transaction FineGrainedAtomicMapAPITest-NodeA-36196:373 received. Epoch is 0 (current epoch is 0) and protocol ID is 2PC
2013-01-31 13:15:58,116 DEBUG (OOB-2,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-2,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] will block until 0 >= 0
2013-01-31 13:15:58,116 DEBUG (OOB-2,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-2,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] epoch is the desired. Moving on...
2013-01-31 13:15:58,116 DEBUG (testng-CacheClusterJoinTest) [org.jgroups.protocols.pbcast.NAKACK2] 
[CacheClusterJoinTest-NodeC-62173 setDigest()]
existing digest:  []
new digest:       CacheClusterJoinTest-NodeC-62173: [0 (0)]
resulting digest: CacheClusterJoinTest-NodeC-62173: [0 (0)]
2013-01-31 13:15:58,116 DEBUG (testng-CacheClusterJoinTest) [org.jgroups.protocols.pbcast.GMS] CacheClusterJoinTest-NodeC-62173: installing view [CacheClusterJoinTest-NodeC-62173|0] [CacheClusterJoinTest-NodeC-62173]
2013-01-31 13:15:58,116 DEBUG (testng-CacheClusterJoinTest) [org.jgroups.protocols.pbcast.STABLE] resuming message garbage collection
2013-01-31 13:15:58,116 DEBUG (ForkThread-RepetableReadFineGrainedAtomicMapAPITest-693375588) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [ForkThread-RepetableReadFineGrainedAtomicMapAPITest-693375588] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:4ee status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:58,117 DEBUG (ForkThread-RepetableReadFineGrainedAtomicMapAPITest-693375588) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [ForkThread-RepetableReadFineGrainedAtomicMapAPITest-693375588] will wait until no switch is in progress
2013-01-31 13:15:58,117 DEBUG (ForkThread-RepetableReadFineGrainedAtomicMapAPITest-693375588) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [ForkThread-RepetableReadFineGrainedAtomicMapAPITest-693375588] no switch in progress. Moving on...
2013-01-31 13:15:58,117 DEBUG (ForkThread-RepetableReadFineGrainedAtomicMapAPITest-693375588) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [ForkThread-RepetableReadFineGrainedAtomicMapAPITest-693375588] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:4ee status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:58,117 DEBUG (testng-CacheClusterJoinTest) [org.jgroups.protocols.pbcast.STABLE] [ergonomics] setting max_bytes to 400KB (1 members)
2013-01-31 13:15:58,117 DEBUG (testng-CacheClusterJoinTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] New view accepted: [CacheClusterJoinTest-NodeC-62173|0] [CacheClusterJoinTest-NodeC-62173]
2013-01-31 13:15:58,117 INFO  (testng-CacheClusterJoinTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000094: Received new cluster view: [CacheClusterJoinTest-NodeC-62173|0] [CacheClusterJoinTest-NodeC-62173]
2013-01-31 13:15:58,117 ERROR (ForkThread-RepetableReadFineGrainedAtomicMapAPITest-693375588) [org.infinispan.interceptors.InvocationContextInterceptor] ISPN000136: Execution error
java.lang.NullPointerException
	at java.util.concurrent.ConcurrentHashMap.get(ConcurrentHashMap.java:768)
	at org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry.getProtocolById(ReconfigurableProtocolRegistry.java:83)
	at org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager.notifyLocalTransactionFinished(ReconfigurableReplicationManager.java:254)
	at org.infinispan.transaction.TransactionTable.removeLocalTransaction(TransactionTable.java:317)
	at org.infinispan.transaction.xa.XaTransactionTable.removeLocalTransaction(XaTransactionTable.java:70)
	at org.infinispan.interceptors.TxInterceptor.enlistWriteAndInvokeNext(TxInterceptor.java:294)
	at org.infinispan.interceptors.TxInterceptor.visitApplyDeltaCommand(TxInterceptor.java:230)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.base.CommandInterceptor.handleDefault(CommandInterceptor.java:130)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.CacheImpl.applyDelta(CacheImpl.java:515)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.invokeApplyDelta(FineGrainedAtomicHashMapProxy.java:284)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:217)
	at org.infinispan.atomic.FineGrainedAtomicMapAPITest$3.run(FineGrainedAtomicMapAPITest.java:237)
	at org.infinispan.test.AbstractInfinispanTest$RunnableWrapper.run(AbstractInfinispanTest.java:112)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:58,125 DEBUG (ForkThread-RepetableReadFineGrainedAtomicMapAPITest-693375588) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [ForkThread-RepetableReadFineGrainedAtomicMapAPITest-693375588] local transaction RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358:374 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:4ee status: ActionStatus.ABORTING >] wants to rollback
2013-01-31 13:15:58,126 ERROR (ForkThread-RepetableReadFineGrainedAtomicMapAPITest-693375588) [org.infinispan.atomic.RepetableReadFineGrainedAtomicMapAPITest] Unexpected error performing transaction
org.infinispan.CacheException: Unable to end batch
	at org.infinispan.batch.BatchContainer.endBatch(BatchContainer.java:107)
	at org.infinispan.batch.AutoBatchSupport.endAtomic(AutoBatchSupport.java:49)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:220)
	at org.infinispan.atomic.FineGrainedAtomicMapAPITest$3.run(FineGrainedAtomicMapAPITest.java:237)
	at org.infinispan.test.AbstractInfinispanTest$RunnableWrapper.run(AbstractInfinispanTest.java:112)
	at java.lang.Thread.run(Thread.java:680)
Caused by: javax.transaction.RollbackException: ARJUNA016053: Could not commit transaction.
	at com.arjuna.ats.internal.jta.transaction.arjunacore.TransactionImple.commitAndDisassociate(TransactionImple.java:1177)
	at com.arjuna.ats.internal.jta.transaction.arjunacore.BaseTransaction.commit(BaseTransaction.java:117)
	at org.infinispan.batch.BatchContainer.resolveTransaction(BatchContainer.java:123)
	at org.infinispan.batch.BatchContainer.endBatch(BatchContainer.java:105)
	... 5 more
Caused by: java.lang.Throwable: setRollbackOnly called from:
	at com.arjuna.ats.internal.jta.transaction.arjunacore.TransactionImple.setRollbackOnly(TransactionImple.java:313)
	at org.infinispan.interceptors.TxInterceptor.enlistWriteAndInvokeNext(TxInterceptor.java:292)
	at org.infinispan.interceptors.TxInterceptor.visitApplyDeltaCommand(TxInterceptor.java:230)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.base.CommandInterceptor.handleDefault(CommandInterceptor.java:130)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.CacheImpl.applyDelta(CacheImpl.java:515)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.invokeApplyDelta(FineGrainedAtomicHashMapProxy.java:284)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:217)
	... 3 more
2013-01-31 13:15:58,153 DEBUG (testng-CacheClusterJoinTest) [org.jgroups.protocols.pbcast.STABLE] resuming message garbage collection
2013-01-31 13:15:58,153 DEBUG (testng-CacheClusterJoinTest) [org.jgroups.protocols.pbcast.GMS] created group (first member). My view is [CacheClusterJoinTest-NodeC-62173|0], impl is org.jgroups.protocols.pbcast.CoordGmsImpl
2013-01-31 13:15:58,154 INFO  (testng-CacheClusterJoinTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000079: Cache local address is CacheClusterJoinTest-NodeC-62173, physical addresses are [127.0.0.1:7900]
2013-01-31 13:15:58,154 DEBUG (testng-CacheClusterJoinTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] Waiting on view being accepted
2013-01-31 13:15:58,152 INFO  (testng-PutForExternalReadTest) [org.infinispan.transaction.lookup.JBossStandaloneJTAManagerLookup] ISPN000107: Retrieving transaction manager Transaction: unknown
2013-01-31 13:15:58,147 DEBUG (testng-KeyAffinityServiceShutdownTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Configuration State responses are {KeyAffinityServiceShutdownTest-NodeB-14426=SuccessfulResponse{responseValue=ConfigurationState{numberOfOwners=2, protocolName='2PC', epoch=0}} , KeyAffinityServiceShutdownTest-NodeA-53318=SuccessfulResponse{responseValue=ConfigurationState{numberOfOwners=2, protocolName='2PC', epoch=0}} }
2013-01-31 13:15:58,154 DEBUG (testng-KeyAffinityServiceShutdownTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Configuration State found: ConfigurationState{numberOfOwners=2, protocolName='2PC', epoch=0}
2013-01-31 13:15:58,154 DEBUG (testng-KeyAffinityServiceShutdownTest) [org.infinispan.cacheviews.CacheViewsManagerImpl] dist: Node KeyAffinityServiceShutdownTest-NodeC-63869 is joining
2013-01-31 13:15:58,132 WARN  (testng-ConfigurationValidationTest) [org.jgroups.stack.Configurator] [JGRP00013] TP.discard_incompatible_packets has been deprecated: incompatible packets are discarded anyway
2013-01-31 13:15:58,155 DEBUG (OOB-1,ISPN,KeyAffinityServiceShutdownTest-NodeA-53318) [org.infinispan.cacheviews.CacheViewsManagerImpl] dist: Node KeyAffinityServiceShutdownTest-NodeC-63869 is joining
2013-01-31 13:15:58,156 DEBUG (CacheViewInstaller-1,KeyAffinityServiceShutdownTest-NodeA-53318) [org.infinispan.cacheviews.CacheViewsManagerImpl] Installing new view CacheView{viewId=3, members=[KeyAffinityServiceShutdownTest-NodeA-53318, KeyAffinityServiceShutdownTest-NodeB-14426, KeyAffinityServiceShutdownTest-NodeC-63869]} for cache dist
2013-01-31 13:15:58,161 DEBUG (transport-thread-1) [org.infinispan.distribution.ch.DefaultConsistentHash] Using 1 virtualNodes to initialize consistent hash wheel 
2013-01-31 13:15:58,161 DEBUG (transport-thread-1) [org.infinispan.statetransfer.DistributedStateTransferTask] Commencing rehash 3 on node: KeyAffinityServiceShutdownTest-NodeA-53318. Before start, data container had 0 entries
2013-01-31 13:15:58,161 DEBUG (transport-thread-1) [org.infinispan.statetransfer.StateTransferLockImpl] Blocking new write commands for cache view 3
2013-01-31 13:15:58,163 DEBUG (OOB-1,ISPN,KeyAffinityServiceShutdownTest-NodeB-14426) [org.infinispan.distribution.ch.DefaultConsistentHash] Using 1 virtualNodes to initialize consistent hash wheel 
2013-01-31 13:15:58,163 DEBUG (OOB-1,ISPN,KeyAffinityServiceShutdownTest-NodeB-14426) [org.infinispan.statetransfer.DistributedStateTransferTask] Commencing rehash 3 on node: KeyAffinityServiceShutdownTest-NodeB-14426. Before start, data container had 0 entries
2013-01-31 13:15:58,163 DEBUG (OOB-1,ISPN,KeyAffinityServiceShutdownTest-NodeB-14426) [org.infinispan.statetransfer.StateTransferLockImpl] Blocking new write commands for cache view 3
2013-01-31 13:15:58,164 DEBUG (OOB-1,ISPN,KeyAffinityServiceShutdownTest-NodeC-63869) [org.infinispan.distribution.ch.DefaultConsistentHash] Using 1 virtualNodes to initialize consistent hash wheel 
2013-01-31 13:15:58,164 DEBUG (OOB-1,ISPN,KeyAffinityServiceShutdownTest-NodeC-63869) [org.infinispan.statetransfer.DistributedStateTransferTask] Commencing rehash 3 on node: KeyAffinityServiceShutdownTest-NodeC-63869. Before start, data container had 0 entries
2013-01-31 13:15:58,164 DEBUG (OOB-1,ISPN,KeyAffinityServiceShutdownTest-NodeC-63869) [org.infinispan.statetransfer.StateTransferLockImpl] Blocking new write commands for cache view 3
2013-01-31 13:15:58,165 DEBUG (OOB-1,ISPN,KeyAffinityServiceShutdownTest-NodeB-14426) [org.infinispan.cacheviews.CacheViewsManagerImpl] dist: Committing cache view CacheView{viewId=3, members=[KeyAffinityServiceShutdownTest-NodeA-53318, KeyAffinityServiceShutdownTest-NodeB-14426, KeyAffinityServiceShutdownTest-NodeC-63869]}
2013-01-31 13:15:58,165 DEBUG (OOB-1,ISPN,KeyAffinityServiceShutdownTest-NodeB-14426) [org.infinispan.statetransfer.BaseStateTransferTask] Node KeyAffinityServiceShutdownTest-NodeB-14426 completed state transfer for view 3 in 2 milliseconds!
2013-01-31 13:15:58,167 DEBUG (OOB-1,ISPN,KeyAffinityServiceShutdownTest-NodeB-14426) [org.infinispan.statetransfer.StateTransferLockImpl] Unblocking write commands for cache view 3
2013-01-31 13:15:58,169 DEBUG (ForkThread-FineGrainedAtomicMapAPITest-857801116) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [ForkThread-FineGrainedAtomicMapAPITest-857801116] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:4f2 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:58,169 DEBUG (ForkThread-FineGrainedAtomicMapAPITest-857801116) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [ForkThread-FineGrainedAtomicMapAPITest-857801116] will wait until no switch is in progress
2013-01-31 13:15:58,169 DEBUG (ForkThread-FineGrainedAtomicMapAPITest-857801116) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [ForkThread-FineGrainedAtomicMapAPITest-857801116] no switch in progress. Moving on...
2013-01-31 13:15:58,169 DEBUG (ForkThread-FineGrainedAtomicMapAPITest-857801116) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [ForkThread-FineGrainedAtomicMapAPITest-857801116] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:4f2 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:58,171 ERROR (ForkThread-FineGrainedAtomicMapAPITest-857801116) [org.infinispan.interceptors.InvocationContextInterceptor] ISPN000136: Execution error
java.lang.NullPointerException
	at java.util.concurrent.ConcurrentHashMap.get(ConcurrentHashMap.java:768)
	at org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry.getProtocolById(ReconfigurableProtocolRegistry.java:83)
	at org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager.notifyLocalTransactionFinished(ReconfigurableReplicationManager.java:254)
	at org.infinispan.transaction.TransactionTable.removeLocalTransaction(TransactionTable.java:317)
	at org.infinispan.transaction.xa.XaTransactionTable.removeLocalTransaction(XaTransactionTable.java:70)
	at org.infinispan.interceptors.TxInterceptor.enlistWriteAndInvokeNext(TxInterceptor.java:294)
	at org.infinispan.interceptors.TxInterceptor.visitApplyDeltaCommand(TxInterceptor.java:230)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.base.CommandInterceptor.handleDefault(CommandInterceptor.java:130)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.CacheImpl.applyDelta(CacheImpl.java:515)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.invokeApplyDelta(FineGrainedAtomicHashMapProxy.java:284)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:217)
	at org.infinispan.atomic.FineGrainedAtomicMapAPITest$3.run(FineGrainedAtomicMapAPITest.java:237)
	at org.infinispan.test.AbstractInfinispanTest$RunnableWrapper.run(AbstractInfinispanTest.java:112)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:58,173 DEBUG (ForkThread-FineGrainedAtomicMapAPITest-857801116) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [ForkThread-FineGrainedAtomicMapAPITest-857801116] local transaction FineGrainedAtomicMapAPITest-NodeA-36196:375 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:4f2 status: ActionStatus.ABORTING >] wants to rollback
2013-01-31 13:15:58,167 INFO  (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testConcurrentWritesAndIteration(org.infinispan.atomic.RepetableReadFineGrainedAtomicMapAPITest).
2013-01-31 13:15:58,166 DEBUG (OOB-1,ISPN,KeyAffinityServiceShutdownTest-NodeC-63869) [org.infinispan.cacheviews.CacheViewsManagerImpl] dist: Committing cache view CacheView{viewId=3, members=[KeyAffinityServiceShutdownTest-NodeA-53318, KeyAffinityServiceShutdownTest-NodeB-14426, KeyAffinityServiceShutdownTest-NodeC-63869]}
2013-01-31 13:15:58,174 DEBUG (OOB-1,ISPN,KeyAffinityServiceShutdownTest-NodeC-63869) [org.infinispan.statetransfer.BaseStateTransferTask] Node KeyAffinityServiceShutdownTest-NodeC-63869 completed state transfer for view 3 in 9 milliseconds!
2013-01-31 13:15:58,174 DEBUG (OOB-1,ISPN,KeyAffinityServiceShutdownTest-NodeC-63869) [org.infinispan.statetransfer.StateTransferLockImpl] Unblocking write commands for cache view 3
2013-01-31 13:15:58,174 ERROR (ForkThread-FineGrainedAtomicMapAPITest-857801116) [org.infinispan.atomic.FineGrainedAtomicMapAPITest] Unexpected error performing transaction
org.infinispan.CacheException: Unable to end batch
	at org.infinispan.batch.BatchContainer.endBatch(BatchContainer.java:107)
	at org.infinispan.batch.AutoBatchSupport.endAtomic(AutoBatchSupport.java:49)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:220)
	at org.infinispan.atomic.FineGrainedAtomicMapAPITest$3.run(FineGrainedAtomicMapAPITest.java:237)
	at org.infinispan.test.AbstractInfinispanTest$RunnableWrapper.run(AbstractInfinispanTest.java:112)
	at java.lang.Thread.run(Thread.java:680)
Caused by: javax.transaction.RollbackException: ARJUNA016053: Could not commit transaction.
	at com.arjuna.ats.internal.jta.transaction.arjunacore.TransactionImple.commitAndDisassociate(TransactionImple.java:1177)
	at com.arjuna.ats.internal.jta.transaction.arjunacore.BaseTransaction.commit(BaseTransaction.java:117)
	at org.infinispan.batch.BatchContainer.resolveTransaction(BatchContainer.java:123)
	at org.infinispan.batch.BatchContainer.endBatch(BatchContainer.java:105)
	... 5 more
Caused by: java.lang.Throwable: setRollbackOnly called from:
	at com.arjuna.ats.internal.jta.transaction.arjunacore.TransactionImple.setRollbackOnly(TransactionImple.java:313)
	at org.infinispan.interceptors.TxInterceptor.enlistWriteAndInvokeNext(TxInterceptor.java:292)
	at org.infinispan.interceptors.TxInterceptor.visitApplyDeltaCommand(TxInterceptor.java:230)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.base.CommandInterceptor.handleDefault(CommandInterceptor.java:130)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.CacheImpl.applyDelta(CacheImpl.java:515)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.invokeApplyDelta(FineGrainedAtomicHashMapProxy.java:284)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:217)
	... 3 more
2013-01-31 13:15:58,181 DEBUG (CacheViewInstaller-1,KeyAffinityServiceShutdownTest-NodeA-53318) [org.infinispan.cacheviews.CacheViewsManagerImpl] dist: Committing cache view CacheView{viewId=3, members=[KeyAffinityServiceShutdownTest-NodeA-53318, KeyAffinityServiceShutdownTest-NodeB-14426, KeyAffinityServiceShutdownTest-NodeC-63869]}
2013-01-31 13:15:58,186 DEBUG (CacheViewInstaller-1,KeyAffinityServiceShutdownTest-NodeA-53318) [org.infinispan.statetransfer.BaseStateTransferTask] Node KeyAffinityServiceShutdownTest-NodeA-53318 completed state transfer for view 3 in 25 milliseconds!
2013-01-31 13:15:58,186 DEBUG (CacheViewInstaller-1,KeyAffinityServiceShutdownTest-NodeA-53318) [org.infinispan.statetransfer.StateTransferLockImpl] Unblocking write commands for cache view 3
2013-01-31 13:15:58,186 DEBUG (CacheViewInstaller-1,KeyAffinityServiceShutdownTest-NodeA-53318) [org.infinispan.cacheviews.CacheViewsManagerImpl] Successfully installed view CacheView{viewId=3, members=[KeyAffinityServiceShutdownTest-NodeA-53318, KeyAffinityServiceShutdownTest-NodeB-14426, KeyAffinityServiceShutdownTest-NodeC-63869]} for cache dist
2013-01-31 13:15:58,175 DEBUG (testng-KeyAffinityServiceShutdownTest) [org.infinispan.CacheImpl] Started cache dist on KeyAffinityServiceShutdownTest-NodeC-63869
2013-01-31 13:15:58,188 DEBUG (testng-KeyAffinityServiceShutdownTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:58,195 DEBUG (testng-KeyAffinityServiceShutdownTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:58,196 DEBUG (testng-KeyAffinityServiceShutdownTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:58,197 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.atomic.RepetableReadFineGrainedAtomicMapAPITest] *** Test method complete; clearing contents on all caches.
2013-01-31 13:15:58,197 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'atomic' on a cache manager at address RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358
2013-01-31 13:15:58,197 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [testConcurrentWritesAndIteration=AtomicHashMap]
2013-01-31 13:15:58,198 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:58,198 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:58,198 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:58,198 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'atomic' on a cache manager at address RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745
2013-01-31 13:15:58,198 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [testConcurrentWritesAndIteration=AtomicHashMap]
2013-01-31 13:15:58,198 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:58,198 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:58,198 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:58,199 INFO  (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testConcurrentWritesOnExistingMap(org.infinispan.atomic.RepetableReadFineGrainedAtomicMapAPITest)
2013-01-31 13:15:58,199 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:4f6 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:58,199 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] will wait until no switch is in progress
2013-01-31 13:15:58,199 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] no switch in progress. Moving on...
2013-01-31 13:15:58,199 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:4f6 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:58,200 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358:376 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:4f6 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:58,200 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358:376 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:58,201 DEBUG (OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] remote transaction RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358:376 received. Epoch is 0 (current epoch is 0) and protocol ID is 2PC
2013-01-31 13:15:58,201 DEBUG (OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] will block until 0 >= 0
2013-01-31 13:15:58,201 DEBUG (OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] epoch is the desired. Moving on...
2013-01-31 13:15:58,202 DEBUG (OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] remote transaction RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358:376 received. Epoch is 0 (current epoch is 0) and protocol ID is 2PC
2013-01-31 13:15:58,202 DEBUG (OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] will block until 0 >= 0
2013-01-31 13:15:58,202 DEBUG (OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] epoch is the desired. Moving on...
2013-01-31 13:15:58,203 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:4fa status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:58,203 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] will wait until no switch is in progress
2013-01-31 13:15:58,203 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] no switch in progress. Moving on...
2013-01-31 13:15:58,203 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:4fa status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:58,212 ERROR (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.interceptors.InvocationContextInterceptor] ISPN000136: Execution error
java.lang.NullPointerException
	at java.util.concurrent.ConcurrentHashMap.get(ConcurrentHashMap.java:768)
	at org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry.getProtocolById(ReconfigurableProtocolRegistry.java:83)
	at org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager.notifyLocalTransactionFinished(ReconfigurableReplicationManager.java:254)
	at org.infinispan.transaction.TransactionTable.removeLocalTransaction(TransactionTable.java:317)
	at org.infinispan.transaction.xa.XaTransactionTable.removeLocalTransaction(XaTransactionTable.java:70)
	at org.infinispan.interceptors.TxInterceptor.enlistWriteAndInvokeNext(TxInterceptor.java:294)
	at org.infinispan.interceptors.TxInterceptor.visitApplyDeltaCommand(TxInterceptor.java:230)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.base.CommandInterceptor.handleDefault(CommandInterceptor.java:130)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.CacheImpl.applyDelta(CacheImpl.java:515)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.invokeApplyDelta(FineGrainedAtomicHashMapProxy.java:284)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:217)
	at org.infinispan.atomic.FineGrainedAtomicMapAPITest.testConcurrentWritesOnExistingMap(FineGrainedAtomicMapAPITest.java:194)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:58,235 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358:377 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:4fa status: ActionStatus.ABORTING >] wants to rollback
2013-01-31 13:15:58,236 ERROR (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Method testConcurrentWritesOnExistingMap(org.infinispan.atomic.RepetableReadFineGrainedAtomicMapAPITest) threw an exception
org.infinispan.CacheException: Unable to end batch
	at org.infinispan.batch.BatchContainer.endBatch(BatchContainer.java:107)
	at org.infinispan.batch.AutoBatchSupport.endAtomic(AutoBatchSupport.java:49)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:220)
	at org.infinispan.atomic.FineGrainedAtomicMapAPITest.testConcurrentWritesOnExistingMap(FineGrainedAtomicMapAPITest.java:194)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
Caused by: javax.transaction.RollbackException: ARJUNA016053: Could not commit transaction.
	at com.arjuna.ats.internal.jta.transaction.arjunacore.TransactionImple.commitAndDisassociate(TransactionImple.java:1177)
	at com.arjuna.ats.internal.jta.transaction.arjunacore.BaseTransaction.commit(BaseTransaction.java:117)
	at org.infinispan.batch.BatchContainer.resolveTransaction(BatchContainer.java:123)
	at org.infinispan.batch.BatchContainer.endBatch(BatchContainer.java:105)
	... 23 more
Caused by: java.lang.Throwable: setRollbackOnly called from:
	at com.arjuna.ats.internal.jta.transaction.arjunacore.TransactionImple.setRollbackOnly(TransactionImple.java:313)
	at org.infinispan.interceptors.TxInterceptor.enlistWriteAndInvokeNext(TxInterceptor.java:292)
	at org.infinispan.interceptors.TxInterceptor.visitApplyDeltaCommand(TxInterceptor.java:230)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.base.CommandInterceptor.handleDefault(CommandInterceptor.java:130)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.CacheImpl.applyDelta(CacheImpl.java:515)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.invokeApplyDelta(FineGrainedAtomicHashMapProxy.java:284)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:217)
	... 21 more
2013-01-31 13:15:58,227 DEBUG (testng-CacheClusterJoinTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:58,225 DEBUG (testng-PutForExternalReadTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:58,239 INFO  (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testConcurrentWritesAndIteration(org.infinispan.atomic.FineGrainedAtomicMapAPITest).
2013-01-31 13:15:58,239 DEBUG (testng-ConfigurationValidationTest) [org.jgroups.stack.Configurator] set property TCP.diagnostics_addr to default value /224.0.75.75
2013-01-31 13:15:58,239 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.atomic.FineGrainedAtomicMapAPITest] *** Test method complete; clearing contents on all caches.
2013-01-31 13:15:58,239 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'atomic' on a cache manager at address FineGrainedAtomicMapAPITest-NodeA-36196
2013-01-31 13:15:58,240 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [testConcurrentWritesAndIteration=AtomicHashMap]
2013-01-31 13:15:58,240 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:58,240 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:58,240 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:58,240 ERROR (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test failed testConcurrentWritesOnExistingMap(org.infinispan.atomic.RepetableReadFineGrainedAtomicMapAPITest)
org.infinispan.CacheException: Unable to end batch
	at org.infinispan.batch.BatchContainer.endBatch(BatchContainer.java:107)
	at org.infinispan.batch.AutoBatchSupport.endAtomic(AutoBatchSupport.java:49)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:220)
	at org.infinispan.atomic.FineGrainedAtomicMapAPITest.testConcurrentWritesOnExistingMap(FineGrainedAtomicMapAPITest.java:194)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
Caused by: javax.transaction.RollbackException: ARJUNA016053: Could not commit transaction.
	at com.arjuna.ats.internal.jta.transaction.arjunacore.TransactionImple.commitAndDisassociate(TransactionImple.java:1177)
	at com.arjuna.ats.internal.jta.transaction.arjunacore.BaseTransaction.commit(BaseTransaction.java:117)
	at org.infinispan.batch.BatchContainer.resolveTransaction(BatchContainer.java:123)
	at org.infinispan.batch.BatchContainer.endBatch(BatchContainer.java:105)
	... 23 more
Caused by: java.lang.Throwable: setRollbackOnly called from:
	at com.arjuna.ats.internal.jta.transaction.arjunacore.TransactionImple.setRollbackOnly(TransactionImple.java:313)
	at org.infinispan.interceptors.TxInterceptor.enlistWriteAndInvokeNext(TxInterceptor.java:292)
	at org.infinispan.interceptors.TxInterceptor.visitApplyDeltaCommand(TxInterceptor.java:230)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.base.CommandInterceptor.handleDefault(CommandInterceptor.java:130)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.CacheImpl.applyDelta(CacheImpl.java:515)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.invokeApplyDelta(FineGrainedAtomicHashMapProxy.java:284)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:217)
	... 21 more
2013-01-31 13:15:58,242 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.atomic.RepetableReadFineGrainedAtomicMapAPITest] *** Test method complete; clearing contents on all caches.
2013-01-31 13:15:58,242 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'atomic' on a cache manager at address RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358
2013-01-31 13:15:58,242 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [testConcurrentReadsOnExistingMap=AtomicHashMap]
2013-01-31 13:15:58,242 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:58,242 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:58,242 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:58,243 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'atomic' on a cache manager at address RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745
2013-01-31 13:15:58,243 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [testConcurrentReadsOnExistingMap=AtomicHashMap]
2013-01-31 13:15:58,243 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:58,243 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:58,243 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'atomic' on a cache manager at address FineGrainedAtomicMapAPITest-NodeB-28700
2013-01-31 13:15:58,243 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [testConcurrentWritesAndIteration=AtomicHashMap]
2013-01-31 13:15:58,243 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:58,243 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:58,243 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:58,243 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:58,243 INFO  (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testConcurrentWritesOnExistingMap(org.infinispan.atomic.FineGrainedAtomicMapAPITest)
2013-01-31 13:15:58,243 INFO  (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testCreateMapInTx(org.infinispan.atomic.RepetableReadFineGrainedAtomicMapAPITest)
2013-01-31 13:15:58,243 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:4fe status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:58,243 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-FineGrainedAtomicMapAPITest] will wait until no switch is in progress
2013-01-31 13:15:58,243 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-FineGrainedAtomicMapAPITest] no switch in progress. Moving on...
2013-01-31 13:15:58,243 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:4ff status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:58,243 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:4fe status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:58,243 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] will wait until no switch is in progress
2013-01-31 13:15:58,244 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] no switch in progress. Moving on...
2013-01-31 13:15:58,244 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:4ff status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:58,244 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction FineGrainedAtomicMapAPITest-NodeA-36196:378 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:4fe status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:58,244 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction FineGrainedAtomicMapAPITest-NodeA-36196:378 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:58,244 ERROR (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.interceptors.InvocationContextInterceptor] ISPN000136: Execution error
java.lang.NullPointerException
	at java.util.concurrent.ConcurrentHashMap.get(ConcurrentHashMap.java:768)
	at org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry.getProtocolById(ReconfigurableProtocolRegistry.java:83)
	at org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager.notifyLocalTransactionFinished(ReconfigurableReplicationManager.java:254)
	at org.infinispan.transaction.TransactionTable.removeLocalTransaction(TransactionTable.java:317)
	at org.infinispan.transaction.xa.XaTransactionTable.removeLocalTransaction(XaTransactionTable.java:70)
	at org.infinispan.interceptors.TxInterceptor.enlistWriteAndInvokeNext(TxInterceptor.java:294)
	at org.infinispan.interceptors.TxInterceptor.visitApplyDeltaCommand(TxInterceptor.java:230)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.base.CommandInterceptor.handleDefault(CommandInterceptor.java:130)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.CacheImpl.applyDelta(CacheImpl.java:515)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.invokeApplyDelta(FineGrainedAtomicHashMapProxy.java:284)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:217)
	at org.infinispan.atomic.FineGrainedAtomicMapAPITest.testCreateMapInTx(FineGrainedAtomicMapAPITest.java:320)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:58,253 ERROR (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Method testCreateMapInTx(org.infinispan.atomic.RepetableReadFineGrainedAtomicMapAPITest) threw an exception
java.lang.NullPointerException
	at java.util.concurrent.ConcurrentHashMap.get(ConcurrentHashMap.java:768)
	at org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry.getProtocolById(ReconfigurableProtocolRegistry.java:83)
	at org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager.notifyLocalTransactionFinished(ReconfigurableReplicationManager.java:254)
	at org.infinispan.transaction.TransactionTable.removeLocalTransaction(TransactionTable.java:317)
	at org.infinispan.transaction.xa.XaTransactionTable.removeLocalTransaction(XaTransactionTable.java:70)
	at org.infinispan.interceptors.TxInterceptor.enlistWriteAndInvokeNext(TxInterceptor.java:294)
	at org.infinispan.interceptors.TxInterceptor.visitApplyDeltaCommand(TxInterceptor.java:230)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.base.CommandInterceptor.handleDefault(CommandInterceptor.java:130)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.CacheImpl.applyDelta(CacheImpl.java:515)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.invokeApplyDelta(FineGrainedAtomicHashMapProxy.java:284)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:217)
	at org.infinispan.atomic.FineGrainedAtomicMapAPITest.testCreateMapInTx(FineGrainedAtomicMapAPITest.java:320)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:58,253 DEBUG (OOB-2,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [OOB-2,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] remote transaction FineGrainedAtomicMapAPITest-NodeA-36196:378 received. Epoch is 0 (current epoch is 0) and protocol ID is 2PC
2013-01-31 13:15:58,255 DEBUG (OOB-2,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-2,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] will block until 0 >= 0
2013-01-31 13:15:58,255 DEBUG (OOB-2,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-2,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] epoch is the desired. Moving on...
2013-01-31 13:15:58,256 ERROR (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test failed testCreateMapInTx(org.infinispan.atomic.RepetableReadFineGrainedAtomicMapAPITest)
java.lang.NullPointerException
	at java.util.concurrent.ConcurrentHashMap.get(ConcurrentHashMap.java:768)
	at org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry.getProtocolById(ReconfigurableProtocolRegistry.java:83)
	at org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager.notifyLocalTransactionFinished(ReconfigurableReplicationManager.java:254)
	at org.infinispan.transaction.TransactionTable.removeLocalTransaction(TransactionTable.java:317)
	at org.infinispan.transaction.xa.XaTransactionTable.removeLocalTransaction(XaTransactionTable.java:70)
	at org.infinispan.interceptors.TxInterceptor.enlistWriteAndInvokeNext(TxInterceptor.java:294)
	at org.infinispan.interceptors.TxInterceptor.visitApplyDeltaCommand(TxInterceptor.java:230)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.base.CommandInterceptor.handleDefault(CommandInterceptor.java:130)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.CacheImpl.applyDelta(CacheImpl.java:515)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.invokeApplyDelta(FineGrainedAtomicHashMapProxy.java:284)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:217)
	at org.infinispan.atomic.FineGrainedAtomicMapAPITest.testCreateMapInTx(FineGrainedAtomicMapAPITest.java:320)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:58,258 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.atomic.RepetableReadFineGrainedAtomicMapAPITest] *** Test method complete; clearing contents on all caches.
2013-01-31 13:15:58,258 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358:379 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:4ff status: ActionStatus.ABORTING >] wants to rollback
2013-01-31 13:15:58,259 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'atomic' on a cache manager at address RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358
2013-01-31 13:15:58,259 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == []
2013-01-31 13:15:58,259 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:58,259 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:58,259 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:58,259 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'atomic' on a cache manager at address RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745
2013-01-31 13:15:58,259 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == []
2013-01-31 13:15:58,259 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:58,259 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:58,259 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:58,259 INFO  (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testFineGrainedMapAfterSimpleMap(org.infinispan.atomic.RepetableReadFineGrainedAtomicMapAPITest)
2013-01-31 13:15:58,260 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:506 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:58,260 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] will wait until no switch is in progress
2013-01-31 13:15:58,260 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] no switch in progress. Moving on...
2013-01-31 13:15:58,260 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:506 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:58,260 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358:380 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:506 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:58,260 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358:380 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:58,261 DEBUG (OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] remote transaction RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358:380 received. Epoch is 0 (current epoch is 0) and protocol ID is 2PC
2013-01-31 13:15:58,261 DEBUG (OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] will block until 0 >= 0
2013-01-31 13:15:58,261 DEBUG (OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] epoch is the desired. Moving on...
2013-01-31 13:15:58,261 DEBUG (OOB-2,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [OOB-2,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] remote transaction FineGrainedAtomicMapAPITest-NodeA-36196:378 received. Epoch is 0 (current epoch is 0) and protocol ID is 2PC
2013-01-31 13:15:58,261 DEBUG (OOB-2,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-2,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] will block until 0 >= 0
2013-01-31 13:15:58,261 DEBUG (OOB-2,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-2,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] epoch is the desired. Moving on...
2013-01-31 13:15:58,265 DEBUG (OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] remote transaction RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358:380 received. Epoch is 0 (current epoch is 0) and protocol ID is 2PC
2013-01-31 13:15:58,265 DEBUG (OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] will block until 0 >= 0
2013-01-31 13:15:58,265 DEBUG (OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] epoch is the desired. Moving on...
2013-01-31 13:15:58,266 ERROR (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Method testFineGrainedMapAfterSimpleMap(org.infinispan.atomic.RepetableReadFineGrainedAtomicMapAPITest) threw an exception
java.lang.IllegalArgumentException: Cannot switch type of previously used AtomicHashMap from regular to fine-grained!
	at org.infinispan.atomic.AtomicMapLookup.getMap(AtomicMapLookup.java:149)
	at org.infinispan.atomic.AtomicMapLookup.getFineGrainedAtomicMap(AtomicMapLookup.java:121)
	at org.infinispan.atomic.AtomicMapLookup.getFineGrainedAtomicMap(AtomicMapLookup.java:73)
	at org.infinispan.atomic.FineGrainedAtomicMapAPITest.testFineGrainedMapAfterSimpleMap(FineGrainedAtomicMapAPITest.java:288)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:58,276 INFO  (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testFineGrainedMapAfterSimpleMap(org.infinispan.atomic.RepetableReadFineGrainedAtomicMapAPITest).
2013-01-31 13:15:58,277 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.atomic.RepetableReadFineGrainedAtomicMapAPITest] *** Test method complete; clearing contents on all caches.
2013-01-31 13:15:58,277 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'atomic' on a cache manager at address RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358
2013-01-31 13:15:58,277 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [testReplicationRemoveCommit=AtomicHashMap]
2013-01-31 13:15:58,277 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:58,277 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:58,277 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:58,277 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'atomic' on a cache manager at address RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745
2013-01-31 13:15:58,277 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [testReplicationRemoveCommit=AtomicHashMap]
2013-01-31 13:15:58,277 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:58,277 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:58,277 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:58,278 INFO  (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testMultipleTx(org.infinispan.atomic.RepetableReadFineGrainedAtomicMapAPITest)
2013-01-31 13:15:58,278 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:50a status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:58,278 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] will wait until no switch is in progress
2013-01-31 13:15:58,278 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] no switch in progress. Moving on...
2013-01-31 13:15:58,278 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:50a status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:58,279 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358:381 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:50a status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:58,279 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358:381 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:58,280 DEBUG (OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] remote transaction RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358:381 received. Epoch is 0 (current epoch is 0) and protocol ID is 2PC
2013-01-31 13:15:58,280 DEBUG (OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] will block until 0 >= 0
2013-01-31 13:15:58,280 DEBUG (OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] epoch is the desired. Moving on...
2013-01-31 13:15:58,298 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:50e status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:58,298 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-FineGrainedAtomicMapAPITest] will wait until no switch is in progress
2013-01-31 13:15:58,298 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-FineGrainedAtomicMapAPITest] no switch in progress. Moving on...
2013-01-31 13:15:58,298 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:50e status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:58,302 ERROR (testng-FineGrainedAtomicMapAPITest) [org.infinispan.interceptors.InvocationContextInterceptor] ISPN000136: Execution error
java.lang.NullPointerException
	at java.util.concurrent.ConcurrentHashMap.get(ConcurrentHashMap.java:768)
	at org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry.getProtocolById(ReconfigurableProtocolRegistry.java:83)
	at org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager.notifyLocalTransactionFinished(ReconfigurableReplicationManager.java:254)
	at org.infinispan.transaction.TransactionTable.removeLocalTransaction(TransactionTable.java:317)
	at org.infinispan.transaction.xa.XaTransactionTable.removeLocalTransaction(XaTransactionTable.java:70)
	at org.infinispan.interceptors.TxInterceptor.enlistWriteAndInvokeNext(TxInterceptor.java:294)
	at org.infinispan.interceptors.TxInterceptor.visitApplyDeltaCommand(TxInterceptor.java:230)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.base.CommandInterceptor.handleDefault(CommandInterceptor.java:130)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.CacheImpl.applyDelta(CacheImpl.java:515)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.invokeApplyDelta(FineGrainedAtomicHashMapProxy.java:284)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:217)
	at org.infinispan.atomic.FineGrainedAtomicMapAPITest.testConcurrentWritesOnExistingMap(FineGrainedAtomicMapAPITest.java:194)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:58,309 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction FineGrainedAtomicMapAPITest-NodeA-36196:382 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:50e status: ActionStatus.ABORTING >] wants to rollback
2013-01-31 13:15:58,309 ERROR (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Method testConcurrentWritesOnExistingMap(org.infinispan.atomic.FineGrainedAtomicMapAPITest) threw an exception
org.infinispan.CacheException: Unable to end batch
	at org.infinispan.batch.BatchContainer.endBatch(BatchContainer.java:107)
	at org.infinispan.batch.AutoBatchSupport.endAtomic(AutoBatchSupport.java:49)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:220)
	at org.infinispan.atomic.FineGrainedAtomicMapAPITest.testConcurrentWritesOnExistingMap(FineGrainedAtomicMapAPITest.java:194)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
Caused by: javax.transaction.RollbackException: ARJUNA016053: Could not commit transaction.
	at com.arjuna.ats.internal.jta.transaction.arjunacore.TransactionImple.commitAndDisassociate(TransactionImple.java:1177)
	at com.arjuna.ats.internal.jta.transaction.arjunacore.BaseTransaction.commit(BaseTransaction.java:117)
	at org.infinispan.batch.BatchContainer.resolveTransaction(BatchContainer.java:123)
	at org.infinispan.batch.BatchContainer.endBatch(BatchContainer.java:105)
	... 23 more
Caused by: java.lang.Throwable: setRollbackOnly called from:
	at com.arjuna.ats.internal.jta.transaction.arjunacore.TransactionImple.setRollbackOnly(TransactionImple.java:313)
	at org.infinispan.interceptors.TxInterceptor.enlistWriteAndInvokeNext(TxInterceptor.java:292)
	at org.infinispan.interceptors.TxInterceptor.visitApplyDeltaCommand(TxInterceptor.java:230)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.base.CommandInterceptor.handleDefault(CommandInterceptor.java:130)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.CacheImpl.applyDelta(CacheImpl.java:515)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.invokeApplyDelta(FineGrainedAtomicHashMapProxy.java:284)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:217)
	... 21 more
2013-01-31 13:15:58,317 DEBUG (OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] remote transaction RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358:381 received. Epoch is 0 (current epoch is 0) and protocol ID is 2PC
2013-01-31 13:15:58,326 DEBUG (OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] will block until 0 >= 0
2013-01-31 13:15:58,326 DEBUG (OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] epoch is the desired. Moving on...
2013-01-31 13:15:58,326 ERROR (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test failed testConcurrentWritesOnExistingMap(org.infinispan.atomic.FineGrainedAtomicMapAPITest)
org.infinispan.CacheException: Unable to end batch
	at org.infinispan.batch.BatchContainer.endBatch(BatchContainer.java:107)
	at org.infinispan.batch.AutoBatchSupport.endAtomic(AutoBatchSupport.java:49)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:220)
	at org.infinispan.atomic.FineGrainedAtomicMapAPITest.testConcurrentWritesOnExistingMap(FineGrainedAtomicMapAPITest.java:194)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
Caused by: javax.transaction.RollbackException: ARJUNA016053: Could not commit transaction.
	at com.arjuna.ats.internal.jta.transaction.arjunacore.TransactionImple.commitAndDisassociate(TransactionImple.java:1177)
	at com.arjuna.ats.internal.jta.transaction.arjunacore.BaseTransaction.commit(BaseTransaction.java:117)
	at org.infinispan.batch.BatchContainer.resolveTransaction(BatchContainer.java:123)
	at org.infinispan.batch.BatchContainer.endBatch(BatchContainer.java:105)
	... 23 more
Caused by: java.lang.Throwable: setRollbackOnly called from:
	at com.arjuna.ats.internal.jta.transaction.arjunacore.TransactionImple.setRollbackOnly(TransactionImple.java:313)
	at org.infinispan.interceptors.TxInterceptor.enlistWriteAndInvokeNext(TxInterceptor.java:292)
	at org.infinispan.interceptors.TxInterceptor.visitApplyDeltaCommand(TxInterceptor.java:230)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.base.CommandInterceptor.handleDefault(CommandInterceptor.java:130)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.CacheImpl.applyDelta(CacheImpl.java:515)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.invokeApplyDelta(FineGrainedAtomicHashMapProxy.java:284)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:217)
	... 21 more
2013-01-31 13:15:58,329 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.atomic.FineGrainedAtomicMapAPITest] *** Test method complete; clearing contents on all caches.
2013-01-31 13:15:58,329 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'atomic' on a cache manager at address FineGrainedAtomicMapAPITest-NodeA-36196
2013-01-31 13:15:58,330 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [testConcurrentReadsOnExistingMap=AtomicHashMap]
2013-01-31 13:15:58,330 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:58,330 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:58,330 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:58,330 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'atomic' on a cache manager at address FineGrainedAtomicMapAPITest-NodeB-28700
2013-01-31 13:15:58,330 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [testConcurrentReadsOnExistingMap=AtomicHashMap]
2013-01-31 13:15:58,313 DEBUG (testng-CacheClusterJoinTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:58,312 DEBUG (testng-PutForExternalReadTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:58,310 DEBUG (testng-ConfigurationValidationTest) [org.jgroups.protocols.FRAG2] received CONFIG event: {bind_addr=/127.0.0.1}
2013-01-31 13:15:58,330 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:58,331 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:58,331 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:58,330 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:512 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:58,331 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] will wait until no switch is in progress
2013-01-31 13:15:58,331 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] no switch in progress. Moving on...
2013-01-31 13:15:58,331 INFO  (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testCreateMapInTx(org.infinispan.atomic.FineGrainedAtomicMapAPITest)
2013-01-31 13:15:58,331 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:512 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:58,331 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:513 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:58,331 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-FineGrainedAtomicMapAPITest] will wait until no switch is in progress
2013-01-31 13:15:58,331 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-FineGrainedAtomicMapAPITest] no switch in progress. Moving on...
2013-01-31 13:15:58,331 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:513 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:58,332 ERROR (testng-FineGrainedAtomicMapAPITest) [org.infinispan.interceptors.InvocationContextInterceptor] ISPN000136: Execution error
java.lang.NullPointerException
	at java.util.concurrent.ConcurrentHashMap.get(ConcurrentHashMap.java:768)
	at org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry.getProtocolById(ReconfigurableProtocolRegistry.java:83)
	at org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager.notifyLocalTransactionFinished(ReconfigurableReplicationManager.java:254)
	at org.infinispan.transaction.TransactionTable.removeLocalTransaction(TransactionTable.java:317)
	at org.infinispan.transaction.xa.XaTransactionTable.removeLocalTransaction(XaTransactionTable.java:70)
	at org.infinispan.interceptors.TxInterceptor.enlistWriteAndInvokeNext(TxInterceptor.java:294)
	at org.infinispan.interceptors.TxInterceptor.visitApplyDeltaCommand(TxInterceptor.java:230)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.base.CommandInterceptor.handleDefault(CommandInterceptor.java:130)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.CacheImpl.applyDelta(CacheImpl.java:515)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.invokeApplyDelta(FineGrainedAtomicHashMapProxy.java:284)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:217)
	at org.infinispan.atomic.FineGrainedAtomicMapAPITest.testCreateMapInTx(FineGrainedAtomicMapAPITest.java:320)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:58,335 ERROR (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Method testCreateMapInTx(org.infinispan.atomic.FineGrainedAtomicMapAPITest) threw an exception
java.lang.NullPointerException
	at java.util.concurrent.ConcurrentHashMap.get(ConcurrentHashMap.java:768)
	at org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry.getProtocolById(ReconfigurableProtocolRegistry.java:83)
	at org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager.notifyLocalTransactionFinished(ReconfigurableReplicationManager.java:254)
	at org.infinispan.transaction.TransactionTable.removeLocalTransaction(TransactionTable.java:317)
	at org.infinispan.transaction.xa.XaTransactionTable.removeLocalTransaction(XaTransactionTable.java:70)
	at org.infinispan.interceptors.TxInterceptor.enlistWriteAndInvokeNext(TxInterceptor.java:294)
	at org.infinispan.interceptors.TxInterceptor.visitApplyDeltaCommand(TxInterceptor.java:230)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.base.CommandInterceptor.handleDefault(CommandInterceptor.java:130)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.CacheImpl.applyDelta(CacheImpl.java:515)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.invokeApplyDelta(FineGrainedAtomicHashMapProxy.java:284)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:217)
	at org.infinispan.atomic.FineGrainedAtomicMapAPITest.testCreateMapInTx(FineGrainedAtomicMapAPITest.java:320)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:58,353 ERROR (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test failed testCreateMapInTx(org.infinispan.atomic.FineGrainedAtomicMapAPITest)
java.lang.NullPointerException
	at java.util.concurrent.ConcurrentHashMap.get(ConcurrentHashMap.java:768)
	at org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry.getProtocolById(ReconfigurableProtocolRegistry.java:83)
	at org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager.notifyLocalTransactionFinished(ReconfigurableReplicationManager.java:254)
	at org.infinispan.transaction.TransactionTable.removeLocalTransaction(TransactionTable.java:317)
	at org.infinispan.transaction.xa.XaTransactionTable.removeLocalTransaction(XaTransactionTable.java:70)
	at org.infinispan.interceptors.TxInterceptor.enlistWriteAndInvokeNext(TxInterceptor.java:294)
	at org.infinispan.interceptors.TxInterceptor.visitApplyDeltaCommand(TxInterceptor.java:230)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.base.CommandInterceptor.handleDefault(CommandInterceptor.java:130)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.CacheImpl.applyDelta(CacheImpl.java:515)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.invokeApplyDelta(FineGrainedAtomicHashMapProxy.java:284)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:217)
	at org.infinispan.atomic.FineGrainedAtomicMapAPITest.testCreateMapInTx(FineGrainedAtomicMapAPITest.java:320)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:58,349 DEBUG (testng-PutForExternalReadTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:58,358 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.atomic.FineGrainedAtomicMapAPITest] *** Test method complete; clearing contents on all caches.
2013-01-31 13:15:58,358 INFO  (testng-PutForExternalReadTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:58,359 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction FineGrainedAtomicMapAPITest-NodeA-36196:384 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:513 status: ActionStatus.ABORTING >] wants to rollback
2013-01-31 13:15:58,347 DEBUG (testng-CacheClusterJoinTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:58,339 WARN  (testng-ConfigurationValidation2Test) [org.jgroups.stack.Configurator] [JGRP00013] TP.discard_incompatible_packets has been deprecated: incompatible packets are discarded anyway
2013-01-31 13:15:58,384 INFO  (testng-CacheClusterJoinTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:58,385 DEBUG (testng-CacheClusterJoinTest) [org.infinispan.transaction.TransactionTable] Min view id set to 0
2013-01-31 13:15:58,385 DEBUG (testng-CacheClusterJoinTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 10
2013-01-31 13:15:58,385 DEBUG (testng-CacheClusterJoinTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.StateTransferLockInterceptor@3b8b8564, TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@44e286c6, PB=org.infinispan.interceptors.StateTransferLockInterceptor@3b8b8564}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@73fe547e}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@3e5d57b0}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@622803cc, PB=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@622803cc}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@3111786c, TO=org.infinispan.interceptors.EntryWrappingInterceptor@3111786c, PB=org.infinispan.interceptors.EntryWrappingInterceptor@3111786c}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.ReplicationInterceptor@71f9139e, TO=org.infinispan.interceptors.totalorder.TotalOrderReplicationInterceptor@17772487, PB=org.infinispan.interceptors.ReplicationInterceptor@71f9139e}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:58,386 DEBUG (testng-PutForExternalReadTest) [org.infinispan.transaction.TransactionTable] Min view id set to 0
2013-01-31 13:15:58,386 DEBUG (testng-PutForExternalReadTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 11
2013-01-31 13:15:58,386 DEBUG (testng-PutForExternalReadTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.StateTransferLockInterceptor@3ec4b1da, TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@63787f67, PB=org.infinispan.interceptors.StateTransferLockInterceptor@3ec4b1da}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@7bf47635}
	>> org.infinispan.interceptors.TxInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@6e7cd126}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@44874e75, PB=org.infinispan.interceptors.locking.OptimisticLockingInterceptor@44874e75}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@f300679, TO=org.infinispan.interceptors.EntryWrappingInterceptor@f300679, PB=org.infinispan.interceptors.EntryWrappingInterceptor@f300679}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.ReplicationInterceptor@19f8f9b9, TO=org.infinispan.interceptors.totalorder.TotalOrderReplicationInterceptor@28d2ee01, PB=org.infinispan.interceptors.ReplicationInterceptor@19f8f9b9}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:58,336 ERROR (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.interceptors.InvocationContextInterceptor] ISPN000136: Execution error
java.lang.NullPointerException
	at java.util.concurrent.ConcurrentHashMap.get(ConcurrentHashMap.java:768)
	at org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry.getProtocolById(ReconfigurableProtocolRegistry.java:83)
	at org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager.notifyLocalTransactionFinished(ReconfigurableReplicationManager.java:254)
	at org.infinispan.transaction.TransactionTable.removeLocalTransaction(TransactionTable.java:317)
	at org.infinispan.transaction.xa.XaTransactionTable.removeLocalTransaction(XaTransactionTable.java:70)
	at org.infinispan.interceptors.TxInterceptor.enlistWriteAndInvokeNext(TxInterceptor.java:294)
	at org.infinispan.interceptors.TxInterceptor.visitApplyDeltaCommand(TxInterceptor.java:230)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.base.CommandInterceptor.handleDefault(CommandInterceptor.java:130)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.CacheImpl.applyDelta(CacheImpl.java:515)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.invokeApplyDelta(FineGrainedAtomicHashMapProxy.java:284)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:217)
	at org.infinispan.atomic.FineGrainedAtomicMapAPITest.testMultipleTx(FineGrainedAtomicMapAPITest.java:72)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:58,392 ERROR (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Method testMultipleTx(org.infinispan.atomic.RepetableReadFineGrainedAtomicMapAPITest) threw an exception
java.lang.NullPointerException
	at java.util.concurrent.ConcurrentHashMap.get(ConcurrentHashMap.java:768)
	at org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry.getProtocolById(ReconfigurableProtocolRegistry.java:83)
	at org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager.notifyLocalTransactionFinished(ReconfigurableReplicationManager.java:254)
	at org.infinispan.transaction.TransactionTable.removeLocalTransaction(TransactionTable.java:317)
	at org.infinispan.transaction.xa.XaTransactionTable.removeLocalTransaction(XaTransactionTable.java:70)
	at org.infinispan.interceptors.TxInterceptor.enlistWriteAndInvokeNext(TxInterceptor.java:294)
	at org.infinispan.interceptors.TxInterceptor.visitApplyDeltaCommand(TxInterceptor.java:230)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.base.CommandInterceptor.handleDefault(CommandInterceptor.java:130)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.CacheImpl.applyDelta(CacheImpl.java:515)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.invokeApplyDelta(FineGrainedAtomicHashMapProxy.java:284)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:217)
	at org.infinispan.atomic.FineGrainedAtomicMapAPITest.testMultipleTx(FineGrainedAtomicMapAPITest.java:72)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:58,399 ERROR (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test failed testMultipleTx(org.infinispan.atomic.RepetableReadFineGrainedAtomicMapAPITest)
java.lang.NullPointerException
	at java.util.concurrent.ConcurrentHashMap.get(ConcurrentHashMap.java:768)
	at org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry.getProtocolById(ReconfigurableProtocolRegistry.java:83)
	at org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager.notifyLocalTransactionFinished(ReconfigurableReplicationManager.java:254)
	at org.infinispan.transaction.TransactionTable.removeLocalTransaction(TransactionTable.java:317)
	at org.infinispan.transaction.xa.XaTransactionTable.removeLocalTransaction(XaTransactionTable.java:70)
	at org.infinispan.interceptors.TxInterceptor.enlistWriteAndInvokeNext(TxInterceptor.java:294)
	at org.infinispan.interceptors.TxInterceptor.visitApplyDeltaCommand(TxInterceptor.java:230)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.base.CommandInterceptor.handleDefault(CommandInterceptor.java:130)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.CacheImpl.applyDelta(CacheImpl.java:515)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.invokeApplyDelta(FineGrainedAtomicHashMapProxy.java:284)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:217)
	at org.infinispan.atomic.FineGrainedAtomicMapAPITest.testMultipleTx(FineGrainedAtomicMapAPITest.java:72)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:58,404 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.atomic.RepetableReadFineGrainedAtomicMapAPITest] *** Test method complete; clearing contents on all caches.
2013-01-31 13:15:58,405 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358:383 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:512 status: ActionStatus.ABORTING >] wants to rollback
2013-01-31 13:15:58,387 DEBUG (testng-PutForExternalReadTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Setting configuration tunned parameters
2013-01-31 13:15:58,405 DEBUG (testng-PutForExternalReadTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Configuration State responses are {}
2013-01-31 13:15:58,405 DEBUG (testng-PutForExternalReadTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] No Configuration State found in cluster
2013-01-31 13:15:58,405 DEBUG (testng-PutForExternalReadTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] No State found. Using original configuration parameters
2013-01-31 13:15:58,405 DEBUG (testng-PutForExternalReadTest) [org.infinispan.cacheviews.CacheViewsManagerImpl] replSync: Node PutForExternalReadTest-NodeC-39912 is joining
2013-01-31 13:15:58,387 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'atomic' on a cache manager at address FineGrainedAtomicMapAPITest-NodeA-36196
2013-01-31 13:15:58,406 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == []
2013-01-31 13:15:58,406 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:58,406 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:58,406 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:58,407 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'atomic' on a cache manager at address FineGrainedAtomicMapAPITest-NodeB-28700
2013-01-31 13:15:58,407 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == []
2013-01-31 13:15:58,407 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:58,407 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:58,407 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:58,407 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'atomic' on a cache manager at address RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358
2013-01-31 13:15:58,407 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [testMultipleTx=AtomicHashMap]
2013-01-31 13:15:58,407 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:58,407 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:58,407 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:58,407 INFO  (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testFineGrainedMapAfterSimpleMap(org.infinispan.atomic.FineGrainedAtomicMapAPITest)
2013-01-31 13:15:58,407 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:51a status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:58,407 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-FineGrainedAtomicMapAPITest] will wait until no switch is in progress
2013-01-31 13:15:58,407 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-FineGrainedAtomicMapAPITest] no switch in progress. Moving on...
2013-01-31 13:15:58,407 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:51a status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:58,408 DEBUG (CacheViewInstaller-1,PutForExternalReadTest-NodeC-39912) [org.infinispan.cacheviews.CacheViewsManagerImpl] Installing new view CacheView{viewId=1, members=[PutForExternalReadTest-NodeC-39912]} for cache replSync
2013-01-31 13:15:58,408 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction FineGrainedAtomicMapAPITest-NodeA-36196:385 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:51a status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:58,408 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction FineGrainedAtomicMapAPITest-NodeA-36196:385 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:58,387 DEBUG (testng-CacheClusterJoinTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Setting configuration tunned parameters
2013-01-31 13:15:58,409 DEBUG (testng-CacheClusterJoinTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Configuration State responses are {}
2013-01-31 13:15:58,409 DEBUG (testng-CacheClusterJoinTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] No Configuration State found in cluster
2013-01-31 13:15:58,409 DEBUG (testng-CacheClusterJoinTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] No State found. Using original configuration parameters
2013-01-31 13:15:58,409 DEBUG (testng-CacheClusterJoinTest) [org.infinispan.cacheviews.CacheViewsManagerImpl] cache: Node CacheClusterJoinTest-NodeC-62173 is joining
2013-01-31 13:15:58,383 DEBUG (testng-ConfigurationValidationTest) [org.jgroups.protocols.pbcast.GMS] address=ConfigurationValidationTest-NodeB-4331, cluster=ISPN, physical address=127.0.0.1:8750
2013-01-31 13:15:58,407 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'atomic' on a cache manager at address RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745
2013-01-31 13:15:58,409 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [testMultipleTx=AtomicHashMap]
2013-01-31 13:15:58,409 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:58,409 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:58,409 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:58,410 INFO  (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testNoTx(org.infinispan.atomic.RepetableReadFineGrainedAtomicMapAPITest)
2013-01-31 13:15:58,410 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:51e status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:58,410 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] will wait until no switch is in progress
2013-01-31 13:15:58,410 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] no switch in progress. Moving on...
2013-01-31 13:15:58,410 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:51e status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:58,410 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358:386 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:51e status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:58,410 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358:386 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:58,410 DEBUG (OOB-2,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [OOB-2,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] remote transaction FineGrainedAtomicMapAPITest-NodeA-36196:385 received. Epoch is 0 (current epoch is 0) and protocol ID is 2PC
2013-01-31 13:15:58,410 DEBUG (OOB-2,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-2,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] will block until 0 >= 0
2013-01-31 13:15:58,410 DEBUG (OOB-2,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-2,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] epoch is the desired. Moving on...
2013-01-31 13:15:58,403 DEBUG (testng-ConfigurationValidation2Test) [org.jgroups.stack.Configurator] set property TCP.diagnostics_addr to default value /224.0.75.75
2013-01-31 13:15:58,410 DEBUG (transport-thread-94) [org.infinispan.distribution.ch.DefaultConsistentHash] Using 1 virtualNodes to initialize consistent hash wheel 
2013-01-31 13:15:58,410 DEBUG (transport-thread-94) [org.infinispan.statetransfer.ReplicatedStateTransferTask] Commencing state transfer 1 on node: PutForExternalReadTest-NodeC-39912. Before start, data container had 0 entries
2013-01-31 13:15:58,411 DEBUG (transport-thread-94) [org.infinispan.statetransfer.StateTransferLockImpl] Blocking new write commands for cache view 1
2013-01-31 13:15:58,411 DEBUG (OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] remote transaction RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358:386 received. Epoch is 0 (current epoch is 0) and protocol ID is 2PC
2013-01-31 13:15:58,411 DEBUG (CacheViewInstaller-1,CacheClusterJoinTest-NodeC-62173) [org.infinispan.cacheviews.CacheViewsManagerImpl] Installing new view CacheView{viewId=1, members=[CacheClusterJoinTest-NodeC-62173]} for cache cache
2013-01-31 13:15:58,411 DEBUG (OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] will block until 0 >= 0
2013-01-31 13:15:58,411 DEBUG (OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] epoch is the desired. Moving on...
2013-01-31 13:15:58,412 DEBUG (testng-ConfigurationValidationTest) [org.jgroups.protocols.pbcast.NAKACK2] 
[ConfigurationValidationTest-NodeB-4331 setDigest()]
existing digest:  []
new digest:       ConfigurationValidationTest-NodeB-4331: [0 (0)]
resulting digest: ConfigurationValidationTest-NodeB-4331: [0 (0)]
2013-01-31 13:15:58,412 DEBUG (testng-ConfigurationValidationTest) [org.jgroups.protocols.pbcast.GMS] ConfigurationValidationTest-NodeB-4331: installing view [ConfigurationValidationTest-NodeB-4331|0] [ConfigurationValidationTest-NodeB-4331]
2013-01-31 13:15:58,412 DEBUG (testng-ConfigurationValidationTest) [org.jgroups.protocols.pbcast.STABLE] resuming message garbage collection
2013-01-31 13:15:58,412 DEBUG (testng-ConfigurationValidationTest) [org.jgroups.protocols.pbcast.STABLE] [ergonomics] setting max_bytes to 400KB (1 members)
2013-01-31 13:15:58,412 DEBUG (testng-ConfigurationValidationTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] New view accepted: [ConfigurationValidationTest-NodeB-4331|0] [ConfigurationValidationTest-NodeB-4331]
2013-01-31 13:15:58,412 INFO  (testng-ConfigurationValidationTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000094: Received new cluster view: [ConfigurationValidationTest-NodeB-4331|0] [ConfigurationValidationTest-NodeB-4331]
2013-01-31 13:15:58,413 DEBUG (transport-thread-96) [org.infinispan.distribution.ch.DefaultConsistentHash] Using 1 virtualNodes to initialize consistent hash wheel 
2013-01-31 13:15:58,413 DEBUG (transport-thread-96) [org.infinispan.statetransfer.ReplicatedStateTransferTask] Commencing state transfer 1 on node: CacheClusterJoinTest-NodeC-62173. Before start, data container had 0 entries
2013-01-31 13:15:58,413 DEBUG (transport-thread-96) [org.infinispan.statetransfer.StateTransferLockImpl] Blocking new write commands for cache view 1
2013-01-31 13:15:58,413 DEBUG (CacheViewInstaller-1,CacheClusterJoinTest-NodeC-62173) [org.infinispan.cacheviews.CacheViewsManagerImpl] cache: Committing cache view CacheView{viewId=1, members=[CacheClusterJoinTest-NodeC-62173]}
2013-01-31 13:15:58,413 DEBUG (CacheViewInstaller-1,CacheClusterJoinTest-NodeC-62173) [org.infinispan.statetransfer.BaseStateTransferTask] Node CacheClusterJoinTest-NodeC-62173 completed state transfer for view 1 in 0 milliseconds!
2013-01-31 13:15:58,413 DEBUG (CacheViewInstaller-1,CacheClusterJoinTest-NodeC-62173) [org.infinispan.statetransfer.StateTransferLockImpl] Unblocking write commands for cache view 1
2013-01-31 13:15:58,413 DEBUG (CacheViewInstaller-1,CacheClusterJoinTest-NodeC-62173) [org.infinispan.cacheviews.CacheViewsManagerImpl] Successfully installed view CacheView{viewId=1, members=[CacheClusterJoinTest-NodeC-62173]} for cache cache
2013-01-31 13:15:58,414 DEBUG (OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] remote transaction RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358:386 received. Epoch is 0 (current epoch is 0) and protocol ID is 2PC
2013-01-31 13:15:58,414 DEBUG (OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] will block until 0 >= 0
2013-01-31 13:15:58,414 DEBUG (OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] epoch is the desired. Moving on...
2013-01-31 13:15:58,414 DEBUG (CacheViewInstaller-1,PutForExternalReadTest-NodeC-39912) [org.infinispan.cacheviews.CacheViewsManagerImpl] replSync: Committing cache view CacheView{viewId=1, members=[PutForExternalReadTest-NodeC-39912]}
2013-01-31 13:15:58,414 DEBUG (CacheViewInstaller-1,PutForExternalReadTest-NodeC-39912) [org.infinispan.statetransfer.BaseStateTransferTask] Node PutForExternalReadTest-NodeC-39912 completed state transfer for view 1 in 3 milliseconds!
2013-01-31 13:15:58,414 DEBUG (CacheViewInstaller-1,PutForExternalReadTest-NodeC-39912) [org.infinispan.statetransfer.StateTransferLockImpl] Unblocking write commands for cache view 1
2013-01-31 13:15:58,414 DEBUG (CacheViewInstaller-1,PutForExternalReadTest-NodeC-39912) [org.infinispan.cacheviews.CacheViewsManagerImpl] Successfully installed view CacheView{viewId=1, members=[PutForExternalReadTest-NodeC-39912]} for cache replSync
2013-01-31 13:15:58,415 DEBUG (OOB-2,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [OOB-2,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] remote transaction FineGrainedAtomicMapAPITest-NodeA-36196:385 received. Epoch is 0 (current epoch is 0) and protocol ID is 2PC
2013-01-31 13:15:58,415 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:522 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:58,415 DEBUG (OOB-2,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-2,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] will block until 0 >= 0
2013-01-31 13:15:58,415 DEBUG (OOB-2,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-2,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] epoch is the desired. Moving on...
2013-01-31 13:15:58,415 DEBUG (testng-PutForExternalReadTest) [org.infinispan.CacheImpl] Started cache replSync on PutForExternalReadTest-NodeC-39912
2013-01-31 13:15:58,415 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] will wait until no switch is in progress
2013-01-31 13:15:58,416 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] no switch in progress. Moving on...
2013-01-31 13:15:58,416 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:522 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:58,416 DEBUG (testng-CacheClusterJoinTest) [org.infinispan.CacheImpl] Started cache cache on CacheClusterJoinTest-NodeC-62173
2013-01-31 13:15:58,417 DEBUG (testng-CacheClusterJoinTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:58,421 DEBUG (testng-PutForExternalReadTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:58,421 DEBUG (testng-CacheClusterJoinTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:58,422 DEBUG (testng-CacheClusterJoinTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:58,426 DEBUG (testng-PutForExternalReadTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:58,426 DEBUG (testng-PutForExternalReadTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:58,441 ERROR (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Method testFineGrainedMapAfterSimpleMap(org.infinispan.atomic.FineGrainedAtomicMapAPITest) threw an exception
java.lang.IllegalArgumentException: Cannot switch type of previously used AtomicHashMap from regular to fine-grained!
	at org.infinispan.atomic.AtomicMapLookup.getMap(AtomicMapLookup.java:149)
	at org.infinispan.atomic.AtomicMapLookup.getFineGrainedAtomicMap(AtomicMapLookup.java:121)
	at org.infinispan.atomic.AtomicMapLookup.getFineGrainedAtomicMap(AtomicMapLookup.java:73)
	at org.infinispan.atomic.FineGrainedAtomicMapAPITest.testFineGrainedMapAfterSimpleMap(FineGrainedAtomicMapAPITest.java:288)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:58,454 DEBUG (testng-ConfigurationValidationTest) [org.jgroups.protocols.pbcast.STABLE] resuming message garbage collection
2013-01-31 13:15:58,454 DEBUG (testng-ConfigurationValidationTest) [org.jgroups.protocols.pbcast.GMS] created group (first member). My view is [ConfigurationValidationTest-NodeB-4331|0], impl is org.jgroups.protocols.pbcast.CoordGmsImpl
2013-01-31 13:15:58,454 INFO  (testng-ConfigurationValidationTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000079: Cache local address is ConfigurationValidationTest-NodeB-4331, physical addresses are [127.0.0.1:8750]
2013-01-31 13:15:58,454 DEBUG (testng-ConfigurationValidationTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] Waiting on view being accepted
2013-01-31 13:15:58,453 ERROR (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.interceptors.InvocationContextInterceptor] ISPN000136: Execution error
java.lang.NullPointerException
	at java.util.concurrent.ConcurrentHashMap.get(ConcurrentHashMap.java:768)
	at org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry.getProtocolById(ReconfigurableProtocolRegistry.java:83)
	at org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager.notifyLocalTransactionFinished(ReconfigurableReplicationManager.java:254)
	at org.infinispan.transaction.TransactionTable.removeLocalTransaction(TransactionTable.java:317)
	at org.infinispan.transaction.xa.XaTransactionTable.removeLocalTransaction(XaTransactionTable.java:70)
	at org.infinispan.interceptors.TxInterceptor.enlistWriteAndInvokeNext(TxInterceptor.java:294)
	at org.infinispan.interceptors.TxInterceptor.visitApplyDeltaCommand(TxInterceptor.java:230)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.base.CommandInterceptor.handleDefault(CommandInterceptor.java:130)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.CacheImpl.applyDelta(CacheImpl.java:515)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.invokeApplyDelta(FineGrainedAtomicHashMapProxy.java:284)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:217)
	at org.infinispan.atomic.FineGrainedAtomicMapAPITest.testNoTx(FineGrainedAtomicMapAPITest.java:338)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:58,457 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358:387 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:522 status: ActionStatus.ABORTING >] wants to rollback
2013-01-31 13:15:58,458 ERROR (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Method testNoTx(org.infinispan.atomic.RepetableReadFineGrainedAtomicMapAPITest) threw an exception
org.infinispan.CacheException: Unable to end batch
	at org.infinispan.batch.BatchContainer.endBatch(BatchContainer.java:107)
	at org.infinispan.batch.AutoBatchSupport.endAtomic(AutoBatchSupport.java:49)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:220)
	at org.infinispan.atomic.FineGrainedAtomicMapAPITest.testNoTx(FineGrainedAtomicMapAPITest.java:338)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
Caused by: javax.transaction.RollbackException: ARJUNA016053: Could not commit transaction.
	at com.arjuna.ats.internal.jta.transaction.arjunacore.TransactionImple.commitAndDisassociate(TransactionImple.java:1177)
	at com.arjuna.ats.internal.jta.transaction.arjunacore.BaseTransaction.commit(BaseTransaction.java:117)
	at org.infinispan.batch.BatchContainer.resolveTransaction(BatchContainer.java:123)
	at org.infinispan.batch.BatchContainer.endBatch(BatchContainer.java:105)
	... 23 more
Caused by: java.lang.Throwable: setRollbackOnly called from:
	at com.arjuna.ats.internal.jta.transaction.arjunacore.TransactionImple.setRollbackOnly(TransactionImple.java:313)
	at org.infinispan.interceptors.TxInterceptor.enlistWriteAndInvokeNext(TxInterceptor.java:292)
	at org.infinispan.interceptors.TxInterceptor.visitApplyDeltaCommand(TxInterceptor.java:230)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.base.CommandInterceptor.handleDefault(CommandInterceptor.java:130)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.CacheImpl.applyDelta(CacheImpl.java:515)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.invokeApplyDelta(FineGrainedAtomicHashMapProxy.java:284)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:217)
	... 21 more
2013-01-31 13:15:58,443 DEBUG (testng-ConfigurationValidation2Test) [org.jgroups.protocols.FRAG2] received CONFIG event: {bind_addr=/127.0.0.1}
2013-01-31 13:15:58,455 DEBUG (testng-ConfigurationValidationTest) [org.infinispan.manager.DefaultCacheManager] Stopping cache manager ISPN on ConfigurationValidationTest-NodeB-4331
2013-01-31 13:15:58,454 INFO  (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testFineGrainedMapAfterSimpleMap(org.infinispan.atomic.FineGrainedAtomicMapAPITest).
2013-01-31 13:15:58,461 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.atomic.FineGrainedAtomicMapAPITest] *** Test method complete; clearing contents on all caches.
2013-01-31 13:15:58,461 ERROR (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test failed testNoTx(org.infinispan.atomic.RepetableReadFineGrainedAtomicMapAPITest)
org.infinispan.CacheException: Unable to end batch
	at org.infinispan.batch.BatchContainer.endBatch(BatchContainer.java:107)
	at org.infinispan.batch.AutoBatchSupport.endAtomic(AutoBatchSupport.java:49)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:220)
	at org.infinispan.atomic.FineGrainedAtomicMapAPITest.testNoTx(FineGrainedAtomicMapAPITest.java:338)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
Caused by: javax.transaction.RollbackException: ARJUNA016053: Could not commit transaction.
	at com.arjuna.ats.internal.jta.transaction.arjunacore.TransactionImple.commitAndDisassociate(TransactionImple.java:1177)
	at com.arjuna.ats.internal.jta.transaction.arjunacore.BaseTransaction.commit(BaseTransaction.java:117)
	at org.infinispan.batch.BatchContainer.resolveTransaction(BatchContainer.java:123)
	at org.infinispan.batch.BatchContainer.endBatch(BatchContainer.java:105)
	... 23 more
Caused by: java.lang.Throwable: setRollbackOnly called from:
	at com.arjuna.ats.internal.jta.transaction.arjunacore.TransactionImple.setRollbackOnly(TransactionImple.java:313)
	at org.infinispan.interceptors.TxInterceptor.enlistWriteAndInvokeNext(TxInterceptor.java:292)
	at org.infinispan.interceptors.TxInterceptor.visitApplyDeltaCommand(TxInterceptor.java:230)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.base.CommandInterceptor.handleDefault(CommandInterceptor.java:130)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.CacheImpl.applyDelta(CacheImpl.java:515)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.invokeApplyDelta(FineGrainedAtomicHashMapProxy.java:284)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:217)
	... 21 more
2013-01-31 13:15:58,462 INFO  (testng-ConfigurationValidationTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000080: Disconnecting and closing JGroups Channel
2013-01-31 13:15:58,462 DEBUG (testng-ConfigurationValidation2Test) [org.jgroups.protocols.pbcast.GMS] address=ConfigurationValidation2Test-NodeA-15292, cluster=ISPN, physical address=127.0.0.1:8700
2013-01-31 13:15:58,465 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.atomic.RepetableReadFineGrainedAtomicMapAPITest] *** Test method complete; clearing contents on all caches.
2013-01-31 13:15:58,465 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'atomic' on a cache manager at address RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358
2013-01-31 13:15:58,461 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'atomic' on a cache manager at address FineGrainedAtomicMapAPITest-NodeA-36196
2013-01-31 13:15:58,465 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [testReplicationRemoveCommit=AtomicHashMap]
2013-01-31 13:15:58,465 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:58,465 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:58,465 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:58,465 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'atomic' on a cache manager at address FineGrainedAtomicMapAPITest-NodeB-28700
2013-01-31 13:15:58,465 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [testReplicationRemoveCommit=AtomicHashMap]
2013-01-31 13:15:58,465 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:58,465 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:58,465 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:58,466 INFO  (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testMultipleTx(org.infinispan.atomic.FineGrainedAtomicMapAPITest)
2013-01-31 13:15:58,466 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:526 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:58,466 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-FineGrainedAtomicMapAPITest] will wait until no switch is in progress
2013-01-31 13:15:58,466 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-FineGrainedAtomicMapAPITest] no switch in progress. Moving on...
2013-01-31 13:15:58,466 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:526 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:58,466 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction FineGrainedAtomicMapAPITest-NodeA-36196:388 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:526 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:58,466 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction FineGrainedAtomicMapAPITest-NodeA-36196:388 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:58,467 WARN  (testng-FilteredKeyAffinityServiceTest) [org.jgroups.stack.Configurator] [JGRP00013] TP.discard_incompatible_packets has been deprecated: incompatible packets are discarded anyway
2013-01-31 13:15:58,468 DEBUG (OOB-2,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [OOB-2,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] remote transaction FineGrainedAtomicMapAPITest-NodeA-36196:388 received. Epoch is 0 (current epoch is 0) and protocol ID is 2PC
2013-01-31 13:15:58,468 DEBUG (OOB-2,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-2,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] will block until 0 >= 0
2013-01-31 13:15:58,468 DEBUG (OOB-2,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-2,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] epoch is the desired. Moving on...
2013-01-31 13:15:58,470 DEBUG (OOB-2,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [OOB-2,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] remote transaction FineGrainedAtomicMapAPITest-NodeA-36196:388 received. Epoch is 0 (current epoch is 0) and protocol ID is 2PC
2013-01-31 13:15:58,470 DEBUG (OOB-2,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-2,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] will block until 0 >= 0
2013-01-31 13:15:58,470 DEBUG (OOB-2,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-2,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] epoch is the desired. Moving on...
2013-01-31 13:15:58,471 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:52a status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:58,471 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-FineGrainedAtomicMapAPITest] will wait until no switch is in progress
2013-01-31 13:15:58,471 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-FineGrainedAtomicMapAPITest] no switch in progress. Moving on...
2013-01-31 13:15:58,471 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:52a status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:58,472 ERROR (testng-FineGrainedAtomicMapAPITest) [org.infinispan.interceptors.InvocationContextInterceptor] ISPN000136: Execution error
java.lang.NullPointerException
	at java.util.concurrent.ConcurrentHashMap.get(ConcurrentHashMap.java:768)
	at org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry.getProtocolById(ReconfigurableProtocolRegistry.java:83)
	at org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager.notifyLocalTransactionFinished(ReconfigurableReplicationManager.java:254)
	at org.infinispan.transaction.TransactionTable.removeLocalTransaction(TransactionTable.java:317)
	at org.infinispan.transaction.xa.XaTransactionTable.removeLocalTransaction(XaTransactionTable.java:70)
	at org.infinispan.interceptors.TxInterceptor.enlistWriteAndInvokeNext(TxInterceptor.java:294)
	at org.infinispan.interceptors.TxInterceptor.visitApplyDeltaCommand(TxInterceptor.java:230)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.base.CommandInterceptor.handleDefault(CommandInterceptor.java:130)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.CacheImpl.applyDelta(CacheImpl.java:515)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.invokeApplyDelta(FineGrainedAtomicHashMapProxy.java:284)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:217)
	at org.infinispan.atomic.FineGrainedAtomicMapAPITest.testMultipleTx(FineGrainedAtomicMapAPITest.java:72)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:58,475 DEBUG (testng-ConfigurationValidation2Test) [org.jgroups.protocols.pbcast.NAKACK2] 
[ConfigurationValidation2Test-NodeA-15292 setDigest()]
existing digest:  []
new digest:       ConfigurationValidation2Test-NodeA-15292: [0 (0)]
resulting digest: ConfigurationValidation2Test-NodeA-15292: [0 (0)]
2013-01-31 13:15:58,475 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [testNoTx=AtomicHashMap]
2013-01-31 13:15:58,478 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:58,477 DEBUG (testng-ConfigurationValidation2Test) [org.jgroups.protocols.pbcast.GMS] ConfigurationValidation2Test-NodeA-15292: installing view [ConfigurationValidation2Test-NodeA-15292|0] [ConfigurationValidation2Test-NodeA-15292]
2013-01-31 13:15:58,477 ERROR (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Method testMultipleTx(org.infinispan.atomic.FineGrainedAtomicMapAPITest) threw an exception
java.lang.NullPointerException
	at java.util.concurrent.ConcurrentHashMap.get(ConcurrentHashMap.java:768)
	at org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry.getProtocolById(ReconfigurableProtocolRegistry.java:83)
	at org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager.notifyLocalTransactionFinished(ReconfigurableReplicationManager.java:254)
	at org.infinispan.transaction.TransactionTable.removeLocalTransaction(TransactionTable.java:317)
	at org.infinispan.transaction.xa.XaTransactionTable.removeLocalTransaction(XaTransactionTable.java:70)
	at org.infinispan.interceptors.TxInterceptor.enlistWriteAndInvokeNext(TxInterceptor.java:294)
	at org.infinispan.interceptors.TxInterceptor.visitApplyDeltaCommand(TxInterceptor.java:230)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.base.CommandInterceptor.handleDefault(CommandInterceptor.java:130)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.CacheImpl.applyDelta(CacheImpl.java:515)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.invokeApplyDelta(FineGrainedAtomicHashMapProxy.java:284)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:217)
	at org.infinispan.atomic.FineGrainedAtomicMapAPITest.testMultipleTx(FineGrainedAtomicMapAPITest.java:72)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:58,480 DEBUG (testng-ConfigurationValidation2Test) [org.jgroups.protocols.pbcast.STABLE] resuming message garbage collection
2013-01-31 13:15:58,482 ERROR (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test failed testMultipleTx(org.infinispan.atomic.FineGrainedAtomicMapAPITest)
java.lang.NullPointerException
	at java.util.concurrent.ConcurrentHashMap.get(ConcurrentHashMap.java:768)
	at org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry.getProtocolById(ReconfigurableProtocolRegistry.java:83)
	at org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager.notifyLocalTransactionFinished(ReconfigurableReplicationManager.java:254)
	at org.infinispan.transaction.TransactionTable.removeLocalTransaction(TransactionTable.java:317)
	at org.infinispan.transaction.xa.XaTransactionTable.removeLocalTransaction(XaTransactionTable.java:70)
	at org.infinispan.interceptors.TxInterceptor.enlistWriteAndInvokeNext(TxInterceptor.java:294)
	at org.infinispan.interceptors.TxInterceptor.visitApplyDeltaCommand(TxInterceptor.java:230)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.base.CommandInterceptor.handleDefault(CommandInterceptor.java:130)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.CacheImpl.applyDelta(CacheImpl.java:515)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.invokeApplyDelta(FineGrainedAtomicHashMapProxy.java:284)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:217)
	at org.infinispan.atomic.FineGrainedAtomicMapAPITest.testMultipleTx(FineGrainedAtomicMapAPITest.java:72)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:58,518 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.atomic.FineGrainedAtomicMapAPITest] *** Test method complete; clearing contents on all caches.
2013-01-31 13:15:58,518 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction FineGrainedAtomicMapAPITest-NodeA-36196:389 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:52a status: ActionStatus.ABORTING >] wants to rollback
2013-01-31 13:15:58,518 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'atomic' on a cache manager at address FineGrainedAtomicMapAPITest-NodeA-36196
2013-01-31 13:15:58,518 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [testMultipleTx=AtomicHashMap]
2013-01-31 13:15:58,518 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:58,518 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:58,518 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:58,518 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'atomic' on a cache manager at address FineGrainedAtomicMapAPITest-NodeB-28700
2013-01-31 13:15:58,519 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [testMultipleTx=AtomicHashMap]
2013-01-31 13:15:58,519 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:58,519 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:58,519 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:58,519 INFO  (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testNoTx(org.infinispan.atomic.FineGrainedAtomicMapAPITest)
2013-01-31 13:15:58,519 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:52e status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:58,519 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-FineGrainedAtomicMapAPITest] will wait until no switch is in progress
2013-01-31 13:15:58,519 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-FineGrainedAtomicMapAPITest] no switch in progress. Moving on...
2013-01-31 13:15:58,519 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:52e status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:58,519 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction FineGrainedAtomicMapAPITest-NodeA-36196:390 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:52e status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:58,519 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction FineGrainedAtomicMapAPITest-NodeA-36196:390 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:58,523 DEBUG (OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] remote transaction FineGrainedAtomicMapAPITest-NodeA-36196:390 received. Epoch is 0 (current epoch is 0) and protocol ID is 2PC
2013-01-31 13:15:58,524 DEBUG (OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] will block until 0 >= 0
2013-01-31 13:15:58,524 DEBUG (OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] epoch is the desired. Moving on...
2013-01-31 13:15:58,524 DEBUG (testng-FilteredKeyAffinityServiceTest) [org.jgroups.stack.Configurator] set property TCP.diagnostics_addr to default value /224.0.75.75
2013-01-31 13:15:58,478 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:58,532 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:58,532 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'atomic' on a cache manager at address RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745
2013-01-31 13:15:58,532 DEBUG (OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] remote transaction FineGrainedAtomicMapAPITest-NodeA-36196:390 received. Epoch is 0 (current epoch is 0) and protocol ID is 2PC
2013-01-31 13:15:58,532 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [testNoTx=AtomicHashMap]
2013-01-31 13:15:58,483 DEBUG (testng-ConfigurationValidation2Test) [org.jgroups.protocols.pbcast.STABLE] [ergonomics] setting max_bytes to 400KB (1 members)
2013-01-31 13:15:58,532 DEBUG (testng-ConfigurationValidation2Test) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] New view accepted: [ConfigurationValidation2Test-NodeA-15292|0] [ConfigurationValidation2Test-NodeA-15292]
2013-01-31 13:15:58,532 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:58,532 DEBUG (OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] will block until 0 >= 0
2013-01-31 13:15:58,537 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:58,537 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:58,537 INFO  (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testReadUncommittedValues(org.infinispan.atomic.RepetableReadFineGrainedAtomicMapAPITest)
2013-01-31 13:15:58,537 DEBUG (testng-FilteredKeyAffinityServiceTest) [org.jgroups.protocols.FRAG2] received CONFIG event: {bind_addr=/127.0.0.1}
2013-01-31 13:15:58,537 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:532 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:58,537 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] will wait until no switch is in progress
2013-01-31 13:15:58,537 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] no switch in progress. Moving on...
2013-01-31 13:15:58,537 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:532 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:58,538 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358:391 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:532 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:58,538 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358:391 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:58,533 INFO  (testng-ConfigurationValidation2Test) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000094: Received new cluster view: [ConfigurationValidation2Test-NodeA-15292|0] [ConfigurationValidation2Test-NodeA-15292]
2013-01-31 13:15:58,540 DEBUG (testng-FilteredKeyAffinityServiceTest) [org.jgroups.protocols.pbcast.GMS] address=FilteredKeyAffinityServiceTest-NodeB-39961, cluster=ISPN, physical address=127.0.0.1:8251
2013-01-31 13:15:58,532 DEBUG (testng-ConfigurationValidationTest) [org.infinispan.test.fwk.TEST_PING] Stop discovery for ConfigurationValidationTest-NodeB-4331
2013-01-31 13:15:58,540 DEBUG (testng-ConfigurationValidationTest) [org.jgroups.protocols.TCP] closing sockets and stopping threads
2013-01-31 13:15:58,540 DEBUG (OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] remote transaction RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358:391 received. Epoch is 0 (current epoch is 0) and protocol ID is 2PC
2013-01-31 13:15:58,537 DEBUG (OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] epoch is the desired. Moving on...
2013-01-31 13:15:58,541 DEBUG (OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] will block until 0 >= 0
2013-01-31 13:15:58,541 DEBUG (OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] epoch is the desired. Moving on...
2013-01-31 13:15:58,541 INFO  (testng-ConfigurationValidationTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000082: Stopping the RpcDispatcher
2013-01-31 13:15:58,542 ERROR (testng-ConfigurationValidationTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Method testDistAndReplQueue(org.infinispan.config.ConfigurationValidationTest) threw an exception
org.infinispan.config.ConfigurationException: Use of the replication queue is invalid when using DISTRIBUTED mode.
	at org.infinispan.config.ConfigurationValidatingVisitor.visitClusteringType(ConfigurationValidatingVisitor.java:83)
	at org.infinispan.config.DelegatingConfigurationVisitor.visitClusteringType(DelegatingConfigurationVisitor.java:127)
	at org.infinispan.config.Configuration$ClusteringType.accept(Configuration.java:2653)
	at org.infinispan.config.Configuration.accept(Configuration.java:1589)
	at org.infinispan.manager.DefaultCacheManager.wireCache(DefaultCacheManager.java:699)
	at org.infinispan.manager.DefaultCacheManager.createCache(DefaultCacheManager.java:658)
	at org.infinispan.manager.DefaultCacheManager.getCache(DefaultCacheManager.java:550)
	at org.infinispan.manager.DefaultCacheManager.getCache(DefaultCacheManager.java:522)
	at org.infinispan.config.ConfigurationValidationTest.testDistAndReplQueue(ConfigurationValidationTest.java:71)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:58,546 INFO  (testng-ConfigurationValidationTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testDistAndReplQueue(org.infinispan.config.ConfigurationValidationTest).
2013-01-31 13:15:58,546 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:536 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:58,546 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-FineGrainedAtomicMapAPITest] will wait until no switch is in progress
2013-01-31 13:15:58,546 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-FineGrainedAtomicMapAPITest] no switch in progress. Moving on...
2013-01-31 13:15:58,546 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:536 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:58,546 INFO  (testng-ConfigurationValidationTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testEvictionOnButWithoutMaxEntries(org.infinispan.config.ConfigurationValidationTest)
2013-01-31 13:15:58,545 DEBUG (testng-ConfigurationValidation2Test) [org.jgroups.protocols.pbcast.STABLE] resuming message garbage collection
2013-01-31 13:15:58,546 DEBUG (testng-ConfigurationValidation2Test) [org.jgroups.protocols.pbcast.GMS] created group (first member). My view is [ConfigurationValidation2Test-NodeA-15292|0], impl is org.jgroups.protocols.pbcast.CoordGmsImpl
2013-01-31 13:15:58,546 INFO  (testng-ConfigurationValidation2Test) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000079: Cache local address is ConfigurationValidation2Test-NodeA-15292, physical addresses are [127.0.0.1:8700]
2013-01-31 13:15:58,547 DEBUG (testng-ConfigurationValidation2Test) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] Waiting on view being accepted
2013-01-31 13:15:58,547 DEBUG (testng-ConfigurationValidation2Test) [org.infinispan.config.ConfigurationValidatingVisitor] Cache is replicated but state transfer was not defined, so force enabling it
2013-01-31 13:15:58,542 DEBUG (testng-FilteredKeyAffinityServiceTest) [org.jgroups.protocols.pbcast.GMS] election results: {FilteredKeyAffinityServiceTest-NodeA-2324=1}
2013-01-31 13:15:58,548 DEBUG (testng-FilteredKeyAffinityServiceTest) [org.jgroups.protocols.pbcast.GMS] sending JOIN(FilteredKeyAffinityServiceTest-NodeB-39961) to FilteredKeyAffinityServiceTest-NodeA-2324
2013-01-31 13:15:58,542 DEBUG (OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] remote transaction RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358:391 received. Epoch is 0 (current epoch is 0) and protocol ID is 2PC
2013-01-31 13:15:58,563 DEBUG (OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] will block until 0 >= 0
2013-01-31 13:15:58,563 DEBUG (OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] epoch is the desired. Moving on...
2013-01-31 13:15:58,562 DEBUG (testng-ConfigurationValidationTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:58,565 DEBUG (testng-ConfigurationValidation2Test) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:58,568 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:53a status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:58,568 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] will wait until no switch is in progress
2013-01-31 13:15:58,568 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] no switch in progress. Moving on...
2013-01-31 13:15:58,568 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:53a status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:58,569 ERROR (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.interceptors.InvocationContextInterceptor] ISPN000136: Execution error
java.lang.NullPointerException
	at java.util.concurrent.ConcurrentHashMap.get(ConcurrentHashMap.java:768)
	at org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry.getProtocolById(ReconfigurableProtocolRegistry.java:83)
	at org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager.notifyLocalTransactionFinished(ReconfigurableReplicationManager.java:254)
	at org.infinispan.transaction.TransactionTable.removeLocalTransaction(TransactionTable.java:317)
	at org.infinispan.transaction.xa.XaTransactionTable.removeLocalTransaction(XaTransactionTable.java:70)
	at org.infinispan.interceptors.TxInterceptor.enlistWriteAndInvokeNext(TxInterceptor.java:294)
	at org.infinispan.interceptors.TxInterceptor.visitApplyDeltaCommand(TxInterceptor.java:230)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.base.CommandInterceptor.handleDefault(CommandInterceptor.java:130)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.CacheImpl.applyDelta(CacheImpl.java:515)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.invokeApplyDelta(FineGrainedAtomicHashMapProxy.java:284)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:217)
	at org.infinispan.atomic.FineGrainedAtomicMapAPITest.testReadUncommittedValues(FineGrainedAtomicMapAPITest.java:354)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:58,578 ERROR (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Method testReadUncommittedValues(org.infinispan.atomic.RepetableReadFineGrainedAtomicMapAPITest) threw an exception
java.lang.NullPointerException
	at java.util.concurrent.ConcurrentHashMap.get(ConcurrentHashMap.java:768)
	at org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry.getProtocolById(ReconfigurableProtocolRegistry.java:83)
	at org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager.notifyLocalTransactionFinished(ReconfigurableReplicationManager.java:254)
	at org.infinispan.transaction.TransactionTable.removeLocalTransaction(TransactionTable.java:317)
	at org.infinispan.transaction.xa.XaTransactionTable.removeLocalTransaction(XaTransactionTable.java:70)
	at org.infinispan.interceptors.TxInterceptor.enlistWriteAndInvokeNext(TxInterceptor.java:294)
	at org.infinispan.interceptors.TxInterceptor.visitApplyDeltaCommand(TxInterceptor.java:230)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.base.CommandInterceptor.handleDefault(CommandInterceptor.java:130)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.CacheImpl.applyDelta(CacheImpl.java:515)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.invokeApplyDelta(FineGrainedAtomicHashMapProxy.java:284)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:217)
	at org.infinispan.atomic.FineGrainedAtomicMapAPITest.testReadUncommittedValues(FineGrainedAtomicMapAPITest.java:354)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:58,569 ERROR (testng-FineGrainedAtomicMapAPITest) [org.infinispan.interceptors.InvocationContextInterceptor] ISPN000136: Execution error
java.lang.NullPointerException
	at java.util.concurrent.ConcurrentHashMap.get(ConcurrentHashMap.java:768)
	at org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry.getProtocolById(ReconfigurableProtocolRegistry.java:83)
	at org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager.notifyLocalTransactionFinished(ReconfigurableReplicationManager.java:254)
	at org.infinispan.transaction.TransactionTable.removeLocalTransaction(TransactionTable.java:317)
	at org.infinispan.transaction.xa.XaTransactionTable.removeLocalTransaction(XaTransactionTable.java:70)
	at org.infinispan.interceptors.TxInterceptor.enlistWriteAndInvokeNext(TxInterceptor.java:294)
	at org.infinispan.interceptors.TxInterceptor.visitApplyDeltaCommand(TxInterceptor.java:230)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.base.CommandInterceptor.handleDefault(CommandInterceptor.java:130)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.CacheImpl.applyDelta(CacheImpl.java:515)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.invokeApplyDelta(FineGrainedAtomicHashMapProxy.java:284)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:217)
	at org.infinispan.atomic.FineGrainedAtomicMapAPITest.testNoTx(FineGrainedAtomicMapAPITest.java:338)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:58,582 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction FineGrainedAtomicMapAPITest-NodeA-36196:392 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:536 status: ActionStatus.ABORTING >] wants to rollback
2013-01-31 13:15:58,569 DEBUG (testng-ConfigurationValidation2Test) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:58,569 DEBUG (testng-ConfigurationValidationTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:58,582 ERROR (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test failed testReadUncommittedValues(org.infinispan.atomic.RepetableReadFineGrainedAtomicMapAPITest)
java.lang.NullPointerException
	at java.util.concurrent.ConcurrentHashMap.get(ConcurrentHashMap.java:768)
	at org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry.getProtocolById(ReconfigurableProtocolRegistry.java:83)
	at org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager.notifyLocalTransactionFinished(ReconfigurableReplicationManager.java:254)
	at org.infinispan.transaction.TransactionTable.removeLocalTransaction(TransactionTable.java:317)
	at org.infinispan.transaction.xa.XaTransactionTable.removeLocalTransaction(XaTransactionTable.java:70)
	at org.infinispan.interceptors.TxInterceptor.enlistWriteAndInvokeNext(TxInterceptor.java:294)
	at org.infinispan.interceptors.TxInterceptor.visitApplyDeltaCommand(TxInterceptor.java:230)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.base.CommandInterceptor.handleDefault(CommandInterceptor.java:130)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.CacheImpl.applyDelta(CacheImpl.java:515)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.invokeApplyDelta(FineGrainedAtomicHashMapProxy.java:284)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:217)
	at org.infinispan.atomic.FineGrainedAtomicMapAPITest.testReadUncommittedValues(FineGrainedAtomicMapAPITest.java:354)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:58,583 DEBUG (testng-ConfigurationValidationTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:58,583 ERROR (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Method testNoTx(org.infinispan.atomic.FineGrainedAtomicMapAPITest) threw an exception
org.infinispan.CacheException: Unable to end batch
	at org.infinispan.batch.BatchContainer.endBatch(BatchContainer.java:107)
	at org.infinispan.batch.AutoBatchSupport.endAtomic(AutoBatchSupport.java:49)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:220)
	at org.infinispan.atomic.FineGrainedAtomicMapAPITest.testNoTx(FineGrainedAtomicMapAPITest.java:338)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
Caused by: javax.transaction.RollbackException: ARJUNA016053: Could not commit transaction.
	at com.arjuna.ats.internal.jta.transaction.arjunacore.TransactionImple.commitAndDisassociate(TransactionImple.java:1177)
	at com.arjuna.ats.internal.jta.transaction.arjunacore.BaseTransaction.commit(BaseTransaction.java:117)
	at org.infinispan.batch.BatchContainer.resolveTransaction(BatchContainer.java:123)
	at org.infinispan.batch.BatchContainer.endBatch(BatchContainer.java:105)
	... 23 more
Caused by: java.lang.Throwable: setRollbackOnly called from:
	at com.arjuna.ats.internal.jta.transaction.arjunacore.TransactionImple.setRollbackOnly(TransactionImple.java:313)
	at org.infinispan.interceptors.TxInterceptor.enlistWriteAndInvokeNext(TxInterceptor.java:292)
	at org.infinispan.interceptors.TxInterceptor.visitApplyDeltaCommand(TxInterceptor.java:230)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.base.CommandInterceptor.handleDefault(CommandInterceptor.java:130)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.CacheImpl.applyDelta(CacheImpl.java:515)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.invokeApplyDelta(FineGrainedAtomicHashMapProxy.java:284)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:217)
	... 21 more
2013-01-31 13:15:58,585 ERROR (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test failed testNoTx(org.infinispan.atomic.FineGrainedAtomicMapAPITest)
org.infinispan.CacheException: Unable to end batch
	at org.infinispan.batch.BatchContainer.endBatch(BatchContainer.java:107)
	at org.infinispan.batch.AutoBatchSupport.endAtomic(AutoBatchSupport.java:49)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:220)
	at org.infinispan.atomic.FineGrainedAtomicMapAPITest.testNoTx(FineGrainedAtomicMapAPITest.java:338)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
Caused by: javax.transaction.RollbackException: ARJUNA016053: Could not commit transaction.
	at com.arjuna.ats.internal.jta.transaction.arjunacore.TransactionImple.commitAndDisassociate(TransactionImple.java:1177)
	at com.arjuna.ats.internal.jta.transaction.arjunacore.BaseTransaction.commit(BaseTransaction.java:117)
	at org.infinispan.batch.BatchContainer.resolveTransaction(BatchContainer.java:123)
	at org.infinispan.batch.BatchContainer.endBatch(BatchContainer.java:105)
	... 23 more
Caused by: java.lang.Throwable: setRollbackOnly called from:
	at com.arjuna.ats.internal.jta.transaction.arjunacore.TransactionImple.setRollbackOnly(TransactionImple.java:313)
	at org.infinispan.interceptors.TxInterceptor.enlistWriteAndInvokeNext(TxInterceptor.java:292)
	at org.infinispan.interceptors.TxInterceptor.visitApplyDeltaCommand(TxInterceptor.java:230)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.base.CommandInterceptor.handleDefault(CommandInterceptor.java:130)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.CacheImpl.applyDelta(CacheImpl.java:515)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.invokeApplyDelta(FineGrainedAtomicHashMapProxy.java:284)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:217)
	... 21 more
2013-01-31 13:15:58,585 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.atomic.RepetableReadFineGrainedAtomicMapAPITest] *** Test method complete; clearing contents on all caches.
2013-01-31 13:15:58,588 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358:393 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:53a status: ActionStatus.ABORTING >] wants to rollback
2013-01-31 13:15:58,588 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'atomic' on a cache manager at address RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358
2013-01-31 13:15:58,588 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [testReadUncommittedValues=AtomicHashMap]
2013-01-31 13:15:58,588 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:58,588 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:58,588 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:58,588 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.atomic.FineGrainedAtomicMapAPITest] *** Test method complete; clearing contents on all caches.
2013-01-31 13:15:58,588 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'atomic' on a cache manager at address RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745
2013-01-31 13:15:58,588 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [testReadUncommittedValues=AtomicHashMap]
2013-01-31 13:15:58,588 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'atomic' on a cache manager at address FineGrainedAtomicMapAPITest-NodeA-36196
2013-01-31 13:15:58,588 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [testNoTx=AtomicHashMap]
2013-01-31 13:15:58,588 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:58,588 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:58,589 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:58,589 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:58,589 INFO  (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testReplicationPutAndClearCommit(org.infinispan.atomic.RepetableReadFineGrainedAtomicMapAPITest)
2013-01-31 13:15:58,589 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:53e status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:58,589 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] will wait until no switch is in progress
2013-01-31 13:15:58,589 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] no switch in progress. Moving on...
2013-01-31 13:15:58,589 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:53e status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:58,589 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358:394 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:53e status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:58,590 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358:394 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:58,589 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:58,590 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:58,591 DEBUG (OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] remote transaction RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358:394 received. Epoch is 0 (current epoch is 0) and protocol ID is 2PC
2013-01-31 13:15:58,591 DEBUG (OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] will block until 0 >= 0
2013-01-31 13:15:58,591 DEBUG (OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] epoch is the desired. Moving on...
2013-01-31 13:15:58,593 DEBUG (OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] remote transaction RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358:394 received. Epoch is 0 (current epoch is 0) and protocol ID is 2PC
2013-01-31 13:15:58,593 DEBUG (OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] will block until 0 >= 0
2013-01-31 13:15:58,593 DEBUG (OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] epoch is the desired. Moving on...
2013-01-31 13:15:58,594 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:542 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:58,594 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] will wait until no switch is in progress
2013-01-31 13:15:58,594 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] no switch in progress. Moving on...
2013-01-31 13:15:58,594 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:542 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:58,595 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'atomic' on a cache manager at address FineGrainedAtomicMapAPITest-NodeB-28700
2013-01-31 13:15:58,595 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [testNoTx=AtomicHashMap]
2013-01-31 13:15:58,595 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:58,595 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:58,595 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:58,595 INFO  (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testReadUncommittedValues(org.infinispan.atomic.FineGrainedAtomicMapAPITest)
2013-01-31 13:15:58,596 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:546 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:58,596 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-FineGrainedAtomicMapAPITest] will wait until no switch is in progress
2013-01-31 13:15:58,596 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-FineGrainedAtomicMapAPITest] no switch in progress. Moving on...
2013-01-31 13:15:58,596 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:546 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:58,596 ERROR (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.interceptors.InvocationContextInterceptor] ISPN000136: Execution error
java.lang.NullPointerException
	at java.util.concurrent.ConcurrentHashMap.get(ConcurrentHashMap.java:768)
	at org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry.getProtocolById(ReconfigurableProtocolRegistry.java:83)
	at org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager.notifyLocalTransactionFinished(ReconfigurableReplicationManager.java:254)
	at org.infinispan.transaction.TransactionTable.removeLocalTransaction(TransactionTable.java:317)
	at org.infinispan.transaction.xa.XaTransactionTable.removeLocalTransaction(XaTransactionTable.java:70)
	at org.infinispan.interceptors.TxInterceptor.enlistWriteAndInvokeNext(TxInterceptor.java:294)
	at org.infinispan.interceptors.TxInterceptor.visitApplyDeltaCommand(TxInterceptor.java:230)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.base.CommandInterceptor.handleDefault(CommandInterceptor.java:130)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.CacheImpl.applyDelta(CacheImpl.java:515)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.invokeApplyDelta(FineGrainedAtomicHashMapProxy.java:284)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:217)
	at org.infinispan.atomic.FineGrainedAtomicMapAPITest.testReplicationPutAndClearCommit(FineGrainedAtomicMapAPITest.java:566)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:58,596 DEBUG (testng-ConfigurationValidation2Test) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:58,615 INFO  (testng-ConfigurationValidation2Test) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:58,618 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction FineGrainedAtomicMapAPITest-NodeA-36196:396 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:546 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:58,618 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction FineGrainedAtomicMapAPITest-NodeA-36196:396 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:58,618 DEBUG (testng-ConfigurationValidation2Test) [org.infinispan.transaction.TransactionTable] Min view id set to 0
2013-01-31 13:15:58,618 DEBUG (testng-ConfigurationValidation2Test) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 10
2013-01-31 13:15:58,618 DEBUG (testng-ConfigurationValidation2Test) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.StateTransferLockInterceptor@1329cd3c, TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@1d6127f8, PB=org.infinispan.interceptors.StateTransferLockInterceptor@1329cd3c}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@558719d9}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@18b2216d}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@56b087c5, PB=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@56b087c5}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@5fa1c2f9, TO=org.infinispan.interceptors.EntryWrappingInterceptor@5fa1c2f9, PB=org.infinispan.interceptors.EntryWrappingInterceptor@5fa1c2f9}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.ReplicationInterceptor@75079a7b, TO=org.infinispan.interceptors.ReplicationInterceptor@75079a7b, PB=org.infinispan.interceptors.ReplicationInterceptor@75079a7b}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:58,619 ERROR (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Method testReplicationPutAndClearCommit(org.infinispan.atomic.RepetableReadFineGrainedAtomicMapAPITest) threw an exception
java.lang.NullPointerException
	at java.util.concurrent.ConcurrentHashMap.get(ConcurrentHashMap.java:768)
	at org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry.getProtocolById(ReconfigurableProtocolRegistry.java:83)
	at org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager.notifyLocalTransactionFinished(ReconfigurableReplicationManager.java:254)
	at org.infinispan.transaction.TransactionTable.removeLocalTransaction(TransactionTable.java:317)
	at org.infinispan.transaction.xa.XaTransactionTable.removeLocalTransaction(XaTransactionTable.java:70)
	at org.infinispan.interceptors.TxInterceptor.enlistWriteAndInvokeNext(TxInterceptor.java:294)
	at org.infinispan.interceptors.TxInterceptor.visitApplyDeltaCommand(TxInterceptor.java:230)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.base.CommandInterceptor.handleDefault(CommandInterceptor.java:130)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.CacheImpl.applyDelta(CacheImpl.java:515)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.invokeApplyDelta(FineGrainedAtomicHashMapProxy.java:284)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:217)
	at org.infinispan.atomic.FineGrainedAtomicMapAPITest.testReplicationPutAndClearCommit(FineGrainedAtomicMapAPITest.java:566)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:58,620 DEBUG (OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] remote transaction FineGrainedAtomicMapAPITest-NodeA-36196:396 received. Epoch is 0 (current epoch is 0) and protocol ID is 2PC
2013-01-31 13:15:58,629 ERROR (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test failed testReplicationPutAndClearCommit(org.infinispan.atomic.RepetableReadFineGrainedAtomicMapAPITest)
java.lang.NullPointerException
	at java.util.concurrent.ConcurrentHashMap.get(ConcurrentHashMap.java:768)
	at org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry.getProtocolById(ReconfigurableProtocolRegistry.java:83)
	at org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager.notifyLocalTransactionFinished(ReconfigurableReplicationManager.java:254)
	at org.infinispan.transaction.TransactionTable.removeLocalTransaction(TransactionTable.java:317)
	at org.infinispan.transaction.xa.XaTransactionTable.removeLocalTransaction(XaTransactionTable.java:70)
	at org.infinispan.interceptors.TxInterceptor.enlistWriteAndInvokeNext(TxInterceptor.java:294)
	at org.infinispan.interceptors.TxInterceptor.visitApplyDeltaCommand(TxInterceptor.java:230)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.base.CommandInterceptor.handleDefault(CommandInterceptor.java:130)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.CacheImpl.applyDelta(CacheImpl.java:515)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.invokeApplyDelta(FineGrainedAtomicHashMapProxy.java:284)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:217)
	at org.infinispan.atomic.FineGrainedAtomicMapAPITest.testReplicationPutAndClearCommit(FineGrainedAtomicMapAPITest.java:566)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:58,632 DEBUG (ViewHandler,ISPN,FilteredKeyAffinityServiceTest-NodeA-2324) [org.jgroups.protocols.pbcast.STABLE] suspending message garbage collection
2013-01-31 13:15:58,635 DEBUG (ViewHandler,ISPN,FilteredKeyAffinityServiceTest-NodeA-2324) [org.jgroups.protocols.pbcast.STABLE] resume task started, max_suspend_time=33000
2013-01-31 13:15:58,630 DEBUG (testng-ConfigurationValidation2Test) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Setting configuration tunned parameters
2013-01-31 13:15:58,630 DEBUG (OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] will block until 0 >= 0
2013-01-31 13:15:58,640 DEBUG (OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] epoch is the desired. Moving on...
2013-01-31 13:15:58,640 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.atomic.RepetableReadFineGrainedAtomicMapAPITest] *** Test method complete; clearing contents on all caches.
2013-01-31 13:15:58,639 DEBUG (Incoming-1,ISPN,FilteredKeyAffinityServiceTest-NodeA-2324) [org.jgroups.protocols.pbcast.NAKACK2] 
[FilteredKeyAffinityServiceTest-NodeA-2324 setDigest()]
existing digest:  FilteredKeyAffinityServiceTest-NodeA-2324: [1 (1)]
new digest:       FilteredKeyAffinityServiceTest-NodeA-2324: [0 (0)], FilteredKeyAffinityServiceTest-NodeB-39961: [0 (0)]
resulting digest: FilteredKeyAffinityServiceTest-NodeA-2324: [1 (1)], FilteredKeyAffinityServiceTest-NodeB-39961: [0 (0)]
2013-01-31 13:15:58,642 DEBUG (Incoming-1,ISPN,FilteredKeyAffinityServiceTest-NodeA-2324) [org.jgroups.protocols.pbcast.GMS] FilteredKeyAffinityServiceTest-NodeA-2324: installing view [FilteredKeyAffinityServiceTest-NodeA-2324|1] [FilteredKeyAffinityServiceTest-NodeA-2324, FilteredKeyAffinityServiceTest-NodeB-39961]
2013-01-31 13:15:58,642 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358:395 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:542 status: ActionStatus.ABORTING >] wants to rollback
2013-01-31 13:15:58,643 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'atomic' on a cache manager at address RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358
2013-01-31 13:15:58,643 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [map=AtomicHashMap]
2013-01-31 13:15:58,643 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:58,643 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:58,643 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:58,643 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'atomic' on a cache manager at address RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745
2013-01-31 13:15:58,643 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [map=AtomicHashMap]
2013-01-31 13:15:58,643 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:58,644 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:58,650 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:58,655 DEBUG (Incoming-1,ISPN,FilteredKeyAffinityServiceTest-NodeA-2324) [org.jgroups.protocols.pbcast.STABLE] [ergonomics] setting max_bytes to 800KB (2 members)
2013-01-31 13:15:58,655 INFO  (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testReplicationPutCommit(org.infinispan.atomic.RepetableReadFineGrainedAtomicMapAPITest)
2013-01-31 13:15:58,659 ERROR (testng-CommandIdUniquenessTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Method testCommandIdUniqueness(org.infinispan.commands.CommandIdUniquenessTest) threw an exception
java.lang.NullPointerException
	at org.infinispan.commands.CommandIdUniquenessTest.testCommandIdUniqueness(CommandIdUniquenessTest.java:54)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:58,660 ERROR (testng-CommandIdUniquenessTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test failed testCommandIdUniqueness(org.infinispan.commands.CommandIdUniquenessTest)
java.lang.NullPointerException
	at org.infinispan.commands.CommandIdUniquenessTest.testCommandIdUniqueness(CommandIdUniquenessTest.java:54)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:58,663 INFO  (testng-DifferentCacheModesTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testCacheModes(org.infinispan.config.DifferentCacheModesTest)
2013-01-31 13:15:58,665 DEBUG (testng-ConfigurationValidation2Test) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Configuration State responses are {}
2013-01-31 13:15:58,665 DEBUG (testng-ConfigurationValidation2Test) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] No Configuration State found in cluster
2013-01-31 13:15:58,665 DEBUG (testng-ConfigurationValidation2Test) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] No State found. Using original configuration parameters
2013-01-31 13:15:58,666 DEBUG (OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] remote transaction FineGrainedAtomicMapAPITest-NodeA-36196:396 received. Epoch is 0 (current epoch is 0) and protocol ID is 2PC
2013-01-31 13:15:58,666 DEBUG (OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] will block until 0 >= 0
2013-01-31 13:15:58,667 DEBUG (OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] epoch is the desired. Moving on...
2013-01-31 13:15:58,667 DEBUG (testng-DifferentCacheModesTest) [org.infinispan.configuration.cache.L1ConfigurationBuilder] L1 is enabled and L1OnRehash was not defined, enabling it
2013-01-31 13:15:58,667 DEBUG (Incoming-1,ISPN,FilteredKeyAffinityServiceTest-NodeA-2324) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] New view accepted: [FilteredKeyAffinityServiceTest-NodeA-2324|1] [FilteredKeyAffinityServiceTest-NodeA-2324, FilteredKeyAffinityServiceTest-NodeB-39961]
2013-01-31 13:15:58,667 INFO  (Incoming-1,ISPN,FilteredKeyAffinityServiceTest-NodeA-2324) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000094: Received new cluster view: [FilteredKeyAffinityServiceTest-NodeA-2324|1] [FilteredKeyAffinityServiceTest-NodeA-2324, FilteredKeyAffinityServiceTest-NodeB-39961]
2013-01-31 13:15:58,667 DEBUG (testng-DifferentCacheModesTest) [org.infinispan.configuration.cache.L1ConfigurationBuilder] L1 is enabled and L1OnRehash was not defined, enabling it
2013-01-31 13:15:58,667 DEBUG (testng-DifferentCacheModesTest) [org.infinispan.configuration.cache.L1ConfigurationBuilder] L1 is enabled and L1OnRehash was not defined, enabling it
2013-01-31 13:15:58,667 DEBUG (testng-DifferentCacheModesTest) [org.infinispan.configuration.cache.L1ConfigurationBuilder] L1 is enabled and L1OnRehash was not defined, enabling it
2013-01-31 13:15:58,668 DEBUG (testng-DifferentCacheModesTest) [org.infinispan.configuration.cache.L1ConfigurationBuilder] L1 is enabled and L1OnRehash was not defined, enabling it
2013-01-31 13:15:58,668 DEBUG (testng-DifferentCacheModesTest) [org.infinispan.configuration.cache.L1ConfigurationBuilder] L1 is enabled and L1OnRehash was not defined, enabling it
2013-01-31 13:15:58,669 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:54b status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:58,669 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-FineGrainedAtomicMapAPITest] will wait until no switch is in progress
2013-01-31 13:15:58,669 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-FineGrainedAtomicMapAPITest] no switch in progress. Moving on...
2013-01-31 13:15:58,669 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:54b status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:58,670 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:54a status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:58,670 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] will wait until no switch is in progress
2013-01-31 13:15:58,670 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] no switch in progress. Moving on...
2013-01-31 13:15:58,670 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:54a status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:58,670 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358:398 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:54a status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:58,670 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358:398 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:58,676 DEBUG (testng-DifferentCacheModesTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:58,680 ERROR (testng-FineGrainedAtomicMapAPITest) [org.infinispan.interceptors.InvocationContextInterceptor] ISPN000136: Execution error
java.lang.NullPointerException
	at java.util.concurrent.ConcurrentHashMap.get(ConcurrentHashMap.java:768)
	at org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry.getProtocolById(ReconfigurableProtocolRegistry.java:83)
	at org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager.notifyLocalTransactionFinished(ReconfigurableReplicationManager.java:254)
	at org.infinispan.transaction.TransactionTable.removeLocalTransaction(TransactionTable.java:317)
	at org.infinispan.transaction.xa.XaTransactionTable.removeLocalTransaction(XaTransactionTable.java:70)
	at org.infinispan.interceptors.TxInterceptor.enlistWriteAndInvokeNext(TxInterceptor.java:294)
	at org.infinispan.interceptors.TxInterceptor.visitApplyDeltaCommand(TxInterceptor.java:230)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.base.CommandInterceptor.handleDefault(CommandInterceptor.java:130)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.CacheImpl.applyDelta(CacheImpl.java:515)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.invokeApplyDelta(FineGrainedAtomicHashMapProxy.java:284)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:217)
	at org.infinispan.atomic.FineGrainedAtomicMapAPITest.testReadUncommittedValues(FineGrainedAtomicMapAPITest.java:354)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:58,690 ERROR (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Method testReadUncommittedValues(org.infinispan.atomic.FineGrainedAtomicMapAPITest) threw an exception
java.lang.NullPointerException
	at java.util.concurrent.ConcurrentHashMap.get(ConcurrentHashMap.java:768)
	at org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry.getProtocolById(ReconfigurableProtocolRegistry.java:83)
	at org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager.notifyLocalTransactionFinished(ReconfigurableReplicationManager.java:254)
	at org.infinispan.transaction.TransactionTable.removeLocalTransaction(TransactionTable.java:317)
	at org.infinispan.transaction.xa.XaTransactionTable.removeLocalTransaction(XaTransactionTable.java:70)
	at org.infinispan.interceptors.TxInterceptor.enlistWriteAndInvokeNext(TxInterceptor.java:294)
	at org.infinispan.interceptors.TxInterceptor.visitApplyDeltaCommand(TxInterceptor.java:230)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.base.CommandInterceptor.handleDefault(CommandInterceptor.java:130)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.CacheImpl.applyDelta(CacheImpl.java:515)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.invokeApplyDelta(FineGrainedAtomicHashMapProxy.java:284)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:217)
	at org.infinispan.atomic.FineGrainedAtomicMapAPITest.testReadUncommittedValues(FineGrainedAtomicMapAPITest.java:354)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:58,702 ERROR (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test failed testReadUncommittedValues(org.infinispan.atomic.FineGrainedAtomicMapAPITest)
java.lang.NullPointerException
	at java.util.concurrent.ConcurrentHashMap.get(ConcurrentHashMap.java:768)
	at org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry.getProtocolById(ReconfigurableProtocolRegistry.java:83)
	at org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager.notifyLocalTransactionFinished(ReconfigurableReplicationManager.java:254)
	at org.infinispan.transaction.TransactionTable.removeLocalTransaction(TransactionTable.java:317)
	at org.infinispan.transaction.xa.XaTransactionTable.removeLocalTransaction(XaTransactionTable.java:70)
	at org.infinispan.interceptors.TxInterceptor.enlistWriteAndInvokeNext(TxInterceptor.java:294)
	at org.infinispan.interceptors.TxInterceptor.visitApplyDeltaCommand(TxInterceptor.java:230)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.base.CommandInterceptor.handleDefault(CommandInterceptor.java:130)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.CacheImpl.applyDelta(CacheImpl.java:515)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.invokeApplyDelta(FineGrainedAtomicHashMapProxy.java:284)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:217)
	at org.infinispan.atomic.FineGrainedAtomicMapAPITest.testReadUncommittedValues(FineGrainedAtomicMapAPITest.java:354)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:58,689 DEBUG (OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] remote transaction RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358:398 received. Epoch is 0 (current epoch is 0) and protocol ID is 2PC
2013-01-31 13:15:58,704 DEBUG (OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] will block until 0 >= 0
2013-01-31 13:15:58,704 DEBUG (OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] epoch is the desired. Moving on...
2013-01-31 13:15:58,706 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.atomic.FineGrainedAtomicMapAPITest] *** Test method complete; clearing contents on all caches.
2013-01-31 13:15:58,706 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction FineGrainedAtomicMapAPITest-NodeA-36196:397 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:54b status: ActionStatus.ABORTING >] wants to rollback
2013-01-31 13:15:58,706 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'atomic' on a cache manager at address FineGrainedAtomicMapAPITest-NodeA-36196
2013-01-31 13:15:58,706 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [testReadUncommittedValues=AtomicHashMap]
2013-01-31 13:15:58,706 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:58,706 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:58,706 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:58,706 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'atomic' on a cache manager at address FineGrainedAtomicMapAPITest-NodeB-28700
2013-01-31 13:15:58,707 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [testReadUncommittedValues=AtomicHashMap]
2013-01-31 13:15:58,707 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:58,707 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:58,707 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:58,707 INFO  (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testReplicationPutAndClearCommit(org.infinispan.atomic.FineGrainedAtomicMapAPITest)
2013-01-31 13:15:58,707 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:552 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:58,707 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-FineGrainedAtomicMapAPITest] will wait until no switch is in progress
2013-01-31 13:15:58,707 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-FineGrainedAtomicMapAPITest] no switch in progress. Moving on...
2013-01-31 13:15:58,707 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:552 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:58,707 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction FineGrainedAtomicMapAPITest-NodeA-36196:399 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:552 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:58,707 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction FineGrainedAtomicMapAPITest-NodeA-36196:399 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:58,701 DEBUG (testng-FilteredKeyAffinityServiceTest) [org.jgroups.protocols.pbcast.NAKACK2] 
[FilteredKeyAffinityServiceTest-NodeB-39961 setDigest()]
existing digest:  []
new digest:       FilteredKeyAffinityServiceTest-NodeA-2324: [0 (0)], FilteredKeyAffinityServiceTest-NodeB-39961: [0 (0)]
resulting digest: FilteredKeyAffinityServiceTest-NodeA-2324: [0 (0)], FilteredKeyAffinityServiceTest-NodeB-39961: [0 (0)]
2013-01-31 13:15:58,708 DEBUG (testng-FilteredKeyAffinityServiceTest) [org.jgroups.protocols.pbcast.GMS] FilteredKeyAffinityServiceTest-NodeB-39961: installing view [FilteredKeyAffinityServiceTest-NodeA-2324|1] [FilteredKeyAffinityServiceTest-NodeA-2324, FilteredKeyAffinityServiceTest-NodeB-39961]
2013-01-31 13:15:58,708 DEBUG (OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] remote transaction FineGrainedAtomicMapAPITest-NodeA-36196:399 received. Epoch is 0 (current epoch is 0) and protocol ID is 2PC
2013-01-31 13:15:58,708 DEBUG (OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] will block until 0 >= 0
2013-01-31 13:15:58,708 DEBUG (OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] epoch is the desired. Moving on...
2013-01-31 13:15:58,708 DEBUG (testng-FilteredKeyAffinityServiceTest) [org.jgroups.protocols.pbcast.STABLE] [ergonomics] setting max_bytes to 800KB (2 members)
2013-01-31 13:15:58,708 DEBUG (testng-FilteredKeyAffinityServiceTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] New view accepted: [FilteredKeyAffinityServiceTest-NodeA-2324|1] [FilteredKeyAffinityServiceTest-NodeA-2324, FilteredKeyAffinityServiceTest-NodeB-39961]
2013-01-31 13:15:58,708 INFO  (testng-FilteredKeyAffinityServiceTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000094: Received new cluster view: [FilteredKeyAffinityServiceTest-NodeA-2324|1] [FilteredKeyAffinityServiceTest-NodeA-2324, FilteredKeyAffinityServiceTest-NodeB-39961]
2013-01-31 13:15:58,709 DEBUG (OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] remote transaction RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358:398 received. Epoch is 0 (current epoch is 0) and protocol ID is 2PC
2013-01-31 13:15:58,709 DEBUG (OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] will block until 0 >= 0
2013-01-31 13:15:58,709 DEBUG (OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] epoch is the desired. Moving on...
2013-01-31 13:15:58,710 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:556 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:58,710 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] will wait until no switch is in progress
2013-01-31 13:15:58,710 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] no switch in progress. Moving on...
2013-01-31 13:15:58,710 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:556 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:58,697 DEBUG (notification-thread-97) [org.infinispan.transaction.TransactionTable] View changed, recalculating minViewId
2013-01-31 13:15:58,692 DEBUG (testng-DifferentCacheModesTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:58,692 DEBUG (testng-ConfigurationValidation2Test) [org.infinispan.cacheviews.CacheViewsManagerImpl] ___defaultcache: Node ConfigurationValidation2Test-NodeA-15292 is joining
2013-01-31 13:15:58,713 INFO  (testng-FilteredKeyAffinityServiceTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000079: Cache local address is FilteredKeyAffinityServiceTest-NodeB-39961, physical addresses are [127.0.0.1:8251]
2013-01-31 13:15:58,715 DEBUG (testng-FilteredKeyAffinityServiceTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] Waiting on view being accepted
2013-01-31 13:15:58,715 DEBUG (ViewHandler,ISPN,FilteredKeyAffinityServiceTest-NodeA-2324) [org.jgroups.protocols.pbcast.STABLE] resuming message garbage collection
2013-01-31 13:15:58,716 DEBUG (testng-DifferentCacheModesTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:58,716 ERROR (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.interceptors.InvocationContextInterceptor] ISPN000136: Execution error
java.lang.NullPointerException
	at java.util.concurrent.ConcurrentHashMap.get(ConcurrentHashMap.java:768)
	at org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry.getProtocolById(ReconfigurableProtocolRegistry.java:83)
	at org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager.notifyLocalTransactionFinished(ReconfigurableReplicationManager.java:254)
	at org.infinispan.transaction.TransactionTable.removeLocalTransaction(TransactionTable.java:317)
	at org.infinispan.transaction.xa.XaTransactionTable.removeLocalTransaction(XaTransactionTable.java:70)
	at org.infinispan.interceptors.TxInterceptor.enlistWriteAndInvokeNext(TxInterceptor.java:294)
	at org.infinispan.interceptors.TxInterceptor.visitApplyDeltaCommand(TxInterceptor.java:230)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.base.CommandInterceptor.handleDefault(CommandInterceptor.java:130)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.CacheImpl.applyDelta(CacheImpl.java:515)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.invokeApplyDelta(FineGrainedAtomicHashMapProxy.java:284)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:217)
	at org.infinispan.atomic.FineGrainedAtomicMapAPITest.testReplicationPutCommit(FineGrainedAtomicMapAPITest.java:493)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:58,721 DEBUG (CacheViewInstaller-1,ConfigurationValidation2Test-NodeA-15292) [org.infinispan.cacheviews.CacheViewsManagerImpl] Installing new view CacheView{viewId=1, members=[ConfigurationValidation2Test-NodeA-15292]} for cache ___defaultcache
2013-01-31 13:15:58,721 DEBUG (testng-FilteredKeyAffinityServiceTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:58,734 DEBUG (testng-FilteredKeyAffinityServiceTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:58,717 DEBUG (OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] remote transaction FineGrainedAtomicMapAPITest-NodeA-36196:399 received. Epoch is 0 (current epoch is 0) and protocol ID is 2PC
2013-01-31 13:15:58,736 DEBUG (OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] will block until 0 >= 0
2013-01-31 13:15:58,736 DEBUG (OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] epoch is the desired. Moving on...
2013-01-31 13:15:58,736 ERROR (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Method testReplicationPutCommit(org.infinispan.atomic.RepetableReadFineGrainedAtomicMapAPITest) threw an exception
java.lang.NullPointerException
	at java.util.concurrent.ConcurrentHashMap.get(ConcurrentHashMap.java:768)
	at org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry.getProtocolById(ReconfigurableProtocolRegistry.java:83)
	at org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager.notifyLocalTransactionFinished(ReconfigurableReplicationManager.java:254)
	at org.infinispan.transaction.TransactionTable.removeLocalTransaction(TransactionTable.java:317)
	at org.infinispan.transaction.xa.XaTransactionTable.removeLocalTransaction(XaTransactionTable.java:70)
	at org.infinispan.interceptors.TxInterceptor.enlistWriteAndInvokeNext(TxInterceptor.java:294)
	at org.infinispan.interceptors.TxInterceptor.visitApplyDeltaCommand(TxInterceptor.java:230)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.base.CommandInterceptor.handleDefault(CommandInterceptor.java:130)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.CacheImpl.applyDelta(CacheImpl.java:515)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.invokeApplyDelta(FineGrainedAtomicHashMapProxy.java:284)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:217)
	at org.infinispan.atomic.FineGrainedAtomicMapAPITest.testReplicationPutCommit(FineGrainedAtomicMapAPITest.java:493)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:58,742 DEBUG (transport-thread-99) [org.infinispan.distribution.ch.DefaultConsistentHash] Using 1 virtualNodes to initialize consistent hash wheel 
2013-01-31 13:15:58,747 ERROR (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test failed testReplicationPutCommit(org.infinispan.atomic.RepetableReadFineGrainedAtomicMapAPITest)
java.lang.NullPointerException
	at java.util.concurrent.ConcurrentHashMap.get(ConcurrentHashMap.java:768)
	at org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry.getProtocolById(ReconfigurableProtocolRegistry.java:83)
	at org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager.notifyLocalTransactionFinished(ReconfigurableReplicationManager.java:254)
	at org.infinispan.transaction.TransactionTable.removeLocalTransaction(TransactionTable.java:317)
	at org.infinispan.transaction.xa.XaTransactionTable.removeLocalTransaction(XaTransactionTable.java:70)
	at org.infinispan.interceptors.TxInterceptor.enlistWriteAndInvokeNext(TxInterceptor.java:294)
	at org.infinispan.interceptors.TxInterceptor.visitApplyDeltaCommand(TxInterceptor.java:230)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.base.CommandInterceptor.handleDefault(CommandInterceptor.java:130)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.CacheImpl.applyDelta(CacheImpl.java:515)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.invokeApplyDelta(FineGrainedAtomicHashMapProxy.java:284)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:217)
	at org.infinispan.atomic.FineGrainedAtomicMapAPITest.testReplicationPutCommit(FineGrainedAtomicMapAPITest.java:493)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:58,755 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.atomic.RepetableReadFineGrainedAtomicMapAPITest] *** Test method complete; clearing contents on all caches.
2013-01-31 13:15:58,755 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358:400 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:556 status: ActionStatus.ABORTING >] wants to rollback
2013-01-31 13:15:58,755 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'atomic' on a cache manager at address RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358
2013-01-31 13:15:58,755 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [testReplicationPutCommit=AtomicHashMap]
2013-01-31 13:15:58,755 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:58,756 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:58,741 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:55a status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:58,756 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-FineGrainedAtomicMapAPITest] will wait until no switch is in progress
2013-01-31 13:15:58,756 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-FineGrainedAtomicMapAPITest] no switch in progress. Moving on...
2013-01-31 13:15:58,756 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:55a status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:58,756 ERROR (testng-FineGrainedAtomicMapAPITest) [org.infinispan.interceptors.InvocationContextInterceptor] ISPN000136: Execution error
java.lang.NullPointerException
	at java.util.concurrent.ConcurrentHashMap.get(ConcurrentHashMap.java:768)
	at org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry.getProtocolById(ReconfigurableProtocolRegistry.java:83)
	at org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager.notifyLocalTransactionFinished(ReconfigurableReplicationManager.java:254)
	at org.infinispan.transaction.TransactionTable.removeLocalTransaction(TransactionTable.java:317)
	at org.infinispan.transaction.xa.XaTransactionTable.removeLocalTransaction(XaTransactionTable.java:70)
	at org.infinispan.interceptors.TxInterceptor.enlistWriteAndInvokeNext(TxInterceptor.java:294)
	at org.infinispan.interceptors.TxInterceptor.visitApplyDeltaCommand(TxInterceptor.java:230)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.base.CommandInterceptor.handleDefault(CommandInterceptor.java:130)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.CacheImpl.applyDelta(CacheImpl.java:515)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.invokeApplyDelta(FineGrainedAtomicHashMapProxy.java:284)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:217)
	at org.infinispan.atomic.FineGrainedAtomicMapAPITest.testReplicationPutAndClearCommit(FineGrainedAtomicMapAPITest.java:566)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:58,737 DEBUG (testng-FilteredKeyAffinityServiceTest) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:58,760 ERROR (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Method testReplicationPutAndClearCommit(org.infinispan.atomic.FineGrainedAtomicMapAPITest) threw an exception
java.lang.NullPointerException
	at java.util.concurrent.ConcurrentHashMap.get(ConcurrentHashMap.java:768)
	at org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry.getProtocolById(ReconfigurableProtocolRegistry.java:83)
	at org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager.notifyLocalTransactionFinished(ReconfigurableReplicationManager.java:254)
	at org.infinispan.transaction.TransactionTable.removeLocalTransaction(TransactionTable.java:317)
	at org.infinispan.transaction.xa.XaTransactionTable.removeLocalTransaction(XaTransactionTable.java:70)
	at org.infinispan.interceptors.TxInterceptor.enlistWriteAndInvokeNext(TxInterceptor.java:294)
	at org.infinispan.interceptors.TxInterceptor.visitApplyDeltaCommand(TxInterceptor.java:230)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.base.CommandInterceptor.handleDefault(CommandInterceptor.java:130)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.CacheImpl.applyDelta(CacheImpl.java:515)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.invokeApplyDelta(FineGrainedAtomicHashMapProxy.java:284)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:217)
	at org.infinispan.atomic.FineGrainedAtomicMapAPITest.testReplicationPutAndClearCommit(FineGrainedAtomicMapAPITest.java:566)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:58,761 ERROR (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test failed testReplicationPutAndClearCommit(org.infinispan.atomic.FineGrainedAtomicMapAPITest)
java.lang.NullPointerException
	at java.util.concurrent.ConcurrentHashMap.get(ConcurrentHashMap.java:768)
	at org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry.getProtocolById(ReconfigurableProtocolRegistry.java:83)
	at org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager.notifyLocalTransactionFinished(ReconfigurableReplicationManager.java:254)
	at org.infinispan.transaction.TransactionTable.removeLocalTransaction(TransactionTable.java:317)
	at org.infinispan.transaction.xa.XaTransactionTable.removeLocalTransaction(XaTransactionTable.java:70)
	at org.infinispan.interceptors.TxInterceptor.enlistWriteAndInvokeNext(TxInterceptor.java:294)
	at org.infinispan.interceptors.TxInterceptor.visitApplyDeltaCommand(TxInterceptor.java:230)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.base.CommandInterceptor.handleDefault(CommandInterceptor.java:130)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.CacheImpl.applyDelta(CacheImpl.java:515)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.invokeApplyDelta(FineGrainedAtomicHashMapProxy.java:284)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:217)
	at org.infinispan.atomic.FineGrainedAtomicMapAPITest.testReplicationPutAndClearCommit(FineGrainedAtomicMapAPITest.java:566)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:58,756 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:58,747 DEBUG (transport-thread-99) [org.infinispan.statetransfer.ReplicatedStateTransferTask] Commencing state transfer 1 on node: ConfigurationValidation2Test-NodeA-15292. Before start, data container had 0 entries
2013-01-31 13:15:58,762 DEBUG (transport-thread-99) [org.infinispan.statetransfer.StateTransferLockImpl] Blocking new write commands for cache view 1
2013-01-31 13:15:58,762 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.atomic.FineGrainedAtomicMapAPITest] *** Test method complete; clearing contents on all caches.
2013-01-31 13:15:58,762 DEBUG (CacheViewInstaller-1,ConfigurationValidation2Test-NodeA-15292) [org.infinispan.cacheviews.CacheViewsManagerImpl] ___defaultcache: Committing cache view CacheView{viewId=1, members=[ConfigurationValidation2Test-NodeA-15292]}
2013-01-31 13:15:58,762 DEBUG (CacheViewInstaller-1,ConfigurationValidation2Test-NodeA-15292) [org.infinispan.statetransfer.BaseStateTransferTask] Node ConfigurationValidation2Test-NodeA-15292 completed state transfer for view 1 in 15 milliseconds!
2013-01-31 13:15:58,762 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction FineGrainedAtomicMapAPITest-NodeA-36196:401 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:55a status: ActionStatus.ABORTING >] wants to rollback
2013-01-31 13:15:58,762 DEBUG (CacheViewInstaller-1,ConfigurationValidation2Test-NodeA-15292) [org.infinispan.statetransfer.StateTransferLockImpl] Unblocking write commands for cache view 1
2013-01-31 13:15:58,763 DEBUG (CacheViewInstaller-1,ConfigurationValidation2Test-NodeA-15292) [org.infinispan.cacheviews.CacheViewsManagerImpl] Successfully installed view CacheView{viewId=1, members=[ConfigurationValidation2Test-NodeA-15292]} for cache ___defaultcache
2013-01-31 13:15:58,763 DEBUG (testng-ConfigurationValidation2Test) [org.infinispan.CacheImpl] Started cache ___defaultcache on ConfigurationValidation2Test-NodeA-15292
2013-01-31 13:15:58,761 INFO  (testng-FilteredKeyAffinityServiceTest) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:58,763 INFO  (testng-ConfigurationValidation2Test) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testCacheModeConfiguration(org.infinispan.config.ConfigurationValidation2Test)
2013-01-31 13:15:58,764 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'atomic' on a cache manager at address FineGrainedAtomicMapAPITest-NodeA-36196
2013-01-31 13:15:58,764 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [map=AtomicHashMap]
2013-01-31 13:15:58,764 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:58,764 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:58,764 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:58,764 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'atomic' on a cache manager at address FineGrainedAtomicMapAPITest-NodeB-28700
2013-01-31 13:15:58,764 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [map=AtomicHashMap]
2013-01-31 13:15:58,764 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:58,764 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:58,764 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:58,765 INFO  (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testReplicationPutCommit(org.infinispan.atomic.FineGrainedAtomicMapAPITest)
2013-01-31 13:15:58,765 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:55e status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:58,765 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-FineGrainedAtomicMapAPITest] will wait until no switch is in progress
2013-01-31 13:15:58,765 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-FineGrainedAtomicMapAPITest] no switch in progress. Moving on...
2013-01-31 13:15:58,765 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:55e status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:58,766 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction FineGrainedAtomicMapAPITest-NodeA-36196:402 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:55e status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:58,766 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction FineGrainedAtomicMapAPITest-NodeA-36196:402 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:58,766 DEBUG (testng-ConfigurationValidation2Test) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol 2PC
2013-01-31 13:15:58,767 DEBUG (OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] remote transaction FineGrainedAtomicMapAPITest-NodeA-36196:402 received. Epoch is 0 (current epoch is 0) and protocol ID is 2PC
2013-01-31 13:15:58,767 DEBUG (OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] will block until 0 >= 0
2013-01-31 13:15:58,767 DEBUG (OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] epoch is the desired. Moving on...
2013-01-31 13:15:58,767 DEBUG (testng-ConfigurationValidation2Test) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol PB
2013-01-31 13:15:58,768 DEBUG (testng-ConfigurationValidation2Test) [org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry] Register successfully the new replication protocol TO
2013-01-31 13:15:58,768 DEBUG (OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] remote transaction FineGrainedAtomicMapAPITest-NodeA-36196:402 received. Epoch is 0 (current epoch is 0) and protocol ID is 2PC
2013-01-31 13:15:58,768 DEBUG (OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] will block until 0 >= 0
2013-01-31 13:15:58,768 DEBUG (OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] epoch is the desired. Moving on...
2013-01-31 13:15:58,768 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'atomic' on a cache manager at address RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745
2013-01-31 13:15:58,768 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [testReplicationPutCommit=AtomicHashMap]
2013-01-31 13:15:58,768 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:58,768 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:58,769 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:58,769 DEBUG (testng-FilteredKeyAffinityServiceTest) [org.infinispan.transaction.TransactionTable] Min view id set to 1
2013-01-31 13:15:58,768 INFO  (testng-ConfigurationValidation2Test) [org.infinispan.dataplacement.DataPlacementManager] Data placement not enabled in Configuration
2013-01-31 13:15:58,769 DEBUG (testng-FilteredKeyAffinityServiceTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 10
2013-01-31 13:15:58,769 DEBUG (testng-FilteredKeyAffinityServiceTest) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.StateTransferLockInterceptor@7ad7fa6, TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@f976f3a, PB=org.infinispan.interceptors.StateTransferLockInterceptor@7ad7fa6}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@1f0750d5}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@194bdfdd}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@44563324, PB=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@44563324}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@7737a388, TO=org.infinispan.interceptors.EntryWrappingInterceptor@7737a388, PB=org.infinispan.interceptors.EntryWrappingInterceptor@7737a388}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.DistributionInterceptor@65d172dd, TO=org.infinispan.interceptors.totalorder.TotalOrderDistributionInterceptor@19cc3f64, PB=org.infinispan.interceptors.DistributionInterceptor@65d172dd}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:58,769 DEBUG (testng-FilteredKeyAffinityServiceTest) [org.infinispan.distribution.ch.DefaultConsistentHash] Using 1 virtualNodes to initialize consistent hash wheel 
2013-01-31 13:15:58,769 DEBUG (testng-ConfigurationValidation2Test) [org.infinispan.interceptors.InterceptorChain] Interceptor chain size: 10
2013-01-31 13:15:58,769 DEBUG (testng-FilteredKeyAffinityServiceTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Setting configuration tunned parameters
2013-01-31 13:15:58,769 DEBUG (testng-ConfigurationValidation2Test) [org.infinispan.interceptors.InterceptorChain] Interceptor chain is: 
	>> org.infinispan.interceptors.InvocationContextInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderStateTransferLockInterceptor@3055cb77}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{TO=org.infinispan.interceptors.totalorder.TotalOrderInterceptor@50a10a6b}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{PB=org.infinispan.interceptors.PassiveReplicationInterceptor@7cb32027}
	>> org.infinispan.interceptors.NotificationInterceptor
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@54042066, PB=org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor@54042066}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{2PC=org.infinispan.interceptors.EntryWrappingInterceptor@5aeb33a1, TO=org.infinispan.interceptors.EntryWrappingInterceptor@5aeb33a1, PB=org.infinispan.interceptors.EntryWrappingInterceptor@5aeb33a1}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor{}
	>> org.infinispan.interceptors.CallInterceptor
2013-01-31 13:15:58,769 DEBUG (testng-ConfigurationValidation2Test) [org.infinispan.CacheImpl] Started cache local on ConfigurationValidation2Test-NodeA-15292
2013-01-31 13:15:58,770 INFO  (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testReplicationRemoveCommit(org.infinispan.atomic.RepetableReadFineGrainedAtomicMapAPITest)
2013-01-31 13:15:58,770 INFO  (testng-ConfigurationValidation2Test) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testCacheModeConfiguration(org.infinispan.config.ConfigurationValidation2Test).
2013-01-31 13:15:58,771 DEBUG (testng-ConfigurationValidation2Test) [org.infinispan.test.TestingUtil] Cleaning data for cache '___defaultcache' on a cache manager at address ConfigurationValidation2Test-NodeA-15292
2013-01-31 13:15:58,771 DEBUG (testng-ConfigurationValidation2Test) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == []
2013-01-31 13:15:58,771 DEBUG (testng-ConfigurationValidation2Test) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:58,771 DEBUG (testng-ConfigurationValidation2Test) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:58,771 DEBUG (testng-ConfigurationValidation2Test) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:58,771 DEBUG (testng-ConfigurationValidation2Test) [org.infinispan.test.TestingUtil] Cleaning data for cache 'local' on a cache manager at address ConfigurationValidation2Test-NodeA-15292
2013-01-31 13:15:58,771 DEBUG (testng-ConfigurationValidation2Test) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [key=value]
2013-01-31 13:15:58,771 DEBUG (testng-ConfigurationValidation2Test) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:58,771 DEBUG (testng-ConfigurationValidation2Test) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:58,771 DEBUG (testng-ConfigurationValidation2Test) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:58,771 INFO  (testng-ConfigurationValidation2Test) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testWrongCacheModeConfiguration(org.infinispan.config.ConfigurationValidation2Test)
2013-01-31 13:15:58,771 INFO  (testng-ConfigurationValidation2Test) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testWrongCacheModeConfiguration(org.infinispan.config.ConfigurationValidation2Test).
2013-01-31 13:15:58,772 DEBUG (testng-ConfigurationValidation2Test) [org.infinispan.test.TestingUtil] Cleaning data for cache '___defaultcache' on a cache manager at address ConfigurationValidation2Test-NodeA-15292
2013-01-31 13:15:58,772 DEBUG (testng-ConfigurationValidation2Test) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [key=value]
2013-01-31 13:15:58,772 DEBUG (testng-ConfigurationValidation2Test) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:58,772 DEBUG (testng-ConfigurationValidation2Test) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:58,772 DEBUG (testng-ConfigurationValidation2Test) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:58,772 DEBUG (testng-ConfigurationValidation2Test) [org.infinispan.test.TestingUtil] Cleaning data for cache 'local' on a cache manager at address ConfigurationValidation2Test-NodeA-15292
2013-01-31 13:15:58,772 DEBUG (testng-ConfigurationValidation2Test) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == []
2013-01-31 13:15:58,772 DEBUG (testng-ConfigurationValidation2Test) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:58,772 DEBUG (testng-ConfigurationValidation2Test) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:58,772 DEBUG (testng-ConfigurationValidation2Test) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:58,773 DEBUG (testng-ConfigurationValidation2Test) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on ConfigurationValidation2Test-NodeA-15292
2013-01-31 13:15:58,773 DEBUG (testng-ConfigurationValidation2Test) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 30 seconds.
2013-01-31 13:15:58,773 DEBUG (testng-ConfigurationValidation2Test) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:58,773 DEBUG (CacheViewInstaller-1,ConfigurationValidation2Test-NodeA-15292) [org.infinispan.cacheviews.CacheViewsManagerImpl] Installing new view CacheView{viewId=2, members=[]} for cache ___defaultcache
2013-01-31 13:15:58,773 DEBUG (testng-ConfigurationValidation2Test) [org.infinispan.CacheImpl] Stopping cache local on ConfigurationValidation2Test-NodeA-15292
2013-01-31 13:15:58,774 DEBUG (testng-ConfigurationValidation2Test) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 30 seconds.
2013-01-31 13:15:58,774 DEBUG (testng-ConfigurationValidation2Test) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:58,774 DEBUG (testng-ConfigurationValidation2Test) [org.infinispan.manager.DefaultCacheManager] Stopping cache manager ISPN on ConfigurationValidation2Test-NodeA-15292
2013-01-31 13:15:58,774 DEBUG (testng-ConfigurationValidation2Test) [org.infinispan.CacheImpl] Stopping cache local on ConfigurationValidation2Test-NodeA-15292
2013-01-31 13:15:58,774 DEBUG (testng-ConfigurationValidation2Test) [org.infinispan.CacheImpl] Stopping cache ___defaultcache on ConfigurationValidation2Test-NodeA-15292
2013-01-31 13:15:58,772 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:563 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:58,774 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-FineGrainedAtomicMapAPITest] will wait until no switch is in progress
2013-01-31 13:15:58,774 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:562 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:58,778 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] will wait until no switch is in progress
2013-01-31 13:15:58,778 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] no switch in progress. Moving on...
2013-01-31 13:15:58,778 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:562 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:58,778 DEBUG (testng-FilteredKeyAffinityServiceTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Configuration State responses are {FilteredKeyAffinityServiceTest-NodeA-2324=SuccessfulResponse{responseValue=ConfigurationState{numberOfOwners=2, protocolName='2PC', epoch=0}} }
2013-01-31 13:15:58,778 DEBUG (testng-FilteredKeyAffinityServiceTest) [org.infinispan.statetransfer.BaseStateTransferManagerImpl] Configuration State found: ConfigurationState{numberOfOwners=2, protocolName='2PC', epoch=0}
2013-01-31 13:15:58,778 DEBUG (testng-FilteredKeyAffinityServiceTest) [org.infinispan.cacheviews.CacheViewsManagerImpl] dist: Node FilteredKeyAffinityServiceTest-NodeB-39961 is joining
2013-01-31 13:15:58,779 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358:403 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:562 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:58,779 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358:403 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:58,779 DEBUG (OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] remote transaction RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358:403 received. Epoch is 0 (current epoch is 0) and protocol ID is 2PC
2013-01-31 13:15:58,779 DEBUG (OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] will block until 0 >= 0
2013-01-31 13:15:58,779 DEBUG (OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] epoch is the desired. Moving on...
2013-01-31 13:15:58,782 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-FineGrainedAtomicMapAPITest] no switch in progress. Moving on...
2013-01-31 13:15:58,782 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:563 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:58,782 DEBUG (OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] remote transaction RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358:403 received. Epoch is 0 (current epoch is 0) and protocol ID is 2PC
2013-01-31 13:15:58,782 DEBUG (OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] will block until 0 >= 0
2013-01-31 13:15:58,782 DEBUG (OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] epoch is the desired. Moving on...
2013-01-31 13:15:58,783 INFO  (testng-ConfigurationValidation2Test) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000080: Disconnecting and closing JGroups Channel
2013-01-31 13:15:58,787 ERROR (testng-FineGrainedAtomicMapAPITest) [org.infinispan.interceptors.InvocationContextInterceptor] ISPN000136: Execution error
java.lang.NullPointerException
	at java.util.concurrent.ConcurrentHashMap.get(ConcurrentHashMap.java:768)
	at org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry.getProtocolById(ReconfigurableProtocolRegistry.java:83)
	at org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager.notifyLocalTransactionFinished(ReconfigurableReplicationManager.java:254)
	at org.infinispan.transaction.TransactionTable.removeLocalTransaction(TransactionTable.java:317)
	at org.infinispan.transaction.xa.XaTransactionTable.removeLocalTransaction(XaTransactionTable.java:70)
	at org.infinispan.interceptors.TxInterceptor.enlistWriteAndInvokeNext(TxInterceptor.java:294)
	at org.infinispan.interceptors.TxInterceptor.visitApplyDeltaCommand(TxInterceptor.java:230)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.base.CommandInterceptor.handleDefault(CommandInterceptor.java:130)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.CacheImpl.applyDelta(CacheImpl.java:515)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.invokeApplyDelta(FineGrainedAtomicHashMapProxy.java:284)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:217)
	at org.infinispan.atomic.FineGrainedAtomicMapAPITest.testReplicationPutCommit(FineGrainedAtomicMapAPITest.java:493)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:58,796 ERROR (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Method testReplicationPutCommit(org.infinispan.atomic.FineGrainedAtomicMapAPITest) threw an exception
java.lang.NullPointerException
	at java.util.concurrent.ConcurrentHashMap.get(ConcurrentHashMap.java:768)
	at org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry.getProtocolById(ReconfigurableProtocolRegistry.java:83)
	at org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager.notifyLocalTransactionFinished(ReconfigurableReplicationManager.java:254)
	at org.infinispan.transaction.TransactionTable.removeLocalTransaction(TransactionTable.java:317)
	at org.infinispan.transaction.xa.XaTransactionTable.removeLocalTransaction(XaTransactionTable.java:70)
	at org.infinispan.interceptors.TxInterceptor.enlistWriteAndInvokeNext(TxInterceptor.java:294)
	at org.infinispan.interceptors.TxInterceptor.visitApplyDeltaCommand(TxInterceptor.java:230)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.base.CommandInterceptor.handleDefault(CommandInterceptor.java:130)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.CacheImpl.applyDelta(CacheImpl.java:515)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.invokeApplyDelta(FineGrainedAtomicHashMapProxy.java:284)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:217)
	at org.infinispan.atomic.FineGrainedAtomicMapAPITest.testReplicationPutCommit(FineGrainedAtomicMapAPITest.java:493)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:58,800 ERROR (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test failed testReplicationPutCommit(org.infinispan.atomic.FineGrainedAtomicMapAPITest)
java.lang.NullPointerException
	at java.util.concurrent.ConcurrentHashMap.get(ConcurrentHashMap.java:768)
	at org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry.getProtocolById(ReconfigurableProtocolRegistry.java:83)
	at org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager.notifyLocalTransactionFinished(ReconfigurableReplicationManager.java:254)
	at org.infinispan.transaction.TransactionTable.removeLocalTransaction(TransactionTable.java:317)
	at org.infinispan.transaction.xa.XaTransactionTable.removeLocalTransaction(XaTransactionTable.java:70)
	at org.infinispan.interceptors.TxInterceptor.enlistWriteAndInvokeNext(TxInterceptor.java:294)
	at org.infinispan.interceptors.TxInterceptor.visitApplyDeltaCommand(TxInterceptor.java:230)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.base.CommandInterceptor.handleDefault(CommandInterceptor.java:130)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.CacheImpl.applyDelta(CacheImpl.java:515)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.invokeApplyDelta(FineGrainedAtomicHashMapProxy.java:284)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:217)
	at org.infinispan.atomic.FineGrainedAtomicMapAPITest.testReplicationPutCommit(FineGrainedAtomicMapAPITest.java:493)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:58,795 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:56a status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:58,801 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] will wait until no switch is in progress
2013-01-31 13:15:58,801 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] no switch in progress. Moving on...
2013-01-31 13:15:58,801 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:56a status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:58,801 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.atomic.FineGrainedAtomicMapAPITest] *** Test method complete; clearing contents on all caches.
2013-01-31 13:15:58,790 DEBUG (testng-ConfigurationValidation2Test) [org.infinispan.test.fwk.TEST_PING] Stop discovery for ConfigurationValidation2Test-NodeA-15292
2013-01-31 13:15:58,790 DEBUG (OOB-2,ISPN,FilteredKeyAffinityServiceTest-NodeA-2324) [org.infinispan.cacheviews.CacheViewsManagerImpl] dist: Node FilteredKeyAffinityServiceTest-NodeB-39961 is joining
2013-01-31 13:15:58,802 DEBUG (CacheViewInstaller-1,FilteredKeyAffinityServiceTest-NodeA-2324) [org.infinispan.cacheviews.CacheViewsManagerImpl] Installing new view CacheView{viewId=2, members=[FilteredKeyAffinityServiceTest-NodeA-2324, FilteredKeyAffinityServiceTest-NodeB-39961]} for cache dist
2013-01-31 13:15:58,802 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction FineGrainedAtomicMapAPITest-NodeA-36196:404 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:563 status: ActionStatus.ABORTING >] wants to rollback
2013-01-31 13:15:58,801 DEBUG (testng-ConfigurationValidation2Test) [org.jgroups.protocols.TCP] closing sockets and stopping threads
2013-01-31 13:15:58,802 ERROR (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.interceptors.InvocationContextInterceptor] ISPN000136: Execution error
java.lang.NullPointerException
	at java.util.concurrent.ConcurrentHashMap.get(ConcurrentHashMap.java:768)
	at org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry.getProtocolById(ReconfigurableProtocolRegistry.java:83)
	at org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager.notifyLocalTransactionFinished(ReconfigurableReplicationManager.java:254)
	at org.infinispan.transaction.TransactionTable.removeLocalTransaction(TransactionTable.java:317)
	at org.infinispan.transaction.xa.XaTransactionTable.removeLocalTransaction(XaTransactionTable.java:70)
	at org.infinispan.interceptors.TxInterceptor.enlistWriteAndInvokeNext(TxInterceptor.java:294)
	at org.infinispan.interceptors.TxInterceptor.visitApplyDeltaCommand(TxInterceptor.java:230)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.base.CommandInterceptor.handleDefault(CommandInterceptor.java:130)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.CacheImpl.applyDelta(CacheImpl.java:515)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.invokeApplyDelta(FineGrainedAtomicHashMapProxy.java:284)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:217)
	at org.infinispan.atomic.FineGrainedAtomicMapAPITest.testReplicationRemoveCommit(FineGrainedAtomicMapAPITest.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:58,805 DEBUG (OOB-1,ISPN,FilteredKeyAffinityServiceTest-NodeB-39961) [org.infinispan.distribution.ch.DefaultConsistentHash] Using 1 virtualNodes to initialize consistent hash wheel 
2013-01-31 13:15:58,804 INFO  (testng-ConfigurationValidation2Test) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000082: Stopping the RpcDispatcher
2013-01-31 13:15:58,803 DEBUG (transport-thread-103) [org.infinispan.distribution.ch.DefaultConsistentHash] Using 1 virtualNodes to initialize consistent hash wheel 
2013-01-31 13:15:58,805 DEBUG (OOB-1,ISPN,FilteredKeyAffinityServiceTest-NodeB-39961) [org.infinispan.statetransfer.DistributedStateTransferTask] Commencing rehash 2 on node: FilteredKeyAffinityServiceTest-NodeB-39961. Before start, data container had 0 entries
2013-01-31 13:15:58,805 DEBUG (transport-thread-103) [org.infinispan.statetransfer.DistributedStateTransferTask] Commencing rehash 2 on node: FilteredKeyAffinityServiceTest-NodeA-2324. Before start, data container had 0 entries
2013-01-31 13:15:58,805 DEBUG (transport-thread-103) [org.infinispan.statetransfer.StateTransferLockImpl] Blocking new write commands for cache view 2
2013-01-31 13:15:58,802 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'atomic' on a cache manager at address FineGrainedAtomicMapAPITest-NodeA-36196
2013-01-31 13:15:58,805 DEBUG (OOB-1,ISPN,FilteredKeyAffinityServiceTest-NodeB-39961) [org.infinispan.statetransfer.StateTransferLockImpl] Blocking new write commands for cache view 2
2013-01-31 13:15:58,805 ERROR (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Method testReplicationRemoveCommit(org.infinispan.atomic.RepetableReadFineGrainedAtomicMapAPITest) threw an exception
java.lang.NullPointerException
	at java.util.concurrent.ConcurrentHashMap.get(ConcurrentHashMap.java:768)
	at org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry.getProtocolById(ReconfigurableProtocolRegistry.java:83)
	at org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager.notifyLocalTransactionFinished(ReconfigurableReplicationManager.java:254)
	at org.infinispan.transaction.TransactionTable.removeLocalTransaction(TransactionTable.java:317)
	at org.infinispan.transaction.xa.XaTransactionTable.removeLocalTransaction(XaTransactionTable.java:70)
	at org.infinispan.interceptors.TxInterceptor.enlistWriteAndInvokeNext(TxInterceptor.java:294)
	at org.infinispan.interceptors.TxInterceptor.visitApplyDeltaCommand(TxInterceptor.java:230)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.base.CommandInterceptor.handleDefault(CommandInterceptor.java:130)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.CacheImpl.applyDelta(CacheImpl.java:515)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.invokeApplyDelta(FineGrainedAtomicHashMapProxy.java:284)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:217)
	at org.infinispan.atomic.FineGrainedAtomicMapAPITest.testReplicationRemoveCommit(FineGrainedAtomicMapAPITest.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:58,810 ERROR (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test failed testReplicationRemoveCommit(org.infinispan.atomic.RepetableReadFineGrainedAtomicMapAPITest)
java.lang.NullPointerException
	at java.util.concurrent.ConcurrentHashMap.get(ConcurrentHashMap.java:768)
	at org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry.getProtocolById(ReconfigurableProtocolRegistry.java:83)
	at org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager.notifyLocalTransactionFinished(ReconfigurableReplicationManager.java:254)
	at org.infinispan.transaction.TransactionTable.removeLocalTransaction(TransactionTable.java:317)
	at org.infinispan.transaction.xa.XaTransactionTable.removeLocalTransaction(XaTransactionTable.java:70)
	at org.infinispan.interceptors.TxInterceptor.enlistWriteAndInvokeNext(TxInterceptor.java:294)
	at org.infinispan.interceptors.TxInterceptor.visitApplyDeltaCommand(TxInterceptor.java:230)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.base.CommandInterceptor.handleDefault(CommandInterceptor.java:130)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.CacheImpl.applyDelta(CacheImpl.java:515)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.invokeApplyDelta(FineGrainedAtomicHashMapProxy.java:284)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:217)
	at org.infinispan.atomic.FineGrainedAtomicMapAPITest.testReplicationRemoveCommit(FineGrainedAtomicMapAPITest.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:58,810 INFO  (testng-EHCache2InfinispanTransformerTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testEhCache15File(org.infinispan.config.parsing.EHCache2InfinispanTransformerTest)
2013-01-31 13:15:58,809 DEBUG (OOB-1,ISPN,FilteredKeyAffinityServiceTest-NodeB-39961) [org.infinispan.cacheviews.CacheViewsManagerImpl] dist: Committing cache view CacheView{viewId=2, members=[FilteredKeyAffinityServiceTest-NodeA-2324, FilteredKeyAffinityServiceTest-NodeB-39961]}
2013-01-31 13:15:58,811 DEBUG (OOB-1,ISPN,FilteredKeyAffinityServiceTest-NodeB-39961) [org.infinispan.statetransfer.BaseStateTransferTask] Node FilteredKeyAffinityServiceTest-NodeB-39961 completed state transfer for view 2 in 6 milliseconds!
2013-01-31 13:15:58,811 DEBUG (OOB-1,ISPN,FilteredKeyAffinityServiceTest-NodeB-39961) [org.infinispan.statetransfer.StateTransferLockImpl] Unblocking write commands for cache view 2
2013-01-31 13:15:58,811 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.atomic.RepetableReadFineGrainedAtomicMapAPITest] *** Test method complete; clearing contents on all caches.
2013-01-31 13:15:58,811 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358:405 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:56a status: ActionStatus.ABORTING >] wants to rollback
2013-01-31 13:15:58,812 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'atomic' on a cache manager at address RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358
2013-01-31 13:15:58,812 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [testReplicationRemoveCommit=AtomicHashMap]
2013-01-31 13:15:58,812 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:58,812 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:58,812 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:58,812 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'atomic' on a cache manager at address RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745
2013-01-31 13:15:58,812 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [testReplicationRemoveCommit=AtomicHashMap]
2013-01-31 13:15:58,812 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:58,812 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:58,812 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:58,812 INFO  (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testRollback(org.infinispan.atomic.RepetableReadFineGrainedAtomicMapAPITest)
2013-01-31 13:15:58,813 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:56e status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:58,813 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] will wait until no switch is in progress
2013-01-31 13:15:58,813 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] no switch in progress. Moving on...
2013-01-31 13:15:58,813 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:56e status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:58,813 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358:406 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:56e status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:58,813 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358:406 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:58,813 DEBUG (OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] remote transaction RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358:406 received. Epoch is 0 (current epoch is 0) and protocol ID is 2PC
2013-01-31 13:15:58,814 DEBUG (OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] will block until 0 >= 0
2013-01-31 13:15:58,814 DEBUG (OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] epoch is the desired. Moving on...
2013-01-31 13:15:58,814 DEBUG (testng-FilteredKeyAffinityServiceTest) [org.infinispan.CacheImpl] Started cache dist on FilteredKeyAffinityServiceTest-NodeB-39961
2013-01-31 13:15:58,814 DEBUG (CacheViewInstaller-1,FilteredKeyAffinityServiceTest-NodeA-2324) [org.infinispan.cacheviews.CacheViewsManagerImpl] dist: Committing cache view CacheView{viewId=2, members=[FilteredKeyAffinityServiceTest-NodeA-2324, FilteredKeyAffinityServiceTest-NodeB-39961]}
2013-01-31 13:15:58,814 DEBUG (CacheViewInstaller-1,FilteredKeyAffinityServiceTest-NodeA-2324) [org.infinispan.statetransfer.BaseStateTransferTask] Node FilteredKeyAffinityServiceTest-NodeA-2324 completed state transfer for view 2 in 9 milliseconds!
2013-01-31 13:15:58,814 DEBUG (CacheViewInstaller-1,FilteredKeyAffinityServiceTest-NodeA-2324) [org.infinispan.statetransfer.StateTransferLockImpl] Unblocking write commands for cache view 2
2013-01-31 13:15:58,809 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [testReplicationPutCommit=AtomicHashMap]
2013-01-31 13:15:58,814 DEBUG (CacheViewInstaller-1,FilteredKeyAffinityServiceTest-NodeA-2324) [org.infinispan.cacheviews.CacheViewsManagerImpl] Successfully installed view CacheView{viewId=2, members=[FilteredKeyAffinityServiceTest-NodeA-2324, FilteredKeyAffinityServiceTest-NodeB-39961]} for cache dist
2013-01-31 13:15:58,814 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:58,814 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:58,814 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:58,814 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'atomic' on a cache manager at address FineGrainedAtomicMapAPITest-NodeB-28700
2013-01-31 13:15:58,814 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [testReplicationPutCommit=AtomicHashMap]
2013-01-31 13:15:58,814 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:58,815 DEBUG (OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] remote transaction RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358:406 received. Epoch is 0 (current epoch is 0) and protocol ID is 2PC
2013-01-31 13:15:58,815 DEBUG (OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] will block until 0 >= 0
2013-01-31 13:15:58,815 DEBUG (OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] epoch is the desired. Moving on...
2013-01-31 13:15:58,815 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:58,815 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:58,815 INFO  (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testReplicationRemoveCommit(org.infinispan.atomic.FineGrainedAtomicMapAPITest)
2013-01-31 13:15:58,816 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:573 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:58,816 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:572 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:58,816 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-FineGrainedAtomicMapAPITest] will wait until no switch is in progress
2013-01-31 13:15:58,816 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] will wait until no switch is in progress
2013-01-31 13:15:58,816 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-FineGrainedAtomicMapAPITest] no switch in progress. Moving on...
2013-01-31 13:15:58,816 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] no switch in progress. Moving on...
2013-01-31 13:15:58,816 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:573 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:58,816 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:572 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:58,816 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction FineGrainedAtomicMapAPITest-NodeA-36196:407 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:573 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:58,816 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction FineGrainedAtomicMapAPITest-NodeA-36196:407 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:58,817 ERROR (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.interceptors.InvocationContextInterceptor] ISPN000136: Execution error
java.lang.NullPointerException
	at java.util.concurrent.ConcurrentHashMap.get(ConcurrentHashMap.java:768)
	at org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry.getProtocolById(ReconfigurableProtocolRegistry.java:83)
	at org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager.notifyLocalTransactionFinished(ReconfigurableReplicationManager.java:254)
	at org.infinispan.transaction.TransactionTable.removeLocalTransaction(TransactionTable.java:317)
	at org.infinispan.transaction.xa.XaTransactionTable.removeLocalTransaction(XaTransactionTable.java:70)
	at org.infinispan.interceptors.TxInterceptor.enlistWriteAndInvokeNext(TxInterceptor.java:294)
	at org.infinispan.interceptors.TxInterceptor.visitApplyDeltaCommand(TxInterceptor.java:230)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.base.CommandInterceptor.handleDefault(CommandInterceptor.java:130)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.CacheImpl.applyDelta(CacheImpl.java:515)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.invokeApplyDelta(FineGrainedAtomicHashMapProxy.java:284)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:217)
	at org.infinispan.atomic.FineGrainedAtomicMapAPITest.testRollback(FineGrainedAtomicMapAPITest.java:274)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:58,817 DEBUG (OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] remote transaction FineGrainedAtomicMapAPITest-NodeA-36196:407 received. Epoch is 0 (current epoch is 0) and protocol ID is 2PC
2013-01-31 13:15:58,819 DEBUG (OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] will block until 0 >= 0
2013-01-31 13:15:58,819 DEBUG (OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] epoch is the desired. Moving on...
2013-01-31 13:15:58,819 ERROR (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Method testRollback(org.infinispan.atomic.RepetableReadFineGrainedAtomicMapAPITest) threw an exception
java.lang.NullPointerException
	at java.util.concurrent.ConcurrentHashMap.get(ConcurrentHashMap.java:768)
	at org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry.getProtocolById(ReconfigurableProtocolRegistry.java:83)
	at org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager.notifyLocalTransactionFinished(ReconfigurableReplicationManager.java:254)
	at org.infinispan.transaction.TransactionTable.removeLocalTransaction(TransactionTable.java:317)
	at org.infinispan.transaction.xa.XaTransactionTable.removeLocalTransaction(XaTransactionTable.java:70)
	at org.infinispan.interceptors.TxInterceptor.enlistWriteAndInvokeNext(TxInterceptor.java:294)
	at org.infinispan.interceptors.TxInterceptor.visitApplyDeltaCommand(TxInterceptor.java:230)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.base.CommandInterceptor.handleDefault(CommandInterceptor.java:130)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.CacheImpl.applyDelta(CacheImpl.java:515)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.invokeApplyDelta(FineGrainedAtomicHashMapProxy.java:284)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:217)
	at org.infinispan.atomic.FineGrainedAtomicMapAPITest.testRollback(FineGrainedAtomicMapAPITest.java:274)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:58,820 ERROR (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test failed testRollback(org.infinispan.atomic.RepetableReadFineGrainedAtomicMapAPITest)
java.lang.NullPointerException
	at java.util.concurrent.ConcurrentHashMap.get(ConcurrentHashMap.java:768)
	at org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry.getProtocolById(ReconfigurableProtocolRegistry.java:83)
	at org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager.notifyLocalTransactionFinished(ReconfigurableReplicationManager.java:254)
	at org.infinispan.transaction.TransactionTable.removeLocalTransaction(TransactionTable.java:317)
	at org.infinispan.transaction.xa.XaTransactionTable.removeLocalTransaction(XaTransactionTable.java:70)
	at org.infinispan.interceptors.TxInterceptor.enlistWriteAndInvokeNext(TxInterceptor.java:294)
	at org.infinispan.interceptors.TxInterceptor.visitApplyDeltaCommand(TxInterceptor.java:230)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.base.CommandInterceptor.handleDefault(CommandInterceptor.java:130)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.CacheImpl.applyDelta(CacheImpl.java:515)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.invokeApplyDelta(FineGrainedAtomicHashMapProxy.java:284)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:217)
	at org.infinispan.atomic.FineGrainedAtomicMapAPITest.testRollback(FineGrainedAtomicMapAPITest.java:274)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:58,820 DEBUG (OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] remote transaction FineGrainedAtomicMapAPITest-NodeA-36196:407 received. Epoch is 0 (current epoch is 0) and protocol ID is 2PC
2013-01-31 13:15:58,821 DEBUG (OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] will block until 0 >= 0
2013-01-31 13:15:58,821 DEBUG (OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] epoch is the desired. Moving on...
2013-01-31 13:15:58,832 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.atomic.RepetableReadFineGrainedAtomicMapAPITest] *** Test method complete; clearing contents on all caches.
2013-01-31 13:15:58,832 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358:408 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:572 status: ActionStatus.ABORTING >] wants to rollback
2013-01-31 13:15:58,832 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:57a status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:58,832 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-FineGrainedAtomicMapAPITest] will wait until no switch is in progress
2013-01-31 13:15:58,832 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-FineGrainedAtomicMapAPITest] no switch in progress. Moving on...
2013-01-31 13:15:58,832 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:57a status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:58,832 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'atomic' on a cache manager at address RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358
2013-01-31 13:15:58,833 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [testRollback=AtomicHashMap]
2013-01-31 13:15:58,833 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:58,833 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:58,833 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:58,833 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'atomic' on a cache manager at address RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745
2013-01-31 13:15:58,833 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [testRollback=AtomicHashMap]
2013-01-31 13:15:58,833 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:58,833 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:58,833 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:58,833 INFO  (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testRollbackAndThenCommit(org.infinispan.atomic.RepetableReadFineGrainedAtomicMapAPITest)
2013-01-31 13:15:58,834 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:57b status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:58,834 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] will wait until no switch is in progress
2013-01-31 13:15:58,834 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] no switch in progress. Moving on...
2013-01-31 13:15:58,834 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:57b status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:58,836 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358:409 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:57b status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:58,836 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358:409 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:58,839 DEBUG (OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] remote transaction RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358:409 received. Epoch is 0 (current epoch is 0) and protocol ID is 2PC
2013-01-31 13:15:58,840 DEBUG (OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] will block until 0 >= 0
2013-01-31 13:15:58,840 DEBUG (OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] epoch is the desired. Moving on...
2013-01-31 13:15:58,841 DEBUG (OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] remote transaction RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358:409 received. Epoch is 0 (current epoch is 0) and protocol ID is 2PC
2013-01-31 13:15:58,841 DEBUG (OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] will block until 0 >= 0
2013-01-31 13:15:58,841 DEBUG (OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] epoch is the desired. Moving on...
2013-01-31 13:15:58,848 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:57f status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:58,848 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] will wait until no switch is in progress
2013-01-31 13:15:58,848 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] no switch in progress. Moving on...
2013-01-31 13:15:58,848 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:57f status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:58,849 ERROR (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.interceptors.InvocationContextInterceptor] ISPN000136: Execution error
java.lang.NullPointerException
	at java.util.concurrent.ConcurrentHashMap.get(ConcurrentHashMap.java:768)
	at org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry.getProtocolById(ReconfigurableProtocolRegistry.java:83)
	at org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager.notifyLocalTransactionFinished(ReconfigurableReplicationManager.java:254)
	at org.infinispan.transaction.TransactionTable.removeLocalTransaction(TransactionTable.java:317)
	at org.infinispan.transaction.xa.XaTransactionTable.removeLocalTransaction(XaTransactionTable.java:70)
	at org.infinispan.interceptors.TxInterceptor.enlistWriteAndInvokeNext(TxInterceptor.java:294)
	at org.infinispan.interceptors.TxInterceptor.visitApplyDeltaCommand(TxInterceptor.java:230)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.base.CommandInterceptor.handleDefault(CommandInterceptor.java:130)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.CacheImpl.applyDelta(CacheImpl.java:515)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.invokeApplyDelta(FineGrainedAtomicHashMapProxy.java:284)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:217)
	at org.infinispan.atomic.FineGrainedAtomicMapAPITest.testRollbackAndThenCommit(FineGrainedAtomicMapAPITest.java:298)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:58,858 ERROR (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Method testRollbackAndThenCommit(org.infinispan.atomic.RepetableReadFineGrainedAtomicMapAPITest) threw an exception
java.lang.NullPointerException
	at java.util.concurrent.ConcurrentHashMap.get(ConcurrentHashMap.java:768)
	at org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry.getProtocolById(ReconfigurableProtocolRegistry.java:83)
	at org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager.notifyLocalTransactionFinished(ReconfigurableReplicationManager.java:254)
	at org.infinispan.transaction.TransactionTable.removeLocalTransaction(TransactionTable.java:317)
	at org.infinispan.transaction.xa.XaTransactionTable.removeLocalTransaction(XaTransactionTable.java:70)
	at org.infinispan.interceptors.TxInterceptor.enlistWriteAndInvokeNext(TxInterceptor.java:294)
	at org.infinispan.interceptors.TxInterceptor.visitApplyDeltaCommand(TxInterceptor.java:230)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.base.CommandInterceptor.handleDefault(CommandInterceptor.java:130)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.CacheImpl.applyDelta(CacheImpl.java:515)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.invokeApplyDelta(FineGrainedAtomicHashMapProxy.java:284)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:217)
	at org.infinispan.atomic.FineGrainedAtomicMapAPITest.testRollbackAndThenCommit(FineGrainedAtomicMapAPITest.java:298)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:58,867 ERROR (testng-FineGrainedAtomicMapAPITest) [org.infinispan.interceptors.InvocationContextInterceptor] ISPN000136: Execution error
java.lang.NullPointerException
	at java.util.concurrent.ConcurrentHashMap.get(ConcurrentHashMap.java:768)
	at org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry.getProtocolById(ReconfigurableProtocolRegistry.java:83)
	at org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager.notifyLocalTransactionFinished(ReconfigurableReplicationManager.java:254)
	at org.infinispan.transaction.TransactionTable.removeLocalTransaction(TransactionTable.java:317)
	at org.infinispan.transaction.xa.XaTransactionTable.removeLocalTransaction(XaTransactionTable.java:70)
	at org.infinispan.interceptors.TxInterceptor.enlistWriteAndInvokeNext(TxInterceptor.java:294)
	at org.infinispan.interceptors.TxInterceptor.visitApplyDeltaCommand(TxInterceptor.java:230)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.base.CommandInterceptor.handleDefault(CommandInterceptor.java:130)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.CacheImpl.applyDelta(CacheImpl.java:515)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.invokeApplyDelta(FineGrainedAtomicHashMapProxy.java:284)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:217)
	at org.infinispan.atomic.FineGrainedAtomicMapAPITest.testReplicationRemoveCommit(FineGrainedAtomicMapAPITest.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:58,894 ERROR (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Method testReplicationRemoveCommit(org.infinispan.atomic.FineGrainedAtomicMapAPITest) threw an exception
java.lang.NullPointerException
	at java.util.concurrent.ConcurrentHashMap.get(ConcurrentHashMap.java:768)
	at org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry.getProtocolById(ReconfigurableProtocolRegistry.java:83)
	at org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager.notifyLocalTransactionFinished(ReconfigurableReplicationManager.java:254)
	at org.infinispan.transaction.TransactionTable.removeLocalTransaction(TransactionTable.java:317)
	at org.infinispan.transaction.xa.XaTransactionTable.removeLocalTransaction(XaTransactionTable.java:70)
	at org.infinispan.interceptors.TxInterceptor.enlistWriteAndInvokeNext(TxInterceptor.java:294)
	at org.infinispan.interceptors.TxInterceptor.visitApplyDeltaCommand(TxInterceptor.java:230)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.base.CommandInterceptor.handleDefault(CommandInterceptor.java:130)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.CacheImpl.applyDelta(CacheImpl.java:515)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.invokeApplyDelta(FineGrainedAtomicHashMapProxy.java:284)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:217)
	at org.infinispan.atomic.FineGrainedAtomicMapAPITest.testReplicationRemoveCommit(FineGrainedAtomicMapAPITest.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:58,883 ERROR (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test failed testRollbackAndThenCommit(org.infinispan.atomic.RepetableReadFineGrainedAtomicMapAPITest)
java.lang.NullPointerException
	at java.util.concurrent.ConcurrentHashMap.get(ConcurrentHashMap.java:768)
	at org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry.getProtocolById(ReconfigurableProtocolRegistry.java:83)
	at org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager.notifyLocalTransactionFinished(ReconfigurableReplicationManager.java:254)
	at org.infinispan.transaction.TransactionTable.removeLocalTransaction(TransactionTable.java:317)
	at org.infinispan.transaction.xa.XaTransactionTable.removeLocalTransaction(XaTransactionTable.java:70)
	at org.infinispan.interceptors.TxInterceptor.enlistWriteAndInvokeNext(TxInterceptor.java:294)
	at org.infinispan.interceptors.TxInterceptor.visitApplyDeltaCommand(TxInterceptor.java:230)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.base.CommandInterceptor.handleDefault(CommandInterceptor.java:130)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.CacheImpl.applyDelta(CacheImpl.java:515)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.invokeApplyDelta(FineGrainedAtomicHashMapProxy.java:284)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:217)
	at org.infinispan.atomic.FineGrainedAtomicMapAPITest.testRollbackAndThenCommit(FineGrainedAtomicMapAPITest.java:298)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:58,903 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.atomic.RepetableReadFineGrainedAtomicMapAPITest] *** Test method complete; clearing contents on all caches.
2013-01-31 13:15:58,903 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358:410 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:57f status: ActionStatus.ABORTING >] wants to rollback
2013-01-31 13:15:58,903 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'atomic' on a cache manager at address RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358
2013-01-31 13:15:58,903 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [testRollbackAndThenCommit=AtomicHashMap]
2013-01-31 13:15:58,903 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:58,903 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:58,903 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:58,904 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'atomic' on a cache manager at address RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745
2013-01-31 13:15:58,904 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [testRollbackAndThenCommit=AtomicHashMap]
2013-01-31 13:15:58,904 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:58,904 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:58,904 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:58,904 INFO  (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testSizeOnCache(org.infinispan.atomic.RepetableReadFineGrainedAtomicMapAPITest)
2013-01-31 13:15:58,905 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:586 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:58,905 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] will wait until no switch is in progress
2013-01-31 13:15:58,906 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] no switch in progress. Moving on...
2013-01-31 13:15:58,906 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:586 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:58,906 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358:412 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:586 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:58,906 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358:412 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:58,907 DEBUG (OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] remote transaction RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358:412 received. Epoch is 0 (current epoch is 0) and protocol ID is 2PC
2013-01-31 13:15:58,907 DEBUG (OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] will block until 0 >= 0
2013-01-31 13:15:58,907 DEBUG (OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] epoch is the desired. Moving on...
2013-01-31 13:15:58,904 ERROR (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test failed testReplicationRemoveCommit(org.infinispan.atomic.FineGrainedAtomicMapAPITest)
java.lang.NullPointerException
	at java.util.concurrent.ConcurrentHashMap.get(ConcurrentHashMap.java:768)
	at org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry.getProtocolById(ReconfigurableProtocolRegistry.java:83)
	at org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager.notifyLocalTransactionFinished(ReconfigurableReplicationManager.java:254)
	at org.infinispan.transaction.TransactionTable.removeLocalTransaction(TransactionTable.java:317)
	at org.infinispan.transaction.xa.XaTransactionTable.removeLocalTransaction(XaTransactionTable.java:70)
	at org.infinispan.interceptors.TxInterceptor.enlistWriteAndInvokeNext(TxInterceptor.java:294)
	at org.infinispan.interceptors.TxInterceptor.visitApplyDeltaCommand(TxInterceptor.java:230)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.base.CommandInterceptor.handleDefault(CommandInterceptor.java:130)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.CacheImpl.applyDelta(CacheImpl.java:515)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.invokeApplyDelta(FineGrainedAtomicHashMapProxy.java:284)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:217)
	at org.infinispan.atomic.FineGrainedAtomicMapAPITest.testReplicationRemoveCommit(FineGrainedAtomicMapAPITest.java:531)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:58,909 DEBUG (OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] remote transaction RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358:412 received. Epoch is 0 (current epoch is 0) and protocol ID is 2PC
2013-01-31 13:15:58,923 DEBUG (OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] will block until 0 >= 0
2013-01-31 13:15:58,923 DEBUG (OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] epoch is the desired. Moving on...
2013-01-31 13:15:58,929 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.atomic.FineGrainedAtomicMapAPITest] *** Test method complete; clearing contents on all caches.
2013-01-31 13:15:58,929 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction FineGrainedAtomicMapAPITest-NodeA-36196:411 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:57a status: ActionStatus.ABORTING >] wants to rollback
2013-01-31 13:15:58,935 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'atomic' on a cache manager at address FineGrainedAtomicMapAPITest-NodeA-36196
2013-01-31 13:15:58,935 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [testReplicationRemoveCommit=AtomicHashMap]
2013-01-31 13:15:58,935 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:58,935 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:58,935 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:58,935 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'atomic' on a cache manager at address FineGrainedAtomicMapAPITest-NodeB-28700
2013-01-31 13:15:58,936 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [testReplicationRemoveCommit=AtomicHashMap]
2013-01-31 13:15:58,936 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:58,936 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:58,936 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:58,936 INFO  (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testRollback(org.infinispan.atomic.FineGrainedAtomicMapAPITest)
2013-01-31 13:15:58,936 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:58a status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:58,936 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-FineGrainedAtomicMapAPITest] will wait until no switch is in progress
2013-01-31 13:15:58,936 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-FineGrainedAtomicMapAPITest] no switch in progress. Moving on...
2013-01-31 13:15:58,936 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:58a status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:58,937 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction FineGrainedAtomicMapAPITest-NodeA-36196:413 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:58a status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:58,937 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction FineGrainedAtomicMapAPITest-NodeA-36196:413 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:58,937 DEBUG (OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] remote transaction FineGrainedAtomicMapAPITest-NodeA-36196:413 received. Epoch is 0 (current epoch is 0) and protocol ID is 2PC
2013-01-31 13:15:58,937 DEBUG (OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] will block until 0 >= 0
2013-01-31 13:15:58,937 DEBUG (OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] epoch is the desired. Moving on...
2013-01-31 13:15:58,939 DEBUG (OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] remote transaction FineGrainedAtomicMapAPITest-NodeA-36196:413 received. Epoch is 0 (current epoch is 0) and protocol ID is 2PC
2013-01-31 13:15:58,939 DEBUG (OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] will block until 0 >= 0
2013-01-31 13:15:58,939 DEBUG (OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] epoch is the desired. Moving on...
2013-01-31 13:15:58,940 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:58e status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:58,940 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-FineGrainedAtomicMapAPITest] will wait until no switch is in progress
2013-01-31 13:15:58,940 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-FineGrainedAtomicMapAPITest] no switch in progress. Moving on...
2013-01-31 13:15:58,940 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:58e status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:58,940 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:592 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:58,940 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] will wait until no switch is in progress
2013-01-31 13:15:58,940 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] no switch in progress. Moving on...
2013-01-31 13:15:58,940 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:592 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:58,941 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358:415 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:592 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:58,941 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358:415 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:58,941 DEBUG (OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] remote transaction RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358:415 received. Epoch is 0 (current epoch is 0) and protocol ID is 2PC
2013-01-31 13:15:58,941 DEBUG (OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] will block until 0 >= 0
2013-01-31 13:15:58,941 DEBUG (OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] epoch is the desired. Moving on...
2013-01-31 13:15:58,942 DEBUG (OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] remote transaction RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358:415 received. Epoch is 0 (current epoch is 0) and protocol ID is 2PC
2013-01-31 13:15:58,942 DEBUG (OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] will block until 0 >= 0
2013-01-31 13:15:58,942 DEBUG (OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] epoch is the desired. Moving on...
2013-01-31 13:15:58,945 ERROR (testng-FineGrainedAtomicMapAPITest) [org.infinispan.interceptors.InvocationContextInterceptor] ISPN000136: Execution error
java.lang.NullPointerException
	at java.util.concurrent.ConcurrentHashMap.get(ConcurrentHashMap.java:768)
	at org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry.getProtocolById(ReconfigurableProtocolRegistry.java:83)
	at org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager.notifyLocalTransactionFinished(ReconfigurableReplicationManager.java:254)
	at org.infinispan.transaction.TransactionTable.removeLocalTransaction(TransactionTable.java:317)
	at org.infinispan.transaction.xa.XaTransactionTable.removeLocalTransaction(XaTransactionTable.java:70)
	at org.infinispan.interceptors.TxInterceptor.enlistWriteAndInvokeNext(TxInterceptor.java:294)
	at org.infinispan.interceptors.TxInterceptor.visitApplyDeltaCommand(TxInterceptor.java:230)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.base.CommandInterceptor.handleDefault(CommandInterceptor.java:130)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.CacheImpl.applyDelta(CacheImpl.java:515)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.invokeApplyDelta(FineGrainedAtomicHashMapProxy.java:284)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:217)
	at org.infinispan.atomic.FineGrainedAtomicMapAPITest.testRollback(FineGrainedAtomicMapAPITest.java:274)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:58,947 ERROR (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Method testRollback(org.infinispan.atomic.FineGrainedAtomicMapAPITest) threw an exception
java.lang.NullPointerException
	at java.util.concurrent.ConcurrentHashMap.get(ConcurrentHashMap.java:768)
	at org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry.getProtocolById(ReconfigurableProtocolRegistry.java:83)
	at org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager.notifyLocalTransactionFinished(ReconfigurableReplicationManager.java:254)
	at org.infinispan.transaction.TransactionTable.removeLocalTransaction(TransactionTable.java:317)
	at org.infinispan.transaction.xa.XaTransactionTable.removeLocalTransaction(XaTransactionTable.java:70)
	at org.infinispan.interceptors.TxInterceptor.enlistWriteAndInvokeNext(TxInterceptor.java:294)
	at org.infinispan.interceptors.TxInterceptor.visitApplyDeltaCommand(TxInterceptor.java:230)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.base.CommandInterceptor.handleDefault(CommandInterceptor.java:130)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.CacheImpl.applyDelta(CacheImpl.java:515)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.invokeApplyDelta(FineGrainedAtomicHashMapProxy.java:284)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:217)
	at org.infinispan.atomic.FineGrainedAtomicMapAPITest.testRollback(FineGrainedAtomicMapAPITest.java:274)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:58,949 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:596 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:58,949 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] will wait until no switch is in progress
2013-01-31 13:15:58,949 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] no switch in progress. Moving on...
2013-01-31 13:15:58,949 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:596 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:58,949 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358:416 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:596 status: ActionStatus.ABORTING >] wants to rollback
2013-01-31 13:15:58,950 ERROR (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test failed testRollback(org.infinispan.atomic.FineGrainedAtomicMapAPITest)
java.lang.NullPointerException
	at java.util.concurrent.ConcurrentHashMap.get(ConcurrentHashMap.java:768)
	at org.infinispan.reconfigurableprotocol.ReconfigurableProtocolRegistry.getProtocolById(ReconfigurableProtocolRegistry.java:83)
	at org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager.notifyLocalTransactionFinished(ReconfigurableReplicationManager.java:254)
	at org.infinispan.transaction.TransactionTable.removeLocalTransaction(TransactionTable.java:317)
	at org.infinispan.transaction.xa.XaTransactionTable.removeLocalTransaction(XaTransactionTable.java:70)
	at org.infinispan.interceptors.TxInterceptor.enlistWriteAndInvokeNext(TxInterceptor.java:294)
	at org.infinispan.interceptors.TxInterceptor.visitApplyDeltaCommand(TxInterceptor.java:230)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.base.CommandInterceptor.handleDefault(CommandInterceptor.java:130)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.CacheImpl.applyDelta(CacheImpl.java:515)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.invokeApplyDelta(FineGrainedAtomicHashMapProxy.java:284)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:217)
	at org.infinispan.atomic.FineGrainedAtomicMapAPITest.testRollback(FineGrainedAtomicMapAPITest.java:274)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:58,953 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.atomic.FineGrainedAtomicMapAPITest] *** Test method complete; clearing contents on all caches.
2013-01-31 13:15:58,953 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction FineGrainedAtomicMapAPITest-NodeA-36196:414 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:58e status: ActionStatus.ABORTING >] wants to rollback
2013-01-31 13:15:58,951 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:59a status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:58,954 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] will wait until no switch is in progress
2013-01-31 13:15:58,954 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] no switch in progress. Moving on...
2013-01-31 13:15:58,954 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:59a status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:58,954 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'atomic' on a cache manager at address FineGrainedAtomicMapAPITest-NodeA-36196
2013-01-31 13:15:58,954 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [testRollback=AtomicHashMap]
2013-01-31 13:15:58,954 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:58,954 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358:417 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:59a status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:58,954 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358:417 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:58,954 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:58,954 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:58,954 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'atomic' on a cache manager at address FineGrainedAtomicMapAPITest-NodeB-28700
2013-01-31 13:15:58,954 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [testRollback=AtomicHashMap]
2013-01-31 13:15:58,955 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:58,955 DEBUG (OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] remote transaction RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358:417 received. Epoch is 0 (current epoch is 0) and protocol ID is 2PC
2013-01-31 13:15:58,955 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:58,955 DEBUG (OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] will block until 0 >= 0
2013-01-31 13:15:58,955 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:58,955 DEBUG (OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] epoch is the desired. Moving on...
2013-01-31 13:15:58,955 INFO  (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testRollbackAndThenCommit(org.infinispan.atomic.FineGrainedAtomicMapAPITest)
2013-01-31 13:15:58,955 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:59e status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:58,955 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-FineGrainedAtomicMapAPITest] will wait until no switch is in progress
2013-01-31 13:15:58,955 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-FineGrainedAtomicMapAPITest] no switch in progress. Moving on...
2013-01-31 13:15:58,955 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:59e status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:58,955 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction FineGrainedAtomicMapAPITest-NodeA-36196:418 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:59e status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:58,955 DEBUG (OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] remote transaction RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358:417 received. Epoch is 0 (current epoch is 0) and protocol ID is 2PC
2013-01-31 13:15:58,955 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction FineGrainedAtomicMapAPITest-NodeA-36196:418 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:58,955 DEBUG (OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] will block until 0 >= 0
2013-01-31 13:15:58,956 DEBUG (OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745] epoch is the desired. Moving on...
2013-01-31 13:15:58,956 DEBUG (OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] remote transaction FineGrainedAtomicMapAPITest-NodeA-36196:418 received. Epoch is 0 (current epoch is 0) and protocol ID is 2PC
2013-01-31 13:15:58,956 DEBUG (OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] will block until 0 >= 0
2013-01-31 13:15:58,956 DEBUG (OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] epoch is the desired. Moving on...
2013-01-31 13:15:58,956 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:5a2 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:58,956 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] will wait until no switch is in progress
2013-01-31 13:15:58,957 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] no switch in progress. Moving on...
2013-01-31 13:15:58,957 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:5a2 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:58,957 DEBUG (OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] remote transaction FineGrainedAtomicMapAPITest-NodeA-36196:418 received. Epoch is 0 (current epoch is 0) and protocol ID is 2PC
2013-01-31 13:15:58,957 DEBUG (OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] will block until 0 >= 0
2013-01-31 13:15:58,957 DEBUG (OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] epoch is the desired. Moving on...
2013-01-31 13:15:58,957 ERROR (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.interceptors.InvocationContextInterceptor] ISPN000136: Execution error
java.lang.NullPointerException
2013-01-31 13:15:58,957 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-RepetableReadFineGrainedAtomicMapAPITest] local transaction RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358:419 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:5a2 status: ActionStatus.ABORTING >] wants to rollback
2013-01-31 13:15:58,958 ERROR (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Method testSizeOnCache(org.infinispan.atomic.RepetableReadFineGrainedAtomicMapAPITest) threw an exception
org.infinispan.CacheException: Unable to end batch
	at org.infinispan.batch.BatchContainer.endBatch(BatchContainer.java:107)
	at org.infinispan.batch.AutoBatchSupport.endAtomic(AutoBatchSupport.java:49)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:220)
	at org.infinispan.atomic.FineGrainedAtomicMapAPITest.testSizeOnCache(FineGrainedAtomicMapAPITest.java:130)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
Caused by: javax.transaction.RollbackException: ARJUNA016053: Could not commit transaction.
	at com.arjuna.ats.internal.jta.transaction.arjunacore.TransactionImple.commitAndDisassociate(TransactionImple.java:1177)
	at com.arjuna.ats.internal.jta.transaction.arjunacore.BaseTransaction.commit(BaseTransaction.java:117)
	at org.infinispan.batch.BatchContainer.resolveTransaction(BatchContainer.java:123)
	at org.infinispan.batch.BatchContainer.endBatch(BatchContainer.java:105)
	... 23 more
Caused by: java.lang.Throwable: setRollbackOnly called from:
	at com.arjuna.ats.internal.jta.transaction.arjunacore.TransactionImple.setRollbackOnly(TransactionImple.java:313)
	at org.infinispan.interceptors.TxInterceptor.enlistWriteAndInvokeNext(TxInterceptor.java:292)
	at org.infinispan.interceptors.TxInterceptor.visitApplyDeltaCommand(TxInterceptor.java:230)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.base.CommandInterceptor.handleDefault(CommandInterceptor.java:130)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.CacheImpl.applyDelta(CacheImpl.java:515)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.invokeApplyDelta(FineGrainedAtomicHashMapProxy.java:284)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:217)
	... 21 more
2013-01-31 13:15:58,960 ERROR (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test failed testSizeOnCache(org.infinispan.atomic.RepetableReadFineGrainedAtomicMapAPITest)
org.infinispan.CacheException: Unable to end batch
	at org.infinispan.batch.BatchContainer.endBatch(BatchContainer.java:107)
	at org.infinispan.batch.AutoBatchSupport.endAtomic(AutoBatchSupport.java:49)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:220)
	at org.infinispan.atomic.FineGrainedAtomicMapAPITest.testSizeOnCache(FineGrainedAtomicMapAPITest.java:130)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
Caused by: javax.transaction.RollbackException: ARJUNA016053: Could not commit transaction.
	at com.arjuna.ats.internal.jta.transaction.arjunacore.TransactionImple.commitAndDisassociate(TransactionImple.java:1177)
	at com.arjuna.ats.internal.jta.transaction.arjunacore.BaseTransaction.commit(BaseTransaction.java:117)
	at org.infinispan.batch.BatchContainer.resolveTransaction(BatchContainer.java:123)
	at org.infinispan.batch.BatchContainer.endBatch(BatchContainer.java:105)
	... 23 more
Caused by: java.lang.Throwable: setRollbackOnly called from:
	at com.arjuna.ats.internal.jta.transaction.arjunacore.TransactionImple.setRollbackOnly(TransactionImple.java:313)
	at org.infinispan.interceptors.TxInterceptor.enlistWriteAndInvokeNext(TxInterceptor.java:292)
	at org.infinispan.interceptors.TxInterceptor.visitApplyDeltaCommand(TxInterceptor.java:230)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.base.CommandInterceptor.handleDefault(CommandInterceptor.java:130)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.CacheImpl.applyDelta(CacheImpl.java:515)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.invokeApplyDelta(FineGrainedAtomicHashMapProxy.java:284)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:217)
	... 21 more
2013-01-31 13:15:58,958 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:5a6 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:58,961 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-FineGrainedAtomicMapAPITest] will wait until no switch is in progress
2013-01-31 13:15:58,961 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-FineGrainedAtomicMapAPITest] no switch in progress. Moving on...
2013-01-31 13:15:58,961 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:5a6 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:58,962 ERROR (testng-FineGrainedAtomicMapAPITest) [org.infinispan.interceptors.InvocationContextInterceptor] ISPN000136: Execution error
java.lang.NullPointerException
2013-01-31 13:15:58,962 ERROR (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Method testRollbackAndThenCommit(org.infinispan.atomic.FineGrainedAtomicMapAPITest) threw an exception
java.lang.NullPointerException
2013-01-31 13:15:58,962 ERROR (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test failed testRollbackAndThenCommit(org.infinispan.atomic.FineGrainedAtomicMapAPITest)
java.lang.NullPointerException
2013-01-31 13:15:58,962 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.atomic.FineGrainedAtomicMapAPITest] *** Test method complete; clearing contents on all caches.
2013-01-31 13:15:58,963 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction FineGrainedAtomicMapAPITest-NodeA-36196:420 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:5a6 status: ActionStatus.ABORTING >] wants to rollback
2013-01-31 13:15:58,963 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'atomic' on a cache manager at address FineGrainedAtomicMapAPITest-NodeA-36196
2013-01-31 13:15:58,963 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [testRollbackAndThenCommit=AtomicHashMap]
2013-01-31 13:15:58,963 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:58,963 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:58,963 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:58,963 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'atomic' on a cache manager at address FineGrainedAtomicMapAPITest-NodeB-28700
2013-01-31 13:15:58,963 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [testRollbackAndThenCommit=AtomicHashMap]
2013-01-31 13:15:58,963 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:58,964 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:58,964 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:58,964 INFO  (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testSizeOnCache(org.infinispan.atomic.FineGrainedAtomicMapAPITest)
2013-01-31 13:15:58,964 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:5aa status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:58,964 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-FineGrainedAtomicMapAPITest] will wait until no switch is in progress
2013-01-31 13:15:58,964 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-FineGrainedAtomicMapAPITest] no switch in progress. Moving on...
2013-01-31 13:15:58,964 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:5aa status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:58,964 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction FineGrainedAtomicMapAPITest-NodeA-36196:421 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:5aa status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:58,964 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction FineGrainedAtomicMapAPITest-NodeA-36196:421 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:58,965 DEBUG (OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] remote transaction FineGrainedAtomicMapAPITest-NodeA-36196:421 received. Epoch is 0 (current epoch is 0) and protocol ID is 2PC
2013-01-31 13:15:58,965 DEBUG (OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] will block until 0 >= 0
2013-01-31 13:15:58,965 DEBUG (OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] epoch is the desired. Moving on...
2013-01-31 13:15:58,973 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.atomic.RepetableReadFineGrainedAtomicMapAPITest] *** Test method complete; clearing contents on all caches.
2013-01-31 13:15:58,975 DEBUG (OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] remote transaction FineGrainedAtomicMapAPITest-NodeA-36196:421 received. Epoch is 0 (current epoch is 0) and protocol ID is 2PC
2013-01-31 13:15:58,975 DEBUG (OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] will block until 0 >= 0
2013-01-31 13:15:58,975 DEBUG (OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] epoch is the desired. Moving on...
2013-01-31 13:15:58,979 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'atomic' on a cache manager at address RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358
2013-01-31 13:15:58,979 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [testSizeOnCache=AtomicHashMap, Hi=Someone, Need=Read Consistency]
2013-01-31 13:15:58,979 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:58,979 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:58,979 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:58,979 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'atomic' on a cache manager at address RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745
2013-01-31 13:15:58,979 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [testSizeOnCache=AtomicHashMap, Hi=Someone, Need=Read Consistency]
2013-01-31 13:15:58,979 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:58,980 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:58,980 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:58,980 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.CacheImpl] Stopping cache atomic on RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358
2013-01-31 13:15:58,980 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:5ae status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:58,980 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-FineGrainedAtomicMapAPITest] will wait until no switch is in progress
2013-01-31 13:15:58,980 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-FineGrainedAtomicMapAPITest] no switch in progress. Moving on...
2013-01-31 13:15:58,980 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 0 milliseconds.
2013-01-31 13:15:58,980 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:5ae status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:58,980 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction FineGrainedAtomicMapAPITest-NodeA-36196:422 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:5ae status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:58,980 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction FineGrainedAtomicMapAPITest-NodeA-36196:422 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:58,981 DEBUG (OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] remote transaction FineGrainedAtomicMapAPITest-NodeA-36196:422 received. Epoch is 0 (current epoch is 0) and protocol ID is 2PC
2013-01-31 13:15:58,981 DEBUG (OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] will block until 0 >= 0
2013-01-31 13:15:58,981 DEBUG (OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] epoch is the desired. Moving on...
2013-01-31 13:15:58,982 DEBUG (OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] remote transaction FineGrainedAtomicMapAPITest-NodeA-36196:422 received. Epoch is 0 (current epoch is 0) and protocol ID is 2PC
2013-01-31 13:15:58,982 DEBUG (OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] will block until 0 >= 0
2013-01-31 13:15:58,982 DEBUG (OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] epoch is the desired. Moving on...
2013-01-31 13:15:58,983 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:5b2 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:58,983 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-FineGrainedAtomicMapAPITest] will wait until no switch is in progress
2013-01-31 13:15:58,983 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-FineGrainedAtomicMapAPITest] no switch in progress. Moving on...
2013-01-31 13:15:58,983 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:5b2 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:58,983 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction FineGrainedAtomicMapAPITest-NodeA-36196:423 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:5b2 status: ActionStatus.ABORTING >] wants to rollback
2013-01-31 13:15:58,980 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:58,984 DEBUG (CacheViewInstaller-1,RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358) [org.infinispan.cacheviews.CacheViewsManagerImpl] Installing new view CacheView{viewId=3, members=[RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745]} for cache atomic
2013-01-31 13:15:58,984 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.CacheImpl] Stopping cache atomic on RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745
2013-01-31 13:15:58,985 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:5b6 status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:58,985 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-FineGrainedAtomicMapAPITest] will wait until no switch is in progress
2013-01-31 13:15:58,985 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-FineGrainedAtomicMapAPITest] no switch in progress. Moving on...
2013-01-31 13:15:58,985 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:5b6 status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:58,985 DEBUG (Incoming-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.statetransfer.StateTransferLockImpl] Blocking new write commands because we'll soon start a state transfer
2013-01-31 13:15:58,985 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction FineGrainedAtomicMapAPITest-NodeA-36196:424 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:5b6 status: ActionStatus.COMMITTING >] wants to commit
2013-01-31 13:15:58,985 DEBUG (OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.distribution.ch.DefaultConsistentHash] Using 1 virtualNodes to initialize consistent hash wheel 
2013-01-31 13:15:58,986 DEBUG (OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.statetransfer.ReplicatedStateTransferTask] Commencing state transfer 3 on node: RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745. Before start, data container had 0 entries
2013-01-31 13:15:58,986 DEBUG (OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.statetransfer.StateTransferLockImpl] Blocking new write commands for cache view 3
2013-01-31 13:15:58,986 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction FineGrainedAtomicMapAPITest-NodeA-36196:424 will use CurrentProtocolInfo{epoch=0, current=ReconfigurableProtocol{protocolName=2PC}, old=null, state=SAFE} as commit protocol
2013-01-31 13:15:58,986 DEBUG (OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] remote transaction FineGrainedAtomicMapAPITest-NodeA-36196:424 received. Epoch is 0 (current epoch is 0) and protocol ID is 2PC
2013-01-31 13:15:58,986 DEBUG (OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] will block until 0 >= 0
2013-01-31 13:15:58,986 DEBUG (OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] epoch is the desired. Moving on...
2013-01-31 13:15:58,987 DEBUG (OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] remote transaction FineGrainedAtomicMapAPITest-NodeA-36196:424 received. Epoch is 0 (current epoch is 0) and protocol ID is 2PC
2013-01-31 13:15:58,987 DEBUG (OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] will block until 0 >= 0
2013-01-31 13:15:58,987 DEBUG (OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700] epoch is the desired. Moving on...
2013-01-31 13:15:58,987 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 0 milliseconds.
2013-01-31 13:15:58,987 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:58,987 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.statetransfer.BaseStateTransferTask] Node RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745 cancelled state transfer for view 3 after 1 milliseconds!
2013-01-31 13:15:58,988 DEBUG (OOB-2,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.cacheviews.CacheViewsManagerImpl] atomic: Committing cache view CacheView{viewId=3, members=[RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745]}
2013-01-31 13:15:58,989 DEBUG (CacheViewInstaller-1,RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358) [org.infinispan.cacheviews.CacheViewsManagerImpl] atomic: Committing cache view CacheView{viewId=3, members=[RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745]}
2013-01-31 13:15:58,989 DEBUG (CacheViewInstaller-1,RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358) [org.infinispan.cacheviews.CacheViewsManagerImpl] Successfully installed view CacheView{viewId=3, members=[RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745]} for cache atomic
2013-01-31 13:15:58,989 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:5ba status: ActionStatus.RUNNING > is starting. check if switch is in progress...
2013-01-31 13:15:58,989 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-FineGrainedAtomicMapAPITest] will wait until no switch is in progress
2013-01-31 13:15:58,989 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ProtocolManager] [testng-FineGrainedAtomicMapAPITest] no switch in progress. Moving on...
2013-01-31 13:15:58,989 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:5ba status: ActionStatus.RUNNING > will use 2PC while executing
2013-01-31 13:15:58,990 DEBUG (CacheViewInstaller-1,RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358) [org.infinispan.cacheviews.CacheViewsManagerImpl] Installing new view CacheView{viewId=4, members=[]} for cache atomic
2013-01-31 13:15:58,990 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.manager.DefaultCacheManager] Stopping cache manager ISPN on RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358
2013-01-31 13:15:58,990 DEBUG (CacheViewInstaller-1,RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358) [org.infinispan.cacheviews.CacheViewsManagerImpl] atomic: Committing cache view CacheView{viewId=4, members=[]}
2013-01-31 13:15:58,990 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.CacheImpl] Stopping cache atomic on RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358
2013-01-31 13:15:58,990 DEBUG (CacheViewInstaller-1,RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358) [org.infinispan.cacheviews.CacheViewsManagerImpl] Successfully installed view CacheView{viewId=4, members=[]} for cache atomic
2013-01-31 13:15:58,991 ERROR (testng-FineGrainedAtomicMapAPITest) [org.infinispan.interceptors.InvocationContextInterceptor] ISPN000136: Execution error
java.lang.NullPointerException
2013-01-31 13:15:58,991 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.reconfigurableprotocol.manager.ReconfigurableReplicationManager] [testng-FineGrainedAtomicMapAPITest] local transaction FineGrainedAtomicMapAPITest-NodeA-36196:425 [TransactionImple < ac, BasicAction: 0:ffff92c12970:c452:510a6e84:5ba status: ActionStatus.ABORTING >] wants to rollback
2013-01-31 13:15:58,992 ERROR (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Method testSizeOnCache(org.infinispan.atomic.FineGrainedAtomicMapAPITest) threw an exception
org.infinispan.CacheException: Unable to end batch
	at org.infinispan.batch.BatchContainer.endBatch(BatchContainer.java:107)
	at org.infinispan.batch.AutoBatchSupport.endAtomic(AutoBatchSupport.java:49)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:220)
	at org.infinispan.atomic.FineGrainedAtomicMapAPITest.testSizeOnCache(FineGrainedAtomicMapAPITest.java:130)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
Caused by: javax.transaction.RollbackException: ARJUNA016053: Could not commit transaction.
	at com.arjuna.ats.internal.jta.transaction.arjunacore.TransactionImple.commitAndDisassociate(TransactionImple.java:1177)
	at com.arjuna.ats.internal.jta.transaction.arjunacore.BaseTransaction.commit(BaseTransaction.java:117)
	at org.infinispan.batch.BatchContainer.resolveTransaction(BatchContainer.java:123)
	at org.infinispan.batch.BatchContainer.endBatch(BatchContainer.java:105)
	... 23 more
Caused by: java.lang.Throwable: setRollbackOnly called from:
	at com.arjuna.ats.internal.jta.transaction.arjunacore.TransactionImple.setRollbackOnly(TransactionImple.java:313)
	at org.infinispan.interceptors.TxInterceptor.enlistWriteAndInvokeNext(TxInterceptor.java:292)
	at org.infinispan.interceptors.TxInterceptor.visitApplyDeltaCommand(TxInterceptor.java:230)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.base.CommandInterceptor.handleDefault(CommandInterceptor.java:130)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.CacheImpl.applyDelta(CacheImpl.java:515)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.invokeApplyDelta(FineGrainedAtomicHashMapProxy.java:284)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:217)
	... 21 more
2013-01-31 13:15:58,994 ERROR (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test failed testSizeOnCache(org.infinispan.atomic.FineGrainedAtomicMapAPITest)
org.infinispan.CacheException: Unable to end batch
	at org.infinispan.batch.BatchContainer.endBatch(BatchContainer.java:107)
	at org.infinispan.batch.AutoBatchSupport.endAtomic(AutoBatchSupport.java:49)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:220)
	at org.infinispan.atomic.FineGrainedAtomicMapAPITest.testSizeOnCache(FineGrainedAtomicMapAPITest.java:130)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
	at org.testng.TestRunner.privateRun(TestRunner.java:749)
	at org.testng.TestRunner.run(TestRunner.java:600)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
	at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
	at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
	at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
Caused by: javax.transaction.RollbackException: ARJUNA016053: Could not commit transaction.
	at com.arjuna.ats.internal.jta.transaction.arjunacore.TransactionImple.commitAndDisassociate(TransactionImple.java:1177)
	at com.arjuna.ats.internal.jta.transaction.arjunacore.BaseTransaction.commit(BaseTransaction.java:117)
	at org.infinispan.batch.BatchContainer.resolveTransaction(BatchContainer.java:123)
	at org.infinispan.batch.BatchContainer.endBatch(BatchContainer.java:105)
	... 23 more
Caused by: java.lang.Throwable: setRollbackOnly called from:
	at com.arjuna.ats.internal.jta.transaction.arjunacore.TransactionImple.setRollbackOnly(TransactionImple.java:313)
	at org.infinispan.interceptors.TxInterceptor.enlistWriteAndInvokeNext(TxInterceptor.java:292)
	at org.infinispan.interceptors.TxInterceptor.visitApplyDeltaCommand(TxInterceptor.java:230)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.base.CommandInterceptor.handleDefault(CommandInterceptor.java:130)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.ReconfigurableProtocolAwareWrapperInterceptor.handleDefault(ReconfigurableProtocolAwareWrapperInterceptor.java:73)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
	at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
	at org.infinispan.commands.AbstractVisitor.visitApplyDeltaCommand(AbstractVisitor.java:92)
	at org.infinispan.commands.write.ApplyDeltaCommand.acceptVisitor(ApplyDeltaCommand.java:114)
	at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:387)
	at org.infinispan.CacheImpl.applyDelta(CacheImpl.java:515)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.invokeApplyDelta(FineGrainedAtomicHashMapProxy.java:284)
	at org.infinispan.atomic.FineGrainedAtomicHashMapProxy.put(FineGrainedAtomicHashMapProxy.java:217)
	... 21 more
2013-01-31 13:15:58,993 INFO  (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000080: Disconnecting and closing JGroups Channel
2013-01-31 13:15:58,995 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.atomic.FineGrainedAtomicMapAPITest] *** Test method complete; clearing contents on all caches.
2013-01-31 13:15:58,996 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'atomic' on a cache manager at address FineGrainedAtomicMapAPITest-NodeA-36196
2013-01-31 13:15:58,996 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [testSizeOnCache=AtomicHashMap, Hi=Someone, Need=Read Consistency]
2013-01-31 13:15:58,996 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:58,996 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:58,996 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:58,996 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'atomic' on a cache manager at address FineGrainedAtomicMapAPITest-NodeB-28700
2013-01-31 13:15:58,996 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == [testSizeOnCache=AtomicHashMap, Hi=Someone, Need=Read Consistency]
2013-01-31 13:15:58,996 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:15:58,996 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:15:58,996 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:15:58,996 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.CacheImpl] Stopping cache atomic on FineGrainedAtomicMapAPITest-NodeA-36196
2013-01-31 13:15:58,996 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 0 milliseconds.
2013-01-31 13:15:58,996 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:58,997 DEBUG (CacheViewInstaller-1,FineGrainedAtomicMapAPITest-NodeA-36196) [org.infinispan.cacheviews.CacheViewsManagerImpl] Installing new view CacheView{viewId=3, members=[FineGrainedAtomicMapAPITest-NodeB-28700]} for cache atomic
2013-01-31 13:15:58,997 DEBUG (Incoming-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.statetransfer.StateTransferLockImpl] Blocking new write commands because we'll soon start a state transfer
2013-01-31 13:15:58,998 DEBUG (OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.distribution.ch.DefaultConsistentHash] Using 1 virtualNodes to initialize consistent hash wheel 
2013-01-31 13:15:58,998 DEBUG (OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.statetransfer.ReplicatedStateTransferTask] Commencing state transfer 3 on node: FineGrainedAtomicMapAPITest-NodeB-28700. Before start, data container had 0 entries
2013-01-31 13:15:58,998 DEBUG (OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.statetransfer.StateTransferLockImpl] Blocking new write commands for cache view 3
2013-01-31 13:15:58,999 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.CacheImpl] Stopping cache atomic on FineGrainedAtomicMapAPITest-NodeB-28700
2013-01-31 13:15:58,999 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 0 milliseconds.
2013-01-31 13:15:58,999 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:58,999 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.statetransfer.BaseStateTransferTask] Node FineGrainedAtomicMapAPITest-NodeB-28700 cancelled state transfer for view 3 after 1 milliseconds!
2013-01-31 13:15:59,003 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.manager.DefaultCacheManager] Stopping cache manager ISPN on FineGrainedAtomicMapAPITest-NodeA-36196
2013-01-31 13:15:59,004 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.CacheImpl] Stopping cache atomic on FineGrainedAtomicMapAPITest-NodeA-36196
2013-01-31 13:15:59,005 DEBUG (OOB-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.cacheviews.CacheViewsManagerImpl] atomic: Committing cache view CacheView{viewId=3, members=[FineGrainedAtomicMapAPITest-NodeB-28700]}
2013-01-31 13:15:59,005 DEBUG (CacheViewInstaller-1,FineGrainedAtomicMapAPITest-NodeA-36196) [org.infinispan.cacheviews.CacheViewsManagerImpl] atomic: Committing cache view CacheView{viewId=3, members=[FineGrainedAtomicMapAPITest-NodeB-28700]}
2013-01-31 13:15:59,005 DEBUG (CacheViewInstaller-1,FineGrainedAtomicMapAPITest-NodeA-36196) [org.infinispan.cacheviews.CacheViewsManagerImpl] Successfully installed view CacheView{viewId=3, members=[FineGrainedAtomicMapAPITest-NodeB-28700]} for cache atomic
2013-01-31 13:15:59,007 INFO  (testng-FineGrainedAtomicMapAPITest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000080: Disconnecting and closing JGroups Channel
2013-01-31 13:15:59,026 DEBUG (Incoming-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.jgroups.protocols.pbcast.GMS] RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745: installing view [RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745|2] [RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745]
2013-01-31 13:15:59,026 DEBUG (Incoming-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.jgroups.protocols.pbcast.STABLE] resuming message garbage collection
2013-01-31 13:15:59,027 DEBUG (Incoming-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.jgroups.protocols.pbcast.NAKACK2] removed RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358 from xmit_table (not member anymore)
2013-01-31 13:15:59,031 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.jgroups.blocks.TCPConnectionMap] connection table is not running, discarding message to 127.0.0.1:8651
2013-01-31 13:15:59,031 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.TEST_PING] Stop discovery for RepetableReadFineGrainedAtomicMapAPITest-NodeA-25358
2013-01-31 13:15:59,031 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.jgroups.protocols.TCP] closing sockets and stopping threads
2013-01-31 13:15:59,032 INFO  (testng-Command line test) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded simpleTest(org.infinispan.lock.SimpleLockContainerTest).
2013-01-31 13:15:59,032 DEBUG (testng-Command line test) [org.infinispan.replication.AsyncAPINonTxAsyncReplTest] Creating cache managers
2013-01-31 13:15:59,034 DEBUG (testng-Command line test) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:59,041 INFO  (testng-ConcurrentStartupTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testKeyAffinityServiceFails(org.infinispan.affinity.ConcurrentStartupTest)
2013-01-31 13:15:59,044 DEBUG (testng-Command line test) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:59,049 DEBUG (testng-Command line test) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:15:59,055 INFO  (testng-ConcurrentStartupTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testKeyAffinityServiceFails(org.infinispan.affinity.ConcurrentStartupTest).
2013-01-31 13:15:59,055 DEBUG (Incoming-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.jgroups.protocols.pbcast.GMS] FineGrainedAtomicMapAPITest-NodeB-28700: installing view [FineGrainedAtomicMapAPITest-NodeB-28700|2] [FineGrainedAtomicMapAPITest-NodeB-28700]
2013-01-31 13:15:59,055 DEBUG (Incoming-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.jgroups.protocols.pbcast.STABLE] resuming message garbage collection
2013-01-31 13:15:59,056 DEBUG (Incoming-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.jgroups.protocols.pbcast.NAKACK2] removed FineGrainedAtomicMapAPITest-NodeA-36196 from xmit_table (not member anymore)
2013-01-31 13:15:59,057 DEBUG (testng-ConcurrentStartupTest) [org.infinispan.CacheImpl] Stopping cache test on ConcurrentStartupTest-NodeA-26973
2013-01-31 13:15:59,057 DEBUG (testng-ConcurrentStartupTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 30 seconds.
2013-01-31 13:15:59,057 DEBUG (testng-ConcurrentStartupTest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:59,057 DEBUG (testng-ConcurrentStartupTest) [org.infinispan.CacheImpl] Stopping cache test on ConcurrentStartupTest-NodeB-8774
2013-01-31 13:15:59,057 DEBUG (testng-ConcurrentStartupTest) [org.infinispan.transaction.TransactionTable] Wait for on-going transactions to finish for 30 seconds.
2013-01-31 13:15:59,057 DEBUG (testng-ConcurrentStartupTest) [org.infinispan.transaction.TransactionTable] All transactions terminated
2013-01-31 13:15:59,070 DEBUG (pool-85-thread-1) [org.infinispan.affinity.KeyAffinityServiceImpl] Shutting down KeyAffinity service for key set: [ConcurrentStartupTest-NodeA-26973]
2013-01-31 13:15:59,069 DEBUG (CacheViewInstaller-1,ConcurrentStartupTest-NodeA-26973) [org.infinispan.cacheviews.CacheViewsManagerImpl] Installing new view CacheView{viewId=3, members=[ConcurrentStartupTest-NodeB-8774]} for cache test
2013-01-31 13:15:59,073 DEBUG (CacheViewInstaller-1,ConcurrentStartupTest-NodeA-26973) [org.infinispan.configuration.cache.TransactionConfigurationBuilder] Switching to Synchronization based enlistment.
2013-01-31 13:15:59,077 DEBUG (OOB-3,ISPN,ConcurrentStartupTest-NodeB-8774) [org.infinispan.configuration.cache.TransactionConfigurationBuilder] Switching to Synchronization based enlistment.
2013-01-31 13:15:59,078 WARN  (OOB-3,ISPN,ConcurrentStartupTest-NodeB-8774) [org.infinispan.commands.control.CacheViewControlCommand] ISPN000071: Caught exception when handling command CacheViewControlCommand{cache=test, type=PREPARE_VIEW, sender=ConcurrentStartupTest-NodeA-26973, newViewId=3, newMembers=[ConcurrentStartupTest-NodeB-8774], oldViewId=2, oldMembers=[ConcurrentStartupTest-NodeA-26973, ConcurrentStartupTest-NodeB-8774]}
java.lang.IllegalStateException: test: Received cache view prepare request after the local node has already shut down
	at org.infinispan.cacheviews.CacheViewsManagerImpl.handlePrepareView(CacheViewsManagerImpl.java:527)
	at org.infinispan.commands.control.CacheViewControlCommand.perform(CacheViewControlCommand.java:139)
	at org.infinispan.remoting.InboundInvocationHandlerImpl.handle(InboundInvocationHandlerImpl.java:96)
	at org.infinispan.remoting.transport.jgroups.CommandAwareRpcDispatcher.executeCommand(CommandAwareRpcDispatcher.java:232)
	at org.infinispan.remoting.transport.jgroups.CommandAwareRpcDispatcher.handle(CommandAwareRpcDispatcher.java:210)
	at org.jgroups.blocks.RequestCorrelator.handleRequest(RequestCorrelator.java:480)
	at org.jgroups.blocks.RequestCorrelator.receiveMessage(RequestCorrelator.java:390)
	at org.jgroups.blocks.RequestCorrelator.receive(RequestCorrelator.java:248)
	at org.jgroups.blocks.MessageDispatcher$ProtocolAdapter.up(MessageDispatcher.java:600)
	at org.jgroups.JChannel.up(JChannel.java:700)
	at org.jgroups.stack.ProtocolStack.up(ProtocolStack.java:1020)
	at org.jgroups.protocols.FRAG2.up(FRAG2.java:181)
	at org.jgroups.protocols.FC.up(FC.java:479)
	at org.jgroups.protocols.tom.TOA.up(TOA.java:119)
	at org.jgroups.protocols.SEQUENCER.up(SEQUENCER.java:252)
	at org.jgroups.protocols.pbcast.GMS.up(GMS.java:896)
	at org.jgroups.protocols.pbcast.STABLE.up(STABLE.java:244)
	at org.jgroups.protocols.RSVP.up(RSVP.java:164)
	at org.jgroups.protocols.UNICAST2.handleDataReceived(UNICAST2.java:737)
	at org.jgroups.protocols.UNICAST2.up(UNICAST2.java:414)
	at org.jgroups.protocols.pbcast.NAKACK2.up(NAKACK2.java:610)
	at org.jgroups.protocols.Discovery.up(Discovery.java:371)
	at org.jgroups.protocols.TP.passMessageUp(TP.java:1262)
	at org.jgroups.protocols.TP$IncomingPacket.handleMyMessage(TP.java:1824)
	at org.jgroups.protocols.TP$IncomingPacket.run(TP.java:1797)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
2013-01-31 13:15:59,080 DEBUG (testng-ConcurrentStartupTest) [org.infinispan.manager.DefaultCacheManager] Stopping cache manager ISPN on ConcurrentStartupTest-NodeA-26973
2013-01-31 13:15:59,080 DEBUG (testng-ConcurrentStartupTest) [org.infinispan.CacheImpl] Stopping cache test on ConcurrentStartupTest-NodeA-26973
2013-01-31 13:15:59,081 DEBUG (pool-125-thread-1) [org.infinispan.affinity.KeyAffinityServiceImpl] Shutting down KeyAffinity service for key set: [ConcurrentStartupTest-NodeB-8774]
2013-01-31 13:15:59,086 DEBUG (Incoming-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.jgroups.protocols.pbcast.STABLE] [ergonomics] setting max_bytes to 400KB (1 members)
2013-01-31 13:15:59,086 DEBUG (Incoming-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] New view accepted: [RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745|2] [RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745]
2013-01-31 13:15:59,086 INFO  (Incoming-1,ISPN,RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000094: Received new cluster view: [RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745|2] [RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745]
2013-01-31 13:15:59,088 INFO  (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000082: Stopping the RpcDispatcher
2013-01-31 13:15:59,088 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.manager.DefaultCacheManager] Stopping cache manager ISPN on RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745
2013-01-31 13:15:59,089 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.CacheImpl] Stopping cache atomic on RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745
2013-01-31 13:15:59,089 INFO  (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000080: Disconnecting and closing JGroups Channel
2013-01-31 13:15:59,089 ERROR (CacheViewInstaller-1,ConcurrentStartupTest-NodeA-26973) [org.infinispan.cacheviews.CacheViewsManagerImpl] ISPN000172: Failed to prepare view CacheView{viewId=3, members=[ConcurrentStartupTest-NodeB-8774]} for cache  test, rolling back to view CacheView{viewId=2, members=[ConcurrentStartupTest-NodeA-26973, ConcurrentStartupTest-NodeB-8774]}
java.util.concurrent.ExecutionException: org.infinispan.CacheException: java.lang.IllegalStateException: test: Received cache view prepare request after the local node has already shut down
	at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:232)
	at java.util.concurrent.FutureTask.get(FutureTask.java:91)
	at org.infinispan.cacheviews.CacheViewsManagerImpl.clusterPrepareView(CacheViewsManagerImpl.java:332)
	at org.infinispan.cacheviews.CacheViewsManagerImpl.clusterInstallView(CacheViewsManagerImpl.java:247)
	at org.infinispan.cacheviews.CacheViewsManagerImpl$ViewInstallationTask.call(CacheViewsManagerImpl.java:948)
	at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
	at java.util.concurrent.FutureTask.run(FutureTask.java:138)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:680)
Caused by: org.infinispan.CacheException: java.lang.IllegalStateException: test: Received cache view prepare request after the local node has already shut down
	at org.infinispan.util.Util.rewrapAsCacheException(Util.java:539)
	at org.infinispan.remoting.transport.jgroups.CommandAwareRpcDispatcher.invokeRemoteCommand(CommandAwareRpcDispatcher.java:179)
	at org.infinispan.remoting.transport.jgroups.JGroupsTransport.invokeRemotely(JGroupsTransport.java:498)
	at org.infinispan.cacheviews.CacheViewsManagerImpl$2.call(CacheViewsManagerImpl.java:316)
	at org.infinispan.cacheviews.CacheViewsManagerImpl$2.call(CacheViewsManagerImpl.java:313)
	... 5 more
Caused by: java.lang.IllegalStateException: test: Received cache view prepare request after the local node has already shut down
	at org.infinispan.cacheviews.CacheViewsManagerImpl.handlePrepareView(CacheViewsManagerImpl.java:527)
	at org.infinispan.commands.control.CacheViewControlCommand.perform(CacheViewControlCommand.java:139)
	at org.infinispan.remoting.InboundInvocationHandlerImpl.handle(InboundInvocationHandlerImpl.java:96)
	at org.infinispan.remoting.transport.jgroups.CommandAwareRpcDispatcher.executeCommand(CommandAwareRpcDispatcher.java:232)
	at org.infinispan.remoting.transport.jgroups.CommandAwareRpcDispatcher.handle(CommandAwareRpcDispatcher.java:210)
	at org.jgroups.blocks.RequestCorrelator.handleRequest(RequestCorrelator.java:480)
	at org.jgroups.blocks.RequestCorrelator.receiveMessage(RequestCorrelator.java:390)
	at org.jgroups.blocks.RequestCorrelator.receive(RequestCorrelator.java:248)
	at org.jgroups.blocks.MessageDispatcher$ProtocolAdapter.up(MessageDispatcher.java:600)
	at org.jgroups.JChannel.up(JChannel.java:700)
	at org.jgroups.stack.ProtocolStack.up(ProtocolStack.java:1020)
	at org.jgroups.protocols.FRAG2.up(FRAG2.java:181)
	at org.jgroups.protocols.FC.up(FC.java:479)
	at org.jgroups.protocols.tom.TOA.up(TOA.java:119)
	at org.jgroups.protocols.SEQUENCER.up(SEQUENCER.java:252)
	at org.jgroups.protocols.pbcast.GMS.up(GMS.java:896)
	at org.jgroups.protocols.pbcast.STABLE.up(STABLE.java:244)
	at org.jgroups.protocols.RSVP.up(RSVP.java:164)
	at org.jgroups.protocols.UNICAST2.handleDataReceived(UNICAST2.java:737)
	at org.jgroups.protocols.UNICAST2.up(UNICAST2.java:414)
	at org.jgroups.protocols.pbcast.NAKACK2.up(NAKACK2.java:610)
	at org.jgroups.protocols.Discovery.up(Discovery.java:371)
	at org.jgroups.protocols.TP.passMessageUp(TP.java:1262)
	at org.jgroups.protocols.TP$IncomingPacket.handleMyMessage(TP.java:1824)
	at org.jgroups.protocols.TP$IncomingPacket.run(TP.java:1797)
	... 3 more
2013-01-31 13:15:59,095 DEBUG (Incoming-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.jgroups.protocols.pbcast.STABLE] [ergonomics] setting max_bytes to 400KB (1 members)
2013-01-31 13:15:59,098 INFO  (testng-ConcurrentStartupTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000080: Disconnecting and closing JGroups Channel
2013-01-31 13:15:59,098 DEBUG (Incoming-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] New view accepted: [FineGrainedAtomicMapAPITest-NodeB-28700|2] [FineGrainedAtomicMapAPITest-NodeB-28700]
2013-01-31 13:15:59,098 INFO  (Incoming-1,ISPN,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000094: Received new cluster view: [FineGrainedAtomicMapAPITest-NodeB-28700|2] [FineGrainedAtomicMapAPITest-NodeB-28700]
2013-01-31 13:15:59,089 DEBUG (transport-thread-15) [org.infinispan.configuration.cache.TransactionConfigurationBuilder] Switching to Synchronization based enlistment.
2013-01-31 13:15:59,099 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.TEST_PING] Stop discovery for RepetableReadFineGrainedAtomicMapAPITest-NodeB-17745
2013-01-31 13:15:59,099 DEBUG (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.jgroups.protocols.TCP] closing sockets and stopping threads
2013-01-31 13:15:59,103 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.jgroups.blocks.TCPConnectionMap] connection table is not running, discarding message to 127.0.0.1:8601
2013-01-31 13:15:59,103 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.TEST_PING] Stop discovery for FineGrainedAtomicMapAPITest-NodeA-36196
2013-01-31 13:15:59,103 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.jgroups.protocols.TCP] closing sockets and stopping threads
2013-01-31 13:15:59,104 INFO  (testng-RepetableReadFineGrainedAtomicMapAPITest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000082: Stopping the RpcDispatcher
2013-01-31 13:15:59,112 INFO  (testng-FineGrainedAtomicMapAPITest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000082: Stopping the RpcDispatcher
2013-01-31 13:15:59,113 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.manager.DefaultCacheManager] Stopping cache manager ISPN on FineGrainedAtomicMapAPITest-NodeB-28700
2013-01-31 13:15:59,113 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.CacheImpl] Stopping cache atomic on FineGrainedAtomicMapAPITest-NodeB-28700
2013-01-31 13:15:59,135 DEBUG (Incoming-1,ISPN,ConcurrentStartupTest-NodeB-8774) [org.jgroups.protocols.pbcast.GMS] ConcurrentStartupTest-NodeB-8774: installing view [ConcurrentStartupTest-NodeB-8774|2] [ConcurrentStartupTest-NodeB-8774]
2013-01-31 13:15:59,135 DEBUG (Incoming-1,ISPN,ConcurrentStartupTest-NodeB-8774) [org.jgroups.protocols.pbcast.STABLE] resuming message garbage collection
2013-01-31 13:15:59,135 DEBUG (Incoming-1,ISPN,ConcurrentStartupTest-NodeB-8774) [org.jgroups.protocols.pbcast.NAKACK2] removed ConcurrentStartupTest-NodeA-26973 from xmit_table (not member anymore)
2013-01-31 13:15:59,160 DEBUG (Incoming-1,ISPN,ConcurrentStartupTest-NodeB-8774) [org.jgroups.protocols.pbcast.STABLE] [ergonomics] setting max_bytes to 400KB (1 members)
2013-01-31 13:15:59,160 DEBUG (Incoming-1,ISPN,ConcurrentStartupTest-NodeB-8774) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] New view accepted: [ConcurrentStartupTest-NodeB-8774|2] [ConcurrentStartupTest-NodeB-8774]
2013-01-31 13:15:59,160 INFO  (Incoming-1,ISPN,ConcurrentStartupTest-NodeB-8774) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000094: Received new cluster view: [ConcurrentStartupTest-NodeB-8774|2] [ConcurrentStartupTest-NodeB-8774]
2013-01-31 13:15:59,160 DEBUG (testng-ConcurrentStartupTest) [org.jgroups.blocks.TCPConnectionMap] connection table is not running, discarding message to 127.0.0.1:8001
2013-01-31 13:15:59,160 DEBUG (testng-ConcurrentStartupTest) [org.infinispan.test.fwk.TEST_PING] Stop discovery for ConcurrentStartupTest-NodeA-26973
2013-01-31 13:15:59,160 DEBUG (testng-ConcurrentStartupTest) [org.jgroups.protocols.TCP] closing sockets and stopping threads
2013-01-31 13:15:59,165 INFO  (testng-ConcurrentStartupTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000082: Stopping the RpcDispatcher
2013-01-31 13:15:59,165 DEBUG (testng-ConcurrentStartupTest) [org.infinispan.manager.DefaultCacheManager] Stopping cache manager ISPN on ConcurrentStartupTest-NodeB-8774
2013-01-31 13:15:59,165 DEBUG (testng-ConcurrentStartupTest) [org.infinispan.CacheImpl] Stopping cache test on ConcurrentStartupTest-NodeB-8774
2013-01-31 13:15:59,167 INFO  (testng-Jbc2InfinispanTransformerTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testAllFile(org.infinispan.config.parsing.Jbc2InfinispanTransformerTest)
2013-01-31 13:15:59,199 DEBUG (CacheViewTrigger,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.cacheviews.CacheViewsManagerImpl] Node FineGrainedAtomicMapAPITest-NodeB-28700 is the new coordinator, recovering cache views
2013-01-31 13:15:59,199 DEBUG (CacheViewTrigger,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.cacheviews.CacheViewsManagerImpl] atomic: We don't have a pending view, ignoring rollback
2013-01-31 13:15:59,199 DEBUG (CacheViewTrigger,FineGrainedAtomicMapAPITest-NodeB-28700) [org.infinispan.cacheviews.CacheViewsManagerImpl] Recovered partitions after merge for cache atomic: [CacheView{viewId=3, members=[FineGrainedAtomicMapAPITest-NodeB-28700]}]
2013-01-31 13:15:59,199 INFO  (testng-FineGrainedAtomicMapAPITest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000080: Disconnecting and closing JGroups Channel
2013-01-31 13:15:59,200 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.infinispan.test.fwk.TEST_PING] Stop discovery for FineGrainedAtomicMapAPITest-NodeB-28700
2013-01-31 13:15:59,200 DEBUG (testng-FineGrainedAtomicMapAPITest) [org.jgroups.protocols.TCP] closing sockets and stopping threads
2013-01-31 13:15:59,201 INFO  (testng-FineGrainedAtomicMapAPITest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000082: Stopping the RpcDispatcher
2013-01-31 13:15:59,216 INFO  (testng-MinimalConfigurationParsingTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testGlobalAndDefaultSection(org.infinispan.config.parsing.MinimalConfigurationParsingTest)
2013-01-31 13:15:59,261 DEBUG (CacheViewTrigger,ConcurrentStartupTest-NodeB-8774) [org.infinispan.cacheviews.CacheViewsManagerImpl] Node ConcurrentStartupTest-NodeB-8774 is the new coordinator, recovering cache views
2013-01-31 13:15:59,261 DEBUG (CacheViewTrigger,ConcurrentStartupTest-NodeB-8774) [org.infinispan.cacheviews.CacheViewsManagerImpl] test: Rolling back to cache view 2, new view id is 4
2013-01-31 13:15:59,261 DEBUG (CacheViewTrigger,ConcurrentStartupTest-NodeB-8774) [org.infinispan.cacheviews.CacheViewsManagerImpl] Recovered partitions after merge for cache test: [CacheView{viewId=2, members=[ConcurrentStartupTest-NodeB-8774]}]
2013-01-31 13:15:59,261 INFO  (testng-ConcurrentStartupTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000080: Disconnecting and closing JGroups Channel
2013-01-31 13:15:59,264 DEBUG (testng-ConcurrentStartupTest) [org.infinispan.test.fwk.TEST_PING] Stop discovery for ConcurrentStartupTest-NodeB-8774
2013-01-31 13:15:59,264 DEBUG (testng-ConcurrentStartupTest) [org.jgroups.protocols.TCP] closing sockets and stopping threads
2013-01-31 13:15:59,265 INFO  (testng-ConcurrentStartupTest) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000082: Stopping the RpcDispatcher
2013-01-31 13:15:59,267 INFO  (testng-ProgrammaticConfigurationTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testConfiguration(org.infinispan.config.ProgrammaticConfigurationTest)
2013-01-31 13:15:59,280 INFO  (testng-ProgrammaticConfigurationTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testConfiguration(org.infinispan.config.ProgrammaticConfigurationTest).
2013-01-31 13:15:59,280 INFO  (testng-ProgrammaticConfigurationTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testGlobalConfiguration(org.infinispan.config.ProgrammaticConfigurationTest)
2013-01-31 13:15:59,283 INFO  (testng-ProgrammaticConfigurationTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testGlobalConfiguration(org.infinispan.config.ProgrammaticConfigurationTest).
2013-01-31 13:15:59,304 INFO  (testng-SampleConfigFilesCorrectnessTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testConfigWarnings(org.infinispan.config.SampleConfigFilesCorrectnessTest)
2013-01-31 13:15:59,307 DEBUG (testng-SampleConfigFilesCorrectnessTest) [org.infinispan.util.FileLookup] Unable to find file /Users/pruivo/IdeaProjects/infinispan/core/src/main/resources/config-samples/cloudtm-sample.xml in classpath; searching for this file on the filesystem instead.
2013-01-31 13:15:59,348 DEBUG (testng-SampleConfigFilesCorrectnessTest) [org.infinispan.configuration.cache.L1ConfigurationBuilder] L1 is enabled and L1OnRehash was not defined, enabling it
2013-01-31 13:15:59,348 DEBUG (testng-SampleConfigFilesCorrectnessTest) [org.infinispan.configuration.cache.L1ConfigurationBuilder] L1 is enabled and L1OnRehash was not defined, enabling it
2013-01-31 13:15:59,349 DEBUG (testng-SampleConfigFilesCorrectnessTest) [org.infinispan.configuration.cache.L1ConfigurationBuilder] L1 is enabled and L1OnRehash was not defined, enabling it
2013-01-31 13:15:59,349 DEBUG (testng-SampleConfigFilesCorrectnessTest) [org.infinispan.configuration.cache.L1ConfigurationBuilder] L1 is enabled and L1OnRehash was not defined, enabling it
2013-01-31 13:15:59,352 DEBUG (testng-SampleConfigFilesCorrectnessTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:15:59,360 DEBUG (testng-SampleConfigFilesCorrectnessTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:15:59,915 DEBUG (testng-SampleConfigFilesCorrectnessTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager cloudtm-ispn-cluster on null
2013-01-31 13:16:00,586 INFO  (testng-Jbc2InfinispanTransformerTest) [org.infinispan.configuration.parsing.Parser] ISPN000184: The stateRetrieval configuration element has been deprecated, we're assuming you meant stateTransfer. Please see XML schema for more information.
2013-01-31 13:16:00,586 DEBUG (testng-EHCache2InfinispanTransformerTest) [org.infinispan.configuration.cache.L1ConfigurationBuilder] L1 is enabled and L1OnRehash was not defined, enabling it
2013-01-31 13:16:00,586 INFO  (testng-Jbc2InfinispanTransformerTest) [org.infinispan.configuration.parsing.Parser] ISPN000184: The stateRetrieval configuration element has been deprecated, we're assuming you meant stateTransfer. Please see XML schema for more information.
2013-01-31 13:16:00,587 DEBUG (testng-EHCache2InfinispanTransformerTest) [org.infinispan.configuration.cache.L1ConfigurationBuilder] L1 is enabled and L1OnRehash was not defined, enabling it
2013-01-31 13:16:00,587 DEBUG (testng-Jbc2InfinispanTransformerTest) [org.infinispan.configuration.cache.L1ConfigurationBuilder] L1 is enabled and L1OnRehash was not defined, enabling it
2013-01-31 13:16:00,587 DEBUG (testng-EHCache2InfinispanTransformerTest) [org.infinispan.configuration.cache.L1ConfigurationBuilder] L1 is enabled and L1OnRehash was not defined, enabling it
2013-01-31 13:16:00,587 DEBUG (testng-Jbc2InfinispanTransformerTest) [org.infinispan.configuration.cache.L1ConfigurationBuilder] L1 is enabled and L1OnRehash was not defined, enabling it
2013-01-31 13:16:00,587 DEBUG (testng-EHCache2InfinispanTransformerTest) [org.infinispan.configuration.cache.L1ConfigurationBuilder] L1 is enabled and L1OnRehash was not defined, enabling it
2013-01-31 13:16:00,587 DEBUG (testng-EHCache2InfinispanTransformerTest) [org.infinispan.configuration.cache.L1ConfigurationBuilder] L1 is enabled and L1OnRehash was not defined, enabling it
2013-01-31 13:16:00,588 DEBUG (testng-EHCache2InfinispanTransformerTest) [org.infinispan.configuration.cache.L1ConfigurationBuilder] L1 is enabled and L1OnRehash was not defined, enabling it
2013-01-31 13:16:00,588 DEBUG (testng-EHCache2InfinispanTransformerTest) [org.infinispan.configuration.cache.L1ConfigurationBuilder] L1 is enabled and L1OnRehash was not defined, enabling it
2013-01-31 13:16:00,588 DEBUG (testng-Jbc2InfinispanTransformerTest) [org.infinispan.configuration.cache.L1ConfigurationBuilder] L1 is enabled and L1OnRehash was not defined, enabling it
2013-01-31 13:16:00,589 WARN  (testng-Jbc2InfinispanTransformerTest) [org.infinispan.configuration.cache.EvictionConfigurationBuilder] FIFO strategy is deprecated, LRU will be used instead
2013-01-31 13:16:00,589 DEBUG (testng-Jbc2InfinispanTransformerTest) [org.infinispan.configuration.cache.L1ConfigurationBuilder] L1 is enabled and L1OnRehash was not defined, enabling it
2013-01-31 13:16:00,589 DEBUG (testng-EHCache2InfinispanTransformerTest) [org.infinispan.configuration.cache.L1ConfigurationBuilder] L1 is enabled and L1OnRehash was not defined, enabling it
2013-01-31 13:16:00,590 WARN  (testng-Jbc2InfinispanTransformerTest) [org.infinispan.configuration.cache.EvictionConfigurationBuilder] FIFO strategy is deprecated, LRU will be used instead
2013-01-31 13:16:00,595 DEBUG (testng-EHCache2InfinispanTransformerTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:16:00,597 DEBUG (testng-Jbc2InfinispanTransformerTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:16:00,602 DEBUG (testng-Jbc2InfinispanTransformerTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:16:00,603 DEBUG (testng-EHCache2InfinispanTransformerTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:16:00,604 INFO  (testng-MinimalConfigurationParsingTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testGlobalAndDefaultSection(org.infinispan.config.parsing.MinimalConfigurationParsingTest).
2013-01-31 13:16:00,604 DEBUG (testng-EHCache2InfinispanTransformerTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:16:00,605 INFO  (testng-MinimalConfigurationParsingTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testNoDefaultSection(org.infinispan.config.parsing.MinimalConfigurationParsingTest)
2013-01-31 13:16:00,605 DEBUG (testng-Jbc2InfinispanTransformerTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager JBossCache-cluster on null
2013-01-31 13:16:00,607 INFO  (testng-MinimalConfigurationParsingTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testNoDefaultSection(org.infinispan.config.parsing.MinimalConfigurationParsingTest).
2013-01-31 13:16:00,608 INFO  (testng-MinimalConfigurationParsingTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testNoGlobalSection(org.infinispan.config.parsing.MinimalConfigurationParsingTest)
2013-01-31 13:16:00,609 INFO  (testng-MinimalConfigurationParsingTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testNoGlobalSection(org.infinispan.config.parsing.MinimalConfigurationParsingTest).
2013-01-31 13:16:00,609 INFO  (testng-MinimalConfigurationParsingTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testNoSchema(org.infinispan.config.parsing.MinimalConfigurationParsingTest)
2013-01-31 13:16:00,610 INFO  (testng-MinimalConfigurationParsingTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testNoSchema(org.infinispan.config.parsing.MinimalConfigurationParsingTest).
2013-01-31 13:16:00,610 INFO  (testng-MinimalConfigurationParsingTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testNoSections(org.infinispan.config.parsing.MinimalConfigurationParsingTest)
2013-01-31 13:16:00,611 INFO  (testng-MinimalConfigurationParsingTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testNoSections(org.infinispan.config.parsing.MinimalConfigurationParsingTest).
2013-01-31 13:16:00,629 DEBUG (testng-StringPropertyReplacementTest) [org.infinispan.configuration.cache.L1ConfigurationBuilder] L1 is enabled and L1OnRehash was not defined, enabling it
2013-01-31 13:16:00,629 DEBUG (testng-StringPropertyReplacementTest) [org.infinispan.configuration.cache.L1ConfigurationBuilder] L1 is enabled and L1OnRehash was not defined, enabling it
2013-01-31 13:16:00,630 DEBUG (testng-StringPropertyReplacementTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:16:00,643 DEBUG (testng-StringPropertyReplacementTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:16:00,643 DEBUG (testng-StringPropertyReplacementTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:16:01,018 DEBUG (testng-FilteredKeyAffinityServiceTest) [org.infinispan.affinity.FilteredKeyAffinityServiceTest] Cache managers created, ready to start the test
2013-01-31 13:16:01,019 INFO  (testng-FilteredKeyAffinityServiceTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testSingleKey(org.infinispan.affinity.FilteredKeyAffinityServiceTest)
2013-01-31 13:16:01,119 INFO  (testng-FilteredKeyAffinityServiceTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Test succeeded testSingleKey(org.infinispan.affinity.FilteredKeyAffinityServiceTest).
2013-01-31 13:16:01,120 DEBUG (testng-FilteredKeyAffinityServiceTest) [org.infinispan.affinity.FilteredKeyAffinityServiceTest] *** Test method complete; clearing contents on all caches.
2013-01-31 13:16:01,120 DEBUG (testng-FilteredKeyAffinityServiceTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'dist' on a cache manager at address FilteredKeyAffinityServiceTest-NodeA-2324
2013-01-31 13:16:01,120 DEBUG (testng-FilteredKeyAffinityServiceTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == []
2013-01-31 13:16:01,120 DEBUG (testng-FilteredKeyAffinityServiceTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:16:01,120 DEBUG (testng-FilteredKeyAffinityServiceTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:16:01,120 DEBUG (testng-FilteredKeyAffinityServiceTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:16:01,120 DEBUG (testng-FilteredKeyAffinityServiceTest) [org.infinispan.test.TestingUtil] Cleaning data for cache 'dist' on a cache manager at address FilteredKeyAffinityServiceTest-NodeB-39961
2013-01-31 13:16:01,120 DEBUG (testng-FilteredKeyAffinityServiceTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerBefore == []
2013-01-31 13:16:01,120 DEBUG (testng-FilteredKeyAffinityServiceTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): dataContainerAfter == []
2013-01-31 13:16:01,120 DEBUG (testng-FilteredKeyAffinityServiceTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerBefore == 
2013-01-31 13:16:01,120 DEBUG (testng-FilteredKeyAffinityServiceTest) [org.infinispan.test.TestingUtil] removeInMemoryData(): l1GMUContainerAfter == 
2013-01-31 13:16:01,120 INFO  (testng-FilteredKeyAffinityServiceTest) [org.infinispan.test.fwk.UnitTestTestNGListener] Starting test testAddNewServer(org.infinispan.affinity.FilteredKeyAffinityServiceTest)
2013-01-31 13:16:01,122 DEBUG (testng-FilteredKeyAffinityServiceTest) [org.infinispan.util.ModuleProperties] No module lifecycle SPI classes available
2013-01-31 13:16:01,126 DEBUG (testng-FilteredKeyAffinityServiceTest) [org.infinispan.util.ModuleProperties] No module command extensions to load
2013-01-31 13:16:01,127 DEBUG (testng-FilteredKeyAffinityServiceTest) [org.infinispan.manager.DefaultCacheManager] Started cache manager ISPN on null
2013-01-31 13:16:55,711 INFO  (Thread-124) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000080: Disconnecting and closing JGroups Channel
2013-01-31 13:16:55,711 INFO  (Thread-73) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000080: Disconnecting and closing JGroups Channel
2013-01-31 13:16:55,711 INFO  (Thread-98) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000080: Disconnecting and closing JGroups Channel
2013-01-31 13:16:55,711 INFO  (Thread-115) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000080: Disconnecting and closing JGroups Channel
2013-01-31 13:16:55,713 INFO  (Thread-138) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000080: Disconnecting and closing JGroups Channel
2013-01-31 13:16:55,713 INFO  (Thread-156) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000080: Disconnecting and closing JGroups Channel
2013-01-31 13:16:55,714 INFO  (Thread-143) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000080: Disconnecting and closing JGroups Channel
2013-01-31 13:16:55,715 INFO  (Thread-94) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000080: Disconnecting and closing JGroups Channel
2013-01-31 13:16:55,715 INFO  (Thread-162) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000080: Disconnecting and closing JGroups Channel
2013-01-31 13:16:55,716 DEBUG (Thread-98) [org.jgroups.protocols.pbcast.GMS] KeyAffinityServiceTest-NodeB-45659: sending LEAVE request to KeyAffinityServiceTest-NodeA-61608
2013-01-31 13:16:55,716 DEBUG (Thread-115) [org.jgroups.protocols.pbcast.GMS] LocalKeyAffinityServiceTest-NodeB-61244: sending LEAVE request to LocalKeyAffinityServiceTest-NodeA-40360
2013-01-31 13:16:55,717 DEBUG (Thread-124) [org.jgroups.protocols.pbcast.GMS] KeyAffinityServiceShutdownTest-NodeB-14426: sending LEAVE request to KeyAffinityServiceShutdownTest-NodeA-53318
2013-01-31 13:16:55,717 INFO  (Thread-67) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000080: Disconnecting and closing JGroups Channel
2013-01-31 13:16:55,717 INFO  (Thread-152) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000080: Disconnecting and closing JGroups Channel
2013-01-31 13:16:55,717 INFO  (Thread-154) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000080: Disconnecting and closing JGroups Channel
2013-01-31 13:16:55,718 INFO  (Thread-96) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000080: Disconnecting and closing JGroups Channel
2013-01-31 13:16:55,723 DEBUG (Thread-162) [org.jgroups.protocols.pbcast.GMS] FilteredKeyAffinityServiceTest-NodeB-39961: sending LEAVE request to FilteredKeyAffinityServiceTest-NodeA-2324
2013-01-31 13:16:55,725 DEBUG (Thread-152) [org.jgroups.protocols.pbcast.GMS] KeyAffinityServiceShutdownTest-NodeC-63869: sending LEAVE request to KeyAffinityServiceShutdownTest-NodeA-53318
2013-01-31 13:16:55,734 DEBUG (Thread-156) [org.infinispan.test.fwk.TEST_PING] Stop discovery for CacheClusterJoinTest-NodeC-62173
2013-01-31 13:16:55,734 DEBUG (Thread-156) [org.jgroups.protocols.TCP] closing sockets and stopping threads
2013-01-31 13:16:55,735 DEBUG (Thread-94) [org.jgroups.blocks.TCPConnectionMap] connection table is not running, discarding message to 127.0.0.1:8201
2013-01-31 13:16:55,735 DEBUG (Thread-94) [org.infinispan.test.fwk.TEST_PING] Stop discovery for KeyAffinityServiceTest-NodeA-61608
2013-01-31 13:16:55,735 DEBUG (Thread-94) [org.jgroups.protocols.TCP] closing sockets and stopping threads
2013-01-31 13:16:55,736 DEBUG (Thread-138) [org.infinispan.test.fwk.TEST_PING] Stop discovery for ParallelCacheStartTest-NodeA-27114
2013-01-31 13:16:55,736 DEBUG (Thread-138) [org.jgroups.protocols.TCP] closing sockets and stopping threads
2013-01-31 13:16:55,737 DEBUG (Thread-143) [org.infinispan.test.fwk.TEST_PING] Stop discovery for FlagsEnabledTest-NodeC-46553
2013-01-31 13:16:55,737 DEBUG (Thread-143) [org.jgroups.protocols.TCP] closing sockets and stopping threads
2013-01-31 13:16:55,737 INFO  (Thread-143) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000082: Stopping the RpcDispatcher
2013-01-31 13:16:55,738 INFO  (Thread-156) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000082: Stopping the RpcDispatcher
2013-01-31 13:16:55,739 DEBUG (Thread-154) [org.infinispan.test.fwk.TEST_PING] Stop discovery for PutForExternalReadTest-NodeC-39912
2013-01-31 13:16:55,739 DEBUG (Thread-154) [org.jgroups.protocols.TCP] closing sockets and stopping threads
2013-01-31 13:16:55,739 INFO  (Thread-154) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000082: Stopping the RpcDispatcher
2013-01-31 13:16:55,741 INFO  (Thread-94) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000082: Stopping the RpcDispatcher
2013-01-31 13:16:55,742 DEBUG (Thread-124) [org.jgroups.blocks.TCPConnectionMap] connection table is not running, discarding message to 127.0.0.1:8300
2013-01-31 13:16:55,742 DEBUG (Thread-124) [org.infinispan.test.fwk.TEST_PING] Stop discovery for KeyAffinityServiceShutdownTest-NodeB-14426
2013-01-31 13:16:55,742 DEBUG (Thread-124) [org.jgroups.protocols.TCP] closing sockets and stopping threads
2013-01-31 13:16:55,743 INFO  (Thread-138) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000082: Stopping the RpcDispatcher
2013-01-31 13:16:55,744 INFO  (Thread-124) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000082: Stopping the RpcDispatcher
2013-01-31 13:16:55,753 DEBUG (Incoming-1,ISPN,LocalKeyAffinityServiceTest-NodeB-61244) [org.jgroups.protocols.pbcast.GMS] LocalKeyAffinityServiceTest-NodeB-61244: installing view [LocalKeyAffinityServiceTest-NodeB-61244|2] [LocalKeyAffinityServiceTest-NodeB-61244]
2013-01-31 13:16:55,754 DEBUG (Incoming-1,ISPN,LocalKeyAffinityServiceTest-NodeB-61244) [org.jgroups.protocols.pbcast.STABLE] resuming message garbage collection
2013-01-31 13:16:55,754 DEBUG (Incoming-1,ISPN,LocalKeyAffinityServiceTest-NodeB-61244) [org.jgroups.protocols.pbcast.NAKACK2] removed LocalKeyAffinityServiceTest-NodeA-40360 from xmit_table (not member anymore)
2013-01-31 13:16:55,758 DEBUG (Incoming-1,ISPN,LocalKeyAffinityServiceTest-NodeB-61244) [org.jgroups.protocols.pbcast.STABLE] [ergonomics] setting max_bytes to 400KB (1 members)
2013-01-31 13:16:55,758 DEBUG (Incoming-1,ISPN,LocalKeyAffinityServiceTest-NodeB-61244) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] New view accepted: [LocalKeyAffinityServiceTest-NodeB-61244|2] [LocalKeyAffinityServiceTest-NodeB-61244]
2013-01-31 13:16:55,759 INFO  (Incoming-1,ISPN,LocalKeyAffinityServiceTest-NodeB-61244) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000094: Received new cluster view: [LocalKeyAffinityServiceTest-NodeB-61244|2] [LocalKeyAffinityServiceTest-NodeB-61244]
2013-01-31 13:16:55,763 DEBUG (notification-thread-109) [org.infinispan.transaction.TransactionTable] View changed, recalculating minViewId
2013-01-31 13:16:55,763 DEBUG (Thread-73) [org.jgroups.blocks.TCPConnectionMap] connection table is not running, discarding message to 127.0.0.1:8051
2013-01-31 13:16:55,763 DEBUG (Thread-73) [org.infinispan.test.fwk.TEST_PING] Stop discovery for LocalKeyAffinityServiceTest-NodeA-40360
2013-01-31 13:16:55,764 DEBUG (Thread-73) [org.jgroups.protocols.TCP] closing sockets and stopping threads
2013-01-31 13:16:55,765 DEBUG (Incoming-1,ISPN,KeyAffinityServiceShutdownTest-NodeC-63869) [org.jgroups.protocols.pbcast.GMS] KeyAffinityServiceShutdownTest-NodeC-63869: installing view [KeyAffinityServiceShutdownTest-NodeC-63869|3] [KeyAffinityServiceShutdownTest-NodeC-63869]
2013-01-31 13:16:55,765 DEBUG (Incoming-1,ISPN,KeyAffinityServiceShutdownTest-NodeC-63869) [org.jgroups.protocols.pbcast.STABLE] resuming message garbage collection
2013-01-31 13:16:55,766 INFO  (Thread-73) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000082: Stopping the RpcDispatcher
2013-01-31 13:16:55,766 DEBUG (Incoming-1,ISPN,KeyAffinityServiceShutdownTest-NodeC-63869) [org.jgroups.protocols.pbcast.NAKACK2] removed KeyAffinityServiceShutdownTest-NodeB-14426 from xmit_table (not member anymore)
2013-01-31 13:16:55,766 DEBUG (Incoming-1,ISPN,KeyAffinityServiceShutdownTest-NodeC-63869) [org.jgroups.protocols.pbcast.NAKACK2] removed KeyAffinityServiceShutdownTest-NodeA-53318 from xmit_table (not member anymore)
2013-01-31 13:16:55,770 DEBUG (Incoming-1,ISPN,KeyAffinityServiceShutdownTest-NodeC-63869) [org.jgroups.protocols.pbcast.STABLE] [ergonomics] setting max_bytes to 400KB (1 members)
2013-01-31 13:16:55,770 DEBUG (Incoming-1,ISPN,KeyAffinityServiceShutdownTest-NodeC-63869) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] New view accepted: [KeyAffinityServiceShutdownTest-NodeC-63869|3] [KeyAffinityServiceShutdownTest-NodeC-63869]
2013-01-31 13:16:55,770 INFO  (Incoming-1,ISPN,KeyAffinityServiceShutdownTest-NodeC-63869) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000094: Received new cluster view: [KeyAffinityServiceShutdownTest-NodeC-63869|3] [KeyAffinityServiceShutdownTest-NodeC-63869]
2013-01-31 13:16:55,772 DEBUG (Incoming-1,ISPN,FilteredKeyAffinityServiceTest-NodeB-39961) [org.jgroups.protocols.pbcast.GMS] FilteredKeyAffinityServiceTest-NodeB-39961: installing view [FilteredKeyAffinityServiceTest-NodeB-39961|2] [FilteredKeyAffinityServiceTest-NodeB-39961]
2013-01-31 13:16:55,772 DEBUG (Incoming-1,ISPN,FilteredKeyAffinityServiceTest-NodeB-39961) [org.jgroups.protocols.pbcast.STABLE] resuming message garbage collection
2013-01-31 13:16:55,772 DEBUG (Incoming-1,ISPN,FilteredKeyAffinityServiceTest-NodeB-39961) [org.jgroups.protocols.pbcast.NAKACK2] removed FilteredKeyAffinityServiceTest-NodeA-2324 from xmit_table (not member anymore)
2013-01-31 13:16:55,775 DEBUG (notification-thread-110) [org.infinispan.transaction.TransactionTable] View changed, recalculating minViewId
2013-01-31 13:16:55,776 DEBUG (Incoming-1,ISPN,FilteredKeyAffinityServiceTest-NodeB-39961) [org.jgroups.protocols.pbcast.STABLE] [ergonomics] setting max_bytes to 400KB (1 members)
2013-01-31 13:16:55,777 DEBUG (Incoming-1,ISPN,FilteredKeyAffinityServiceTest-NodeB-39961) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] New view accepted: [FilteredKeyAffinityServiceTest-NodeB-39961|2] [FilteredKeyAffinityServiceTest-NodeB-39961]
2013-01-31 13:16:55,777 INFO  (Incoming-1,ISPN,FilteredKeyAffinityServiceTest-NodeB-39961) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000094: Received new cluster view: [FilteredKeyAffinityServiceTest-NodeB-39961|2] [FilteredKeyAffinityServiceTest-NodeB-39961]
2013-01-31 13:16:55,777 DEBUG (Thread-96) [org.jgroups.blocks.TCPConnectionMap] connection table is not running, discarding message to 127.0.0.1:8251
2013-01-31 13:16:55,777 DEBUG (Thread-67) [org.jgroups.blocks.TCPConnectionMap] connection table is not running, discarding message to 127.0.0.1:8301
2013-01-31 13:16:55,777 DEBUG (Thread-96) [org.infinispan.test.fwk.TEST_PING] Stop discovery for FilteredKeyAffinityServiceTest-NodeA-2324
2013-01-31 13:16:55,777 DEBUG (Thread-96) [org.jgroups.protocols.TCP] closing sockets and stopping threads
2013-01-31 13:16:55,777 DEBUG (Thread-67) [org.jgroups.blocks.TCPConnectionMap] connection table is not running, discarding message to 127.0.0.1:8302
2013-01-31 13:16:55,777 DEBUG (Thread-67) [org.infinispan.test.fwk.TEST_PING] Stop discovery for KeyAffinityServiceShutdownTest-NodeA-53318
2013-01-31 13:16:55,777 DEBUG (Thread-67) [org.jgroups.protocols.TCP] closing sockets and stopping threads
2013-01-31 13:16:55,779 INFO  (Thread-96) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000082: Stopping the RpcDispatcher
2013-01-31 13:16:55,780 INFO  (Thread-67) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000082: Stopping the RpcDispatcher
2013-01-31 13:16:55,781 DEBUG (notification-thread-111) [org.infinispan.transaction.TransactionTable] View changed, recalculating minViewId
2013-01-31 13:16:56,716 DEBUG (Thread-98) [org.jgroups.protocols.pbcast.GMS] KeyAffinityServiceTest-NodeB-45659: sending LEAVE request to KeyAffinityServiceTest-NodeA-61608
2013-01-31 13:16:56,718 DEBUG (Thread-115) [org.jgroups.protocols.pbcast.STABLE] resuming message garbage collection
2013-01-31 13:16:56,719 DEBUG (Thread-115) [org.infinispan.test.fwk.TEST_PING] Stop discovery for LocalKeyAffinityServiceTest-NodeB-61244
2013-01-31 13:16:56,719 DEBUG (Thread-115) [org.jgroups.protocols.TCP] closing sockets and stopping threads
2013-01-31 13:16:56,720 INFO  (Thread-115) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000082: Stopping the RpcDispatcher
2013-01-31 13:16:56,724 DEBUG (Thread-162) [org.jgroups.protocols.pbcast.STABLE] resuming message garbage collection
2013-01-31 13:16:56,725 DEBUG (Thread-162) [org.infinispan.test.fwk.TEST_PING] Stop discovery for FilteredKeyAffinityServiceTest-NodeB-39961
2013-01-31 13:16:56,725 DEBUG (Thread-162) [org.jgroups.protocols.TCP] closing sockets and stopping threads
2013-01-31 13:16:56,730 DEBUG (Thread-152) [org.jgroups.protocols.pbcast.STABLE] resuming message garbage collection
2013-01-31 13:16:56,731 DEBUG (Thread-152) [org.infinispan.test.fwk.TEST_PING] Stop discovery for KeyAffinityServiceShutdownTest-NodeC-63869
2013-01-31 13:16:56,731 DEBUG (Thread-152) [org.jgroups.protocols.TCP] closing sockets and stopping threads
2013-01-31 13:16:56,732 INFO  (Thread-162) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000082: Stopping the RpcDispatcher
2013-01-31 13:16:56,733 INFO  (Thread-152) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000082: Stopping the RpcDispatcher
2013-01-31 13:16:57,722 DEBUG (Thread-98) [org.jgroups.protocols.pbcast.GMS] KeyAffinityServiceTest-NodeB-45659: sending LEAVE request to KeyAffinityServiceTest-NodeA-61608
2013-01-31 13:16:58,725 DEBUG (Thread-98) [org.jgroups.blocks.TCPConnectionMap] connection table is not running, discarding message to 127.0.0.1:8200
2013-01-31 13:16:58,725 DEBUG (Thread-98) [org.infinispan.test.fwk.TEST_PING] Stop discovery for KeyAffinityServiceTest-NodeB-45659
2013-01-31 13:16:58,725 DEBUG (Thread-98) [org.jgroups.protocols.TCP] closing sockets and stopping threads
2013-01-31 13:16:58,728 INFO  (Thread-98) [org.infinispan.remoting.transport.jgroups.JGroupsTransport] ISPN000082: Stopping the RpcDispatcher
