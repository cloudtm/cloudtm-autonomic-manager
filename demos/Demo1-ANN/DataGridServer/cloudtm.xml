<?xml version="1.0" encoding="UTF-8"?>
<infinispan
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="urn:infinispan:config:5.2 http://www.infinispan.org/schemas/infinispan-config-5.2.xsd"
        xmlns="urn:infinispan:config:5.2">
    <global>
        <globalJmxStatistics
                enabled="true"
                jmxDomain="org.infinispan"/>
        <transport
                clusterName="cloudtm-ispn-cluster">
            <properties>
                <property
                        name="configurationFile"
                        value="jgroups/jgroups-cloudtm.xml"/>
            </properties>
        </transport>
    </global>
    <default>
        <locking
                isolationLevel="REPEATABLE_READ"
                concurrencyLevel="32"
                writeSkewCheck="false"
                useLockStriping="false"
                lockAcquisitionTimeout="500"/>
        <transaction
                transactionManagerLookupClass="org.infinispan.transaction.lookup.GenericTransactionManagerLookup"
                useEagerLocking="false"
                transactionMode="TRANSACTIONAL"
                syncRollbackPhase="false"
                cacheStopTimeout="30000"
                useSynchronization="false"
                syncCommitPhase="true"
                lockingMode="OPTIMISTIC"
                eagerLockSingleNode="false"
                use1PcForAutoCommitTransactions="false"
                transactionProtocol="TWO_PHASE_COMMIT"
                autoCommit="true"
                />
        <jmxStatistics
                enabled="true"/>
        <deadlockDetection
                enabled="false"/>
        <clustering mode="d">
			
		
            <sync
                    replTimeout="15000"/>
           <hash numVirtualNodes="100" numOwners="3" />
        </clustering>
       <customInterceptors>
            <interceptor after="org.infinispan.interceptors.InvocationContextInterceptor" class="org.infinispan.distribution.wrappers.DistCustomStatsInterceptor"/>
            <interceptor before="org.infinispan.interceptors.NotificationInterceptor" class="org.infinispan.stats.topK.DistributedStreamLibInterceptor"/>
        </customInterceptors>
        <versioning
                enabled="false"
                versioningScheme="GMU"/>
        <dataPlacement
                enabled="true" objectLookupFactory="org.infinispan.dataplacement.hm.HashMapObjectLookupFactory" maxNumberOfKeysToRequest="1000">
            <properties>
                <property
                        name="keyFeatureManager"
                        value="org.radargun.cachewrappers.TpccKeyFeaturesManager"
                        />
                <property
                        name="location"
                        value="/tmp/ml"
                        />
                <property
                        name="bfFalsePositiveProb"
                        value="0.01"
                        />
                <property
                        name="numberOfHashes"
                        value="10"
                        />
                <property
                        name="timeout"
                        value="10000"
                        />
            </properties>
        </dataPlacement>
        <garbageCollector
                enabled="false"
                transactionThreshold="1000"
                versionGCMaxIdle="60"
                viewGCBackOff="120"
                l1GCInterval="60"/>
        <conditionalExecutorService
                corePoolSize="2"
                maxPoolSize="16"
                keepAliveTime="60"/>
    </default>
</infinispan>
